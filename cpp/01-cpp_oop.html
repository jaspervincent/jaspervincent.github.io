<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>C++: 面向对象</title>
<meta name="description" content="C++" />
<meta name="keywords" content="计算机, 原理, C++" />
<meta name="generator" content="Org Mode" />
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@jasperhsu">
<meta name="google-adsense-account" content="ca-pub-1741779893655624">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1741779893655624" crossorigin="anonymous"></script>
<!-- from -->
<!--
<style>#back-to-top{background:#000;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;bottom:20px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);color:#fff;cursor:pointer;display:block;height:56px;opacity:1;outline:0;position:fixed;right:20px;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-transition:bottom .2s,opacity .2s;-o-transition:bottom .2s,opacity .2s;-moz-transition:bottom .2s,opacity .2s;transition:bottom .2s,opacity .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:56px;z-index:1}#back-to-top svg{display:block;fill:currentColor;height:24px;margin:16px auto 0;width:24px}#back-to-top.hidden{bottom:-56px;opacity:0}</style>
-->
<link rel="stylesheet" href="/static/aandds.com/css/main.css">
<link rel="stylesheet" href="/static/aandds.com/css/drollery.min.css">
<script type="text/javascript" src="/static/aandds.com/js/main.js"></script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">C++: 面向对象</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:edb2ce27-f2b1-4d12-88e9-bc86506b20e2">封装</a>
<ul>
<li><a href="#h:9c2742d6-0281-4e6c-bd93-0a30995808fa">属性和行为</a></li>
<li><a href="#h:3467897b-f6c4-42ba-b919-246c8a3c7b55">访问权限</a></li>
<li><a href="#h:33dba916-2217-4082-8caa-5a7ebc75988b">class和struct</a></li>
<li><a href="#h:0709941c-f78f-4aa7-aa77-4bad8960a905">属性私有化</a></li>
</ul>
</li>
<li><a href="#h:3ffad362-5a98-47a2-b030-2dcdcb9a0c40">对象特性</a>
<ul>
<li><a href="#h:d28229e9-b1b3-4859-989f-b0e2343ff642">构造函数</a></li>
<li><a href="#h:09cba2bf-a214-4de0-b41e-beef2185ca12">析构函数</a></li>
<li><a href="#h:5869a394-e9a7-40bc-b954-528e474c2f81">拷贝构造函数</a></li>
<li><a href="#h:3571ae8b-c841-4d21-b4c9-4de60e14a21e">初始化列表</a></li>
<li><a href="#h:d8023ab7-57fd-4bf7-9528-a733d751ca74">静态成员变量</a></li>
<li><a href="#h:a1a930ad-b9f7-4046-af8e-0ee51e36b5a6">静态成员函数</a></li>
<li><a href="#h:78add377-2eb4-4013-9d1f-4bada737f832">this指针</a></li>
<li><a href="#h:d37cf112-7ae3-40a8-8069-656dd953f376">const修饰成员函数</a></li>
<li><a href="#h:b423d4a7-2fba-4988-a208-f856d46d497e">mutable关键字</a></li>
</ul>
</li>
<li><a href="#h:9402c360-75eb-4084-a9ab-de728f8dff8d">友元</a>
<ul>
<li><a href="#h:a0999886-4792-409c-b869-3eb3a6769152">全局函数作为友元</a></li>
<li><a href="#h:cca50548-0818-4df6-b982-debe9f24ebcd">类作为友元</a></li>
<li><a href="#h:7bd9db0c-7556-4f86-a567-5664adf9f4de">成员函数作为友元</a>
<ul>
<li><a href="#h:ce20e00b-1278-4a91-9a4a-57f3a8073a44">友元定义时类的声明顺序误区</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:a09f3805-939f-43cf-b83a-f00f066d91cb">运算符重载</a>
<ul>
<li><a href="#h:b589d979-5d0e-4f70-ab69-ab9ac9dafffe">运算符重载概念</a></li>
<li><a href="#h:d9144342-6e20-449c-9ab0-a719ef2a1962">加号重载</a></li>
<li><a href="#h:34555880-2034-47ed-ac64-5ae42e40943b">左移重载</a>
<ul>
<li><a href="#h:05fb2959-6b46-4f60-abaf-6aee42c7d98b">左移重载</a></li>
<li><a href="#h:5cdccdd4-4f07-49e9-94db-0aa4a4713fb2">左移重载补充</a></li>
</ul>
</li>
<li><a href="#h:a5ddc010-df62-4d45-be73-e0d89ee900d0">递增重载</a>
<ul>
<li><a href="#h:72d34cd5-8611-4d1d-b3a2-0cc234db5642">递增重载</a></li>
<li><a href="#h:b1be503e-4543-474d-8621-d1e94ad178ad">递增重载补充</a></li>
</ul>
</li>
<li><a href="#h:bcee47b5-9173-48c0-9c80-8cd32d829ce2">赋值重载</a></li>
<li><a href="#h:7b2ba053-6a2b-4723-be70-9eb779bb2dcc">关系运算重载</a></li>
<li><a href="#h:06e93263-49c0-419f-8414-7032e53ef379">函数调用重载</a></li>
</ul>
</li>
<li><a href="#h:29d7ffec-f35f-42d2-9e95-b526496e1f35">继承</a>
<ul>
<li><a href="#h:e7b5e06b-da1d-409a-998c-f303eeb11010">继承的语法</a></li>
<li><a href="#h:e5d10201-4911-463c-9cc8-7ed6d8251988">继承方式</a></li>
<li><a href="#h:31749a37-5061-4506-a868-a0c540eade44">构造和析构顺序</a></li>
<li><a href="#h:f3632dc4-5bd9-485c-9e4e-126c0d2b218c">同名属性访问</a></li>
<li><a href="#h:a511b36a-b816-4504-a760-02a472e49183">同名函数访问</a></li>
<li><a href="#h:55117498-384a-4fe1-9ef4-5f5b45d49dfa">多继承</a></li>
</ul>
</li>
<li><a href="#h:a7729a3c-2390-499b-bf57-69a2b186b111">多态</a>
<ul>
<li><a href="#h:3c9d6da4-0294-4e54-9da5-5818a8a4e0f6">多态的语法</a></li>
<li><a href="#h:54dc0817-74d4-47ba-a795-cd0785b9f5c6">虚函数</a></li>
<li><a href="#h:d4ca958f-d18f-4b2e-be52-d4a29ae81a98">纯虚函数和抽象类</a></li>
<li><a href="#h:c9336289-4c54-4126-b202-9d5d0d9ee923">虚析构和纯虚析构</a></li>
</ul>
</li>
<li><a href="#h:887d81bc-b8e7-46f9-b03b-644fff3221aa">项目-C++游戏开发-扫雷</a>
<ul>
<li><a href="#h:3ae6b392-2e59-4dee-91b6-4c42cc6ae4a8">环境安装</a></li>
<li><a href="#h:743c718a-d830-4b52-8cde-4c6e05c69923">环境配置</a></li>
<li><a href="#h:c3b97936-db27-46e1-9a35-7a3b130feb0a">基础框架</a>
<ul>
<li><a href="#h:8c8075a3-38d4-441a-a22b-9bdfe0943082">命名空间</a></li>
<li><a href="#h:072bfd19-fc89-452f-bc84-38d3eba9f363">窗口创建</a></li>
<li><a href="#h:28e8de36-48a8-41b4-b398-ee488847f5fd">字符集</a></li>
</ul>
</li>
<li><a href="#h:eea15ab3-7a3e-485b-9f5c-a7590ad62de8">关闭事件</a></li>
<li><a href="#h:39a247c5-d4b5-406a-a8b6-26a3ae7718ca">资源加载</a>
<ul>
<li><a href="#h:5ca55f73-3d3c-4a58-af4e-c780840434d9">纹理对象</a></li>
<li><a href="#h:76a43aa6-bc5f-4dbf-8947-ef7c9ee09a52">精灵</a></li>
</ul>
</li>
<li><a href="#h:65080e40-649d-4797-8ae8-708501f47f3b">初始地图</a></li>
<li><a href="#h:e08611fc-d780-4547-ad6c-6a5f223e85c5">常量定义</a></li>
<li><a href="#h:8ade25a4-994e-4c83-9d13-62ae0692feab">地图随机</a></li>
<li><a href="#h:d73d6a04-073c-46ff-beb5-9c2ba27b28be">点击排雷</a></li>
<li><a href="#h:f9bb2324-3683-4d5f-8080-faa742778c85">格子类化</a></li>
<li><a href="#h:446985fb-2da8-403d-984a-41891d2f13c7">地图类化</a></li>
<li><a href="#h:29100394-d771-4e45-aa36-f6cac07b2752">接口优化</a></li>
<li><a href="#h:f9229bd4-bb1d-4095-bc4f-4c12a773e46f">文件拆分</a></li>
<li><a href="#h:153bb32e-01e9-4ef7-8329-edcffa2df0ab">游戏重开</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li>TAGS: <a href="./index.html">C++</a></li>
</ul>
<section id="outline-container-h:edb2ce27-f2b1-4d12-88e9-bc86506b20e2" class="outline-2">
<h2 id="h:edb2ce27-f2b1-4d12-88e9-bc86506b20e2">封装</h2>
<div class="outline-text-2" id="text-h:edb2ce27-f2b1-4d12-88e9-bc86506b20e2">
</div>
<div id="outline-container-h:9c2742d6-0281-4e6c-bd93-0a30995808fa" class="outline-3">
<h3 id="h:9c2742d6-0281-4e6c-bd93-0a30995808fa">属性和行为</h3>
<div class="outline-text-3" id="text-h:9c2742d6-0281-4e6c-bd93-0a30995808fa">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#38754;&#21521;&#23545;&#35937;&#19977;&#22823;&#29305;&#24615;&#65306;&#23553;&#35013;&#12289;&#32487;&#25215;&#12289;&#22810;&#24577;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#23553;&#35013;&#25351;&#23646;&#24615;&#21644;&#34892;&#20026;&#30340;&#23553;&#35013;</span>

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#23553;&#35013;&#30340;&#35821;&#27861;&#65306;</span>

<span style="color: #b22222;">class &#31867;&#21517; {</span>
<span style="color: #b22222;">&#35775;&#38382;&#26435;&#38480;:</span>
<span style="color: #b22222;">    &#23646;&#24615;(&#25104;&#21592;&#21464;&#37327;)</span>
<span style="color: #b22222;">    &#34892;&#20026;(&#25104;&#21592;&#20989;&#25968;)</span>
<span style="color: #b22222;">};</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35775;&#38382;&#26435;&#38480;&#26377;3&#31181;&#65306;public, private, protected</span>
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#23646;&#24615;&#65306;&#21363;&#22768;&#26126;&#21464;&#37327;</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Id</span>;  <span style="color: #b22222;">// </span><span style="color: #b22222;">m&#20195;&#34920;member&#25104;&#21592;</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#34892;&#20026;&#65306;&#21363;&#23450;&#20041;&#20989;&#25968;</span>
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">addHp</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>) {
        m_Hp += hp;
    }

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">subHp</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>) {
        m_Hp -= hp;
    }

};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36890;&#36807;&#31867;&#26469;&#29983;&#25104;&#23545;&#35937;&#30340;&#36807;&#31243;&#65292;&#21483; &#23454;&#20363;&#21270;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35775;&#38382;&#23545;&#35937;&#30340;&#23646;&#24615;</span>
    h.m_Id = 5;
    h.m_Hp = 100;
    h.addHp(100);
    cout &lt;&lt; <span style="color: #8b2252;">"Id &#20026;"</span> &lt;&lt; h.m_Id &lt;&lt; <span style="color: #8b2252;">"&#30340;&#33521;&#38596;&#65292;&#34880;&#37327;&#26159;"</span> &lt;&lt; h.m_Hp &lt;&lt; endl;
    h.subHp(100);
    cout &lt;&lt; <span style="color: #8b2252;">"Id &#20026;"</span> &lt;&lt; h.m_Id &lt;&lt; <span style="color: #8b2252;">"&#30340;&#33521;&#38596;&#65292;&#34880;&#37327;&#26159;"</span> &lt;&lt; h.m_Hp &lt;&lt; endl;

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:3467897b-f6c4-42ba-b919-246c8a3c7b55" class="outline-3">
<h3 id="h:3467897b-f6c4-42ba-b919-246c8a3c7b55">访问权限</h3>
<div class="outline-text-3" id="text-h:3467897b-f6c4-42ba-b919-246c8a3c7b55">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#35775;&#38382;&#26435;&#38480;&#65306;</span>
<span style="color: #b22222;">&#20844;&#20849;&#26435;&#38480;    public      &#31867;&#20869;&#21487;&#20197;&#35775;&#38382;&#65292;&#31867;&#22806;&#20063;&#21487;&#20197;&#35775;&#38382;</span>
<span style="color: #b22222;">&#20445;&#25252;&#26435;&#38480;    protected   &#31867;&#20869;&#21487;&#20197;&#35775;&#38382;&#65292;&#31867;&#22806;&#19981;&#21487;&#20197;&#35775;&#38382;  &#23376;&#31867;&#21487;&#20197;&#35775;&#38382;</span>
<span style="color: #b22222;">&#31169;&#26377;&#26435;&#38480;    private     &#31867;&#20869;&#21487;&#20197;&#35775;&#38382;&#65292;&#31867;&#22806;&#19981;&#21487;&#20197;&#35775;&#38382;  &#23376;&#31867;&#19981;&#21487;&#20197;&#35775;&#38382;</span>

<span style="color: #b22222;">B -&gt; A</span>

<span style="color: #b22222;">A &#29238;&#31867;&#12289;&#22522;&#31867;     &#21517;&#23383;&#12289;&#25151;&#23376;&#12289;&#25903;&#20184;&#23494;&#30721;</span>
<span style="color: #b22222;">B &#23376;&#31867;&#12289;&#27966;&#29983;&#31867;    &#20844;&#26377;&#12289;&#20445;&#25252;&#12289;&#31169;&#26377;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">People</span> {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20844;&#26377;&#26435;&#38480;</span>
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Id</span>;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20445;&#25252;&#26435;&#38480;</span>
<span style="color: #a020f0;">protected</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_HouseId</span>;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#31169;&#26377;&#26435;&#38480;</span>
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_PayPass</span>;

<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">work</span>() {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25152;&#26377;&#25104;&#21592;&#21464;&#37327;&#65292;&#31867;&#20869;&#22343;&#21487;&#35775;&#38382;</span>
        m_Id = 1;
        m_HouseId = 2;
        m_PayPass = 1314;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">work1</span>() {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25152;&#26377;&#25104;&#21592;&#21464;&#37327;&#65292;&#31867;&#20869;&#22343;&#21487;&#35775;&#38382;</span>
        m_Id = 1;
        m_HouseId = 2;
        m_PayPass = 1314;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Son</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">People</span> {
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">func</span>() {
        m_Id = 1;
        m_HouseId = 4;      <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20445;&#25252;&#25104;&#21592;&#65292;&#23376;&#31867;&#21487;&#20197;&#35775;&#38382;</span>
        <span style="color: #b22222;">//</span><span style="color: #b22222;">m_PayPass = 123;  // &#31169;&#26377;&#25104;&#21592;&#65292;&#23376;&#31867;&#26080;&#27861;&#35775;&#38382;</span>
    }
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#23454;&#20363;&#21270;</span>
    <span style="color: #228b22;">People</span> <span style="color: #a0522d;">p</span>;
    p.m_Id = 1;       <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20844;&#26377;&#25104;&#21592;&#65292;&#31867;&#22806;&#21487;&#20197;&#35775;&#38382;</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">p.m_HouseId = 5;  // &#20445;&#25252;&#25104;&#21592;&#65292;&#31867;&#22806;&#19981;&#21487;&#20197;&#35775;&#38382;</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">p.m_PayPass = 10; // &#31169;&#26377;&#25104;&#21592;&#65292;&#31867;&#22806;&#19981;&#21487;&#20197;&#35775;&#38382;</span>
    p.work();
    <span style="color: #b22222;">//</span><span style="color: #b22222;">p.work1();        // &#31169;&#26377;&#25104;&#21592;&#20989;&#25968;&#65292;&#31867;&#22806;&#19981;&#21487;&#20197;&#35775;&#38382;</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:33dba916-2217-4082-8caa-5a7ebc75988b" class="outline-3">
<h3 id="h:33dba916-2217-4082-8caa-5a7ebc75988b">class和struct</h3>
<div class="outline-text-3" id="text-h:33dba916-2217-4082-8caa-5a7ebc75988b">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">struct &#21644; class &#30340;&#21306;&#21035;</span>

<span style="color: #b22222;">struct &#30340;&#26435;&#38480;&#40664;&#35748;&#26159;&#20844;&#20849;&#30340;</span>
<span style="color: #b22222;">class  &#30340;&#26435;&#38480;&#40664;&#35748;&#26159;&#31169;&#26377;&#30340;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">C</span> {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_a</span>;
};

<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">S</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">C++&#20013;&#30340;struct&#26159;&#21487;&#20197;&#23450;&#20041;&#25104;&#21592;&#20989;&#25968;&#30340;&#65292;C&#35821;&#35328;&#20013;&#30340;struct&#19981;&#34892;</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_a</span>;
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">func</span>() {
        m_a = 666;
    }
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">C</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #228b22;">S</span> <span style="color: #a0522d;">s</span>;
    <span style="color: #b22222;">//</span><span style="color: #b22222;">c.m_a;     // &#31169;&#26377;&#30340;</span>
    s.m_a = 4; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20844;&#26377;&#30340;</span>
    s.func();
    cout &lt;&lt; s.m_a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">666</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:0709941c-f78f-4aa7-aa77-4bad8960a905" class="outline-3">
<h3 id="h:0709941c-f78f-4aa7-aa77-4bad8960a905">属性私有化</h3>
<div class="outline-text-3" id="text-h:0709941c-f78f-4aa7-aa77-4bad8960a905">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#25509;&#21475;&#12289;&#26041;&#27861;&#12289;&#20989;&#25968; &#26159;&#21516;&#19968;&#20010;&#27010;&#24565;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#25104;&#21592;&#23646;&#24615;&#31169;&#26377;&#21270;&#22909;&#22788;&#65306;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">1&#12289;&#21487;&#20197;&#25511;&#21046;&#35835;&#20889;&#26435;&#38480;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">2&#12289;&#21487;&#20197;&#26816;&#27979;&#25968;&#25454;&#30340;&#26377;&#25928;&#24615;</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetName</span>(<span style="color: #228b22;">string</span> <span style="color: #a0522d;">name</span>) {
        m_Name = name;
    }
    <span style="color: #228b22;">string</span> <span style="color: #0000ff;">GetName</span>() {
        <span style="color: #a020f0;">return</span> m_Name;
    }
    <span style="color: #228b22;">int</span> <span style="color: #0000ff;">GetSkillCount</span>() {
        <span style="color: #a020f0;">return</span> m_SkillCount;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetSpeed</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">s</span>) {
        <span style="color: #a020f0;">if</span> (<span style="color: #228b22;">s</span> &lt; 100 || s &gt; 500) {
            cout &lt;&lt; <span style="color: #8b2252;">"&#36895;&#24230;&#35774;&#32622;&#19981;&#21512;&#27861;"</span> &lt;&lt; endl;
            <span style="color: #a020f0;">return</span>;
        }
        m_Speed = s;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Name</span>;          <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21487;&#35835;&#65292;&#21487;&#20889;</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_SkillCount</span> = 4;   <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21482;&#35835;</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Speed</span>;            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21482;&#20889;</span>
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    <span style="color: #b22222;">/*</span>
<span style="color: #b22222;">        h.m_Name = "123";</span>
<span style="color: #b22222;">        h.m_SkillCount = 4;</span>
<span style="color: #b22222;">        h.m_Speed = 10;</span>
<span style="color: #b22222;">    */</span>
    h.SetName(<span style="color: #8b2252;">"&#21073;&#22307;"</span>);
    cout &lt;&lt; <span style="color: #8b2252;">"&#33521;&#38596;&#30340;&#21517;&#23383;&#21483;&#65306;"</span> &lt;&lt; h.GetName() &lt;&lt; endl;
    cout &lt;&lt; <span style="color: #8b2252;">"&#33521;&#38596;&#30340;&#25216;&#33021;&#26641;&#26159;&#65306;"</span> &lt;&lt; h.GetSkillCount() &lt;&lt; endl;
    h.SetSpeed(666);

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:3ffad362-5a98-47a2-b030-2dcdcb9a0c40" class="outline-2">
<h2 id="h:3ffad362-5a98-47a2-b030-2dcdcb9a0c40">对象特性</h2>
<div class="outline-text-2" id="text-h:3ffad362-5a98-47a2-b030-2dcdcb9a0c40">
</div>
<div id="outline-container-h:d28229e9-b1b3-4859-989f-b0e2343ff642" class="outline-3">
<h3 id="h:d28229e9-b1b3-4859-989f-b0e2343ff642">构造函数</h3>
<div class="outline-text-3" id="text-h:d28229e9-b1b3-4859-989f-b0e2343ff642">
<p>
对对象进行初始化。
</p>

<p>
如果程序员没有主动实现构造函数，编译器就会提供默认的构造函数，里面没有任何实现，是个空实现。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#26500;&#36896;&#20989;&#25968;&#38656;&#35201;&#27880;&#24847;&#30340;&#28857;&#65306;</span>

<span style="color: #b22222;">1&#12289;&#20989;&#25968;&#21517;&#31216;&#21644;&#31867;&#21517;&#20445;&#25345;&#19968;&#33268;</span>
<span style="color: #b22222;">2&#12289;&#36820;&#22238;&#20540;&#31867;&#22411; &#19981;&#38656;&#35201;&#20889;</span>
<span style="color: #b22222;">3&#12289;&#26500;&#36896;&#20989;&#25968;&#21487;&#20197;&#26377;&#21442;&#25968;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #0000ff;">Hero</span>() {
        m_Name = <span style="color: #8b2252;">""</span>;
        m_SkillCount = 4;
        m_Speed = 100;
        cout &lt;&lt; <span style="color: #8b2252;">"&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#65306;Hero &#26500;&#36896;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;1</span>
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">string</span> <span style="color: #a0522d;">name</span>) {
        m_Name = name;
        m_SkillCount = 4;
        m_Speed = 100;
        cout &lt;&lt; <span style="color: #8b2252;">"&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;1&#65306;Hero &#26500;&#36896;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;2</span>
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">string</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">skillCount</span>) {
        m_Name = name;
        m_SkillCount = skillCount;
        m_Speed = 100;
        cout &lt;&lt; <span style="color: #8b2252;">"&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;2&#65306;Hero &#26500;&#36896;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Name</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_SkillCount</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Speed</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h1</span>;         <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35843;&#29992;&#40664;&#35748;&#30340;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h2</span>(<span style="color: #8b2252;">"&#21073;&#22307;"</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35843;&#29992;&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h3</span>();       <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36825;&#26159;&#20010;&#20989;&#25968;&#22768;&#26126;&#12290;int main(); &#27809;&#26377;&#35843;&#29992;&#20219;&#20309;&#26500;&#36896;&#20989;&#25968;&#12290;&#36825;&#20010;&#24182;&#19981;&#26159;&#23545;&#35937;&#30340;&#23454;&#20363;&#21270;&#36807;&#31243;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h4</span>{};       <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26080;&#21442;&#65292;&#35843;&#29992;&#40664;&#35748;&#30340;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h5</span> = Hero(<span style="color: #8b2252;">"&#21073;&#22307;"</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35843;&#29992;&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;.</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h6</span>(<span style="color: #8b2252;">"&#29492;&#23376;"</span>, 4); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35843;&#29992;&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#65306;Hero &#26500;&#36896;&#23436;&#27605;
&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;1&#65306;Hero &#26500;&#36896;&#23436;&#27605;
&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#65306;Hero &#26500;&#36896;&#23436;&#27605;
&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;1&#65306;Hero &#26500;&#36896;&#23436;&#27605;
&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;2&#65306;Hero &#26500;&#36896;&#23436;&#27605;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:09cba2bf-a214-4de0-b41e-beef2185ca12" class="outline-3">
<h3 id="h:09cba2bf-a214-4de0-b41e-beef2185ca12">析构函数</h3>
<div class="outline-text-3" id="text-h:09cba2bf-a214-4de0-b41e-beef2185ca12">
<p>
给对象进行反初始化。数据清理。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#26512;&#26500;&#20989;&#25968;&#27880;&#24847;&#28857;&#65306;</span>

<span style="color: #b22222;">1&#12289;&#20989;&#25968;&#21517;&#31216;&#21495;&#31867;&#21517;&#19968;&#33268;&#65292;&#24182;&#22312;&#26368;&#21069;&#38754;&#21152;&#19978;&#19968;&#20010; ~ &#27874;&#28010;&#21495;</span>
<span style="color: #b22222;">2&#12289;&#20989;&#25968;&#36820;&#22238;&#20540;&#19981;&#38656;&#35201;&#20889;</span>
<span style="color: #b22222;">3&#12289;&#19981;&#33021;&#26377;&#21442;&#25968;</span>

<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #0000ff;">Hero</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"Hero &#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;&#65281;"</span> &lt;&lt; endl;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26512;&#26500;&#20989;&#25968;&#65292;&#22312;&#26500;&#36896;&#20989;&#25968;&#21069;&#21152;&#20010;~&#27874;&#28010;&#21495;</span>
    ~<span style="color: #0000ff;">Hero</span>() { <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26512;&#26500;&#20989;&#25968;&#20013;&#27809;&#26377;&#21442;&#25968;</span>
        cout &lt;&lt; <span style="color: #8b2252;">"Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;&#65281;"</span> &lt;&lt; endl;
    }
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
}
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    test(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20316;&#29992;&#22495;&#35843;&#29992;&#23436;&#27605;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>;
    cin &gt;&gt; a;
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">Hero &#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;&#65281;
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;&#65281;
Hero &#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;&#65281;
6
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;&#65281;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:5869a394-e9a7-40bc-b954-528e474c2f81" class="outline-3">
<h3 id="h:5869a394-e9a7-40bc-b954-528e474c2f81">拷贝构造函数</h3>
<div class="outline-text-3" id="text-h:5869a394-e9a7-40bc-b954-528e474c2f81">
<p>
拷贝构造函数也是一种构造函数。目的是用一种对象构造出另一个对象。
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#23450;&#20041;</span>
<span style="color: #b22222;">&#31867;&#21517;(const &#31867;&#21517;&amp; &#21464;&#37327;&#21517;){}</span>

<span style="color: #b22222;">&#24341;&#29992;&#30340;&#30446;&#30340;&#26159;&#36991;&#20813;&#22312;&#35843;&#29992;&#26102;&#20256;&#21442;&#20256;&#36827;&#26469;&#26102;&#22810;&#19968;&#23618;&#25335;&#36125;</span>
<span style="color: #b22222;">const&#30446;&#30340;&#26159;&#35753;&#20256;&#36827;&#26469;&#30340;&#21442;&#25968;&#19981;&#20250;&#34987;&#25913;&#21464;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #0000ff;">Hero</span>() {
        m_Hp = 100;
        cout &lt;&lt; <span style="color: #8b2252;">"Hero &#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>) {
        m_Hp = hp;
        cout &lt;&lt; <span style="color: #8b2252;">"Hero &#26377;&#21442;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26512;&#26500;&#20989;&#25968;</span>
    ~<span style="color: #0000ff;">Hero</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;</span>
    <span style="color: #0000ff;">Hero</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Hero</span>&amp; <span style="color: #a0522d;">h</span>) {
        <span style="color: #b22222;">//</span><span style="color: #b22222;">h.m_Hp = 4; // &#25253;&#38169;</span>
        m_Hp = h.m_Hp;
        cout &lt;&lt; <span style="color: #8b2252;">"Hero &#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;"</span> &lt;&lt; endl;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;
};

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#30340;&#35843;&#29992;&#26102;&#26426;</span>

<span style="color: #b22222;">1&#12289;&#29992;&#24050;&#32463;&#21019;&#24314;&#30340;&#23545;&#35937;&#26469;&#21021;&#22987;&#21270;&#23545;&#35937;</span>
<span style="color: #b22222;">2&#12289;&#20989;&#25968;&#30340;&#20256;&#21442;</span>
<span style="color: #b22222;">3&#12289;&#20989;&#25968;&#30340;&#36820;&#22238;&#20540;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">1&#12289;&#29992;&#24050;&#32463;&#21019;&#24314;&#30340;&#23545;&#35937;&#26469;&#21021;&#22987;&#21270;&#23545;&#35937;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">func1</span>() {
    cout &lt;&lt; <span style="color: #8b2252;">"-----------func1----------"</span> &lt;&lt; endl;
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h1</span>(20); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#29983;&#25104;&#23454;&#20363;&#21270;&#23545;&#35937;</span>
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h2</span>(h1); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25335;&#36125;&#23454;&#20363;&#21270;&#23545;&#35937; &#29992;h1&#29983;&#25104;h2&#30340;&#23545;&#35937;</span>
}

<span style="color: #b22222;">// </span><span style="color: #b22222;">2&#12289;&#20989;&#25968;&#30340;&#20256;&#21442;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test1</span>(<span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>) {

}
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test2</span>(<span style="color: #228b22;">Hero</span>* <span style="color: #a0522d;">h</span>) {

}
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">func2</span>() {
    cout &lt;&lt; <span style="color: #8b2252;">"-----------func2----------"</span> &lt;&lt; endl;
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h1</span>;
    <span style="color: #b22222;">//</span><span style="color: #b22222;">test1(h1); // &#20250;&#35843;&#29992;&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;</span>
    test2(&amp;h1);  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#27809;&#29992;&#35843;&#29992;&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#12290;&#22240;&#20026;&#25351;&#38024;&#20195;&#34920;&#22320;&#22336;&#65292;&#24182;&#27809;&#26377;&#29983;&#25104;&#26032;&#30340;&#23545;&#35937;</span>
}

<span style="color: #b22222;">// </span><span style="color: #b22222;">3&#12289;&#20989;&#25968;&#30340;&#36820;&#22238;&#20540;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">IDE&#20851;&#38381;&#20248;&#21270;&#65292;&#21491;&#38190;&#25991;&#20214;&#23646;&#24615;&#65292;&#22312;&#21629;&#20196;&#34892;&#20013;&#20854;&#23427;&#36873;&#39033;&#22635;&#20889; /Zc:nrvo-</span>
<span style="color: #228b22;">Hero</span> <span style="color: #0000ff;">test3</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>(40);
    <span style="color: #a020f0;">return</span> h;
}
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">func3</span>() {
    cout &lt;&lt; <span style="color: #8b2252;">"-----------func3----------"</span> &lt;&lt; endl;
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span> = test3();
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    func1();
    func2();
    func3();
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">-----------func1----------
Hero &#26377;&#21442;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
-----------func2----------
Hero &#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
-----------func3----------
Hero &#26377;&#21442;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
Hero &#26512;&#26500;&#20989;&#25968;&#35843;&#29992;&#23436;&#27605;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:3571ae8b-c841-4d21-b4c9-4de60e14a21e" class="outline-3">
<h3 id="h:3571ae8b-c841-4d21-b4c9-4de60e14a21e">初始化列表</h3>
<div class="outline-text-3" id="text-h:3571ae8b-c841-4d21-b4c9-4de60e14a21e">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#21021;&#22987;&#21270;&#21015;&#34920;&#30340;&#35821;&#27861;</span>

<span style="color: #b22222;">&#26500;&#36896;&#20989;&#25968;(&#20256;&#21442;1, &#20256;&#21442;2): &#25104;&#21592;&#21464;&#37327;1(&#20256;&#21442;1), &#25104;&#21592;&#21464;&#37327;2(&#20256;&#21442;2) {}</span>

<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">/*</span><span style="color: #b22222;">Hero(string name, int hp) {</span>
<span style="color: #b22222;">        m_Name = name;</span>
<span style="color: #b22222;">        m_Hp = hp;</span>
<span style="color: #b22222;">    }</span><span style="color: #b22222;">*/</span>
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">string</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">speed</span>) : m_Name(name), m_Hp(hp), m_Speed(speed) {
    }

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">Print</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#33521;&#38596;&#65306;"</span> &lt;&lt; m_Name &lt;&lt; <span style="color: #8b2252;">"&#30340;&#34880;&#37327;&#26159;"</span> &lt;&lt; m_Hp &lt;&lt; <span style="color: #8b2252;">",&#36895;&#24230;&#26159;"</span> &lt;&lt; m_Speed &lt;&lt; endl;
    }

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Name</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Speed</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>(<span style="color: #8b2252;">"&#21073;&#22307;"</span>, 100, 10);
    h.Print();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d8023ab7-57fd-4bf7-9528-a733d751ca74" class="outline-3">
<h3 id="h:d8023ab7-57fd-4bf7-9528-a733d751ca74">静态成员变量</h3>
<div class="outline-text-3" id="text-h:d8023ab7-57fd-4bf7-9528-a733d751ca74">
<p>
在声明成员变量前，最前面加上 static.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#38745;&#24577;&#25104;&#21592;&#21464;&#37327;&#29305;&#28857;&#65306;</span>

<span style="color: #b22222;">1&#12289;&#25152;&#26377;&#30340;&#23545;&#35937;&#20849;&#20139;&#21516;&#19968;&#20221;&#25968;&#25454;</span>
<span style="color: #b22222;">2&#12289;&#32534;&#35793;&#38454;&#27573;&#20998;&#37197;&#20869;&#23384;</span>
<span style="color: #b22222;">3&#12289;&#38656;&#35201;&#22312;&#31867;&#20013;&#36827;&#34892;&#22768;&#26126;&#65292;&#22312;&#31867;&#22806;&#36827;&#34892;&#21021;&#22987;&#21270;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>() {
        m_Name = <span style="color: #8b2252;">"&#33521;&#38596;"</span>;
        m_Hp = 100;
    }

    ~<span style="color: #0000ff;">Hero</span>() {

    }

    <span style="color: #b22222;">// </span><span style="color: #b22222;">3.1 &#22768;&#26126;</span>
    <span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_HeroCount</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#31867;&#20013;&#22768;&#26126;&#38745;&#24577;&#25104;&#21592;&#21464;&#37327;</span>
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Name</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;
};

<span style="color: #b22222;">// </span><span style="color: #b22222;">3.2 &#21021;&#22987;&#21270;</span>
<span style="color: #228b22;">int</span> <span style="color: #008b8b;">Hero</span>::<span style="color: #a0522d;">m_HeroCount</span> = 100; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#31867;&#22806;&#65292;&#38745;&#24577;&#21464;&#37327;&#38656;&#35201;&#21021;&#22987;&#21270;&#12290;&#20316;&#29992;&#22495;&#22312;Hero&#20013;&#65292;&#31867;&#21517;::&#21464;&#37327;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    cout &lt;&lt; h.m_HeroCount &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">100</span>
    h.m_HeroCount = 101;
    cout &lt;&lt; <span style="color: #008b8b;">Hero</span>::m_HeroCount &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">101</span>

    cout &lt;&lt; &amp;(h.m_HeroCount) &lt;&lt; endl;    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22320;&#22336;&#26159;&#19968;&#26679;&#30340;&#65292;&#35828;&#26126;&#26159;&#21516;&#19968;&#21464;&#37327;</span>
    cout &lt;&lt; &amp;(<span style="color: #008b8b;">Hero</span>::m_HeroCount) &lt;&lt; endl;
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:a1a930ad-b9f7-4046-af8e-0ee51e36b5a6" class="outline-3">
<h3 id="h:a1a930ad-b9f7-4046-af8e-0ee51e36b5a6">静态成员函数</h3>
<div class="outline-text-3" id="text-h:a1a930ad-b9f7-4046-af8e-0ee51e36b5a6">
<p>
也是所有成员对象共享一个函数，并且静态成员函数只能用到静态成员变量。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#38745;&#24577;&#25104;&#21592;&#20989;&#25968;&#29305;&#28857;&#65306;</span>
<span style="color: #b22222;">1&#12289;&#25152;&#26377;&#25104;&#21592;&#20849;&#20139;&#20989;&#25968;</span>
<span style="color: #b22222;">2&#12289;&#38745;&#24577;&#25104;&#21592;&#20989;&#25968;&#21482;&#33021;&#20351;&#29992;&#38745;&#24577;&#25104;&#21592;&#21464;&#37327;&#65292;&#26080;&#27861;&#20351;&#29992;&#26222;&#36890;&#25104;&#21592;&#21464;&#37327;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>() {
        m_Name = <span style="color: #8b2252;">"&#33521;&#38596;"</span>;
        m_Hp = 100;
    }
    ~<span style="color: #0000ff;">Hero</span>() {

    }

    <span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_HeroCount</span>;

    <span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">GetHeroCount</span>() {
        <span style="color: #b22222;">//</span><span style="color: #b22222;">m_Hp += 1; // &#25253;&#38169;&#12290;&#21482;&#33021;&#25805;&#20316;&#38745;&#24577;&#25104;&#21592;&#21464;&#37327;</span>
        <span style="color: #a020f0;">return</span> m_HeroCount;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Name</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;

    <span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">GetHeroCount1</span>() {
        <span style="color: #b22222;">//</span><span style="color: #b22222;">m_Hp += 1; // &#25253;&#38169;&#12290;&#21482;&#33021;&#25805;&#20316;&#38745;&#24577;&#25104;&#21592;&#21464;&#37327;</span>
        <span style="color: #a020f0;">return</span> m_HeroCount;
    }

};

<span style="color: #228b22;">int</span> <span style="color: #008b8b;">Hero</span>::<span style="color: #a0522d;">m_HeroCount</span> = 100;

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    cout &lt;&lt; h.GetHeroCount() &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">100</span>
    cout &lt;&lt; <span style="color: #008b8b;">Hero</span>::GetHeroCount() &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">100</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">cout &lt;&lt; h.GetHeroCount1() &lt;&lt; endl; // &#31867;&#22806;&#35775;&#38382;&#19981;&#21040;&#31169;&#26377;&#26435;&#38480;&#30340;&#38745;&#24577;&#25104;&#21592;&#20989;&#25968;</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:78add377-2eb4-4013-9d1f-4bada737f832" class="outline-3">
<h3 id="h:78add377-2eb4-4013-9d1f-4bada737f832">this指针</h3>
<div class="outline-text-3" id="text-h:78add377-2eb4-4013-9d1f-4bada737f832">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">this&#25351;&#38024;</span>
<span style="color: #b22222;">1&#12289;&#35299;&#20915;&#21629;&#21517;&#20914;&#31361;&#12290;&#24403;&#26500;&#36896;&#20989;&#25968;&#26500;&#36896;&#26102;&#65292;&#20256;&#30340;&#21464;&#37327;&#19982;&#31867;&#20013;&#30340;&#25104;&#21592;&#21464;&#37327;&#19968;&#26679;&#30340;&#24773;&#20917;&#24341;&#29992;this&#25351;&#38024;</span>
<span style="color: #b22222;">2&#12289;*this&#23601;&#21487;&#20197;&#33719;&#21462;&#21040;&#36825;&#20010;&#23545;&#35937;&#26412;&#36523;</span>

<span style="color: #b22222;">this  &amp;h</span>
<span style="color: #b22222;">*this *(&amp;h) == h</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>) { 
        <span style="color: #b22222;">//</span><span style="color: #b22222;">hp = hp; // &#24403;&#21069;&#24418;&#21442;&#21644;&#25104;&#21592;&#21464;&#37327;&#19968;&#33268;&#26102;&#65292;&#25104;&#21592;&#21464;&#37327;&#23601;&#34987;&#38544;&#34255;&#25481;&#20102;&#12290;&#24418;&#21442;&#25226;&#23427;&#35206;&#30422;&#20102;</span>
        <span style="color: #a020f0;">this</span>-&gt;hp = hp;
        cout &lt;&lt; <span style="color: #a020f0;">this</span> &lt;&lt; endl;
        cout &lt;&lt; (*<span style="color: #a020f0;">this</span>).hp &lt;&lt; endl;
    }
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>;
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>(100);
    cout &lt;&lt; h.hp &lt;&lt; endl;
    cout &lt;&lt; &amp;h &lt;&lt; endl;
    cout &lt;&lt; (*(&amp;h)).hp &lt;&lt; endl; <span style="color: #b22222;">// </span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d37cf112-7ae3-40a8-8069-656dd953f376" class="outline-3">
<h3 id="h:d37cf112-7ae3-40a8-8069-656dd953f376">const修饰成员函数</h3>
<div class="outline-text-3" id="text-h:d37cf112-7ae3-40a8-8069-656dd953f376">
<p>
在函数参数列表后面加上关键字const。不能修改成员属性的值。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;vector&gt;</span>  <span style="color: #b22222;">// </span><span style="color: #b22222;">STL &#26159;C++&#20013;&#30340;&#26631;&#20934;&#27169;&#26495;&#24211;. &#22914;&#20854;&#20013;&#30340;&#20989;&#25968; bool empty() cons</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#24120;&#20989;&#25968;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#24120;&#20989;&#25968;&#26080;&#27861;&#20462;&#25913;&#25104;&#21592;&#21464;&#37327;&#30340;&#20540;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>():m_Hp(0) {} <span style="color: #b22222;">// </span><span style="color: #b22222;">m_Hp&#21021;&#22987;&#21270;&#20026;0</span>
    <span style="color: #228b22;">int</span> <span style="color: #0000ff;">getHp</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">m_Hp = m_Hp + 1;</span>
        <span style="color: #a020f0;">return</span> m_Hp;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">setHp</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">hp</span>) {
        m_Hp = hp;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #a020f0;">const</span> <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    <span style="color: #b22222;">//</span><span style="color: #b22222;">h.setHp(100); // &#25253;&#38169;&#12290; &#23545;&#20110;&#24120;&#37327;&#23545;&#35937;&#65292; &#21482;&#33021;&#35843;&#29992;&#24120;&#20989;&#25968;</span>
    h.getHp();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:b423d4a7-2fba-4988-a208-f856d46d497e" class="outline-3">
<h3 id="h:b423d4a7-2fba-4988-a208-f856d46d497e">mutable关键字</h3>
<div class="outline-text-3" id="text-h:b423d4a7-2fba-4988-a208-f856d46d497e">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">mutable &#21644; const &#26159;&#30456;&#23545;&#30340;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#24076;&#26395;&#22312;&#24120;&#20989;&#25968;&#20013;&#20462;&#25913;&#25104;&#21592;&#21464;&#37327;&#30340;&#20540;&#65292;&#23601;&#20250;&#29992;&#21040;mutable</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>() :m_Hp(0), m_getHpCounter(0){}

    <span style="color: #228b22;">int</span> <span style="color: #0000ff;">getHp</span>() <span style="color: #a020f0;">const</span> {
        m_getHpCounter++;
        <span style="color: #a020f0;">return</span> m_Hp;
    }

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">printCounter</span>() <span style="color: #a020f0;">const</span> {
        cout &lt;&lt; <span style="color: #8b2252;">"Counter: "</span> &lt;&lt; m_getHpCounter &lt;&lt; endl;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Hp</span>;
    <span style="color: #a020f0;">mutable</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_getHpCounter</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h</span>;
    h.getHp(), h.getHp(), h.getHp(), h.getHp(), h.getHp(), h.getHp();
    h.printCounter();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:9402c360-75eb-4084-a9ab-de728f8dff8d" class="outline-2">
<h2 id="h:9402c360-75eb-4084-a9ab-de728f8dff8d">友元</h2>
<div class="outline-text-2" id="text-h:9402c360-75eb-4084-a9ab-de728f8dff8d">
<p>
友元的目的是，让一个函数或一个类能够访问另一个类的私有成员。
</p>
</div>
<div id="outline-container-h:a0999886-4792-409c-b869-3eb3a6769152" class="outline-3">
<h3 id="h:a0999886-4792-409c-b869-3eb3a6769152">全局函数作为友元</h3>
<div class="outline-text-3" id="text-h:a0999886-4792-409c-b869-3eb3a6769152">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#21451;&#20803;&#30340;&#30446;&#30340;</span>

<span style="color: #b22222;">&#35753;&#19968;&#20010;&#31867;&#25110;&#32773;&#20989;&#25968;</span>
<span style="color: #b22222;">&#33021;&#22815;&#35775;&#38382;&#21478;&#19968;&#20010;&#31867;&#30340;&#31169;&#26377;&#25104;&#21592;</span>

<span style="color: #b22222;">&#21451;&#20803;&#30340;&#20851;&#38190;&#23383;&#65306;friend</span>

<span style="color: #b22222;">&#19977;&#31181;&#21451;&#20803;</span>
<span style="color: #b22222;">1&#12289;&#20840;&#23616;&#20989;&#25968;&#20316;&#20026;&#21451;&#20803;</span>
<span style="color: #b22222;">2&#12289;&#31867;&#20316;&#20026;&#21451;&#20803;</span>
<span style="color: #b22222;">3&#12289;&#25104;&#21592;&#20989;&#25968;&#20316;&#20026;&#21451;&#20803;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">1&#12289;&#20840;&#23616;&#20989;&#25968;&#20316;&#20026;&#21451;&#20803;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">People</span> {
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">friendVisit</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>);
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">People</span>() {
        m_House = <span style="color: #8b2252;">"&#21035;&#22661;"</span>;
        m_Car = <span style="color: #8b2252;">"&#36305;&#36710;"</span>;
    }
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_House</span>;

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Car</span>;
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">friendVisit</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>) {
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#26469;&#35775;&#38382;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_House &lt;&lt; endl;
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#26469;&#35775;&#38382;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_Car &lt;&lt; endl;
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">People</span> <span style="color: #a0522d;">p</span>;
    friendVisit(&amp;p);

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:cca50548-0818-4df6-b982-debe9f24ebcd" class="outline-3">
<h3 id="h:cca50548-0818-4df6-b982-debe9f24ebcd">类作为友元</h3>
<div class="outline-text-3" id="text-h:cca50548-0818-4df6-b982-debe9f24ebcd">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#31867;&#20316;&#20026;&#21451;&#20803;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#35753;&#19968;&#20010;&#31867;&#21435;&#35775;&#38382;&#21478;&#19968;&#20010;&#31867;&#30340;&#31169;&#26377;&#25104;&#21592;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">People</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22768;&#26126;&#12290;&#26041;&#20415;PeopleFriend&#25552;&#21069;&#35843;&#29992;</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">PeopleFriend</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">PeopleFriend</span>() {

    }

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">visit</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20989;&#25968;&#22768;&#26126;</span>
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">People</span> {
    <span style="color: #a020f0;">friend</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">PeopleFriend</span>;
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">People</span>() {
        m_House = <span style="color: #8b2252;">"&#21035;&#22661;"</span>;
        m_Car = <span style="color: #8b2252;">"&#36305;&#36710;"</span>;
    }
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_House</span>;
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Car</span>;
};

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#20989;&#25968;&#23450;&#20041;&#65292;&#25351;&#23450;&#20316;&#29992;&#22495;PeopleFriend</span>
<span style="color: #228b22;">void</span> <span style="color: #008b8b;">PeopleFriend</span>::<span style="color: #0000ff;">visit</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>) {
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#26469;&#35775;&#38382;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_House &lt;&lt; endl;
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#26469;&#35775;&#38382;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_Car &lt;&lt; endl;
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">People</span> <span style="color: #a0522d;">p</span>;
    <span style="color: #228b22;">PeopleFriend</span> <span style="color: #a0522d;">pf</span>;
    pf.visit(&amp;p);

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:7bd9db0c-7556-4f86-a567-5664adf9f4de" class="outline-3">
<h3 id="h:7bd9db0c-7556-4f86-a567-5664adf9f4de">成员函数作为友元</h3>
<div class="outline-text-3" id="text-h:7bd9db0c-7556-4f86-a567-5664adf9f4de">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#25104;&#21592;&#20989;&#25968;&#20316;&#20026;&#21451;&#20803;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">PeopleFriend &#30340;&#26576;&#20010;&#20989;&#25968;&#33021;&#35775;&#38382; Peope &#30340;&#31169;&#26377;&#25104;&#21592;&#21464;&#37327;</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">People</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">PeopleFriend</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">PeopleFriend</span>() {}

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">visitAll</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">visitPub</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>);
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">People</span> {
    <span style="color: #b22222;">//</span><span style="color: #b22222;">friend class PeopleFriend;</span>
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">void</span> <span style="color: #008b8b;">PeopleFriend</span>::<span style="color: #0000ff;">visitAll</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>);
<span style="color: #a020f0;">public</span>:  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#34920;&#31034;&#36825;&#26159;&#19968;&#35013;&#39280;&#65292;&#26080;&#35770;&#22914;&#20309;&#37117;&#33021;&#33719;&#21462;&#21040;</span>
    <span style="color: #0000ff;">People</span>() {
        m_House = <span style="color: #8b2252;">"&#21035;&#22661;"</span>;
        m_Car = <span style="color: #8b2252;">"&#36305;&#36710;"</span>;
    }
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_House</span>;
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">m_Car</span>;
};

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">PeopleFriend</span>::<span style="color: #0000ff;">visitAll</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>) {
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#35775;&#38382;&#20102;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_House &lt;&lt; endl;
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#35775;&#38382;&#20102;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_Car &lt;&lt; endl;

}
<span style="color: #228b22;">void</span> <span style="color: #008b8b;">PeopleFriend</span>::<span style="color: #0000ff;">visitPub</span>(<span style="color: #228b22;">People</span>* <span style="color: #a0522d;">p</span>) {
    cout &lt;&lt; <span style="color: #8b2252;">"&#22909;&#26379;&#21451;&#35775;&#38382;&#20102;&#20320;&#30340;"</span> &lt;&lt; p-&gt;m_House &lt;&lt; endl;
    <span style="color: #b22222;">//</span><span style="color: #b22222;">cout &lt;&lt; "&#22909;&#26379;&#21451;&#35775;&#38382;&#20102;&#20320;&#30340;" &lt;&lt; p-&gt;m_Car &lt;&lt; endl; // &#25253;&#38169;&#65292;&#27809;&#25351;&#23450;&#36825;&#20010;&#20989;&#25968;&#20026;&#31867;&#30340;&#21451;&#20803;</span>
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">People</span> <span style="color: #a0522d;">p</span>;
    <span style="color: #228b22;">PeopleFriend</span> <span style="color: #a0522d;">pf</span>;
    pf.visitAll(&amp;p);
    pf.visitPub(&amp;p);

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
<div id="outline-container-h:ce20e00b-1278-4a91-9a4a-57f3a8073a44" class="outline-4">
<h4 id="h:ce20e00b-1278-4a91-9a4a-57f3a8073a44">友元定义时类的声明顺序误区</h4>
<div class="outline-text-4" id="text-h:ce20e00b-1278-4a91-9a4a-57f3a8073a44">
<ul class="org-ul">
<li>PeopleFriend 要放在People之前，否则在People定义友元时，是不知道PeopleFriend有visitAll这个友元函数的。</li>
</ul>
</div>
</div>
</div>
</section>
<section id="outline-container-h:a09f3805-939f-43cf-b83a-f00f066d91cb" class="outline-2">
<h2 id="h:a09f3805-939f-43cf-b83a-f00f066d91cb">运算符重载</h2>
<div class="outline-text-2" id="text-h:a09f3805-939f-43cf-b83a-f00f066d91cb">
</div>
<div id="outline-container-h:b589d979-5d0e-4f70-ab69-ab9ac9dafffe" class="outline-3">
<h3 id="h:b589d979-5d0e-4f70-ab69-ab9ac9dafffe">运算符重载概念</h3>
<div class="outline-text-3" id="text-h:b589d979-5d0e-4f70-ab69-ab9ac9dafffe">
<p>
运算符重载就是对已有的运算符重新定义，并且对不同的数据结构做不同的处理。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string&gt;</span> <span style="color: #b22222;">// </span><span style="color: #b22222;">string &#33258;&#24102;&#21152;&#27861;&#36816;&#31639;&#31526;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">+</span>
<span style="color: #b22222;">4 + 5 = 9</span>

<span style="color: #b22222;">class A {};</span>

<span style="color: #b22222;">A a;</span>
<span style="color: #b22222;">A b;</span>
<span style="color: #b22222;">a + b;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">1&#12289;&#21152;&#27861;&#36816;&#31639;&#31526;</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span> = 520;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span> = 1314;
    cout &lt;&lt; a + b &lt;&lt; endl;

    <span style="color: #b22222;">// </span><span style="color: #b22222;">2&#12289;&#23383;&#31526;&#20018;&#25340;&#25509;</span>
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">c</span> = <span style="color: #8b2252;">"520"</span>;
    <span style="color: #228b22;">string</span> <span style="color: #a0522d;">d</span> = <span style="color: #8b2252;">"1314"</span>;
    cout &lt;&lt; c + d &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36825;&#37324;&#30340;&#21152;&#21495;&#29992;&#21040;&#20102;&#36816;&#31639;&#31526;&#37325;&#36733;&#25216;&#26415;</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">1834
5201314
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d9144342-6e20-449c-9ab0-a719ef2a1962" class="outline-3">
<h3 id="h:d9144342-6e20-449c-9ab0-a719ef2a1962">加号重载</h3>
<div class="outline-text-3" id="text-h:d9144342-6e20-449c-9ab0-a719ef2a1962">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">+</span>
<span style="color: #b22222;">*/</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#22797;&#25968;&#31867;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Complex</span> {
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">+</span>(<span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">b</span>);
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">-</span>(<span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">b</span>);
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Complex</span>() :real(0), image(0) {

    }
    <span style="color: #0000ff;">Complex</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>) {
        <span style="color: #a020f0;">this</span>-&gt;real = real;
        <span style="color: #a020f0;">this</span>-&gt;image = image;
    }

    <span style="color: #b22222;">/* </span><span style="color: #b22222;">&#25104;&#21592;&#20989;&#25968;&#21487;&#20197;&#23454;&#29616;&#36816;&#31639;&#31526;&#37325;&#36733;</span>
<span style="color: #b22222;">    //Complex add(Complex&amp; other) {</span>
<span style="color: #b22222;">    Complex operator+(Complex&amp; other) {</span>
<span style="color: #b22222;">        Complex ret;</span>
<span style="color: #b22222;">        ret.real = this-&gt;real + other.real;</span>
<span style="color: #b22222;">        ret.image = this-&gt;image + other.image;</span>
<span style="color: #b22222;">        return ret;</span>
<span style="color: #b22222;">    }</span>
<span style="color: #b22222;">    */</span>

    <span style="color: #b22222;">// </span><span style="color: #b22222;">a + bi</span>
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">Print</span>() {
        cout &lt;&lt; real &lt;&lt; <span style="color: #8b2252;">"+"</span> &lt;&lt; image &lt;&lt; <span style="color: #8b2252;">'i'</span> &lt;&lt; endl;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>;
};

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#20840;&#23616;&#20989;&#25968;&#21516;&#26679;&#21487;&#20197;&#23454;&#29616;&#36816;&#31639;&#31526;&#37325;&#36733;</span>
<span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">+</span>(<span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">b</span>) {
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">ret</span>;
    ret.real = a.real + b.real;
    ret.image = a.image + b.image;
    <span style="color: #a020f0;">return</span> ret;
}
<span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">-</span>(<span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">b</span>) {
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">ret</span>;
    ret.real = a.real - b.real;
    ret.image = a.image - b.image;
    <span style="color: #a020f0;">return</span> ret;
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>(10, 20);
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">b</span>(5, 8);
    <span style="color: #b22222;">//</span><span style="color: #b22222;">Complex c = a.add(b);</span>
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">c</span> = a + b;
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">d</span> = a - b;
    c.Print(); <span style="color: #b22222;">// </span><span style="color: #b22222;">15+28i</span>
    d.Print(); <span style="color: #b22222;">// </span><span style="color: #b22222;">5+12i</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:34555880-2034-47ed-ac64-5ae42e40943b" class="outline-3">
<h3 id="h:34555880-2034-47ed-ac64-5ae42e40943b">左移重载</h3>
<div class="outline-text-3" id="text-h:34555880-2034-47ed-ac64-5ae42e40943b">
</div>
<div id="outline-container-h:05fb2959-6b46-4f60-abaf-6aee42c7d98b" class="outline-4">
<h4 id="h:05fb2959-6b46-4f60-abaf-6aee42c7d98b">左移重载</h4>
<div class="outline-text-4" id="text-h:05fb2959-6b46-4f60-abaf-6aee42c7d98b">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&lt;&lt;</span>

<span style="color: #b22222;">Complex c;</span>
<span style="color: #b22222;">cout.operator&lt;&lt;(c) // &#35201;&#36827;&#34892;&#36755;&#20986;&#30340;&#35805;&#65292;&#19968;&#30452;&#35201;&#35843;&#29992;cout&#24038;&#31227;c&#65292;&#21363;cout &lt;&lt; c&#12290;</span>
<span style="color: #b22222;">// operator&lt;&lt;&#26159;cout&#30340;&#25104;&#21592;&#20989;&#25968;&#12290;&#20294;&#25105;&#20204;&#24076;&#26395;&#26159;Complex&#30340;&#25104;&#21592;&#20989;&#25968;</span>

<span style="color: #b22222;">// &#25104;&#21592;&#20989;&#25968;&#37325;&#36733;</span>
<span style="color: #b22222;">c.operator&lt;&lt;(cout) // &#20250;&#21464;&#25104; c &lt;&lt; cout&#65292;&#36825;&#19981;&#26159;&#25105;&#20204;&#24819;&#35201;&#30340;&#65292;&#24076;&#26395;&#26159;cout &lt;&lt; c</span>
<span style="color: #b22222;">// &#25152;&#20197;&#35201;&#25226;&#23427;&#20174;&#25104;&#21592;&#20989;&#25968;&#20013;&#25277;&#20986;&#21464;&#25104;&#20840;&#23616;&#20989;&#25968;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#22797;&#25968;&#31867;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Complex</span> {
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">+</span>(<span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">b</span>);
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">cout</span>, <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>);
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Complex</span>() :real(0), image(0) {

    }
    <span style="color: #0000ff;">Complex</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>) {
        <span style="color: #a020f0;">this</span>-&gt;real = real;
        <span style="color: #a020f0;">this</span>-&gt;image = image;
    }

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>;
};

<span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">+</span>(<span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">b</span>) {
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">ret</span>;
    ret.real = a.real + b.real;
    ret.image = a.image + b.image;
    <span style="color: #a020f0;">return</span> ret;
}
<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">void operator&lt;&lt;(ostream&amp; cout, Complex a) {</span>
<span style="color: #b22222;">    cout &lt;&lt; a.real &lt;&lt; '+' &lt;&lt; a.image &lt;&lt; 'i' &lt;&lt; endl;</span>
<span style="color: #b22222;">}</span>
<span style="color: #b22222;">*/</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">cout &#26159; std::ostream std::count</span>
<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">cout</span>, <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>) {
    cout &lt;&lt; a.real &lt;&lt; <span style="color: #8b2252;">'+'</span> &lt;&lt; a.image &lt;&lt; <span style="color: #8b2252;">'i'</span> &lt;&lt; endl;
    <span style="color: #a020f0;">return</span> cout;
}
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>(10, 20);
    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">b</span>(5, 8);

    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">c</span> = a + b;
    cout &lt;&lt; c &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">(cout &lt;&lt; c) &#24471;&#21040;&#30340;&#20540;&#20877;&#24038;&#31227; endl;</span>
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:5cdccdd4-4f07-49e9-94db-0aa4a4713fb2" class="outline-4">
<h4 id="h:5cdccdd4-4f07-49e9-94db-0aa4a4713fb2">左移重载补充</h4>
<div class="outline-text-4" id="text-h:5cdccdd4-4f07-49e9-94db-0aa4a4713fb2">
<p>
左移对象的重载主要是为了实现对象的输出。
</p>

<p>
cout是个ostream类型，如果不加引用就会调用拷贝构造函数
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">cout</span>, <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>) {
    cout &lt;&lt; a.real &lt;&lt; <span style="color: #8b2252;">'+'</span> &lt;&lt; a.image &lt;&lt; <span style="color: #8b2252;">'i'</span> &lt;&lt; endl;
    <span style="color: #a020f0;">return</span> cout;
}
</pre>
</div>

<p>
ostream源码中有个拷贝构造函数
</p>
<div class="org-src-container">
<pre class="src src-cpp">_EXPORT_STD <span style="color: #a020f0;">using</span> <span style="color: #228b22;">ostream</span>       = <span style="color: #228b22;">basic_ostream</span>&lt;<span style="color: #228b22;">char</span>, <span style="color: #228b22;">char_traits</span>&lt;<span style="color: #228b22;">char</span>&gt;&gt;;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">basic_ostream</span> : <span style="color: #a020f0;">virtual</span> <span style="color: #a020f0;">public</span> <span style="color: #228b22;">basic_ios</span>&lt;_Elem, <span style="color: #228b22;">_Traits</span>&gt; { <span style="color: #b22222;">// </span><span style="color: #b22222;">control insertions into a stream buffer</span>
  ...
<span style="color: #a020f0;">public</span>:
  <span style="color: #228b22;">__CLR_OR_THIS_CALL</span> <span style="color: #0000ff;">basic_ostream</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">basic_ostream</span>&amp;)            = <span style="color: #a020f0;">delete</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26080;&#27861;&#35843;&#29992;&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;&#12290;&#26377;delete&#20851;&#38190;&#23383;&#20462;&#39280;&#21518;&#65292;&#20219;&#20309;&#22320;&#26041;&#37117;&#26080;&#27861;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;</span>
  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#30446;&#30340;&#26159;&#20026;&#20102;&#20840;&#23616;&#21482;&#26377;&#19968;&#20010; cout</span>
  basic_ostream&amp; __CLR_OR_THIS_CALL <span style="color: #a020f0;">operator</span>=(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">basic_ostream</span>&amp;) = <span style="color: #a020f0;">delete</span>;
  ...
</pre>
</div>
<p>
ostream加了引用就不会调用拷贝构造函数了。
</p>

<p>
但既然不想被外部调用，为什么不放私有属性里？原因是即不想外部调用也不想内部调用。
</p>

<p>
cout 必须加上引用
</p>
</div>
</div>
</div>
<div id="outline-container-h:a5ddc010-df62-4d45-be73-e0d89ee900d0" class="outline-3">
<h3 id="h:a5ddc010-df62-4d45-be73-e0d89ee900d0">递增重载</h3>
<div class="outline-text-3" id="text-h:a5ddc010-df62-4d45-be73-e0d89ee900d0">
</div>
<div id="outline-container-h:72d34cd5-8611-4d1d-b3a2-0cc234db5642" class="outline-4">
<h4 id="h:72d34cd5-8611-4d1d-b3a2-0cc234db5642">递增重载</h4>
<div class="outline-text-4" id="text-h:72d34cd5-8611-4d1d-b3a2-0cc234db5642">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">++</span>

<span style="color: #b22222;">&#21069;&#32622;++</span>
<span style="color: #b22222;">&#21518;&#32622;++</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Complex</span> {
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">c</span>, <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>);
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Complex</span>():real(0), image(0) {}
    <span style="color: #0000ff;">Complex</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>) {
        <span style="color: #a020f0;">this</span>-&gt;real = real;
        <span style="color: #a020f0;">this</span>-&gt;image = image;
    }

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21069;&#32622;++&#36820;&#22238;&#36825;&#20010;&#23545;&#35937;&#30340;&#24341;&#29992;</span>
    <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">++</span>() {
        <span style="color: #a020f0;">this</span>-&gt;real += 1;
        <span style="color: #a020f0;">return</span> *<span style="color: #a020f0;">this</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#33258;&#24049;</span>
    }

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21518;&#32622;++&#30340;&#39069;&#22806;&#21442;&#25968;&#31867;&#22411;&#24517;&#39035;&#26159;int&#65292;&#36820;&#22238;&#21407;&#20540;</span>
    <span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">++</span>(<span style="color: #228b22;">int</span>) {
        <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">c</span> = *<span style="color: #a020f0;">this</span>;
        <span style="color: #a020f0;">this</span>-&gt;real += 1;
        <span style="color: #a020f0;">return</span> c;
    }

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>;
};

<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">c</span>, <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>) {
    c &lt;&lt; a.real &lt;&lt; <span style="color: #8b2252;">'+'</span> &lt;&lt; a.image &lt;&lt; <span style="color: #8b2252;">'i'</span>;
    <span style="color: #a020f0;">return</span> c;
}
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = 1;
    cout &lt;&lt; ++(++x) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">3</span>
    cout &lt;&lt; x &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">3</span>

    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>(10, 10);
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">10+10i</span>
    ++a;
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">11+10i</span>
    cout &lt;&lt; ++a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">12+10i</span>
    cout &lt;&lt; ++(++a) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>

    cout &lt;&lt; a++ &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">15+10i</span>

    cout &lt;&lt; ((a++)++)++ &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">15+10i</span>

    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span> = 5;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">cout &lt;&lt; ((b++)++)++ &lt;&lt; endl; // &#19981;&#33021;&#36825;&#20040;&#35843;&#29992;</span>
    cout &lt;&lt; b &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">15+10i</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:b1be503e-4543-474d-8621-d1e94ad178ad" class="outline-4">
<h4 id="h:b1be503e-4543-474d-8621-d1e94ad178ad">递增重载补充</h4>
<div class="outline-text-4" id="text-h:b1be503e-4543-474d-8621-d1e94ad178ad">
<p>
非常量引用初始值必须是左值
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">++</span>

<span style="color: #b22222;">&#21069;&#32622;++</span>
<span style="color: #b22222;">&#21518;&#32622;++</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Complex</span> {
    <span style="color: #a020f0;">friend</span> <span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">c</span>, <span style="color: #a020f0;">const</span> <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>);
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Complex</span>():real(0), image(0) {}
    <span style="color: #0000ff;">Complex</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>) {
        <span style="color: #a020f0;">this</span>-&gt;real = real;
        <span style="color: #a020f0;">this</span>-&gt;image = image;
    }

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21069;&#32622;++&#36820;&#22238;&#36825;&#20010;&#23545;&#35937;&#30340;&#24341;&#29992;</span>
    <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">++</span>() {
        <span style="color: #a020f0;">this</span>-&gt;real += 1;
        <span style="color: #a020f0;">return</span> *<span style="color: #a020f0;">this</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#33258;&#24049;</span>
    }

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21518;&#32622;++&#30340;&#39069;&#22806;&#21442;&#25968;&#31867;&#22411;&#24517;&#39035;&#26159;int&#65292;&#36820;&#22238;&#21407;&#20540;</span>
    <span style="color: #228b22;">Complex</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">++</span>(<span style="color: #228b22;">int</span>) {
        <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">c</span> = *<span style="color: #a020f0;">this</span>;
        <span style="color: #a020f0;">this</span>-&gt;real += 1;
        <span style="color: #a020f0;">return</span> c;
    }

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">real</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">image</span>;
};

<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;&lt;</span>(<span style="color: #228b22;">ostream</span>&amp; <span style="color: #a0522d;">c</span>, <span style="color: #a020f0;">const</span> <span style="color: #228b22;">Complex</span>&amp; <span style="color: #a0522d;">a</span>) {
    c &lt;&lt; a.real &lt;&lt; <span style="color: #8b2252;">'+'</span> &lt;&lt; a.image &lt;&lt; <span style="color: #8b2252;">'i'</span>;
    <span style="color: #a020f0;">return</span> c;
}

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">A</span> {

};
<span style="color: #228b22;">A</span> <span style="color: #0000ff;">func1</span>() {  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#27169;&#25311;Complex operator++</span>
    <span style="color: #a020f0;">return</span> A();
}

<span style="color: #b22222;">//</span><span style="color: #b22222;">void func2(A&amp; a) { // &#27169;&#25311; ostream&amp; operator&lt;&lt;(ostream&amp; c, Complex&amp; a)</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">func2</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">A</span>&amp; <span style="color: #a0522d;">a</span>) {  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25913;&#20026;&#24120;&#37327;&#24341;&#29992;</span>
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = 1;
    cout &lt;&lt; ++(++x) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">3</span>
    cout &lt;&lt; x &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">3</span>

    <span style="color: #228b22;">Complex</span> <span style="color: #a0522d;">a</span>(10, 10);
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">10+10i</span>
    ++a;
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">11+10i</span>
    cout &lt;&lt; ++a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">12+10i</span>
    cout &lt;&lt; ++(++a) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>

    cout &lt;&lt; a++ &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">15+10i</span>

    cout &lt;&lt; ((a++)++)++ &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14+10i</span>
    cout &lt;&lt; a &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">15+10i</span>

    <span style="color: #b22222;">//</span><span style="color: #b22222;">func2(func1()); // &#25253;&#38169;&#12290;&#38750;&#24120;&#37327;&#24341;&#29992;&#30340;&#21021;&#22987;&#20540;&#24517;&#39035;&#20026;&#24038;&#20540;</span>

    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span> = 5;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">cout &lt;&lt; ((b++)++)++ &lt;&lt; endl; // &#19981;&#33021;&#36825;&#20040;&#35843;&#29992;</span>
    cout &lt;&lt; b &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">15+10i</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:bcee47b5-9173-48c0-9c80-8cd32d829ce2" class="outline-3">
<h3 id="h:bcee47b5-9173-48c0-9c80-8cd32d829ce2">赋值重载</h3>
<div class="outline-text-3" id="text-h:bcee47b5-9173-48c0-9c80-8cd32d829ce2">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>() :m_Data(<span style="color: #008b8b;">NULL</span>) {}
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">data</span>) {
        m_Data = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>;
        *m_Data = data;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">double free</span>
    ~<span style="color: #0000ff;">Hero</span>() {
        <span style="color: #a020f0;">if</span> (m_Data) {
            <span style="color: #a020f0;">delete</span> m_Data;
            m_Data = <span style="color: #008b8b;">NULL</span>;
        }
    }
    <span style="color: #228b22;">int</span>* <span style="color: #a0522d;">m_Data</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h1</span>(1);
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h2</span>(2);
    cout &lt;&lt; h1.m_Data &lt;&lt; endl;
    cout &lt;&lt; h2.m_Data &lt;&lt; endl;
    h1 = h2; <span style="color: #b22222;">// </span><span style="color: #b22222;">h1&#20013;&#30340;m_Data&#34987;&#35206;&#30422;&#25481;&#20102;&#12290; &#32463;&#20856;&#38382;&#39064;&#65306;&#20869;&#23384;&#27844;&#28431;</span>
    cout &lt;&lt; h1.m_Data &lt;&lt; endl;
    cout &lt;&lt; h2.m_Data &lt;&lt; endl;

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
赋值重载
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Hero</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Hero</span>() :m_Data(<span style="color: #008b8b;">NULL</span>) {}
    <span style="color: #0000ff;">Hero</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">data</span>) {
        m_Data = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>;
        *m_Data = data;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">double free</span>
    ~<span style="color: #0000ff;">Hero</span>() {
        <span style="color: #a020f0;">if</span> (m_Data) {
            <span style="color: #a020f0;">delete</span> m_Data;
            m_Data = <span style="color: #008b8b;">NULL</span>;
        }
    }

    <span style="color: #228b22;">Hero</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">=</span>(<span style="color: #228b22;">Hero</span>&amp; <span style="color: #a0522d;">h</span>) {
        <span style="color: #a020f0;">if</span> (m_Data) {
            <span style="color: #a020f0;">delete</span> m_Data;
            m_Data = <span style="color: #008b8b;">NULL</span>;
        }
        m_Data = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>;
        *m_Data = *h.m_Data;
        <span style="color: #a020f0;">return</span> *<span style="color: #a020f0;">this</span>;
    }
    <span style="color: #228b22;">int</span>* <span style="color: #a0522d;">m_Data</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h1</span>(1);
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h2</span>(2);
    <span style="color: #228b22;">Hero</span> <span style="color: #a0522d;">h3</span>(3);

    cout &lt;&lt; h1.m_Data &lt;&lt; endl;
    cout &lt;&lt; h2.m_Data &lt;&lt; endl;
    h1 = h2;
    cout &lt;&lt; h1.m_Data &lt;&lt; endl;
    cout &lt;&lt; h2.m_Data &lt;&lt; endl;

    h3 = (h2 = h3);
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:7b2ba053-6a2b-4723-be70-9eb779bb2dcc" class="outline-3">
<h3 id="h:7b2ba053-6a2b-4723-be70-9eb779bb2dcc">关系运算重载</h3>
<div class="outline-text-3" id="text-h:7b2ba053-6a2b-4723-be70-9eb779bb2dcc">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Point</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Point</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) :m_x(x), m_y(y) {}

    <span style="color: #228b22;">bool</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">==</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Point</span>&amp; <span style="color: #a0522d;">other</span>) <span style="color: #a020f0;">const</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24120;&#20989;&#25968;</span>
        <span style="color: #a020f0;">return</span> m_x == other.m_x &amp;&amp; m_y == other.m_y;
    }

    <span style="color: #228b22;">bool</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&lt;</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Point</span>&amp; <span style="color: #a0522d;">other</span>) <span style="color: #a020f0;">const</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24120;&#20989;&#25968;</span>
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">d</span> = m_x * m_x + m_y * m_y; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33258;&#24049;&#21040;&#21407;&#28857;&#30340;&#36317;&#31163;</span>
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">otherd</span> = other.m_x * other.m_x + other.m_y * other.m_y;
        <span style="color: #a020f0;">return</span> d &lt; otherd;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">&gt;</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Point</span>&amp; <span style="color: #a0522d;">other</span>) <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">if</span> (*<span style="color: #a020f0;">this</span> == other) {
            <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        }
        <span style="color: #a020f0;">if</span> (*<span style="color: #a020f0;">this</span> &lt; other) {
            <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        }
        <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20854;&#23427;&#20851;&#31995;&#36816;&#31639;&#31526;&#20063;&#26159;&#19968;&#26679;&#30340;&#65292;&#30053;</span>
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_x</span>, <span style="color: #a0522d;">m_y</span>;
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Point</span> <span style="color: #a0522d;">a</span>(1, 6);
    <span style="color: #228b22;">Point</span> <span style="color: #a0522d;">b</span>(2, 5);

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#31867;&#27809;&#26377;&#23450;&#20041;&#21028;&#26029;&#20851;&#31995;&#65292;== &#26159;&#19981;&#30693;&#36947;&#30340;&#65292;&#38656;&#35201;&#29992;&#25805;&#20316;&#31526;&#37325;&#36733;</span>
    <span style="color: #a020f0;">if</span> (a == b) {
        cout &lt;&lt; <span style="color: #8b2252;">"a &#21644; b &#30456;&#31561;"</span> &lt;&lt; endl;
    }
    <span style="color: #a020f0;">if</span> (a &lt; b) {
        cout &lt;&lt; <span style="color: #8b2252;">"a &#27604; b &#26356;&#21152;&#25509;&#36817;&#21407;&#28857;"</span> &lt;&lt; endl;
    }
    <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (a &gt; b) {
        cout &lt;&lt; <span style="color: #8b2252;">"b &#27604; a &#26356;&#21152;&#25509;&#36817;&#21407;&#28857;"</span> &lt;&lt; endl;

    }

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:06e93263-49c0-419f-8414-7032e53ef379" class="outline-3">
<h3 id="h:06e93263-49c0-419f-8414-7032e53ef379">函数调用重载</h3>
<div class="outline-text-3" id="text-h:06e93263-49c0-419f-8414-7032e53ef379">
<p>
类当函数调用，并且可以存储状态信息。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">()</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">add()  &#26500;&#24314;&#19968;&#20010;&#23545;&#35937;&#65292;&#36825;&#20010;&#23545;&#35937;&#21487;&#20197;&#24403;&#20989;&#25968;&#29992;</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">AddFunctor</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">AddFunctor</span>() {
        m_acc = 0;
    }
    <span style="color: #228b22;">int</span> <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">()</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) {
        m_acc++;
        <span style="color: #a020f0;">return</span> a + b + m_acc;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_acc</span>;
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">Add</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) {
    <span style="color: #a020f0;">return</span> a + b;
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">AddFunctor</span> <span style="color: #a0522d;">add</span>;
    cout &lt;&lt; add(5, 6) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">12</span>
    cout &lt;&lt; add(5, 6) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">13</span>
    cout &lt;&lt; add(5, 6) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">14</span>

    cout &lt;&lt; Add(5, 6) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26222;&#36890;&#30340;&#20989;&#25968;&#26159;&#19981;&#23384;&#20648;&#29366;&#24577;&#20449;&#24687;&#30340;</span>
    cout &lt;&lt; Add(5, 6) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">11</span>
    cout &lt;&lt; Add(5, 6) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">11</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:29d7ffec-f35f-42d2-9e95-b526496e1f35" class="outline-2">
<h2 id="h:29d7ffec-f35f-42d2-9e95-b526496e1f35">继承</h2>
<div class="outline-text-2" id="text-h:29d7ffec-f35f-42d2-9e95-b526496e1f35">
</div>
<div id="outline-container-h:e7b5e06b-da1d-409a-998c-f303eeb11010" class="outline-3">
<h3 id="h:e7b5e06b-da1d-409a-998c-f303eeb11010">继承的语法</h3>
<div class="outline-text-3" id="text-h:e7b5e06b-da1d-409a-998c-f303eeb11010">
<p>
普通的类
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">*       &#21160;&#29289;</span>
<span style="color: #b22222;">*      /    \</span>
<span style="color: #b22222;">*    &#29483;      &#29399;</span>
<span style="color: #b22222;">*</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21507;"</span> &lt;&lt; endl;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">sayHi</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21941;~"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Dog</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21507;"</span> &lt;&lt; endl;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">sayHi</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#27754;&#27754;&#27754;~"</span> &lt;&lt; endl;
    }
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #228b22;">Dog</span> <span style="color: #a0522d;">d</span>;

    c.eat();
    d.eat();

    c.sayHi();
    d.sayHi();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
继承
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">*       &#21160;&#29289;</span>
<span style="color: #b22222;">*      /    \</span>
<span style="color: #b22222;">*    &#29483;      &#29399;</span>
<span style="color: #b22222;">*</span>
<span style="color: #b22222;">* &#32487;&#25215;&#30340;&#35821;&#27861;</span>
<span style="color: #b22222;">* class &#23376;&#31867; : &#32487;&#25215;&#26041;&#24335; &#29238;&#31867; {}</span>
<span style="color: #b22222;">* &#23376;&#31867; &#21448;&#21483; &#27966;&#29983;&#31867;</span>
<span style="color: #b22222;">* &#29238;&#31867; &#21448;&#21483; &#22522;&#31867;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#25277;&#35937;&#25104;&#19968;&#20010;&#21160;&#29289;&#31867;&#65292;&#26377;&#20849;&#24615;&#37096;&#20998;&#12290;&#30465;&#25481;&#20887;&#20313;&#20195;&#30721;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21507;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">sayHi</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21941;~"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Dog</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">sayHi</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#27754;&#27754;&#27754;~"</span> &lt;&lt; endl;
    }
};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #228b22;">Dog</span> <span style="color: #a0522d;">d</span>;

    c.eat();
    d.eat();

    c.sayHi();
    d.sayHi();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:e5d10201-4911-463c-9cc8-7ed6d8251988" class="outline-3">
<h3 id="h:e5d10201-4911-463c-9cc8-7ed6d8251988">继承方式</h3>
<div class="outline-text-3" id="text-h:e5d10201-4911-463c-9cc8-7ed6d8251988">
<p>
访问权限
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">子类继承方式</td>
<td class="org-left">父类访问权限</td>
<td class="org-left">父类</td>
<td class="org-left">父类</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">public</td>
<td class="org-left">protected</td>
<td class="org-left">private</td>
</tr>

<tr>
<td class="org-left">public</td>
<td class="org-left">public</td>
<td class="org-left">protected</td>
<td class="org-left">无法访问</td>
</tr>

<tr>
<td class="org-left">protected</td>
<td class="org-left">protected</td>
<td class="org-left">protected</td>
<td class="org-left">无法访问</td>
</tr>

<tr>
<td class="org-left">private</td>
<td class="org-left">private</td>
<td class="org-left">private</td>
<td class="org-left">无法访问</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">class &#23376;&#31867;&#21517; : &#32487;&#25215;&#26041;&#24335; &#29238;&#31867;&#21517; {};</span>

<span style="color: #b22222;">&#32487;&#25215;&#26041;&#24335;&#65306;</span>
<span style="color: #b22222;">&#20844;&#20849; public</span>
<span style="color: #b22222;">&#20445;&#25252; protected</span>
<span style="color: #b22222;">&#31169;&#26377; private</span>

<span style="color: #b22222;">&#32487;&#25215;&#26435;&#38480;&#26377;3&#31181;&#12289;&#35775;&#38382;&#26435;&#38480;&#26377;3&#31181;</span>
<span style="color: #b22222;">3 * 3 = 9</span>

<span style="color: #b22222;">             |    public     |     protected      |   private</span>
<span style="color: #b22222;">  public     |    public     |     protected      |   &#26080;&#27861;&#35775;&#38382;</span>
<span style="color: #b22222;">  protected  |   protected   |     protected      |   &#26080;&#27861;&#35775;&#38382;</span>
<span style="color: #b22222;">  private    |    private    |      private       |   &#26080;&#27861;&#35775;&#38382;</span>

<span style="color: #b22222;">public:   &#31867;&#20869;&#21487;&#20197;&#35775;&#38382;&#65292;&#31867;&#22806;&#20063;&#21487;&#20197;&#35775;&#38382;</span>
<span style="color: #b22222;">protected&#65306;  &#31867;&#20869;&#21487;&#20197;&#35775;&#38382;&#65292;&#31867;&#22806;&#19981;&#21487;&#35775;&#38382;&#65292;&#19988;&#23376;&#31867;&#21487;&#20197;&#35775;&#38382;</span>
<span style="color: #b22222;">private&#65306;    &#31867;&#20869;&#21487;&#20197;&#35775;&#38382;&#65292;&#31867;&#22806;&#19981;&#21487;&#35775;&#38382;&#65292;&#19988;&#23376;&#31867;&#19981;&#21487;&#35775;&#38382;</span>
<span style="color: #b22222;">*/</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_pub</span>;
<span style="color: #a020f0;">protected</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_pro</span>;
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_pri</span>;
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Cat</span>() {
        m_pub = 1;
        m_pro = 2; 
        <span style="color: #b22222;">//</span><span style="color: #b22222;">m_pri = 3; // &#29238;&#31867;&#31169;&#26377;&#25104;&#21592;&#65292;&#23376;&#31867;&#20844;&#26377;&#32487;&#25215;&#65292;&#26080;&#27861;&#35775;&#38382;</span>
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BossCat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Cat</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">BossCat</span>() {
        m_pro = 2; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#29238;&#31867;Cat&#20013;&#19981;&#26159;&#31169;&#26377;</span>
    }
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">testCat</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    c.m_pub = 1;
    <span style="color: #b22222;">//</span><span style="color: #b22222;">c.m_pro = 2; // &#35201;&#20040;&#26159;&#31169;&#26377;&#65292;&#35201;&#20040;&#26159;&#20445;&#25252;&#25104;&#21592;</span>
}

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Dog</span> : <span style="color: #a020f0;">protected</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Dog</span>() {
        m_pub = 1;
        m_pro = 2;
        <span style="color: #b22222;">//</span><span style="color: #b22222;">m_pri = 3; // &#29238;&#31867;&#31169;&#26377;&#25104;&#21592;&#65292;&#23376;&#31867;&#20445;&#25252;&#32487;&#25215;&#65292;&#26080;&#27861;&#35775;&#38382;</span>
    }
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">testDog</span>() {
    <span style="color: #228b22;">Dog</span> <span style="color: #a0522d;">d</span>;
    <span style="color: #b22222;">//</span><span style="color: #b22222;">d.m_pub = 1;  // &#35201;&#20040;&#26159;&#20445;&#25252;&#65292;&#35201;&#20040;&#26159;&#31169;&#26377;</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">c.m_pro = 2;  // &#35201;&#20040;&#26159;&#20445;&#25252;&#65292;&#35201;&#20040;&#26159;&#31169;&#26377;</span>
}

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">PolicDog</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Dog</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">PolicDog</span>() {
        m_pub = 1; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36825;&#20010;&#21464;&#37327;&#65292;&#22312;&#29238;&#31867;&#20013;Dog&#20013;&#19968;&#23450;&#19981;&#26159;&#31169;&#26377;&#25104;&#21592;</span>
        m_pro = 2; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36825;&#20010;&#21464;&#37327;&#65292;&#22312;&#29238;&#31867;&#20013;Dog&#20013;&#19968;&#23450;&#19981;&#26159;&#31169;&#26377;&#25104;&#21592;</span>
    }
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">testDog</span>() {
    <span style="color: #228b22;">Dog</span> <span style="color: #a0522d;">d</span>;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">d.m_pub = 1;   // &#35201;&#20040;&#26159;&#20445;&#25252;&#65292;&#35201;&#20040;&#26159;&#31169;&#26377;</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">d.m_pro = 2;   // &#35201;&#20040;&#26159;&#20445;&#25252;&#65292;&#35201;&#20040;&#26159;&#31169;&#26377;</span>
}

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Pig</span> : <span style="color: #a020f0;">private</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Pig</span>() {
        m_pub = 1;
        m_pro = 2;
        <span style="color: #b22222;">// </span><span style="color: #b22222;">m_pri = 3;   // &#29238;&#31867;&#31169;&#26377;&#25104;&#21592;&#65292;&#23376;&#31867;&#31169;&#26377;&#32487;&#25215;&#65292;&#26080;&#27861;&#35775;&#38382;</span>
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">WildPig</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Pig</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">WildPig</span>() {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">m_pub = 1;   // &#35813;&#21464;&#37327;&#22312;&#29238;&#31867; Pig &#20013;&#26159;&#31169;&#26377;&#30340;</span>
        <span style="color: #b22222;">// </span><span style="color: #b22222;">m_pro = 2;   // &#35813;&#21464;&#37327;&#22312;&#29238;&#31867; Pig &#20013;&#26159;&#31169;&#26377;&#30340;</span>
    }
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">testPig</span>() {
    <span style="color: #228b22;">Pig</span> <span style="color: #a0522d;">p</span>;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">p.m_pub = 1;     // &#35201;&#20040;&#26159;&#20445;&#25252;&#65292;&#35201;&#20040;&#26159;&#31169;&#26377;</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">p.m_pro = 2;     // &#35201;&#20040;&#26159;&#20445;&#25252;&#65292;&#35201;&#20040;&#26159;&#31169;&#26377;</span>
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:31749a37-5061-4506-a868-a0c540eade44" class="outline-3">
<h3 id="h:31749a37-5061-4506-a868-a0c540eade44">构造和析构顺序</h3>
<div class="outline-text-3" id="text-h:31749a37-5061-4506-a868-a0c540eade44">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#32487;&#25215;&#20013;&#65292;&#26500;&#36896;&#38142;&#37324;&#65292;&#20808;&#20808;&#26500;&#36896;&#30340;&#21518;&#26512;&#26500;</span>

<span style="color: #b22222;">&#32487;&#25215; d -&gt; c -&gt; b -&gt; a</span>

<span style="color: #b22222;">&#26500;&#36896;&#39034;&#24207;&#20026; a b c d &#26512;&#26500;&#39034;&#24207;&#20026; d c b a</span>
<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Animal</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"Animal &#26500;&#36896;"</span> &lt;&lt; endl;
    }
    ~<span style="color: #0000ff;">Animal</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"Animal &#26512;&#26500;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Cat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"Cat &#26500;&#36896;"</span> &lt;&lt; endl;
    }
    ~<span style="color: #0000ff;">Cat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"Cat &#26512;&#26500;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BossCat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Cat</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">BossCat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"BossCat &#26500;&#36896;"</span> &lt;&lt; endl;
    }
    ~<span style="color: #0000ff;">BossCat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"BossCat &#26512;&#26500;"</span> &lt;&lt; endl;
    }
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test</span>() {
    <span style="color: #b22222;">//</span><span style="color: #b22222;">Animal a;</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">Cat c;</span>
    <span style="color: #228b22;">BossCat</span> <span style="color: #a0522d;">bc</span>;
}
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    test();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">Animal &#26500;&#36896;
Cat &#26500;&#36896;
BossCat &#26500;&#36896;
BossCat &#26512;&#26500;
Cat &#26512;&#26500;
Animal &#26512;&#26500;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:f3632dc4-5bd9-485c-9e4e-126c0d2b218c" class="outline-3">
<h3 id="h:f3632dc4-5bd9-485c-9e4e-126c0d2b218c">同名属性访问</h3>
<div class="outline-text-3" id="text-h:f3632dc4-5bd9-485c-9e4e-126c0d2b218c">
<p>
同名属性，父类和子类都有一个相同的变量。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Animal</span>() {
        m_Data = 17981;
    }
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Data</span>;
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Cat</span>() {
        m_Data = 29872;
    }
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Data</span>;
};

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test</span>() {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24403;&#23376;&#31867;&#32487;&#25215;&#29238;&#31867;&#65292;&#24182;&#19988;&#26377;&#21516;&#19968;&#20010;&#21464;&#37327;&#21517;&#26102;&#65292;&#24182;&#19981;&#20250;&#36827;&#34892;&#35206;&#30422;&#65292;&#38656;&#35201;&#29992;&#19968;&#20010;&#20316;&#29992;&#22495;&#36827;&#34892;&#35775;&#38382;&#23601;&#22909;&#20102;&#12290;</span>
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    cout &lt;&lt; c.m_Data &lt;&lt; endl;
    cout &lt;&lt; c.<span style="color: #008b8b;">Animal</span>::m_Data &lt;&lt; endl;

    cout &lt;&lt; &amp;(c.m_Data) &lt;&lt; endl;
    cout &lt;&lt; &amp;(c.<span style="color: #008b8b;">Animal</span>::m_Data) &lt;&lt; endl;
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    test();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:a511b36a-b816-4504-a760-02a472e49183" class="outline-3">
<h3 id="h:a511b36a-b816-4504-a760-02a472e49183">同名函数访问</h3>
<div class="outline-text-3" id="text-h:a511b36a-b816-4504-a760-02a472e49183">
<p>
同名函数，父类和子类有一个名字相同的函数。那么子类会不会覆盖掉父类函数？
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Animal</span>() {

    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21160;&#29289;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Cat</span>() {

    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        <span style="color: #008b8b;">Animal</span>::eat(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#23376;&#31867;&#20013;&#35843;&#29238;&#31867;&#20989;&#25968;</span>
        cout &lt;&lt; <span style="color: #8b2252;">"&#29483;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    c.eat();
    <span style="color: #b22222;">//</span><span style="color: #b22222;">c.Animal::eat(); // &#21487;&#20197;&#35843;&#29238;&#31867;&#20989;&#25968;</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">&#21160;&#29289;&#21507;&#19996;&#35199;
&#29483;&#21507;&#19996;&#35199;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:55117498-384a-4fe1-9ef4-5f5b45d49dfa" class="outline-3">
<h3 id="h:55117498-384a-4fe1-9ef4-5f5b45d49dfa">多继承</h3>
<div class="outline-text-3" id="text-h:55117498-384a-4fe1-9ef4-5f5b45d49dfa">
<p>
多继承，子类有一个类，它可以继承多个父类。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BaseA</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_A</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Base</span>;

    <span style="color: #0000ff;">BaseA</span>():m_A(0), m_Base(520) {}
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BaseB</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_B</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_Base</span>;

    <span style="color: #0000ff;">BaseB</span>() :m_B(0), m_Base(1314) {}
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BaseC</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">m_C</span>;

    <span style="color: #0000ff;">BaseC</span>() :m_C(0) {}
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Son</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">BaseA</span>, <span style="color: #a020f0;">public</span> <span style="color: #228b22;">BaseB</span>, <span style="color: #a020f0;">public</span> <span style="color: #228b22;">BaseC</span> {

};
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Son</span> <span style="color: #a0522d;">s</span>;
    s.m_A = 1;
    s.m_B = 2;
    s.m_C = 3;

    <span style="color: #b22222;">//</span><span style="color: #b22222;">s.m_Base = 8; // &#25253;&#38169; &#19981;&#26126;&#30830;&#65292;&#29238;&#31867;A&#21644;&#29238;&#31867;B&#26377;&#21516;&#21517;&#21464;&#37327;</span>
    s.<span style="color: #008b8b;">BaseA</span>::m_Base = 8;
    s.<span style="color: #008b8b;">BaseB</span>::m_Base = 9;
    cout &lt;&lt; &amp;s.<span style="color: #008b8b;">BaseA</span>::m_Base &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#19981;&#21516;&#30340;&#22320;&#22336;</span>
    cout &lt;&lt; &amp;s.<span style="color: #008b8b;">BaseB</span>::m_Base &lt;&lt; endl;
    cout &lt;&lt; <span style="color: #a020f0;">sizeof</span>(s) &lt;&lt; endl; <span style="color: #b22222;">// </span><span style="color: #b22222;">20 Son&#32487;&#25215;&#20102;5&#20010;int 5*4=20</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:a7729a3c-2390-499b-bf57-69a2b186b111" class="outline-2">
<h2 id="h:a7729a3c-2390-499b-bf57-69a2b186b111">多态</h2>
<div class="outline-text-2" id="text-h:a7729a3c-2390-499b-bf57-69a2b186b111">
<p>
多态分为：静态多态、动态多态
</p>

<p>
静态多态主要是函数重载和运算符重载，之前已了解过。
</p>

<p>
动态多态主要是利用派生类和虚函数来实现运行时多态。
</p>

<p>
所有的东西统一通过代码来理解，概念不用去记它。
</p>
</div>
<div id="outline-container-h:3c9d6da4-0294-4e54-9da5-5818a8a4e0f6" class="outline-3">
<h3 id="h:3c9d6da4-0294-4e54-9da5-5818a8a4e0f6">多态的语法</h3>
<div class="outline-text-3" id="text-h:3c9d6da4-0294-4e54-9da5-5818a8a4e0f6">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#22810;&#24577;&#23454;&#29616;&#65306;&#23376;&#31867;&#37325;&#20889;&#20102;&#29238;&#31867;&#30340;&#34394;&#20989;&#25968;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#34394;&#20989;&#25968; &#20851;&#38190;&#23383;virtual</span>
    <span style="color: #a020f0;">virtual</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21160;&#29289;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#29483;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Pig</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#29482;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#35843;&#29992;&#38142; main -&gt; test -&gt; eat -&gt; Animal::eat</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#20989;&#25968;&#20256;&#21442;&#26159;&#20010;&#21160;&#29289;&#65292;&#20294;&#26159;&#20256;&#20837;&#19981;&#21516;&#30340;&#21160;&#29289;&#20250;&#20135;&#29983;&#19981;&#21516;&#30340;&#34892;&#20026;&#65292;&#36825;&#23601;&#21483;&#22810;&#24577;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>(<span style="color: #228b22;">Animal</span>&amp; <span style="color: #a0522d;">a</span>) {
    a.eat();
}

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #228b22;">Pig</span> <span style="color: #a0522d;">p</span>;
    eat(c);
    eat(p);
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    test();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:54dc0817-74d4-47ba-a795-cd0785b9f5c6" class="outline-3">
<h3 id="h:54dc0817-74d4-47ba-a795-cd0785b9f5c6">虚函数</h3>
<div class="outline-text-3" id="text-h:54dc0817-74d4-47ba-a795-cd0785b9f5c6">
<p>
多态原理：
</p>
<ul class="org-ul">
<li>调用子类对象的虚函数时，会调用到子类自己的函数。</li>
<li>一旦有虚函数时，会生成虚函数指针，它保存了这个类上所有的虚函数的地址。并且在子类继承时会覆盖掉虚函数。</li>
</ul>

<p>
虚函数：
</p>


<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">&#22810;&#24577;&#23454;&#29616;&#65306;&#23376;&#31867;&#37325;&#20889;&#20102;&#29238;&#31867;&#30340;&#34394;&#20989;&#25968;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#34394;&#20989;&#25968; &#20851;&#38190;&#23383;virtual</span>
    <span style="color: #a020f0;">virtual</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#21160;&#29289;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#29483;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Pig</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#29482;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#35843;&#29992;&#38142; main -&gt; test -&gt; eat -&gt; Animal::eat</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#20989;&#25968;&#20256;&#21442;&#26159;&#20010;&#21160;&#29289;&#65292;&#20294;&#26159;&#20256;&#20837;&#19981;&#21516;&#30340;&#21160;&#29289;&#20250;&#20135;&#29983;&#19981;&#21516;&#30340;&#34892;&#20026;&#65292;&#36825;&#23601;&#21483;&#22810;&#24577;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>(<span style="color: #228b22;">Animal</span>&amp; <span style="color: #a0522d;">a</span>) {
    a.eat();
}

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">test</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #228b22;">Pig</span> <span style="color: #a0522d;">p</span>;
    eat(c);
    eat(p);
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    test();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
调试：
</p>
<ul class="org-ul">
<li>eat(c) 处打断点，F5调试，F11进入， F10</li>
<li>监视中 输入a 和 c，观察</li>
</ul>



<figure id="org8239097">
<img src="./images/img_20251022_140000.png" alt="img_20251022_140000.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:d4ca958f-d18f-4b2e-be52-d4a29ae81a98" class="outline-3">
<h3 id="h:d4ca958f-d18f-4b2e-be52-d4a29ae81a98">纯虚函数和抽象类</h3>
<div class="outline-text-3" id="text-h:d4ca958f-d18f-4b2e-be52-d4a29ae81a98">
<p>
有时候在写代码时，父类中的函数有可能没有任何实现，都需要子类实现(重写)，这就是纯虚函数的目的。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Animal</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21482;&#35201;&#26377;&#32431;&#34394;&#20989;&#25968;&#30340;&#31867;&#65292;&#21483;&#25277;&#35937;&#31867;&#12290;&#25277;&#35937;&#31867;&#26080;&#27861;&#23454;&#20363;&#21270;&#23545;&#35937;&#65292;&#23376;&#31867;&#24517;&#39035;&#37325;&#20889;&#36825;&#20010;&#20989;&#25968;&#12290;</span>
<span style="color: #a020f0;">public</span>:
    <span style="color: #a020f0;">virtual</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() = 0; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32431;&#34394;&#20989;&#25968;</span>
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Cat</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Animal</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">eat</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"&#29483;&#22312;&#21507;&#19996;&#35199;"</span> &lt;&lt; endl;
    }
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">Cat</span> <span style="color: #a0522d;">c</span>;
    c.eat();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:c9336289-4c54-4126-b202-9d5d0d9ee923" class="outline-3">
<h3 id="h:c9336289-4c54-4126-b202-9d5d0d9ee923">虚析构和纯虚析构</h3>
<div class="outline-text-3" id="text-h:c9336289-4c54-4126-b202-9d5d0d9ee923">
<p>
虚析构主要解决内存泄漏问题。
</p>

<p>
比如，有个父类的指针指向派生类对象，对它进行销毁时，如果父类函数不是virtual就会掉用不到子类的析构函数，从而导致内存泄漏。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">std</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BaseA</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">BaseA</span>() {}
    ~<span style="color: #0000ff;">BaseA</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"BaseA &#38144;&#27585;&#20102;"</span> &lt;&lt; endl;
    }
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">SonA</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">BaseA</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">SonA</span>() : m_Value(<span style="color: #008b8b;">NULL</span>) {
        m_Value = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>(10);
    }
    ~<span style="color: #0000ff;">SonA</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"SonA &#38144;&#27585;&#20102;"</span> &lt;&lt; endl;
        <span style="color: #a020f0;">delete</span> m_Value;
    }

    <span style="color: #228b22;">int</span>* <span style="color: #a0522d;">m_Value</span>;
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">BaseB</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">BaseB</span>() {}
    <span style="color: #b22222;">/*</span>
<span style="color: #b22222;">    virtual ~BaseB() { // &#34394;&#26512;&#26500;</span>
<span style="color: #b22222;">        cout &lt;&lt; "BaseB &#38144;&#27585;&#20102;" &lt;&lt; endl;</span>
<span style="color: #b22222;">    }</span>
<span style="color: #b22222;">    */</span>
    <span style="color: #a020f0;">virtual</span> ~<span style="color: #0000ff;">BaseB</span>() = 0; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32431;&#34394;&#26512;&#26500;&#12290;&#38656;&#35201;&#22312;&#22806;&#37096;&#23454;&#29616;&#19968;&#19979;</span>
};

<span style="color: #008b8b;">BaseB</span>::~<span style="color: #0000ff;">BaseB</span>() {
    cout &lt;&lt; <span style="color: #8b2252;">"BaseB &#38144;&#27585;&#20102;"</span> &lt;&lt; endl;
}

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">SonB</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">BaseB</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">SonB</span>() : m_Value(<span style="color: #008b8b;">NULL</span>) {
        m_Value = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>(10);
    }
    ~<span style="color: #0000ff;">SonB</span>() {
        cout &lt;&lt; <span style="color: #8b2252;">"SonB &#38144;&#27585;&#20102;"</span> &lt;&lt; endl;
        <span style="color: #a020f0;">delete</span> m_Value;
    }

    <span style="color: #228b22;">int</span>* <span style="color: #a0522d;">m_Value</span>;
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22312;&#22534;&#19978;&#20998;&#37197;&#19968;&#20010;SonA&#23545;&#35937;&#65292;&#25351;&#21521;&#22522;&#31867;&#30340;&#25351;&#38024;</span>
    <span style="color: #228b22;">BaseA</span>* <span style="color: #a0522d;">a</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">SonA</span>();
    <span style="color: #a020f0;">delete</span> a;  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25191;&#34892;&#32467;&#26524; BaseA &#38144;&#27585;&#20102; &#12290; &#20294;&#26159;SonA&#22534;&#20013;&#20869;&#23384;m_Value new&#20102;&#20294;&#24182;&#27809;&#26377;&#34987;&#38144;&#27585;&#65292;&#20250;&#23548;&#33268;&#20869;&#23384;&#27844;&#28431;</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21152;&#19978;virtual&#23601;&#21487;&#20197;&#20102;</span>

    <span style="color: #228b22;">BaseB</span>* <span style="color: #a0522d;">b</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">SonB</span>();
    <span style="color: #a020f0;">delete</span> b;

    <span style="color: #b22222;">//</span><span style="color: #b22222;">BaseB c; // &#25277;&#35937;&#31867;&#65292;&#19981;&#33021;&#23454;&#20363;&#21270;</span>

    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-text">BaseA &#38144;&#27585;&#20102;
SonB &#38144;&#27585;&#20102;
BaseB &#38144;&#27585;&#20102;
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:887d81bc-b8e7-46f9-b03b-644fff3221aa" class="outline-2">
<h2 id="h:887d81bc-b8e7-46f9-b03b-644fff3221aa">项目-C++游戏开发-扫雷</h2>
<div class="outline-text-2" id="text-h:887d81bc-b8e7-46f9-b03b-644fff3221aa">
<p>
扫雷-面向对象编程
</p>
<ul class="org-ul">
<li>资源 mine.png</li>
<li>常量 const.h</li>
<li>格子 Grid.h, Grid.cpp</li>
<li>地图 Map.h, Map.cpp</li>
<li>主函数 man.cpp</li>
</ul>

<p>
预计 100 行左右的代码，实际上可以更短，但是为了让代码相对较清晰，有些代码不能省，那我们现在开始。
</p>
</div>
<div id="outline-container-h:3ae6b392-2e59-4dee-91b6-4c42cc6ae4a8" class="outline-3">
<h3 id="h:3ae6b392-2e59-4dee-91b6-4c42cc6ae4a8">环境安装</h3>
<div class="outline-text-3" id="text-h:3ae6b392-2e59-4dee-91b6-4c42cc6ae4a8">
<p>
visual studio 2022 下载安装 <a href="https://visualstudio.microsoft.com/zh-hans">https://visualstudio.microsoft.com/zh-hans</a>
</p>
</div>
</div>
<div id="outline-container-h:743c718a-d830-4b52-8cde-4c6e05c69923" class="outline-3">
<h3 id="h:743c718a-d830-4b52-8cde-4c6e05c69923">环境配置</h3>
<div class="outline-text-3" id="text-h:743c718a-d830-4b52-8cde-4c6e05c69923">
<p>
首先要下载 SFML：<a href="https://www.sfml-dev.org/download/sfml/2.6.1/">https://www.sfml-dev.org/download/sfml/2.6.1/</a>， Visual C++ 17(2022) 解压到本地放代码的文件夹。如D:\tmp\game\SFML-2.6.1
</p>

<p>
然后创建一个项目，项目创建完以后，在 main.cpp 中敲入第一句代码，Graphics.hpp 这个头文件通常包含了与图形绘制、窗口管理 等相关的函数声明 以及 类的定义。通过包含这个头文件，程序就能够使用 SFML 库提供的图形处理功能，具体哪些功能呢？比如  创建窗口、绘制图形、处理输入 等等操作。
</p>

<p>
minesweeper/main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
</pre>
</div>

<p>
这时候我们发现，无法打开这个文件。因为需要进行简单的配置
</p>
<ul class="org-ul">
<li>点击项目，右键属性，选择这里的 C/C++，选择【附加包含目录】，选择 SFML 的 include 目录，点击确定。
<ul class="org-ul">
<li>D:\tmp\game\SFML-2.6.1\include</li>
</ul></li>
<li>然后点击 链接器 -&gt; 常规 -&gt; 附加库目录，选择 SFML 的 lib 目录：
<ul class="org-ul">
<li>D:\tmp\game\SFML-2.6.1\lib</li>
</ul></li>
<li>再点击 链接器 -&gt;输入，选择右边的【附加依赖项】，把这些内容拷贝进去：</li>
</ul>

<p>
（这里需要注意，对于 sfml-xxx-d.lib 是适用于 debug 模式的，sfml-xxx.lib 是适用于 release 模式的）
</p>
<div class="org-src-container">
<pre class="src src-text">sfml-graphics-d.lib
sfml-window-d.lib
sfml-system-d.lib
sfml-audio-d.lib
opengl32.lib
freetype.lib
winmm.lib
gdi32.lib
</pre>
</div>

<p>
最后点击应用，就配置完毕了。
</p>

<p>
然后再把 SFML-2.6.1\bin 目录下的 动态链接库文件 dll 都拷贝到项目目录下，即与main.cpp同级目录。
</p>

<p>
然后我们写个 main 函数来测试一下。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #008b8b;">sf</span>::<span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">app</span>(<span style="color: #008b8b;">sf</span>::VideoMode(816, 576), <span style="color: #8b2252;">"MineSweeper"</span>);
    <span style="color: #a020f0;">while</span> (app.isOpen()) {

    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
这样一来，就可以显示一个基本的窗口了，接下来我们来解释解释这些代码的含义。
</p>
</div>
</div>
<div id="outline-container-h:c3b97936-db27-46e1-9a35-7a3b130feb0a" class="outline-3">
<h3 id="h:c3b97936-db27-46e1-9a35-7a3b130feb0a">基础框架</h3>
<div class="outline-text-3" id="text-h:c3b97936-db27-46e1-9a35-7a3b130feb0a">
</div>
<div id="outline-container-h:8c8075a3-38d4-441a-a22b-9bdfe0943082" class="outline-4">
<h4 id="h:8c8075a3-38d4-441a-a22b-9bdfe0943082">命名空间</h4>
<div class="outline-text-4" id="text-h:8c8075a3-38d4-441a-a22b-9bdfe0943082">
<p>
sf 是这个库的命名空间，基本上所有的接口都是从这里取的，利用两个冒号来获取相应的函数或者类，如果不想写这段前缀呢，我们可以和 std 一样，在代码前面写上这么一句话：
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;
</pre>
</div>

<p>
这样一来，这些前缀就都可以去掉了。
</p>
</div>
</div>
<div id="outline-container-h:072bfd19-fc89-452f-bc84-38d3eba9f363" class="outline-4">
<h4 id="h:072bfd19-fc89-452f-bc84-38d3eba9f363">窗口创建</h4>
<div class="outline-text-4" id="text-h:072bfd19-fc89-452f-bc84-38d3eba9f363">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(816, 576), <span style="color: #8b2252;">"MineSweeper"</span>);
</pre>
</div>

<p>
这段代码，就是实例化了一个窗口对象，RenderWindow 是一个类，win 是一个对象名，这一段就是有参构造函数的传参，我们可以 F12 进去看它的定义。
</p>

<p>
这里的 VideoMode 也是一个类，这两个参数是 VideoMode 构造函数的传参，分别代表了窗口的宽高。
</p>
</div>
</div>
<div id="outline-container-h:28e8de36-48a8-41b4-b398-ee488847f5fd" class="outline-4">
<h4 id="h:28e8de36-48a8-41b4-b398-ee488847f5fd">字符集</h4>
<div class="outline-text-4" id="text-h:28e8de36-48a8-41b4-b398-ee488847f5fd">
<p>
VideoMode 中构造函数的第二个传参，是一个字符串，代表了窗口的标题，然后我们实现一个 while 循环。
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">while</span> (win.isOpen()) {

}
</pre>
</div>
<p>
并且循环条件是 win.isOpen() 为 True ，这个函数的含义就是当窗口 win 被打开的时候就返回真，那么一旦关闭，就会返回假，这时候程序就会结束掉，我们来运行一下。
</p>

<p>
我们看到窗口左上角有个标题，这时候我希望这个标题是中文的，可以改下这个字符串。
</p>

<p>
这时候就会发现，标题变成了乱码
</p>

<p>
为什么呢？我们来看下这个字符串的类型，是一个字符数组，它最初是为了处理英文字符而设计的，只能表示基本的 ASCII 字符集（一个字节表示一个字符）。而中文字符，通常需要多个字节来表示，不同的中文编码方式（如 GBK、UTF-8 等）占用的字节数可能不同。
</p>

<p>
所以如果使用char类型来存储中文字符时，如果编码方式不匹配，就容易出现乱码。例如，在某些编码方式下，一个中文字符可能占用 2 个或更多字节，如果按照单个字节来读取或处理，就会导致字符的不完整或错误解释。
</p>

<p>
这时候我们只需要在前面加上一个 L，再把鼠标移动上去，就会发现，它的类型变成了 wchar_t，这个叫宽字符，它一般占用 2 个或者以上字节。使用wchar_t可以处理包含中文字符的情况。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">app</span>(VideoMode(816, 576), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #a020f0;">while</span> (app.isOpen()) {

    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
运行一下， 这样就没问题了。
</p>
</div>
</div>
</div>
<div id="outline-container-h:eea15ab3-7a3e-485b-9f5c-a7590ad62de8" class="outline-3">
<h3 id="h:eea15ab3-7a3e-485b-9f5c-a7590ad62de8">关闭事件</h3>
<div class="outline-text-3" id="text-h:eea15ab3-7a3e-485b-9f5c-a7590ad62de8">
<p>
这时候，当我们点击窗口的时候，会出现卡顿，并且未响应，这个原因是什么呢？
</p>
<ul class="org-ul">
<li>因为我们没有处理事件，首先定义一个事件的类，然后调用 pollEvent 这个接口，就可以获取到事件队列里的最先来的那个事件，包括 鼠标事件、键盘事件 等等。</li>
</ul>

<p>
那么再学完数据结构以后，你就能理解队列的概念了，就是一种先进先出的数据结构。
</p>

<p>
可以通过获取事件的类型 type ，知道这是一个什么样的事件，比如 Event::Closed 代表窗口关闭事件，也就是你点了右上角的关闭按钮。当然，F12进去以后，可以看到更多事件的定义。
</p>

<p>
可以在控制台里输出一句话，来印证我们的观点，调用 win.close() 以后，win 的 isOpen 接口就会返回假，这样程序也就结束了。运行一下。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(816, 576), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }
        }
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:39a247c5-d4b5-406a-a8b6-26a3ae7718ca" class="outline-3">
<h3 id="h:39a247c5-d4b5-406a-a8b6-26a3ae7718ca">资源加载</h3>
<div class="outline-text-3" id="text-h:39a247c5-d4b5-406a-a8b6-26a3ae7718ca">

<figure id="orgf0b025a">
<img src="./images/mine.png" alt="mine.png" width="50%">

</figure>

<p>
接下来我们准备好这么一张图片，如果不会画图，可以直接用我的这张图，用画图工具打开以后，大概是宽为 1152，高为 96 的图片，每个小格子的大小是 96 x 96。
</p>

<p>
怎么把这张图片上的某一个格子，在屏幕上显示出来，就是我们这堂课要讲的内容了。
</p>
</div>
<div id="outline-container-h:5ca55f73-3d3c-4a58-af4e-c780840434d9" class="outline-4">
<h4 id="h:5ca55f73-3d3c-4a58-af4e-c780840434d9">纹理对象</h4>
<div class="outline-text-4" id="text-h:5ca55f73-3d3c-4a58-af4e-c780840434d9">
<p>
首先我们创建一个纹理对象，并且把这张图加载到内存中，纹理是游戏开发中一个比较重要的概念，可以理解成贴图， 2D游戏中，不同的对象，让人能够产生不同的视觉效果，就是利用不同的纹理实现的。
</p>

<p>
mine.png图片文件放到项目目录下。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-h:76a43aa6-bc5f-4dbf-8947-ef7c9ee09a52" class="outline-4">
<h4 id="h:76a43aa6-bc5f-4dbf-8947-ef7c9ee09a52">精灵</h4>
<div class="outline-text-4" id="text-h:76a43aa6-bc5f-4dbf-8947-ef7c9ee09a52">
<p>
然后我们再实例化一个精灵，并且把刚才准备好的纹理对象，作为初始化参数，传给它。精灵可以这么去理解，我拿到一个纹理的某一个矩形区域，然后可以对它进行平移、缩放、旋转 等等变换，然后绘制到屏幕上的这么一个东西，我们叫它精灵。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">Sprite</span> <span style="color: #0000ff;">s</span>(t);
</pre>
</div>

<p>
比如我可以这样：
</p>

<p>
在原先这张纹理贴图上，(96, 0) 的坐标上，取出一个 (96, 96) 的矩形，并且设置坐标为 (16, 16)，然后把它的缩放值设置为原来的 1/2 ，这样就变成了一个 48 x 48 的矩形，然后调用 draw 接口绘制到 win 对象上面去，这时候其实屏幕上还没有东西，直到调用 display 以后，才会真正把它绘制到窗口上。
</p>

<p>
可以这么去理解，draw 调用完，实际上还没有真正的绘制到窗口上，只是把要画的内容，画到了一张画布上面，display 调用完，才会最终把这张画布的内容，一次性绘制到你的窗口上。
</p>

<div class="org-src-container">
<pre class="src src-cpp">s.setTextureRect(IntRect(96, 0, 96, 96));
s.setPosition(16, 16);
s.setScale(Vector2f(0.5, 0.5));
win.draw(s);
win.display();
</pre>
</div>

<p>
接下来我们来写这么一段话：
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">int</span> <span style="color: #a0522d;">r</span> = rand() % 12;
s.setTextureRect(IntRect(96 * r, 0, 96, 96));
</pre>
</div>
<p>
随机一个 0 到 11 的数字，然后让它乘上 96 ，去改变这个纹理矩形左上角的 x 坐标，来看看效果，你会发现每一帧，都在改变图片，而实际上 0 到 11 就代表了扫雷这个游戏中，每个会用到的格子。
</p>

<p>
整体代码 main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(816, 576), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);

    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">r</span> = rand() % 12;
    s.setTextureRect(IntRect(96 * r, 0, 96, 96));
    s.setPosition(16, 16);
    s.setScale(Vector2f(0.5, 0.5));
    win.draw(s);
    win.display();

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }
        }
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:65080e40-649d-4797-8ae8-708501f47f3b" class="outline-3">
<h3 id="h:65080e40-649d-4797-8ae8-708501f47f3b">初始地图</h3>
<div class="outline-text-3" id="text-h:65080e40-649d-4797-8ae8-708501f47f3b">
<p>
定义一个 showGrid 的二维数组，是一个 15 列 x 10 行 的地图，代表实际显示出来的地图元素，一开始都为 10， 10 就是这个图片，代表的是一个未知的元素。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">int</span> <span style="color: #a0522d;">showGrid</span>[16][11];
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= 15; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= 10; ++j) {
        showGrid[i][j] = 10;
    }
}
</pre>
</div>

<p>
然后在绘制的时候，遍历每一个地图元素，处理精灵的纹理、位置以及缩放，并且绘制到 win 这个对象上。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= 15; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= 10; ++j) {
        s.setTextureRect(IntRect(96 * showGrid[i][j], 0, 96, 96));
        s.setPosition(i * 48, j * 48);
        s.setScale(Vector2f(0.5, 0.5));
        win.draw(s);
    }
}
</pre>
</div>

<p>
最终一次性展现到窗口上，运行。这样我们就得到了一张初始的地图。
</p>

<p>
整体代码 main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(816, 576), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);

    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">r</span> = rand() % 12;
    s.setTextureRect(IntRect(96 * r, 0, 96, 96));
    s.setPosition(16, 16);
    s.setScale(Vector2f(0.5, 0.5));
    win.draw(s);
    win.display();

    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">showGrid</span>[16][11];
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= 15; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= 10; ++j) {
            showGrid[i][j] = 10;
        }
    }
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= 15; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= 10; ++j) {
            s.setTextureRect(IntRect(96 * showGrid[i][j], 0, 96, 96));
            s.setPosition(i * 48, j * 48);
            s.setScale(Vector2f(0.5, 0.5));
            win.draw(s);
        }
    }
    win.display();

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }
        }
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:e08611fc-d780-4547-ad6c-6a5f223e85c5" class="outline-3">
<h3 id="h:e08611fc-d780-4547-ad6c-6a5f223e85c5">常量定义</h3>
<div class="outline-text-3" id="text-h:e08611fc-d780-4547-ad6c-6a5f223e85c5">
<p>
这个时候我们发现，有太多数字了，这个我们叫它们 magic number，很难看，而且维护起来极其麻烦，所以我们想办法把数字变成常量。
</p>

<p>
首先引入第一个常量：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
</pre>
</div>

<p>
它代表了在这张图片中，每个格子的像素大小，是 96。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
</pre>
</div>

<p>
而 GRID_SIZE 呢，则代表显示到窗口的时候，每个格子实际的像素大小。
</p>

<p>
然后定义 MAP_COL 和 MAP_ROW ，分别代表这个扫雷地图，有多少列多少行：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
</pre>
</div>

<p>
然后把之前 15 和 10 的地方，都替换掉（注意下面有个 10 是不能替换，因为含义不同）：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">int</span> <span style="color: #a0522d;">showGrid</span>[MAP_COL+1][MAP_ROW+1];
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
        showGrid[i][j] = 10;      <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36825;&#20010;10&#21487;&#19981;&#26159; MAP_ROW</span>
    }
}
</pre>
</div>

<p>
遍历每个格子，进行渲染：
</p>

<div class="org-src-container">
<pre class="src src-cpp">s.setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
        s.setTextureRect(IntRect(ORI_GRID_SIZE * showGrid[i][j], 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
        s.setPosition(i * GRID_SIZE, j * GRID_SIZE);
        win.draw(s);
    }
}
</pre>
</div>

<p>
而对于整个窗口大小，可以是 格子数 乘上 （列数 + 2），左边加一列格子，右边加一列格子，上下也是一样的，所以窗口大小可以定义成这样的常量：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
</pre>
</div>

<p>
最后，showGrid 里面还有一个 10，这个我们可以用枚举来实现：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};
</pre>
</div>

<p>
这样一来，代码就好看很多了。
</p>

<p>
整体代码main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);

    <span style="color: #b22222;">/*</span>
<span style="color: #b22222;">    int r = rand() % 12;</span>
<span style="color: #b22222;">    s.setTextureRect(IntRect(96 * r, 0, 96, 96));</span>
<span style="color: #b22222;">    s.setPosition(16, 16);</span>
<span style="color: #b22222;">    s.setScale(Vector2f(0.5, 0.5));</span>
<span style="color: #b22222;">    win.draw(s);</span>
<span style="color: #b22222;">    win.display();</span>
<span style="color: #b22222;">    */</span>

    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">showGrid</span>[MAP_COL+1][MAP_ROW+1];
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            showGrid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_HIDE;
        }
    }
    s.setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            s.setTextureRect(IntRect(ORI_GRID_SIZE * showGrid[i][j], 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
            s.setPosition(i * GRID_SIZE, j * GRID_SIZE);
            win.draw(s);
        }
    }
    win.display();

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }
        }
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:8ade25a4-994e-4c83-9d13-62ae0692feab" class="outline-3">
<h3 id="h:8ade25a4-994e-4c83-9d13-62ae0692feab">地图随机</h3>
<div class="outline-text-3" id="text-h:8ade25a4-994e-4c83-9d13-62ae0692feab">
<p>
showGrid 代表的是显示出来的格子类型，所以再定义一个 grid，代表真实的格子类型，并且利用随机函数，1/6 的概率是炸弹，5/6的概率是空。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">showGrid</span>[MAP_COL+1][MAP_ROW+1];
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
        showGrid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_HIDE;
        <span style="color: #a020f0;">if</span> (rand() % 6 == 0) {
            grid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_BOMB;
        }
        <span style="color: #a020f0;">else</span> {
            grid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
        }
    }
}
</pre>
</div>

<p>
定义周围的八个方向
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1, -1}, {-1, 0}, {-1, 1},
    {0, -1}, {0, 1},
    {1, -1}, {1, 0}, {1, 1},
};
</pre>
</div>

<p>
并且统计每个非炸弹的格子的周围八个方向，进行计数，从而改变当前格子的类型
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
        <span style="color: #a020f0;">if</span> (grid[i][j] == <span style="color: #008b8b;">GridType</span>::GT_EMPTY) {
            <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                <span style="color: #a020f0;">if</span> (grid[ti][tj] == <span style="color: #008b8b;">GridType</span>::GT_BOMB) {
                    ++cnt;
                }
            }
            grid[i][j] = (<span style="color: #228b22;">GridType</span>)cnt;
        }
    }
}
</pre>
</div>

<p>
然后只需要在显示之前，把所有的实际格子内容，赋值给对应的显示格子，就相当于摊牌了。运行一下看看效果。
</p>

<div class="org-src-container">
<pre class="src src-cpp">showGrid[i][j] = grid[i][j];
</pre>
</div>

<p>
整个代码main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);

    <span style="color: #b22222;">/*</span>
<span style="color: #b22222;">    int r = rand() % 12;</span>
<span style="color: #b22222;">    s.setTextureRect(IntRect(96 * r, 0, 96, 96));</span>
<span style="color: #b22222;">    s.setPosition(16, 16);</span>
<span style="color: #b22222;">    s.setScale(Vector2f(0.5, 0.5));</span>
<span style="color: #b22222;">    win.draw(s);</span>
<span style="color: #b22222;">    win.display();</span>
<span style="color: #b22222;">    */</span>

    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">showGrid</span>[MAP_COL + 1][MAP_ROW + 1]; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26174;&#31034;&#20986;&#26469;&#30340;&#26684;&#23376;&#31867;&#22411;</span>
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1]; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#30495;&#23454;&#30340;&#26684;&#23376;&#31867;&#22411;</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            showGrid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_HIDE;
            <span style="color: #a020f0;">if</span> (rand() % 6 == 0) {
                grid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_BOMB;
            }
            <span style="color: #a020f0;">else</span> {
                grid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
            }
        }
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32479;&#35745;&#27599;&#20010;&#38750;&#28856;&#24377;&#30340;&#26684;&#23376;&#30340;&#21608;&#22260;&#20843;&#20010;&#26041;&#21521;&#65292;&#36827;&#34892;&#35745;&#25968;&#65292;&#20174;&#32780;&#25913;&#21464;&#24403;&#21069;&#26684;&#23376;&#30340;&#31867;&#22411;</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[i][j] == <span style="color: #008b8b;">GridType</span>::GT_EMPTY) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                    <span style="color: #a020f0;">if</span> (grid[ti][tj] == <span style="color: #008b8b;">GridType</span>::GT_BOMB) {
                        ++cnt;
                    }
                }
                grid[i][j] = (<span style="color: #228b22;">GridType</span>)cnt;
            }
            showGrid[i][j] = grid[i][j];
        }
    }

    s.setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            s.setTextureRect(IntRect(ORI_GRID_SIZE * showGrid[i][j], 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
            s.setPosition(i * GRID_SIZE, j * GRID_SIZE);
            win.draw(s);
        }
    }
    win.display();

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }
        }
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d73d6a04-073c-46ff-beb5-9c2ba27b28be" class="outline-3">
<h3 id="h:d73d6a04-073c-46ff-beb5-9c2ba27b28be">点击排雷</h3>
<div class="outline-text-3" id="text-h:d73d6a04-073c-46ff-beb5-9c2ba27b28be">
<p>
获取鼠标点击到的格子位置
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;
</pre>
</div>

<p>
并且处理鼠标左键 和 鼠标右键 的 按下事件
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
    <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
        showGrid[x][y] = grid[x][y];
    }
    <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
        showGrid[x][y] = <span style="color: #008b8b;">GridType</span>::GT_FLAG;
    }
}
</pre>
</div>
<p>
最后，如果当前的格子被确认是雷，那么所有格子都公开，游戏结束：
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">if</span>( showGrid[x][y] == <span style="color: #008b8b;">GridType</span>::GT_BOMB) 
    showGrid[i][j] = grid[i][j];
</pre>
</div>

<p>
整个代码main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);

    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">showGrid</span>[MAP_COL + 1][MAP_ROW + 1]; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26174;&#31034;&#20986;&#26469;&#30340;&#26684;&#23376;&#31867;&#22411;</span>
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1]; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#30495;&#23454;&#30340;&#26684;&#23376;&#31867;&#22411;</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            showGrid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_HIDE;
            <span style="color: #a020f0;">if</span> (rand() % 6 == 0) { <span style="color: #b22222;">// </span><span style="color: #b22222;">1/6 &#30340;&#27010;&#29575;&#26159;&#28856;&#24377;&#65292;5/6&#30340;&#27010;&#29575;&#26159;&#31354;&#12290;</span>
                grid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_BOMB;
            }
            <span style="color: #a020f0;">else</span> {
                grid[i][j] = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
            }
        }
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32479;&#35745;&#27599;&#20010;&#38750;&#28856;&#24377;&#30340;&#26684;&#23376;&#30340;&#21608;&#22260;&#20843;&#20010;&#26041;&#21521;&#65292;&#36827;&#34892;&#35745;&#25968;&#65292;&#20174;&#32780;&#25913;&#21464;&#24403;&#21069;&#26684;&#23376;&#30340;&#31867;&#22411;</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[i][j] == <span style="color: #008b8b;">GridType</span>::GT_EMPTY) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                    <span style="color: #a020f0;">if</span> (grid[ti][tj] == <span style="color: #008b8b;">GridType</span>::GT_BOMB) {
                        ++cnt;
                    }
                }
                grid[i][j] = (<span style="color: #228b22;">GridType</span>)cnt;
            } 
        }
    }

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#21462;&#40736;&#26631;&#28857;&#20987;&#21040;&#30340;&#26684;&#23376;&#20301;&#32622;</span>
        <span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;

        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }

            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;&#40736;&#26631;&#24038;&#38190; &#21644; &#40736;&#26631;&#21491;&#38190; &#30340; &#25353;&#19979;&#20107;&#20214;</span>
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
                <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
                    showGrid[x][y] = grid[x][y];
                }
                <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
                    showGrid[x][y] = <span style="color: #008b8b;">GridType</span>::GT_FLAG;
                }
            }
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32472;&#22270;</span>
        s.setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (showGrid[x][y] == <span style="color: #008b8b;">GridType</span>::GT_BOMB) <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#24403;&#21069;&#30340;&#26684;&#23376;&#34987;&#30830;&#35748;&#26159;&#38647;&#65292;&#37027;&#20040;&#25152;&#26377;&#26684;&#23376;&#37117;&#20844;&#24320;</span>
                    showGrid[i][j] = grid[i][j];
                <span style="color: #b22222;">//</span><span style="color: #b22222;">showGrid[i][j] = grid[i][j];</span>

                s.setTextureRect(IntRect(ORI_GRID_SIZE * showGrid[i][j], 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
                s.setPosition(i * GRID_SIZE, j * GRID_SIZE);
                win.draw(s);
            }
        }
        win.display();
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:f9bb2324-3683-4d5f-8080-faa742778c85" class="outline-3">
<h3 id="h:f9bb2324-3683-4d5f-8080-faa742778c85">格子类化</h3>
<div class="outline-text-3" id="text-h:f9bb2324-3683-4d5f-8080-faa742778c85">
<p>
接下来我们采用面向对象的思想，来改造下这个代码，首先是一个格子，目前用了两个数据来存储，一个是实际的格子类型，一个是显示的格子类型，我现在可以把它封装到一个类里面，定义两个私有成员变量。
</p>

<p>
分别用 m_realGridType 和 m_showGridType 来表示。
</p>

<p>
然后实现它们的 set 和 get 成员函数。并且把相关代码也进行替换。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Grid</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Grid</span>() {
        m_realGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
        m_showGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_realGridType = realGType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_showGridType = realGType;
    }
    <span style="color: #228b22;">GridType</span> <span style="color: #0000ff;">GetShowGridType</span>() {
        <span style="color: #a020f0;">return</span> m_showGridType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">ShowGrid</span>() {
        m_showGridType = m_realGridType;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_showGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_realGridType</span>;
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_showGridType</span>;
};
</pre>
</div>

<p>
改造下初始化地图的代码：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">Grid</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
        grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
        <span style="color: #a020f0;">if</span> (rand() % 6 == 0) {
            grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
        }
        <span style="color: #a020f0;">else</span> {
            grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
        }
    }
}
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
        <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
            <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                    ++cnt;
                }
            }
            <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
            }
        }
    }
}
</pre>
</div>

<p>
改造下鼠标按键的代码：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
    grid[x][y].ShowGrid();
}
<span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
    grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
}
</pre>
</div>

<p>
改造下渲染的代码：
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">if</span>( grid[x][y].IsShowBomb()) 
    grid[i][j].ShowGrid();
s.setTextureRect(IntRect(ORI_GRID_SIZE * grid[i][j].GetShowGridType(), 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
</pre>
</div>

<p>
整个代码main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Grid</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Grid</span>() {
        m_realGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
        m_showGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_realGridType = realGType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">showGType</span>) {
        m_showGridType = showGType;
    }
    <span style="color: #228b22;">GridType</span> <span style="color: #0000ff;">GetShowGridType</span>() {
        <span style="color: #a020f0;">return</span> m_showGridType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">ShowGrid</span>() {
        m_showGridType = m_realGridType;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_realGridType</span>;
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_showGridType</span>;
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);

    <span style="color: #228b22;">Grid</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
            <span style="color: #a020f0;">if</span> (rand() % 6 == 0) { <span style="color: #b22222;">// </span><span style="color: #b22222;">1/6 &#30340;&#27010;&#29575;&#26159;&#28856;&#24377;&#65292;5/6&#30340;&#27010;&#29575;&#26159;&#31354;&#12290;</span>
                grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
            }
            <span style="color: #a020f0;">else</span> {
                grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
            }
        }
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32479;&#35745;&#27599;&#20010;&#38750;&#28856;&#24377;&#30340;&#26684;&#23376;&#30340;&#21608;&#22260;&#20843;&#20010;&#26041;&#21521;&#65292;&#36827;&#34892;&#35745;&#25968;&#65292;&#20174;&#32780;&#25913;&#21464;&#24403;&#21069;&#26684;&#23376;&#30340;&#31867;&#22411;</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                    <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                        ++cnt;
                    }
                }
                <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                    grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
                }
            } 
        }
    }

    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#21462;&#40736;&#26631;&#28857;&#20987;&#21040;&#30340;&#26684;&#23376;&#20301;&#32622;</span>
        <span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;

        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }

            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;&#40736;&#26631;&#24038;&#38190; &#21644; &#40736;&#26631;&#21491;&#38190; &#30340; &#25353;&#19979;&#20107;&#20214;</span>
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
                <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
                    grid[x][y].ShowGrid();
                }
                <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
                    grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
                }
            }
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32472;&#22270;</span>
        s.setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb()) <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#24403;&#21069;&#30340;&#26684;&#23376;&#34987;&#30830;&#35748;&#26159;&#38647;&#65292;&#37027;&#20040;&#25152;&#26377;&#26684;&#23376;&#37117;&#20844;&#24320;</span>
                    grid[i][j].ShowGrid();

                s.setTextureRect(IntRect(ORI_GRID_SIZE * grid[i][j].GetShowGridType(), 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
                s.setPosition(i * GRID_SIZE, j * GRID_SIZE);
                win.draw(s);
            }
        }
        win.display();
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:446985fb-2da8-403d-984a-41891d2f13c7" class="outline-3">
<h3 id="h:446985fb-2da8-403d-984a-41891d2f13c7">地图类化</h3>
<div class="outline-text-3" id="text-h:446985fb-2da8-403d-984a-41891d2f13c7">
<p>
除了把格子用类来实现，整个地图也可以用类来实现。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Map</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>() {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
                <span style="color: #a020f0;">if</span> (rand() % 6 == 0) {
                    grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
                }
                <span style="color: #a020f0;">else</span> {
                    grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
                }
            }
        }
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                        <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                            ++cnt;
                        }
                    }
                    <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                        grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
                    }
                }
            }
        }
    }

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
        <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
            <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
                grid[x][y].ShowGrid();
            }
            <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
                grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
            }
        }
    }

    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">RenderWindow</span>&amp; <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>&amp; <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
        s.setScale(Vector2f(<span style="color: #228b22;">GRID_SIZE</span> * 1.0 / ORI_GRID_SIZE, <span style="color: #228b22;">GRID_SIZE</span> * 1.0 / ORI_GRID_SIZE));
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb())
                    grid[i][j].ShowGrid();
                s.setTextureRect(IntRect(<span style="color: #228b22;">ORI_GRID_SIZE</span> * <span style="color: #a0522d;">grid</span>[i][j].GetShowGridType(), 0, <span style="color: #228b22;">ORI_GRID_SIZE</span>, <span style="color: #228b22;">ORI_GRID_SIZE</span>));
                s.setPosition(<span style="color: #228b22;">i</span> * <span style="color: #a0522d;">GRID_SIZE</span>, <span style="color: #228b22;">j</span> * <span style="color: #a0522d;">GRID_SIZE</span>);
                win.draw(s);
            }
        }
    }

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">Grid</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
};
</pre>
</div>

<p>
这样实际游戏，调用的代码就可以很短了，所有的逻辑都封装到地图类里去了。
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);
    <span style="color: #228b22;">Map</span> <span style="color: #a0522d;">mp</span>;
    mp.init();
    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }
            mp.handleMouseEvent(e, x, y);
        }
        mp.draw(win, s, x, y);
        win.display();
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>

<p>
整个代码main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Grid</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Grid</span>() {
        m_realGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
        m_showGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_realGridType = realGType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">showGType</span>) {
        m_showGridType = showGType;
    }
    <span style="color: #228b22;">GridType</span> <span style="color: #0000ff;">GetShowGridType</span>() {
        <span style="color: #a020f0;">return</span> m_showGridType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">ShowGrid</span>() {
        m_showGridType = m_realGridType;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_realGridType</span>;
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_showGridType</span>;
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Map</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>() {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
                <span style="color: #a020f0;">if</span> (rand() % 6 == 0) { <span style="color: #b22222;">// </span><span style="color: #b22222;">1/6 &#30340;&#27010;&#29575;&#26159;&#28856;&#24377;&#65292;5/6&#30340;&#27010;&#29575;&#26159;&#31354;&#12290;</span>
                    grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
                }
                <span style="color: #a020f0;">else</span> {
                    grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
                }
            }
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32479;&#35745;&#27599;&#20010;&#38750;&#28856;&#24377;&#30340;&#26684;&#23376;&#30340;&#21608;&#22260;&#20843;&#20010;&#26041;&#21521;&#65292;&#36827;&#34892;&#35745;&#25968;&#65292;&#20174;&#32780;&#25913;&#21464;&#24403;&#21069;&#26684;&#23376;&#30340;&#31867;&#22411;</span>
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                        <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                            ++cnt;
                        }
                    }
                    <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                        grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
                    }
                }
            }
        }
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
        <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
            <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
                grid[x][y].ShowGrid();
            }
            <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
                grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
            }
        }
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">RenderWindow</span>&amp; <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>&amp; <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
        s.setScale(Vector2f(<span style="color: #228b22;">GRID_SIZE</span> * 1.0 / ORI_GRID_SIZE, <span style="color: #228b22;">GRID_SIZE</span> * 1.0 / ORI_GRID_SIZE));
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb()) <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#24403;&#21069;&#30340;&#26684;&#23376;&#34987;&#30830;&#35748;&#26159;&#38647;&#65292;&#37027;&#20040;&#25152;&#26377;&#26684;&#23376;&#37117;&#20844;&#24320;</span>
                    grid[i][j].ShowGrid();

                s.setTextureRect(IntRect(<span style="color: #228b22;">ORI_GRID_SIZE</span> * <span style="color: #a0522d;">grid</span>[i][j].GetShowGridType(), 0, <span style="color: #228b22;">ORI_GRID_SIZE</span>, <span style="color: #228b22;">ORI_GRID_SIZE</span>));
                s.setPosition(<span style="color: #228b22;">i</span> * <span style="color: #a0522d;">GRID_SIZE</span>, <span style="color: #228b22;">j</span> * <span style="color: #a0522d;">GRID_SIZE</span>);
                win.draw(s);
            }
        }
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">Grid</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);
    <span style="color: #228b22;">Map</span> <span style="color: #a0522d;">mp</span>;

    mp.init();
    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#21462;&#40736;&#26631;&#28857;&#20987;&#21040;&#30340;&#26684;&#23376;&#20301;&#32622;</span>
        <span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;

        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }

            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;&#40736;&#26631;&#24038;&#38190; &#21644; &#40736;&#26631;&#21491;&#38190; &#30340; &#25353;&#19979;&#20107;&#20214;</span>
            mp.handleMouseEvent(e, x, y);
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32472;&#22270;</span>
        mp.draw(win, s, x, y);
        win.display();
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:29100394-d771-4e45-aa36-f6cac07b2752" class="outline-3">
<h3 id="h:29100394-d771-4e45-aa36-f6cac07b2752">接口优化</h3>
<div class="outline-text-3" id="text-h:29100394-d771-4e45-aa36-f6cac07b2752">
<p>
接下来我们来看，这个地图类对外提供的接口，只有三个了。一个是初始化，一个是处理事件，一个是渲染，并且渲染接口每次都把 窗口 和 精灵 传进去，实际上是没有必要的，因为在这个大循环里，这两个对象，是不变的。
</p>

<p>
所以这两个对象，实际上，可以作为 Map 类的成员变量，当然这里必须用指针。如果不传指针，就会通过拷贝构造函数，生成一个新的对象，这不是我们想要的，我需要它还是原来那个对象。
</p>

<div class="org-src-container">
<pre class="src src-cpp">...
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">RenderWindow</span>*    <span style="color: #a0522d;">win</span>;
    <span style="color: #228b22;">Sprite</span>*          <span style="color: #a0522d;">sprite</span>;
    <span style="color: #228b22;">Grid</span>             <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
};
</pre>
</div>

<p>
然后修改 Map 类的初始化函数，如下：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>) {
    <span style="color: #a020f0;">this</span>-&gt;win = win;
    <span style="color: #a020f0;">this</span>-&gt;sprite = sprite;
    ...
}


mp.init(&amp;win, &amp;s);
</pre>
</div>

<p>
这里记住要传指针，所以把 win 和 s 的地址传进去就好了。最后修改 draw 函数（因为是指针，所以所有的 . 变成 -&gt; 就好了）：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">void</span> <span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
    sprite-&gt;setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb()) {
                grid[i][j].ShowGrid();
            }
            sprite-&gt;setTextureRect(IntRect(ORI_GRID_SIZE * grid[i][j].GetShowGridType(), 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
            sprite-&gt;setPosition(i * GRID_SIZE, j * GRID_SIZE);
            win-&gt;draw(*sprite);
        }
    }
}
</pre>
</div>

<p>
sprite 作为 RenderWindow 的成员函数 draw 的参数，是一个对象，所以采用 * 进行解引用。
</p>

<p>
整个代码main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);
<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Grid</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Grid</span>() {
        m_realGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
        m_showGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_realGridType = realGType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">showGType</span>) {
        m_showGridType = showGType;
    }
    <span style="color: #228b22;">GridType</span> <span style="color: #0000ff;">GetShowGridType</span>() {
        <span style="color: #a020f0;">return</span> m_showGridType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">ShowGrid</span>() {
        m_showGridType = m_realGridType;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_realGridType</span>;
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_showGridType</span>;
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Map</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>) {
        <span style="color: #a020f0;">this</span>-&gt;win = win;
        <span style="color: #a020f0;">this</span>-&gt;sprite = sprite;
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
                <span style="color: #a020f0;">if</span> (rand() % 6 == 0) { <span style="color: #b22222;">// </span><span style="color: #b22222;">1/6 &#30340;&#27010;&#29575;&#26159;&#28856;&#24377;&#65292;5/6&#30340;&#27010;&#29575;&#26159;&#31354;&#12290;</span>
                    grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
                }
                <span style="color: #a020f0;">else</span> {
                    grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
                }
            }
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32479;&#35745;&#27599;&#20010;&#38750;&#28856;&#24377;&#30340;&#26684;&#23376;&#30340;&#21608;&#22260;&#20843;&#20010;&#26041;&#21521;&#65292;&#36827;&#34892;&#35745;&#25968;&#65292;&#20174;&#32780;&#25913;&#21464;&#24403;&#21069;&#26684;&#23376;&#30340;&#31867;&#22411;</span>
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                        <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                            ++cnt;
                        }
                    }
                    <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                        grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
                    }
                }
            }
        }
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
        <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
            <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
                grid[x][y].ShowGrid();
            }
            <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
                grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
            }
        }
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
        sprite-&gt;setScale(Vector2f(<span style="color: #228b22;">GRID_SIZE</span> * 1.0 / ORI_GRID_SIZE, <span style="color: #228b22;">GRID_SIZE</span> * 1.0 / ORI_GRID_SIZE));
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
            <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
                <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb()) <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#24403;&#21069;&#30340;&#26684;&#23376;&#34987;&#30830;&#35748;&#26159;&#38647;&#65292;&#37027;&#20040;&#25152;&#26377;&#26684;&#23376;&#37117;&#20844;&#24320;</span>
                    grid[i][j].ShowGrid();

                sprite-&gt;setTextureRect(IntRect(<span style="color: #228b22;">ORI_GRID_SIZE</span> * <span style="color: #a0522d;">grid</span>[i][j].GetShowGridType(), 0, <span style="color: #228b22;">ORI_GRID_SIZE</span>, <span style="color: #228b22;">ORI_GRID_SIZE</span>));
                sprite-&gt;setPosition(<span style="color: #228b22;">i</span> * <span style="color: #a0522d;">GRID_SIZE</span>, <span style="color: #228b22;">j</span> * <span style="color: #a0522d;">GRID_SIZE</span>);
                win-&gt;draw(*sprite);
            }
        }
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>;
    <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>;
    <span style="color: #228b22;">Grid</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
};

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);
    <span style="color: #228b22;">Map</span> <span style="color: #a0522d;">mp</span>;

    mp.init(&amp;win, &amp;s);
    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#21462;&#40736;&#26631;&#28857;&#20987;&#21040;&#30340;&#26684;&#23376;&#20301;&#32622;</span>
        <span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;

        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }

            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;&#40736;&#26631;&#24038;&#38190; &#21644; &#40736;&#26631;&#21491;&#38190; &#30340; &#25353;&#19979;&#20107;&#20214;</span>
            mp.handleMouseEvent(e, x, y);
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32472;&#22270;</span>
        mp.draw(x, y);
        win.display();
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:f9229bd4-bb1d-4095-bc4f-4c12a773e46f" class="outline-3">
<h3 id="h:f9229bd4-bb1d-4095-bc4f-4c12a773e46f">文件拆分</h3>
<div class="outline-text-3" id="text-h:f9229bd4-bb1d-4095-bc4f-4c12a773e46f">
<p>
这个时候我们发现这个文件行数太多了，所以我们想办法把类拆到其它文件去。首先，先把 Grid 类的内容拆出去，新建一个 Grid.h 文件，实现如下：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#pragma</span> once

<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);

<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Grid</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Grid</span>() {
        m_realGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
        m_showGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_realGridType = realGType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
        m_showGridType = realGType;
    }
    <span style="color: #228b22;">GridType</span> <span style="color: #0000ff;">GetShowGridType</span>() {
        <span style="color: #a020f0;">return</span> m_showGridType;
    }
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">ShowGrid</span>() {
        m_showGridType = m_realGridType;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span> {
        <span style="color: #a020f0;">return</span> m_showGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
    }
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_realGridType</span>;
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_showGridType</span>;
};
</pre>
</div>

<p>
然后在 main.cpp 里面，写上这么一句话：
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Grid.h"</span>
</pre>
</div>

<p>
这时候，我们希望 .h 文件里面不要有函数的实现，只保留声明。然后在源文件里，新建一个 Grid.cpp 文件，把函数的实现写在这个文件里。
</p>

<p>
const.h
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#pragma</span> once
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">DIR</span>[8][2] = {
    {-1,-1},{-1,0},{-1,1},
    {0,-1},{0,1},
    {1,-1},{1,0},{1,1},
};
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ORI_GRID_SIZE</span> = 96;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">GRID_SIZE</span> = 48;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_COL</span> = 15;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">MAP_ROW</span> = 10;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_W</span> = GRID_SIZE * (1 + MAP_COL + 1);
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">WIN_H</span> = GRID_SIZE * (1 + MAP_ROW + 1);

<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">GridType</span> {
    <span style="color: #a0522d;">GT_EMPTY</span> = 0,
    <span style="color: #a0522d;">GT_COUNT_1</span> = 1,
    <span style="color: #a0522d;">GT_COUNT_2</span> = 2,
    <span style="color: #a0522d;">GT_COUNT_3</span> = 3,
    <span style="color: #a0522d;">GT_COUNT_4</span> = 4,
    <span style="color: #a0522d;">GT_COUNT_5</span> = 5,
    <span style="color: #a0522d;">GT_COUNT_6</span> = 6,
    <span style="color: #a0522d;">GT_COUNT_7</span> = 7,
    <span style="color: #a0522d;">GT_COUNT_8</span> = 8,
    <span style="color: #a0522d;">GT_BOMB</span> = 9,
    <span style="color: #a0522d;">GT_HIDE</span> = 10,
    <span style="color: #a0522d;">GT_FLAG</span> = 11
};
</pre>
</div>

<p>
Grid.h
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#pragma</span> once
<span style="color: #483d8b;">#include</span> &#8220;<span style="color: #a020f0;">const</span>.h&#8221;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Grid</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #0000ff;">Grid</span>();
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>);
    <span style="color: #228b22;">GridType</span> <span style="color: #0000ff;">GetShowGridType</span>();
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">ShowGrid</span>();
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span>;
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span>;
    <span style="color: #228b22;">bool</span> <span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span>;
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_realGridType</span>;
    <span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">m_showGridType</span>;
};
</pre>
</div>

<p>
Grid.cpp 如下：
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Grid.h"</span>

<span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">Grid</span>() {
    m_realGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
    m_showGridType = <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
}

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">SetRealGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
    m_realGridType = realGType;
}
<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">SetShowGridType</span>(<span style="color: #228b22;">GridType</span> <span style="color: #a0522d;">realGType</span>) {
    m_showGridType = realGType;
}
<span style="color: #228b22;">GridType</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">GetShowGridType</span>() {
    <span style="color: #a020f0;">return</span> m_showGridType;
}
<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">ShowGrid</span>() {
    m_showGridType = m_realGridType;
}
<span style="color: #228b22;">bool</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">IsEmpty</span>() <span style="color: #a020f0;">const</span> {
    <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_EMPTY;
}
<span style="color: #228b22;">bool</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">IsRealBomb</span>() <span style="color: #a020f0;">const</span> {
    <span style="color: #a020f0;">return</span> m_realGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
}
<span style="color: #228b22;">bool</span> <span style="color: #008b8b;">Grid</span>::<span style="color: #0000ff;">IsShowBomb</span>() <span style="color: #a020f0;">const</span> {
    <span style="color: #a020f0;">return</span> m_showGridType == <span style="color: #008b8b;">GridType</span>::GT_BOMB;
}
</pre>
</div>

<p>
同样，在实现一个 Map.h 和 Map.cpp。
</p>

<p>
Map.h
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#pragma</span> once

<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Grid.h"</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Map</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>);

<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>;
    <span style="color: #228b22;">Sprite</span>*    <span style="color: #a0522d;">sprite</span>;
    <span style="color: #228b22;">Grid</span>      <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
};
</pre>
</div>

<p>
Map.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Map.h"</span>

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">init</span>(<span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>) {
    <span style="color: #a020f0;">this</span>-&gt;win = win;
    <span style="color: #a020f0;">this</span>-&gt;sprite = sprite;

    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
            <span style="color: #a020f0;">if</span> (rand() % 6 == 0) {
                grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
            }
            <span style="color: #a020f0;">else</span> {
                grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
            }
        }
    }
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                    <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                        ++cnt;
                    }
                }
                <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                    grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
                }
            }
        }
    }
}

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
    <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
        <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
            grid[x][y].ShowGrid();
        }
        <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
            grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
        }
    }
}

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
    sprite-&gt;setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb()) {
                grid[i][j].ShowGrid();
            }
            sprite-&gt;setTextureRect(IntRect(ORI_GRID_SIZE * grid[i][j].GetShowGridType(), 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
            sprite-&gt;setPosition(i * GRID_SIZE, j * GRID_SIZE);
            win-&gt;draw(*sprite);
        }
    }
}
</pre>
</div>

<p>
main.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Grid.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Map.h"</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">RenderWindow</span> <span style="color: #a0522d;">win</span>(VideoMode(WIN_W, WIN_H), L<span style="color: #8b2252;">"&#25195;&#38647;"</span>);
    <span style="color: #228b22;">Texture</span> <span style="color: #a0522d;">t</span>;
    t.loadFromFile(<span style="color: #8b2252;">"mine.png"</span>);
    <span style="color: #228b22;">Sprite</span> <span style="color: #a0522d;">s</span>(t);
    <span style="color: #228b22;">Map</span> <span style="color: #a0522d;">mp</span>;

    mp.init(&amp;win, &amp;s);
    <span style="color: #a020f0;">while</span> (win.isOpen()) {
        <span style="color: #228b22;">Event</span> <span style="color: #a0522d;">e</span>;
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#21462;&#40736;&#26631;&#28857;&#20987;&#21040;&#30340;&#26684;&#23376;&#20301;&#32622;</span>
        <span style="color: #228b22;">Vector2i</span> <span style="color: #a0522d;">pos</span> = <span style="color: #008b8b;">Mouse</span>::getPosition(win);
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = pos.x / GRID_SIZE;
        <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = pos.y / GRID_SIZE;

        <span style="color: #a020f0;">while</span> (win.pollEvent(e)) {
            <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::Closed) {
                <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"&#25353;&#19979;&#20851;&#38381;&#25353;&#38062;"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
                win.close();
            }

            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;&#40736;&#26631;&#24038;&#38190; &#21644; &#40736;&#26631;&#21491;&#38190; &#30340; &#25353;&#19979;&#20107;&#20214;</span>
            mp.handleMouseEvent(e, x, y);
        }
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32472;&#22270;</span>
        mp.draw(x, y);
        win.display();
    }
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
<p>
这样一来，我们的 main 函数就变得非常清晰了。所以面向对象编程，会让代码变得简单。
</p>
</div>
</div>
<div id="outline-container-h:153bb32e-01e9-4ef7-8329-edcffa2df0ab" class="outline-3">
<h3 id="h:153bb32e-01e9-4ef7-8329-edcffa2df0ab">游戏重开</h3>
<div class="outline-text-3" id="text-h:153bb32e-01e9-4ef7-8329-edcffa2df0ab">
<p>
然后一个游戏结束以后，我们希望它能够重开，在 Map 中，引入一个私有成员变量 isRunning，并且引入一个 initGame 的函数，围绕 isRuning 进行逻辑修改。
</p>

<p>
一旦按到一个雷，那么 isRuning 就从 true 变成 false，然后左键按下的时候，根据 isRunning 是 true 还是 false 做不同的处理，如果为 true，则保留原先的逻辑；如果为 false，则重新初始化游戏，开始新的一局。
Map.h
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#pragma</span> once
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;SFML/Graphics.hpp&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Grid.h"</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #008b8b;">sf</span>;

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Map</span> {
<span style="color: #a020f0;">public</span>:
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">initGame</span>();
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>);
<span style="color: #a020f0;">private</span>:
    <span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>;
    <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>;
    <span style="color: #228b22;">Grid</span> <span style="color: #a0522d;">grid</span>[MAP_COL + 1][MAP_ROW + 1];
    <span style="color: #228b22;">bool</span> <span style="color: #a0522d;">isRunning</span>;
};
</pre>
</div>

<p>
Map.cpp
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"Map.h"</span>

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">init</span>(<span style="color: #228b22;">RenderWindow</span>* <span style="color: #a0522d;">win</span>, <span style="color: #228b22;">Sprite</span>* <span style="color: #a0522d;">sprite</span>) {
    <span style="color: #a020f0;">this</span>-&gt;win = win;
    <span style="color: #a020f0;">this</span>-&gt;sprite = sprite;
    initGame();
}

<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">initGame</span>() {
    <span style="color: #a020f0;">this</span>-&gt;isRunning = <span style="color: #008b8b;">true</span>;
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            grid[i][j].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_HIDE);
            <span style="color: #a020f0;">if</span> (rand() % 6 == 0) { <span style="color: #b22222;">// </span><span style="color: #b22222;">1/6 &#30340;&#27010;&#29575;&#26159;&#28856;&#24377;&#65292;5/6&#30340;&#27010;&#29575;&#26159;&#31354;&#12290;</span>
                grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_BOMB);
            }
            <span style="color: #a020f0;">else</span> {
                grid[i][j].SetRealGridType(<span style="color: #008b8b;">GridType</span>::GT_EMPTY);
            }
        }
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#32479;&#35745;&#27599;&#20010;&#38750;&#28856;&#24377;&#30340;&#26684;&#23376;&#30340;&#21608;&#22260;&#20843;&#20010;&#26041;&#21521;&#65292;&#36827;&#34892;&#35745;&#25968;&#65292;&#20174;&#32780;&#25913;&#21464;&#24403;&#21069;&#26684;&#23376;&#30340;&#31867;&#22411;</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (grid[i][j].IsEmpty()) {
                <span style="color: #228b22;">int</span> <span style="color: #a0522d;">cnt</span> = 0;
                <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">k</span> = 0; k &lt; 8; ++k) {
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">ti</span> = i + DIR[k][0];
                    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tj</span> = j + DIR[k][1];
                    <span style="color: #a020f0;">if</span> (grid[ti][tj].IsRealBomb()) {
                        ++cnt;
                    }
                }
                <span style="color: #a020f0;">if</span> (cnt &gt; 0) {
                    grid[i][j].SetRealGridType((<span style="color: #228b22;">GridType</span>)cnt);
                }
            }
        }
    }
}
<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">handleMouseEvent</span>(<span style="color: #228b22;">Event</span>&amp; <span style="color: #a0522d;">e</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
    <span style="color: #a020f0;">if</span> (e.type == <span style="color: #008b8b;">Event</span>::MouseButtonPressed) {
        <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Left) {
            <span style="color: #a020f0;">if</span> (isRunning) {
                grid[x][y].ShowGrid();
                <span style="color: #a020f0;">if</span> (grid[x][y].IsShowBomb()) {
                    isRunning = <span style="color: #008b8b;">false</span>;
                }
            }
            <span style="color: #a020f0;">else</span> {
                initGame();
            }
        }
        <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (e.key.code == <span style="color: #008b8b;">Mouse</span>::Right) {
            grid[x][y].SetShowGridType(<span style="color: #008b8b;">GridType</span>::GT_FLAG);
        }
    }
}
<span style="color: #228b22;">void</span> <span style="color: #008b8b;">Map</span>::<span style="color: #0000ff;">draw</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
    sprite-&gt;setScale(Vector2f(GRID_SIZE * 1.0 / ORI_GRID_SIZE, GRID_SIZE * 1.0 / ORI_GRID_SIZE));
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 1; i &lt;= MAP_COL; ++i) {
        <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span> = 1; j &lt;= MAP_ROW; ++j) {
            <span style="color: #a020f0;">if</span> (!isRunning) <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#24403;&#21069;&#30340;&#26684;&#23376;&#34987;&#30830;&#35748;&#26159;&#38647;&#65292;&#37027;&#20040;&#25152;&#26377;&#26684;&#23376;&#37117;&#20844;&#24320;</span>
                grid[i][j].ShowGrid();

            sprite-&gt;setTextureRect(IntRect(ORI_GRID_SIZE * grid[i][j].GetShowGridType(), 0, ORI_GRID_SIZE, ORI_GRID_SIZE));
            sprite-&gt;setPosition(i * GRID_SIZE, j * GRID_SIZE);
            win-&gt;draw(*sprite);
        }
    }
}
</pre>
</div>
</div>
</div>
</section>
</div>
<div id="postamble" class="status">
    <div class=bar data-astro-cid-p3givckg>
        <div class=list data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:gnuemacs height=1em viewBox="0 0 24 24" width=1em>
                    <title>emacs</title>
                    <symbol id=ai:simple-icons:gnuemacs>
                        <path d="M12 24C5.448 24 .118 18.617.118 12S5.448 0 12 0s11.882 5.383 11.882 12S18.552 24 12 24zM12 .661C5.813.661.779 5.748.779 12S5.813 23.339 12 23.339S23.221 18.253 23.221 12S18.187.661 12 .661zM8.03 20.197s.978.069 2.236-.042c.51-.045 2.444-.235 3.891-.552c0 0 1.764-.377 2.707-.725c.987-.364 1.524-.673 1.766-1.11c-.011-.09.074-.408-.381-.599c-1.164-.488-2.514-.4-5.185-.457c-2.962-.102-3.948-.598-4.472-.997c-.503-.405-.25-1.526 1.907-2.513c1.086-.526 5.345-1.496 5.345-1.496c-1.434-.709-4.109-1.955-4.659-2.224c-.482-.236-1.254-.591-1.421-1.021c-.19-.413.448-.768.804-.87c1.147-.331 2.766-.536 4.24-.56c.741-.012.861-.059.861-.059c1.022-.17 1.695-.869 1.414-1.976c-.252-1.13-1.579-1.795-2.84-1.565c-1.188.217-4.05 1.048-4.05 1.048c3.539-.031 4.131.028 4.395.398c.156.218-.071.518-1.015.672c-1.027.168-3.163.37-3.163.37c-2.049.122-3.492.13-3.925 1.046c-.283.599.302 1.129.558 1.46c1.082 1.204 2.646 1.853 3.652 2.331c.379.18 1.49.52 1.49.52c-3.265-.18-5.619.823-7.001 1.977c-1.562 1.445-.871 3.168 2.33 4.228c1.891.626 2.828.921 5.648.667c1.661-.09 1.923-.036 1.939.1c.023.192-1.845.669-2.355.816c-1.298.374-4.699 1.129-4.716 1.133z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:gnuemacs></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Emacs</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:org height=1em viewBox="0 0 24 24" width=1em>
                    <title>org-mode</title>
                    <symbol id=ai:simple-icons:org>
                        <path d="M17.169 0c-.566.004-2.16 3.312-3.376 5.94a2.19 2.19 0 0 1-.408-1.267c-.03-.582-1.089.237-.936 1.275c-.068-.035-1.26.227-1.26.23c-.23-.93-.802-1.618-1.15-.563c-.701 1.663-.88 2.984.115 4.585c-.908 4.058-6.948 6.053-6.32 9.33c.175.004 1.634 3.48 6.337 2.057c5.557-1.577 8.624 2.116 8.978 2.375c.52.526-1.348-4.573-5.302-6.865c-2.339-1.276-.87-3.474-.703-4.25c0 0 1.874 1.312 3.232-.692c1.227.316 2.05-.224 3.105.158c.64.28 3.336.11 2.334-1.396c-.148.129.07.27-.075.46c-.043.056-.128.232-.408.315c-.314.149-.83.27-1.43-.37c-.434-.32-.748-.04-.992-.063c.152-.098.577-.315 1.264-.315c.388 0 .594.336.854.338c.174 0 .685-.262.787-.365c.63-.41.697-.278 1.012-.905c.17-.759-.215-.92-.332-1.129c-.032-.483-.436-.67-.919-.326c-1.106-.198-2.192-.105-2.728-.15c-1.175-.164-2.153-.786-2.153-.786c.143-.19.075-.6-.842-.628c-.315-.104-.45-.2-.745-.307c.61-1.37.674-2.007 1.418-4.004c.261-1.053 1.039-2.685.643-2.682zm-4.297 8.093c.03-.086.443.138.952.176c.395.03.805.048 1.296-.025c.03-.005.172.095-.15.194c-.02.01-.062-.01-.065.196c0 .022-.01.04-.02.046c-.15.152-.708.223-1.065.1c-.436-.17-.482-.316-.517-.443c-.305-.147-.47-.123-.43-.244zM9.685 10.2C8.86 9 8.929 8.36 8.96 7.256C7.961 8.288 6.855 8.3 5.18 8.58c-1.299.234-3.657 2.447-4.025 4.742c-.043.608-.08 2.183.424 3.498c.492 1.13.828 1.727 1.844 2.335c-.882-3.169 5.296-5.33 6.263-8.955z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:org></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Orgmode</p>
                </div>
            </span>
            <a href=/donations.html class=entry data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:astro height=1em viewBox="0 0 24 24" width=1em>
                    <title>Donations</title>
                    <symbol id=ai:simple-icons:astro>
                        <path d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.158 3.158 0 0 1-1.407-1.188a3.31 3.31 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165h.002zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614c.302 0 .57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727l-5.516 14.99z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:astro></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>打赏</p>
                </div>
            </span>
            </a>
            <span class=entry data-astro-cid-p3givckg>
                <svg xmlns="http://www.w3.org/2000/svg" class=heading data-astro-cid-p3givckg data-icon=simple-icons:copyright width="1em" height="1em" viewBox="0 0 24 24">
                    <title>Copyright</title>
                    <path fill="currentColor" d="M19 2a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm-5 5h-4a1 1 0 0 0-1 1l.007.117A1 1 0 0 0 10 9h3v5a1 1 0 0 1-1.993.117L11 14a1 1 0 0 0-2 0a3 3 0 0 0 6 0V8a1 1 0 0 0-1-1" />
                    <use xlink:href=#ai:simple-icons:copyright></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>© 2025 Jasper Hsu</p>
                </div>
            </span>
        </div>
        <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="list license" data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Creative Commons</title>
                    <symbol id=ai:fa6-brands:creative-commons>
                        <path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Creative Commons</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-by height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Attribute</title>
                    <symbol id=ai:fa6-brands:creative-commons-by>
                        <path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3c3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7c3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-by></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Attribute</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-nc height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Noncommercial</title>
                    <symbol id=ai:fa6-brands:creative-commons-nc>
                        <path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256C0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9c0 110.9 92.1 202.4 203.7 202.4c122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2c0-6.2-2.2-11.2-6.6-15.1c-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1c53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1c0-57-19.8-105-59.3-143.9c-39.3-39.9-87.2-59.8-143.6-59.8z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-nc></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Noncommercial</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-sa height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Share Alike</title>
                    <symbol id=ai:fa6-brands:creative-commons-sa>
                        <path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7c99.8 0 127.5 82.5 127.5 134.2c0 63.6-41 132.9-128.9 132.9c-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2c23.3 0 58-18.2 58-82.8c0-82.5-49.1-80.6-56.7-80.6c-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2l-49-49.2h19.4z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-sa></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Share Alike</p>
                </div>
            </span>
        </a>
    </div>
<!--
<script type="text/javascript" src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.min.js"></script>
<div id="back-to-top" class=""><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></div>
-->
</div>
</body>
</html>
