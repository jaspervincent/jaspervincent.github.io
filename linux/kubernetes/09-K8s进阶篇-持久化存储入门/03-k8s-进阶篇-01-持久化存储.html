<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kubernetes: k8s è¿›é˜¶ç¯‡-æŒä¹…åŒ–å­˜å‚¨</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/static/font.css"/>
<link rel="stylesheet" type="text/css" href="/static/drollery.e825b870.css"/>
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@jasperhsu">
<meta name="google-adsense-account" content="ca-pub-1741779893655624">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1741779893655624" crossorigin="anonymous"></script>
</head>
<body>
<header id="preamble" class="status">
<header class="{className}" data-astro-cid-3ef6ksr2>
  <div class=header-branding data-astro-cid-g2lrb5xm>
      <span class=header-text data-astro-cid-g2lrb5xm>
          <span class=dropcap data-astro-cid-g2lrb5xm aria-hidden=true>
              <span class=actual data-astro-cid-g2lrb5xm>J</span>
              <span class=rest data-astro-cid-g2lrb5xm>asper Hsu</span>
              <span class=period data-astro-cid-g2lrb5xm>.</span>
          </span>
          <span class=sr-only data-astro-cid-g2lrb5xm>Drollery</span>
      </span>
      <img alt="Medieval drollery of a knight on a horse" class=spring decoding=async height=250 loading=lazy src=/images/knight-horse.a96eee7d_Z1WCOYs.webp width=68 data-astro-cid-g2lrb5xm>
  </div>

  <nav data-astro-cid-pux6a34n>
      <span class=flower2 data-astro-cid-pux6a34n>M</span>
      <a href=/jcodelog.html class=nobracket data-astro-cid-pux6a34n>æŠ€æœ¯</a>
      <span class=flower2 data-astro-cid-pux6a34n>K</span>
      <a href=/reading/index.html class=nobracket data-astro-cid-pux6a34n>é˜…è¯»</a>
      <span class=flower2 data-astro-cid-pux6a34n>J</span>
      <a href=/archives.html class=nobracket data-astro-cid-pux6a34n>å½’æ¡£</a>
      <span class=flower2 data-astro-cid-pux6a34n>L</span>
      <a href=/link/index.html class=nobracket data-astro-cid-pux6a34n>å‹é“¾</a>
      <span class=flower2 data-astro-cid-pux6a34n>M</span>
      <a href=/about.html class=nobracket data-astro-cid-pux6a34n>å…³äº</a>
      <span class=flower2 data-astro-cid-pux6a34n>J</span>
  </nav>


  <div class="container" data-astro-cid-3ef6ksr2>
    <p class="info" data-astro-cid-3ef6ksr2>
              ğŸ† æ¬¢è¿æ¥åˆ°æœ¬ç«™ï¼š
              <a href="https://xuchangwei.com/">https://xuchangwei.com/</a>ã€‚
              <strong>å¸Œæœ›è¿™é‡Œæœ‰ä½ æ„Ÿå…´è¶£çš„å†…å®¹</strong>ã€‚
            </p>
  </div>
  <div id=borderArtWrapper class="tt1" data-astro-cid-5hce7sga data-turbo-permanent>
      <script>
          var man, shakeCount = 0, noSound = new Audio("/audio/effects/no.m4a"), screamSound = new Audio("/audio/effects/scream.m4a");
          function animateManShakeHandler() {
              man.removeEventListener("animationend", animateManShakeHandler, !1),
              shakeCount += 1,
              man.classList.remove("shakeMan")
          }
          function animateManFallHandler() {
              man.removeEventListener("animationend", animateManFallHandler, !1),
              man.classList.add("hide")
          }
          function animateMan() {
              man = man ?? document.getElementById("borderMan"),
              3 === shakeCount ? (man.classList.add("fallMan"),
              screamSound.play(),
              man.addEventListener("animationend", animateManFallHandler, !1)) : (man.classList.add("shakeMan"),
              noSound.play(),
              man.addEventListener("animationend", animateManShakeHandler, !1))
          }
      </script>
      <div class=borderArt data-astro-cid-5dda5nwp id=articleBorder>
          <img alt="flowery border with man falling" decoding=async height=620 loading=lazy src=/images/border-vines-no-man.b7d246cc_DRxSe.webp width=909 class=border data-astro-cid-5dda5nwp>
          <div class=fallWrapper data-astro-cid-5dda5nwp>
              <img alt="flowery border with man falling" decoding=async height=292 loading=lazy src=/images/man-no-vines.247a3187_Z2ioXNM.webp width=98 class=man data-astro-cid-5dda5nwp id=borderMan onclick=animateMan()>
          </div>
      </div>
  </div>
</header>
</header>
<main class="container" id="content" class="content">
<header>
<h1 class="title">Kubernetes: k8s è¿›é˜¶ç¯‡-æŒä¹…åŒ–å­˜å‚¨</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:f5e296f2-9387-4aee-a93c-9d4f02c677aa">k8såŸºç¡€ç¯‡-æŒä¹…åŒ–å­˜å‚¨</a>
<ul>
<li><a href="#h:39913076-d454-434d-b7bb-655a8c363ff1">Volumes</a>
<ul>
<li><a href="#h:7ba36a9b-dd22-49c9-b3fd-3525317f6c20">ä»‹ç»</a>
<ul>
<li><a href="#h:3fe7d4be-da74-427e-aea1-631e22c301e5">èƒŒæ™¯</a></li>
<li><a href="#h:4920ad83-8488-4d14-9f8b-f7a27496ad4f">å·çš„ç±»å‹</a></li>
</ul>
</li>
<li><a href="#h:6a45e227-9301-410f-9804-7beb787db1f4">emptyDir</a></li>
<li><a href="#h:25ae1f2d-9d30-4f88-9f01-1dcad79a40ed">hostPath æŒ‚è½½å®¿ä¸»æœºè·¯å¾„</a>
<ul>
<li><a href="#h:f4dab3ff-8da3-4888-b366-989002e14d1a">hostPath çš„ä¸€äº›ç”¨æ³•æœ‰</a></li>
<li><a href="#h:e34fbe21-3ac1-4eda-8941-b1d19d5eb52d">æ”¯æŒç±»å‹</a></li>
</ul>
</li>
<li><a href="#h:f6310502-2d5d-401e-b267-ddc3d9aa98cd">æŒ‚è½½ NFS è‡³å®¹å™¨</a>
<ul>
<li><a href="#h:b4772bc2-e804-4b43-8017-b9a7793f08da">å®‰è£… nfs æœåŠ¡</a></li>
<li><a href="#h:fe0ed7d8-9de1-4910-a0c8-432dfc44721e">volume nfs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:21925a77-be3e-4920-8d2f-986f018374dc">PV&amp;PVC</a>
<ul>
<li><a href="#h:3258d4f5-25ed-49d0-b546-9503f4a9b046">ä¸ºä»€ä¹ˆè¦å¼•å…¥ PV å’Œ PVC</a></li>
<li><a href="#h:504cfaf4-2ad2-4978-a0c5-07fdded7840f">PVã€PVCå›¾è§£</a></li>
<li><a href="#h:df0e4911-c0f3-4b9f-8706-b508f4d0d3fc">PV</a>
<ul>
<li><a href="#h:5ee2e8a9-6541-4f7d-b0e4-d4fb6846a68e">PV è®¿é—®å’Œå›æ”¶ç­–ç•¥</a></li>
<li><a href="#h:2f1478ee-e718-46bb-ab64-abb56f66454f">æ–‡ä»¶å­˜å‚¨ã€å—å­˜å‚¨ã€å¯¹è±¡å­˜å‚¨åŒºåˆ«</a></li>
<li><a href="#h:260d5061-2931-479a-91b8-efadfce2c699">åˆ›å»º NAS  æˆ– NFS ç±»å‹çš„ PV</a></li>
<li><a href="#h:333e72d4-4ca9-4a89-a427-ee366d7f7243">PV çŠ¶æ€</a></li>
<li><a href="#h:2f513651-8123-4ed1-8a30-d255db599472">åˆ›å»º hostPath ç±»å‹çš„ PV</a></li>
</ul>
</li>
<li><a href="#h:5cab6f6a-f294-4a09-baff-40e064b283ff">PVC</a>
<ul>
<li><a href="#h:3dfce5ee-acbf-4f95-a0a8-81bb2cd93665">PVC å¦‚ä½•ç»‘å®šåˆ° PV</a></li>
<li><a href="#h:21e372ef-a130-48ac-87de-c41ed8128770">PVC æŒ‚è½½ç¤ºä¾‹</a></li>
<li><a href="#h:60831fb1-bac2-4bd4-8b64-7b8419099e65">PVC åˆ›å»ºå’ŒæŒ‚è½½å¤„ç† Pending çš„åŸå› </a></li>
</ul>
</li>
<li><a href="#h:cd448add-22b2-442a-a54c-6bfea0e331ed">æ”¹å˜é»˜è®¤å­˜å‚¨ç±»</a></li>
<li><a href="#h:dad680e5-2a6d-47f7-88cb-63cfe23a8fe9">ä½¿ç”¨NFSåšä¸ºPVC</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li>TAGS: <a href="../index.html">Kubernetes</a></li>
</ul>
<section id="outline-container-h:f5e296f2-9387-4aee-a93c-9d4f02c677aa" class="outline-2">
<h2 id="h:f5e296f2-9387-4aee-a93c-9d4f02c677aa">k8såŸºç¡€ç¯‡-æŒä¹…åŒ–å­˜å‚¨</h2>
<div class="outline-text-2" id="text-h:f5e296f2-9387-4aee-a93c-9d4f02c677aa">
</div>
<div id="outline-container-h:39913076-d454-434d-b7bb-655a8c363ff1" class="outline-3">
<h3 id="h:39913076-d454-434d-b7bb-655a8c363ff1">Volumes</h3>
<div class="outline-text-3" id="text-h:39913076-d454-434d-b7bb-655a8c363ff1">
</div>
<div id="outline-container-h:7ba36a9b-dd22-49c9-b3fd-3525317f6c20" class="outline-4">
<h4 id="h:7ba36a9b-dd22-49c9-b3fd-3525317f6c20">ä»‹ç»</h4>
<div class="outline-text-4" id="text-h:7ba36a9b-dd22-49c9-b3fd-3525317f6c20">
<p>
å®˜æ–¹ï¼š
</p>

<p>
<a href="http://docs.kubernetes.org.cn/429.html">http://docs.kubernetes.org.cn/429.html</a>
</p>

<p>
<a href="https://kubernetes.io/zh/docs/concepts/storage/volumes/">https://kubernetes.io/zh/docs/concepts/storage/volumes/</a>
</p>

<p>
é»˜è®¤æƒ…å†µä¸‹å®¹å™¨ä¸­çš„ç£ç›˜æ–‡ä»¶æ˜¯éæŒä¹…åŒ–çš„ï¼Œå¯¹äºè¿è¡Œåœ¨å®¹å™¨ä¸­çš„åº”ç”¨æ¥è¯´é¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ï¼šå½“å®¹å™¨æŒ‚æ‰ kubelet å°†é‡å¯å¯åŠ¨å®ƒæ—¶ï¼Œæ–‡ä»¶å°†ä¼šä¸¢å¤±ï¼›ç¬¬äºŒï¼šå½“ Pod ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œå®¹å™¨ä¹‹é—´éœ€è¦å…±äº«æ–‡ä»¶æ—¶ã€‚Kubernetes çš„ Volume è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚
</p>

<p>
ä¸€äº›éœ€è¦æŒä¹…åŒ–æ•°æ®çš„ç¨‹åºæ‰ä¼šç”¨åˆ° Volumesï¼Œæˆ–è€…ä¸€äº›éœ€è¦å…±äº«æ•°æ®çš„å®¹å™¨éœ€è¦ Volumesã€‚
</p>

<p>
å¦‚
</p>
<ul class="org-ul">
<li>redis-cluster çš„ node.conf çš„ ip ä¼šå˜çš„ï¼Œä¸èƒ½ç”¨ configmapï¼Œéœ€è¦ç”¨ volumes å­˜å‚¨ã€‚</li>
<li>æ—¥å¿—æ”¶é›†çš„éœ€è¦ï¼šéœ€è¦çš„åº”ç”¨ç¨‹åºçš„å®¹å™¨é‡ŒåŠ ä¸€ä¸ª sidecarï¼Œè¿™ä¸ªå®¹å™¨æ˜¯ä¸€ä¸ªæ”¶é›†æ—¥å¿—çš„å®¹å™¨ï¼Œå¦‚ filebeatï¼Œå®ƒé€šè¿‡ volumes å…±äº«åº”ç”¨ç¨‹åºçš„æ—¥å¿—æ–‡ä»¶ç›®å½•ã€‚</li>
</ul>
</div>
<div id="outline-container-h:3fe7d4be-da74-427e-aea1-631e22c301e5" class="outline-5">
<h5 id="h:3fe7d4be-da74-427e-aea1-631e22c301e5">èƒŒæ™¯</h5>
<div class="outline-text-5" id="text-h:3fe7d4be-da74-427e-aea1-631e22c301e5">
<p>
åœ¨Dockerä¸­ä¹Ÿæœ‰ä¸€ä¸ª <a href="https://docs.docker.com/userguide/dockervolumes/">docker Volume</a> çš„æ¦‚å¿µ ï¼ŒDockerçš„Volumeåªæ˜¯ç£ç›˜ä¸­çš„ä¸€ä¸ªç›®å½•ï¼Œç”Ÿå‘½å‘¨æœŸä¸å—ç®¡ç†ã€‚å½“ç„¶Dockerç°åœ¨ä¹Ÿæä¾›Volumeå°†æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼Œä½†æ”¯æŒåŠŸèƒ½æ¯”è¾ƒå°‘ï¼ˆä¾‹å¦‚ï¼Œå¯¹äºDocker 1.7ï¼Œæ¯ä¸ªå®¹å™¨åªå…è®¸æŒ‚è½½ä¸€ä¸ªVolumeï¼Œå¹¶ä¸”ä¸èƒ½å°†å‚æ•°ä¼ é€’ç»™Volumeï¼‰ã€‚
</p>

<p>
å¦ä¸€æ–¹é¢ï¼ŒKubernetes Volumeå…·æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸ - ä¸podç›¸åŒã€‚å› æ­¤ï¼ŒVolumeçš„ç”Ÿå‘½å‘¨æœŸæ¯”Podä¸­è¿è¡Œçš„ä»»ä½•å®¹å™¨è¦æŒä¹…ï¼Œåœ¨å®¹å™¨é‡æ–°å¯åŠ¨æ—¶èƒ½å¯ä»¥ä¿ç•™æ•°æ®ï¼Œå½“ç„¶ï¼Œå½“Podè¢«åˆ é™¤ä¸å­˜åœ¨æ—¶ï¼ŒVolumeä¹Ÿå°†æ¶ˆå¤±ã€‚æ³¨æ„ï¼ŒKubernetesæ”¯æŒè®¸å¤šç±»å‹çš„Volumeï¼ŒPodå¯ä»¥åŒæ—¶ä½¿ç”¨ä»»æ„ç±»å‹/æ•°é‡çš„Volumeã€‚
</p>

<p>
å†…éƒ¨å®ç°ä¸­ï¼Œä¸€ä¸ªVolumeåªæ˜¯ä¸€ä¸ªç›®å½•ï¼Œç›®å½•ä¸­å¯èƒ½æœ‰ä¸€äº›æ•°æ®ï¼Œpodçš„å®¹å™¨å¯ä»¥è®¿é—®è¿™äº›æ•°æ®ã€‚è‡³äºè¿™ä¸ªç›®å½•æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€æ”¯æŒå®ƒçš„ä»‹è´¨ã€å…¶ä¸­çš„æ•°æ®å†…å®¹æ˜¯ä»€ä¹ˆï¼Œè¿™äº›éƒ½ç”±ä½¿ç”¨çš„ç‰¹å®šVolumeç±»å‹æ¥å†³å®šã€‚
</p>

<p>
è¦ä½¿ç”¨Volumeï¼Œpodéœ€è¦æŒ‡å®šVolumeçš„ç±»å‹å’Œå†…å®¹ï¼ˆ`spec.volumes`å­—æ®µï¼‰ï¼Œå’Œæ˜ å°„åˆ°å®¹å™¨çš„ä½ç½®ï¼ˆ`spec.containers.volumeMounts`å­—æ®µï¼‰ã€‚
</p>
</div>
</div>
<div id="outline-container-h:4920ad83-8488-4d14-9f8b-f7a27496ad4f" class="outline-5">
<h5 id="h:4920ad83-8488-4d14-9f8b-f7a27496ad4f">å·çš„ç±»å‹</h5>
<div class="outline-text-5" id="text-h:4920ad83-8488-4d14-9f8b-f7a27496ad4f">
<p>
Kubernetesæ”¯æŒVolumeç±»å‹æœ‰ï¼š
</p>
<ul class="org-ul">
<li>configMap</li>
<li>secret</li>
<li>emptyDir</li>
<li>hostPath</li>
<li>nfs</li>
<li>persistentVolumeClaim</li>
<li>local</li>
<li>projected</li>
<li>csi</li>
<li>iscsi</li>
<li>rbd</li>
<li>cephfs</li>
<li>fc (fibre channel)</li>
<li>downwardAPI</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:6a45e227-9301-410f-9804-7beb787db1f4" class="outline-4">
<h4 id="h:6a45e227-9301-410f-9804-7beb787db1f4">emptyDir</h4>
<div class="outline-text-4" id="text-h:6a45e227-9301-410f-9804-7beb787db1f4">
<p>
ä½¿ç”¨emptyDirï¼Œå½“Podåˆ†é…åˆ° Node ä¸Šæ—¶ï¼Œå°†ä¼šåˆ›å»ºemptyDirï¼Œå¹¶ä¸”åªè¦Nodeä¸Šçš„Podä¸€ç›´è¿è¡Œï¼ŒVolumeå°±ä¼šä¸€ç›´å­˜ã€‚å½“Podï¼ˆä¸ç®¡ä»»ä½•åŸå› ï¼‰ä»Nodeä¸Šè¢«åˆ é™¤æ—¶ï¼ŒemptyDirä¹ŸåŒæ—¶ä¼šåˆ é™¤ï¼Œå­˜å‚¨çš„æ•°æ®ä¹Ÿå°†æ°¸ä¹…åˆ é™¤ã€‚æ³¨ï¼šåˆ é™¤å®¹å™¨ä¸å½±å“emptyDirã€‚
</p>


<p>
é»˜è®¤æƒ…å†µä¸‹ï¼ŒemptyDirå·æ”¯æŒèŠ‚ç‚¹ä¸Šçš„ä»»ä½•ä»‹è´¨ï¼Œå¯èƒ½æ˜¯SSDã€ç£ç›˜æˆ–ç½‘ç»œå­˜å‚¨ï¼Œå…·ä½“å–å†³äºè‡ªèº«çš„ç¯å¢ƒã€‚å¯ä»¥å°†emptyDir.mediumå­—æ®µè®¾ç½®ä¸ºMemoryï¼Œè®©Kubernetesä½¿ç”¨tmpfsï¼ˆå†…å­˜æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œè™½ç„¶tmpfséå¸¸å¿«ï¼Œä½†æ˜¯tmpfsåœ¨èŠ‚ç‚¹é‡å¯æ—¶ï¼Œæ•°æ®åŒæ ·ä¼šè¢«æ¸…é™¤ï¼Œå¹¶ä¸”è®¾ç½®çš„å¤§å°ä¼šè¢«è®¡å…¥åˆ°Containerçš„å†…å­˜é™åˆ¶å½“ä¸­ã€‚
</p>

<p>
ç¤ºä¾‹ï¼Œç›´æ¥æŒ‡å®š emptyDir ä¸º`{}`å³å¯ï¼š
</p>

<div class="org-src-container">
<pre class="src src-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: nginx
  name: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - image: nginx:1.15.12
        name: nginx
        volumeMounts:
        - mountPath: /opt
          name: share-volume
      - image: busybox
        name: busybox
        command: ["/bin/sh", "-c", "sleep 3600"]
        volumeMounts:
        - mountPath: /mnt
          name: share-volume
      volumes:
      - name: share-volume
        emptyDir: {}
          #medium: Memory
</pre>
</div>

<p>
å¯åŠ¨podï¼Œå¹¶æŸ¥çœ‹çŠ¶æ€
</p>

<div class="org-src-container">
<pre class="src src-shell">kubectl apply -f pod_emptydir.yaml
kubectl get pod -owide
</pre>
</div>

<p>
emptyDiréªŒè¯
</p>
<div class="org-src-container">
<pre class="src src-shell">[jasper.xu@ip-10-204-9-241 j]$ kubectl  exec -it nginx-785b5bf7-65r4w -c nginx -- bash
root@nginx-785b5bf7-65r4w:/# df -hT
Filesystem     Type     Size  Used Avail Use% Mounted on
/dev/nvme0n1p1 xfs      100G   29G   72G  29% /opt

root@nginx-785b5bf7-65r4w:/# touch /opt/123
root@nginx-785b5bf7-65r4w:/# exit
<span style="color: #a020f0;">exit</span>

[jasper.xu@ip-10-204-9-241 j]$ kubectl  exec -it nginx-785b5bf7-65r4w -c busybox -- sh
/ <span style="color: #b22222;"># </span><span style="color: #b22222;">df -hT</span>
Filesystem           Type            Size      Used Available Use% Mounted on
/dev/nvme0n1p1       xfs           100.0G     28.6G     71.4G  29% /mnt
/ <span style="color: #b22222;"># </span><span style="color: #b22222;">ls /mnt/</span>
123
</pre>
</div>
</div>
</div>
<div id="outline-container-h:25ae1f2d-9d30-4f88-9f01-1dcad79a40ed" class="outline-4">
<h4 id="h:25ae1f2d-9d30-4f88-9f01-1dcad79a40ed">hostPath æŒ‚è½½å®¿ä¸»æœºè·¯å¾„</h4>
<div class="outline-text-4" id="text-h:25ae1f2d-9d30-4f88-9f01-1dcad79a40ed">
<p>
hostPathå…è®¸æŒ‚è½½Nodeä¸Šçš„æ–‡ä»¶ç³»ç»Ÿåˆ°Podé‡Œé¢å»ã€‚å¦‚æœPodéœ€è¦ä½¿ç”¨Nodeä¸Šçš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨hostPathã€‚
</p>

<p>
è­¦å‘Šï¼š
</p>
<ul class="org-ul">
<li>hostPath å·å­˜åœ¨è®¸å¤šå®‰å…¨é£é™©ï¼Œæœ€ä½³åšæ³•æ˜¯å°½å¯èƒ½é¿å…ä½¿ç”¨ HostPathã€‚ å½“å¿…é¡»ä½¿ç”¨ hostPath å·æ—¶ï¼Œå®ƒçš„èŒƒå›´åº”ä»…é™äºæ‰€éœ€çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½ã€‚</li>
<li>å¦‚æœé€šè¿‡ AdmissionPolicy é™åˆ¶ hostPath å¯¹ç‰¹å®šç›®å½•çš„è®¿é—®ï¼Œåˆ™å¿…é¡»è¦æ±‚ volumeMounts ä½¿ç”¨ readOnly æŒ‚è½½ä»¥ä½¿ç­–ç•¥ç”Ÿæ•ˆã€‚</li>
</ul>

<p>
ç¤ºä¾‹
</p>
</div>
<div id="outline-container-h:f4dab3ff-8da3-4888-b366-989002e14d1a" class="outline-5">
<h5 id="h:f4dab3ff-8da3-4888-b366-989002e14d1a">hostPath çš„ä¸€äº›ç”¨æ³•æœ‰</h5>
<div class="outline-text-5" id="text-h:f4dab3ff-8da3-4888-b366-989002e14d1a">
<ul class="org-ul">
<li>è¿è¡Œä¸€ä¸ªéœ€è¦è®¿é—® Docker å¼•æ“å†…éƒ¨æœºåˆ¶çš„å®¹å™¨ï¼›è¯·ä½¿ç”¨ hostPath æŒ‚è½½ /var/lib/docker è·¯å¾„ã€‚</li>
<li>åœ¨å®¹å™¨ä¸­è¿è¡Œ cAdvisor æ—¶ï¼Œä»¥ hostPath æ–¹å¼æŒ‚è½½ /sysã€‚</li>
<li>å…è®¸ Pod æŒ‡å®šç»™å®šçš„ hostPath åœ¨è¿è¡Œ Pod ä¹‹å‰æ˜¯å¦åº”è¯¥å­˜åœ¨ï¼Œæ˜¯å¦åº”è¯¥åˆ›å»ºä»¥åŠåº”è¯¥ä»¥ï§½ä¹ˆæ–¹å¼å­˜åœ¨ã€‚</li>
</ul>
</div>
</div>
<div id="outline-container-h:e34fbe21-3ac1-4eda-8941-b1d19d5eb52d" class="outline-5">
<h5 id="h:e34fbe21-3ac1-4eda-8941-b1d19d5eb52d">æ”¯æŒç±»å‹</h5>
<div class="outline-text-5" id="text-h:e34fbe21-3ac1-4eda-8941-b1d19d5eb52d">
<p>
é™¤äº†å¿…éœ€çš„ path å±æ€§ä¹‹å¤–ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§åœ°ä¸º hostPath å·æŒ‡å®š typeã€‚æ”¯æŒçš„ type å€¼å¦‚ä¸‹ï¼š
</p>

<ul class="org-ul">
<li>ç©ºå­—ç¬¦ä¸²ï¼ˆé»˜è®¤ï¼‰ç”¨äºå‘åå…¼å®¹ï¼Œè¿™æ„å‘³ç€åœ¨å®‰è£… hostPath å·ä¹‹å‰ä¸ä¼šæ‰§è¡Œä»»ä½•æ£€æŸ¥ã€‚</li>
<li>DirectoryOrCreate å¦‚æœåœ¨ç»™å®šè·¯å¾„ä¸Šä»€ä¹ˆéƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†æ ¹æ®éœ€è¦åˆ›å»ºç©ºç›®å½•ï¼Œæƒé™è®¾ç½®ä¸º 0755ï¼Œå…·æœ‰ä¸ kubelet ç›¸åŒçš„ç»„å’Œå±ä¸»ä¿¡æ¯ã€‚</li>
<li>Directory         åœ¨ç»™å®šï¤·å¾„ä¸Šå¿…é¡»å­˜åœ¨çš„ç›®å½•ã€‚</li>
<li>FileOrCreate   å¦‚æœåœ¨ç»™å®šè·¯å¾„ä¸Šä»€ä¹ˆéƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†åœ¨é‚£é‡Œæ ¹æ®éœ€è¦åˆ›å»ºç©ºæ–‡ä»¶ï¼Œæƒé™è®¾ç½®ä¸º 0644ï¼Œå…·æœ‰ä¸ kubelet ç›¸åŒçš„ç»„å’Œæ‰€æœ‰æƒã€‚ã€å‰æï¼šæ–‡ä»¶æ‰€åœ¨ç›®å½•å¿…é¡»å­˜åœ¨ï¼›ç›®å½•ä¸å­˜åœ¨åˆ™ä¸èƒ½åˆ›å»ºæ–‡ä»¶ã€‘</li>
<li>File                  åœ¨ç»™å®šè·¯å¾„ä¸Šå¿…é¡»å­˜åœ¨çš„æ–‡ä»¶ã€‚</li>
<li>Socket            åœ¨ç»™å®šè·¯å¾„ä¸Šå¿…é¡»å­˜åœ¨çš„ UNIX å¥—æ¥å­—ã€‚</li>
<li>CharDevice    åœ¨ç»™å®šè·¯å¾„ä¸Šå¿…é¡»å­˜åœ¨çš„å­—ç¬¦è®¾å¤‡ã€‚</li>
<li>BlockDevice   åœ¨ç»™å®šè·¯å¾„ä¸Šå¿…é¡»å­˜åœ¨çš„å—è®¾å¤‡ã€‚</li>
</ul>

<p>
èŒƒä¾‹ï¼š æŒ‚è½½å°åº¦æ—¶åŒº
</p>
<div class="org-src-container">
<pre class="src src-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: nginx
  name: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - image: nginx:1.15.12
        name: nginx
        volumeMounts:
        - mountPath: /etc/localtime
          name: time
      volumes:
      - hostPath:
          path: /usr/share/zoneinfo/Asia/Calcutta
          type: ""
        name: time
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:f6310502-2d5d-401e-b267-ddc3d9aa98cd" class="outline-4">
<h4 id="h:f6310502-2d5d-401e-b267-ddc3d9aa98cd">æŒ‚è½½ NFS è‡³å®¹å™¨</h4>
<div class="outline-text-4" id="text-h:f6310502-2d5d-401e-b267-ddc3d9aa98cd">
</div>
<div id="outline-container-h:b4772bc2-e804-4b43-8017-b9a7793f08da" class="outline-5">
<h5 id="h:b4772bc2-e804-4b43-8017-b9a7793f08da">å®‰è£… nfs æœåŠ¡</h5>
<div class="outline-text-5" id="text-h:b4772bc2-e804-4b43-8017-b9a7793f08da">
<p>
NFS æ˜¯Network File Systemçš„ç¼©å†™ï¼Œå³ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚Kubernetesä¸­é€šè¿‡ç®€å•åœ°é…ç½®å°±å¯ä»¥æŒ‚è½½NFSåˆ°Podä¸­ï¼Œè€ŒNFSä¸­çš„æ•°æ®æ˜¯å¯ä»¥æ°¸ä¹…ä¿å­˜çš„ï¼ŒåŒæ—¶NFSæ”¯æŒåŒæ—¶å†™æ“ä½œã€‚Podè¢«åˆ é™¤æ—¶ï¼ŒVolumeè¢«å¸è½½ï¼Œå†…å®¹è¢«ä¿ç•™ã€‚è¿™å°±æ„å‘³ç€NFSèƒ½å¤Ÿå…è®¸æˆ‘ä»¬æå‰å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè€Œä¸”è¿™äº›æ•°æ®å¯ä»¥åœ¨Podä¹‹é—´ç›¸äº’ä¼ é€’ã€‚
</p>

<p>
æ‰€æœ‰èŠ‚ç‚¹
</p>

<div class="org-src-container">
<pre class="src src-shell">yum install nfs-utils -y
</pre>
</div>

<p>
å®‰è£…nfsæœåŠ¡, node01
</p>

<div class="org-src-container">
<pre class="src src-shell">systemctl start nfs
sudo systemctl enable nfs

mkdir -p /data/nfs

vim /etc/exports
/data/nfs 10.4.0.0/24(rw,sync,no_subtree_check,no_root_squash)

exportfs -r

systemctl reload nfs-server
</pre>
</div>

<p>
master01
</p>

<div class="org-src-container">
<pre class="src src-shell">mount -t nfs 192.168.0.204:/data/nfs /mnt/
<span style="color: #483d8b;">cd</span> /mnt/
touch 123

unmount /mnt
</pre>
</div>
</div>
</div>
<div id="outline-container-h:fe0ed7d8-9de1-4910-a0c8-432dfc44721e" class="outline-5">
<h5 id="h:fe0ed7d8-9de1-4910-a0c8-432dfc44721e">volume nfs</h5>
<div class="outline-text-5" id="text-h:fe0ed7d8-9de1-4910-a0c8-432dfc44721e">
<p>
èŒƒä¾‹ï¼švolume nfs
</p>
<div class="org-src-container">
<pre class="src src-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: nginx
  name: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - image: nginx:1.15.12
        name: nginx
        volumeMounts:
        - mountPath: /opt
          name: nfs-volume
      volumes:
      - nfs:
          server: 192.168.0.204
          path: /data/nfs/test-dp
        name: nfs-volume
</pre>
</div>

<p>
volumesæŒ‚è½½
</p>

<p>
æ¡ˆä¾‹<a href="https://www.cnblogs.com/xiajq/p/11395211.html">https://www.cnblogs.com/xiajq/p/11395211.html</a>
</p>

<p>
ç”Ÿäº§ç¯å¢ƒä¸ç”¨nfsï¼Œä¹Ÿä¸ç›´æ¥ç”¨NFSï¼Œç”¨PVæ¥è¿æ¥ã€‚å¯ä»¥ç”¨äº‘æœåŠ¡å•†çš„æ¥å­˜å‚¨
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-h:21925a77-be3e-4920-8d2f-986f018374dc" class="outline-3">
<h3 id="h:21925a77-be3e-4920-8d2f-986f018374dc">PV&amp;PVC</h3>
<div class="outline-text-3" id="text-h:21925a77-be3e-4920-8d2f-986f018374dc">
</div>
<div id="outline-container-h:3258d4f5-25ed-49d0-b546-9503f4a9b046" class="outline-4">
<h4 id="h:3258d4f5-25ed-49d0-b546-9503f4a9b046">ä¸ºä»€ä¹ˆè¦å¼•å…¥ PV å’Œ PVC</h4>
<div class="outline-text-4" id="text-h:3258d4f5-25ed-49d0-b546-9503f4a9b046">
<p>
åªæœ‰ Volume æ— æ³•æ»¡è¶³ç”Ÿäº§éœ€æ±‚
</p>


<figure id="orge46936f">
<img src="./images/Snipaste_2022-09-15_22-54-35.png" alt="Snipaste_2022-09-15_22-54-35.png">

</figure>

<ul class="org-ul">
<li>å½“æŸä¸ªæ•°æ®å·ä¸å†è¢«æŒ‚è½½ä½¿ç”¨æ—¶ï¼Œé‡Œé¢çš„æ•°æ®å¦‚ä½•å¤„ç†ï¼Ÿ</li>
<li>å¦‚æœæƒ³è¦å®ç°åªè¯»æŒ‚è½½å¦‚ä½•å¤„ç†ï¼Ÿ</li>
<li>å¦‚æœæƒ³è¦åªèƒ½ä¸€ä¸ªPodæŒ‚è½½å¦‚ä½•å¤„ç†ï¼Ÿ</li>
<li>å¦‚ä½•åªå…è®¸æŸä¸ªPodä½¿ç”¨10Gçš„ç©ºé—´ï¼Ÿ</li>
</ul>

<p>
PersistentVolumeï¼šç®€ç§°PVï¼Œæ˜¯ç”±Kubernetesç®¡ç†å‘˜è®¾ç½®çš„å­˜å‚¨ï¼Œå¯ä»¥é…ç½®Cephã€NFSã€GlusterFSç­‰å¸¸ç”¨å­˜å‚¨é…ç½®ï¼Œç›¸å¯¹äºVolumeé…ç½®ï¼Œæä¾›äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€å¤§å°çš„é™åˆ¶ã€‚PVåˆ†ä¸ºé™æ€å’ŒåŠ¨æ€ï¼ˆStorageClassï¼‰ã€‚
</p>

<p>
PersistentVolumeClaimï¼šç®€ç§°PVCï¼Œæ˜¯å¯¹å­˜å‚¨PVçš„è¯·æ±‚ï¼Œè¡¨ç¤ºéœ€è¦ä»€ä¹ˆç±»å‹çš„PVï¼Œéœ€è¦å­˜å‚¨çš„æŠ€æœ¯äººå‘˜åªéœ€è¦é…ç½®PVCå³å¯ä½¿ç”¨å­˜å‚¨ï¼Œæˆ–è€…Volumeé…ç½®PVCçš„åç§°å³å¯ã€‚
</p>

<p>
å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">https://kubernetes.io/docs/concepts/storage/persistent-volumes/</a>
</p>
</div>
</div>
<div id="outline-container-h:504cfaf4-2ad2-4978-a0c5-07fdded7840f" class="outline-4">
<h4 id="h:504cfaf4-2ad2-4978-a0c5-07fdded7840f">PVã€PVCå›¾è§£</h4>
<div class="outline-text-4" id="text-h:504cfaf4-2ad2-4978-a0c5-07fdded7840f">

<figure id="orgbecd19c">
<img src="./images/Snipaste_2022-09-15_23-05-56.png" alt="Snipaste_2022-09-15_23-05-56.png" width="90%">

</figure>

<p>
ä¸€äº›æ¦‚å¿µï¼š
</p>
<ul class="org-ul">
<li>PVï¼š æ²¡æœ‰åç§°ç©ºé—´é™åˆ¶ï¼ŒPVåˆ†ä¸ºé™æ€ï¼ˆæ‰‹åŠ¨åˆ›å»ºï¼‰å’ŒåŠ¨æ€ï¼ˆStorageClassï¼‰</li>
<li>PVCï¼šç»‘å®šåç§°ç©ºé—´ï¼Œpod æŒ‡å®š pvc çš„åç§°è¿›è¡ŒæŒ‚è½½</li>
</ul>

<div class="org-src-container">
<pre class="src src-yaml">spec:
  template:
    spec:
      containers:
      - name: task-center-job
        volumeMounts:
        - name: logs
          mountPath: /opt/task-center-job/logs
          subPath: taskcenter/job
      volumes:
        - name: logs
          persistentVolumeClaim:
            claimName: efs-taskcenter-logs-claim
</pre>
</div>
</div>
</div>
<div id="outline-container-h:df0e4911-c0f3-4b9f-8706-b508f4d0d3fc" class="outline-4">
<h4 id="h:df0e4911-c0f3-4b9f-8706-b508f4d0d3fc">PV</h4>
<div class="outline-text-4" id="text-h:df0e4911-c0f3-4b9f-8706-b508f4d0d3fc">
</div>
<div id="outline-container-h:5ee2e8a9-6541-4f7d-b0e4-d4fb6846a68e" class="outline-5">
<h5 id="h:5ee2e8a9-6541-4f7d-b0e4-d4fb6846a68e">PV è®¿é—®å’Œå›æ”¶ç­–ç•¥</h5>
<div class="outline-text-5" id="text-h:5ee2e8a9-6541-4f7d-b0e4-d4fb6846a68e">
<p>
PV å›æ”¶ç­–ç•¥ï¼š
</p>
<ul class="org-ul">
<li>Retainï¼šä¿ç•™ï¼Œè¯¥ç­–ç•¥å…è®¸æ‰‹åŠ¨å›æ”¶èµ„æºï¼Œå½“åˆ é™¤PVCæ—¶ï¼ŒPVä»ç„¶å­˜åœ¨ï¼ŒPVè¢«è§†ä¸ºå·²é‡Šæ”¾ï¼Œç®¡ç†å‘˜å¯ä»¥æ‰‹åŠ¨å›æ”¶å·ã€‚</li>
<li>Recycleï¼šï¼ˆå·²è¢«åºŸå¼ƒï¼‰å›æ”¶ï¼Œå¦‚æœVolumeæ’ä»¶æ”¯æŒï¼ŒRecycleç­–ç•¥ä¼šå¯¹å·æ‰§è¡Œ `rm -rf` æ¸…ç†è¯¥PVï¼Œå¹¶ä½¿å…¶å¯ç”¨äºä¸‹ä¸€ä¸ªæ–°çš„PVCï¼Œä½†æ˜¯æœ¬ç­–ç•¥å·²å¼ƒç”¨ï¼Œæ—§çš„ç‰ˆæœ¬åªæœ‰NFSå’ŒHostPathæ”¯æŒè¯¥ç­–ç•¥ã€‚</li>
<li>Deleteï¼šåˆ é™¤ï¼Œå¦‚æœVolumeæ’ä»¶æ”¯æŒï¼Œåˆ é™¤PVCæ—¶ä¼šåŒæ—¶åˆ é™¤PVï¼ŒåŠ¨æ€å·é»˜è®¤ä¸ºDeleteï¼Œç›®å‰æ”¯æŒDeleteçš„å­˜å‚¨åç«¯åŒ…æ‹¬AWS EBS, GCE PD, Azure Disk, or OpenStack Cinderç­‰ã€‚</li>
<li>å¯ä»¥é€šè¿‡persistentVolumeReclaimPolicy: Recycleå­—æ®µé…ç½®</li>
</ul>

<p>
PV å›æ”¶ç­–ç•¥æ–‡æ¡£ï¼š<a href="https://kubernetes.io/zh-cn/docs/concepts/storage/persistent-volumes/#reclaim-policy">https://kubernetes.io/zh-cn/docs/concepts/storage/persistent-volumes/#reclaim-policy</a>
</p>


<p>
PV è®¿é—®ç­–ç•¥ï¼š
</p>
<ul class="org-ul">
<li>ReadWriteOnceï¼šå¯ä»¥è¢«å•èŠ‚ç‚¹ä»¥è¯»å†™æ¨¡å¼æŒ‚è½½ï¼Œå‘½ä»¤è¡Œä¸­å¯ä»¥è¢«ç¼©å†™ä¸ºRWOã€‚</li>
<li>ReadOnlyManyï¼šå¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥åªè¯»æ¨¡å¼æŒ‚è½½ï¼Œå‘½ä»¤è¡Œä¸­å¯ä»¥è¢«ç¼©å†™ä¸ºROXã€‚</li>
<li>ReadWriteManyï¼šå¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ¨¡å¼æŒ‚è½½ï¼Œå‘½ä»¤è¡Œä¸­å¯ä»¥è¢«ç¼©å†™ä¸ºRWXã€‚</li>
<li>ReadWriteOncePod ï¼šåªå…è®¸è¢«å•ä¸ªPodè®¿é—®ï¼Œéœ€è¦K8s 1.22+ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¹¶ä¸”æ˜¯ CSI åˆ›å»ºçš„PVæ‰å¯ä½¿ç”¨</li>
</ul>

<p>
PV è®¿é—®ç­–ç•¥å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes">https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes</a>
</p>
</div>
</div>
<div id="outline-container-h:2f1478ee-e718-46bb-ab64-abb56f66454f" class="outline-5">
<h5 id="h:2f1478ee-e718-46bb-ab64-abb56f66454f">æ–‡ä»¶å­˜å‚¨ã€å—å­˜å‚¨ã€å¯¹è±¡å­˜å‚¨åŒºåˆ«</h5>
<div class="outline-text-5" id="text-h:2f1478ee-e718-46bb-ab64-abb56f66454f">
<p>
å­˜å‚¨çš„åˆ†ç±»ï¼š
</p>
<ul class="org-ul">
<li>æ–‡ä»¶å­˜å‚¨ï¼šä¸€äº›æ•°æ®å¯èƒ½éœ€è¦è¢«å¤šä¸ªèŠ‚ç‚¹ä½¿ç”¨ï¼Œæ¯”å¦‚ç”¨æˆ·çš„å¤´åƒã€ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ç­‰ï¼Œå®ç°æ–¹å¼ï¼šNFSã€NASã€FTPã€CephFSç­‰ã€‚</li>
<li>å—å­˜å‚¨ï¼šä¸€äº›æ•°æ®åªèƒ½è¢«ä¸€ä¸ªèŠ‚ç‚¹ä½¿ç”¨ï¼Œæˆ–è€…æ˜¯éœ€è¦å°†ä¸€å—è£¸ç›˜æ•´ä¸ªæŒ‚è½½ä½¿ç”¨ï¼Œæ¯”å¦‚æ•°æ®åº“ã€Redisç­‰ï¼Œå®ç°æ–¹å¼ï¼šCephã€GlusterFSã€å…¬æœ‰äº‘ã€‚</li>
<li>å¯¹è±¡å­˜å‚¨ï¼šç”±ç¨‹åºä»£ç ç›´æ¥å®ç°çš„ä¸€ç§å­˜å‚¨æ–¹å¼ï¼Œäº‘åŸç”Ÿåº”ç”¨æ— çŠ¶æ€åŒ–å¸¸ç”¨çš„å®ç°æ–¹å¼ï¼Œå®ç°æ–¹å¼ï¼šä¸€èˆ¬æ˜¯ç¬¦åˆ S3 åè®®çš„äº‘å­˜å‚¨ï¼Œæ¯”å¦‚AWSçš„S3å­˜å‚¨ã€Minioã€ä¸ƒç‰›äº‘ç­‰ã€‚</li>
</ul>
</div>
</div>
<div id="outline-container-h:260d5061-2931-479a-91b8-efadfce2c699" class="outline-5">
<h5 id="h:260d5061-2931-479a-91b8-efadfce2c699">åˆ›å»º NAS  æˆ– NFS ç±»å‹çš„ PV</h5>
<div class="outline-text-5" id="text-h:260d5061-2931-479a-91b8-efadfce2c699">
<p>
NFS
</p>
<div class="org-src-container">
<pre class="src src-yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv-nfs
  labels:
    type: business-a
spec:
  capacity:
    storage: 5Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Recycle
  storageClassName: nfs-slow # è¿™ä¸ªåå­—æ˜¯PVCåˆ›å»ºçš„æ—¶å€™è¦å¯¹åº”çš„åå­—
  mountOptions:
    - hard
    - nfsvers=4.1
  nfs:
    path: /tmp
    server: 10.103.236.205
</pre>
</div>

<p>
å‚æ•°è¯´æ˜ï¼š
</p>
<ul class="org-ul">
<li>capacityï¼šå®¹é‡é…ç½®</li>
<li>volumeModeï¼šå·çš„æ¨¡å¼ï¼Œç›®å‰æ”¯æŒFilesystemï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰ å’Œ Blockï¼ˆå—ï¼‰ï¼Œå…¶ä¸­Blockç±»å‹éœ€è¦åç«¯å­˜å‚¨æ”¯æŒï¼Œé»˜è®¤ä¸ºæ–‡ä»¶ç³»ç»Ÿ</li>
<li>accessModesï¼šè¯¥PVçš„è®¿é—®æ¨¡å¼</li>
<li>storageClassNameï¼šPVçš„ç±»ï¼Œä¸€ä¸ªç‰¹å®šç±»å‹çš„PVåªèƒ½ç»‘å®šåˆ°ç‰¹å®šç±»åˆ«çš„PVCï¼› storageClassName å€¼ä¸ PVC è®¾ç½®ç›¸åŒçš„ PV å· æ‰è¡Œï¼ŒPVC ç”³é¢†ä¸å¿…ä¸€å®šè¦è¯·æ±‚æŸä¸ªç±»ã€‚å¦‚æœ PVC çš„ storageClassName å±æ€§å€¼è®¾ç½®ä¸º ""ï¼Œ åˆ™è¢«è§†ä¸ºè¦è¯·æ±‚çš„æ˜¯æ²¡æœ‰è®¾ç½®å­˜å‚¨ç±»çš„ PV å·.</li>
<li>persistentVolumeReclaimPolicyï¼šå›æ”¶ç­–ç•¥</li>
<li>mountOptionsï¼šéå¿…é¡»ï¼Œæ–°ç‰ˆæœ¬ä¸­å·²å¼ƒç”¨</li>
<li>nfsï¼šNFSæœåŠ¡é…ç½®ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸¤ä¸ªé€‰é¡¹
<ul class="org-ul">
<li>pathï¼šNFSä¸Šçš„å…±äº«ç›®å½•</li>
<li>serverï¼šNFSçš„IPåœ°å€</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-h:333e72d4-4ca9-4a89-a427-ee366d7f7243" class="outline-5">
<h5 id="h:333e72d4-4ca9-4a89-a427-ee366d7f7243">PV çŠ¶æ€</h5>
<div class="outline-text-5" id="text-h:333e72d4-4ca9-4a89-a427-ee366d7f7243">
<ul class="org-ul">
<li>Availableï¼šå¯ç”¨ï¼Œæ²¡æœ‰è¢«PVCç»‘å®šçš„ç©ºé—²èµ„æºã€‚</li>
<li>Boundï¼šå·²ç»‘å®šï¼Œå·²ç»è¢«PVCç»‘å®šã€‚</li>
<li>Releasedï¼šå·²é‡Šæ”¾ï¼ŒPVCè¢«åˆ é™¤ï¼Œä½†æ˜¯èµ„æºè¿˜æœªè¢«é‡æ–°ä½¿ç”¨ã€‚</li>
<li>Failedï¼šå¤±è´¥ï¼Œè‡ªåŠ¨å›æ”¶å¤±è´¥ã€‚</li>
</ul>
</div>
</div>
<div id="outline-container-h:2f513651-8123-4ed1-8a30-d255db599472" class="outline-5">
<h5 id="h:2f513651-8123-4ed1-8a30-d255db599472">åˆ›å»º hostPath ç±»å‹çš„ PV</h5>
<div class="outline-text-5" id="text-h:2f513651-8123-4ed1-8a30-d255db599472">
<div class="org-src-container">
<pre class="src src-yaml">kind: PersistentVolume
apiVersion: v1
metadata:
  name: task-pv-volume
  labels:
    type: local
spec:
  storageClassName: hostpath
  capacity:
    storage: 10Gi
  accessModes: - ReadWriteOnce
  hostPath:
    path: "/mnt/data"
</pre>
</div>

<p>
è¯´æ˜ï¼š
</p>
<ul class="org-ul">
<li>hostPathï¼šhostPathæœåŠ¡é…ç½®
<ul class="org-ul">
<li>pathï¼šå®¿ä¸»æœºè·¯å¾„</li>
</ul></li>
</ul>

<p>
ä¸€èˆ¬ pod æ˜¯ä¸æ¨èå›ºå®šåˆ°æŸ 1 ä¸ªèŠ‚ç‚¹çš„ã€‚
</p>
</div>
</div>
</div>
<div id="outline-container-h:5cab6f6a-f294-4a09-baff-40e064b283ff" class="outline-4">
<h4 id="h:5cab6f6a-f294-4a09-baff-40e064b283ff">PVC</h4>
<div class="outline-text-4" id="text-h:5cab6f6a-f294-4a09-baff-40e064b283ff">
</div>
<div id="outline-container-h:3dfce5ee-acbf-4f95-a0a8-81bb2cd93665" class="outline-5">
<h5 id="h:3dfce5ee-acbf-4f95-a0a8-81bb2cd93665">PVC å¦‚ä½•ç»‘å®šåˆ° PV</h5>
<div class="outline-text-5" id="text-h:3dfce5ee-acbf-4f95-a0a8-81bb2cd93665">

<figure id="orgab5f57a">
<img src="./images/Snipaste_2022-09-16_10-54-37.png" alt="Snipaste_2022-09-16_10-54-37.png" width="90%">

</figure>


<ul class="org-ul">
<li>PVC çš„ StorageClassName æ²¡æœ‰å’Œ PV çš„ä¸€è‡´</li>
<li>PVC çš„ accessModes å’Œ PV çš„ä¸€è‡´</li>
<li>è®¾ç½®ç½®<a href="https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/labels/#label-selectors">æ ‡ç­¾é€‰æ‹©ç®—ç¬¦</a>æ¥è¿›ä¸€æ­¥è¿‡æ»¤å·é›†åˆ
<ul class="org-ul">
<li>matchLabels</li>
<li>matchExpressions</li>
</ul></li>
<li>PV è®¾ç½® claimRef æŒ‡å®šæŸä¸ª PVC</li>
</ul>

<div class="org-src-container">
<pre class="src src-yaml">cat &lt;&lt;\EOF | kubectl apply -f -
apiVersion: v1
kind: PersistentVolume
metadata:
  name: dbench-pv-0
spec:
  accessModes:
  - ReadWriteOnce
  capacity:
    storage: 500Gi
  claimRef:
    apiVersion: v1
    kind: PersistentVolumeClaim
    name: dbench-pv-claim
    namespace: gitlab-test-xcw
  mountOptions:
  - hard
  - nfsvers=3
  - nolock
  nfs:
    path: /nvxa7jnu/tmp-test/gitaly
    server: 10.22.0.29
  persistentVolumeReclaimPolicy: Retain
  volumeMode: Filesystem
EOF

#nfs-pvc
cat &lt;&lt;\EOF |kubectl apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: dbench-pv-claim
  namespace: gitlab-test-xcw
spec:
  accessModes:
  - ReadWriteMany
  resources:
    requests:
      storage: 500Gi
  volumeMode: Filesystem
  volumeName: dbench-pv-0
EOF
</pre>
</div>
</div>
</div>
<div id="outline-container-h:21e372ef-a130-48ac-87de-c41ed8128770" class="outline-5">
<h5 id="h:21e372ef-a130-48ac-87de-c41ed8128770">PVC æŒ‚è½½ç¤ºä¾‹</h5>
<div class="outline-text-5" id="text-h:21e372ef-a130-48ac-87de-c41ed8128770">
</div>
<ul class="org-ul">
<li><a id="h:008c0e74-7084-48af-9553-36c5c47ece03"></a>deployment pvc<br>
<div class="outline-text-6" id="text-h:008c0e74-7084-48af-9553-36c5c47ece03">
<p>
åˆ›å»º PVC
</p>
<div class="org-src-container">
<pre class="src src-yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: nfs-pvc-claim   # PVCçš„åå­—ï¼Œå¯è‡ªå–
spec:
  accessModes:
    - ReadWriteMany  # è®¿é—®ç­–ç•¥å’Œ pv ä¸€è‡´
  volumeMode: Filesystem
  resources:
    requests:
      storage: 2Gi  # ä¸€å®šè¦å°äºç­‰äº pv
  storageClassName: nfs-slow  #  æŒ‚è½½å“ªç§ç±»å‹çš„ pv
</pre>
</div>


<div class="org-src-container">
<pre class="src src-shell"><span style="color: #b22222;"># </span><span style="color: #b22222;">create PVC</span>
kubectl create -f  test-pvc.yaml  
<span style="color: #b22222;"># </span><span style="color: #b22222;">&#26597;&#30475;PVC</span>
[root@k8s-master01 app]# kubectl get pvc
NAME      STATUS   VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE
myclaim   Bound    pv0001   5Gi        RWX            nfs-slow       34s

<span style="color: #b22222;"># </span><span style="color: #b22222;">&#20877;&#27425;&#26597;&#30475;PV&#65292;&#21487;&#30475;&#21040;&#29366;&#24577;&#24050;&#32463;&#21457;&#29983;&#25913;&#21464;</span>
[root@k8s-master01 app]# kubectl get pv
NAME     CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM             STORAGECLASS   REASON   AGE
pv0001   5Gi        RWX            Recycle          Bound    default/myclaim   nfs-slow                13m
</pre>
</div>

<p>
deployment pod é…ç½® Volumes  ä½¿ç”¨ç±»å‹  persistentVolumeClaim
</p>
<div class="org-src-container">
<pre class="src src-yaml">cat  nginx.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: nginx
  name: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - image: nginx:1.15.12
        name: nginx
        volumeMounts:
        - mountPath: /usr/share/nginx/html
          name: task-pv-container
      volumes:
      - PersistentVolumeClaim:
          claimNmae: nfs-pvc-claim
        name: task-pv-storage
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #b22222;"># </span><span style="color: #b22222;">&#26356;&#25913;&#21518;&#30340;yaml&#65292;&#22312;&#23545;&#24212;&#20301;&#32622;&#21152;&#19978;&#20197;&#19979;&#21442;&#25968;&#35843;&#29992;PVC</span>
volumeMounts:
- mountPath: /opt/pvc
  name: mypd

volumes:
   - name: mypd
     persistentVolumeClaim:
       claimName: myclaim

<span style="color: #b22222;"># </span><span style="color: #b22222;">&#28982;&#21518;&#36827;&#20837;&#23481;&#22120;&#26597;&#30475;&#26159;&#21542;&#25346;&#36733;&#25104;&#21151;</span>
[root@k8s-master01 app]# kubectl exec -it nginx-5bb6d88dfb-w78k8 -c nginx2 -- bash
root@nginx-5bb6d88dfb-w78k8:/# df -h
Filesystem               Size  Used Avail Use% Mounted on
overlay                   37G  4.3G   33G  12% /
tmpfs                     64M     0   64M   0% /dev
tmpfs                    985M     0  985M   0% /sys/fs/cgroup
/dev/mapper/centos-root   37G  4.3G   33G  12% /mnt
192.168.1.104:/data/nfs   37G  3.0G   35G   9% /opt/pvc   <span style="color: #b22222;"># </span><span style="color: #b22222;">&#36825;&#23601;&#26159;&#21018;&#21018;&#25346;&#36733;&#30340;PVC</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">&#25991;&#20214;&#33021;&#20849;&#20139;</span>
root@nginx-5bb6d88dfb-w78k8:/opt/pvc# ls 
pvc  qqq  test
root@nginx-5bb6d88dfb-w78k8:/opt/pvc# echo 11 &gt; test 
root@nginx-5bb6d88dfb-w78k8:/opt/pvc# cat test       
11
</pre>
</div>
</div>
</li>
<li><a id="h:44504c73-84af-46f4-9783-883197b69981"></a>statfulset pvc<br>
<div class="outline-text-6" id="text-h:44504c73-84af-46f4-9783-883197b69981">
<div class="org-src-container">
<pre class="src src-yaml">cat &gt; nginx-sts.yaml &lt;&lt; EFO
apiVersion: v1
kind: Service
metadata:
  name: nginx
  labels:
    app: nginx
spec:
  ports:
  - port: 80
    name: web
  clusterIP: None
  selector:
    app: nginx
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: web
spec:
  #updateStrategy:
  #  rollingUpdate:
  #    partition: 0
  #  type: RollingUpdate
  selector:
    matchLabels:
      app: nginx # å¿…é¡»åŒ¹é… .spec.template.metadata.labels
  serviceName: "nginx"
  replicas: 3 # é»˜è®¤å€¼æ˜¯ 1
  # minReadySeconds: 10 # é»˜è®¤å€¼æ˜¯ 0 ï¼Œv1.22 ç‰ˆæœ¬æ‰æœ‰
  template:
    metadata:
      labels:
        app: nginx # å¿…é¡»åŒ¹é… .spec.selector.matchLabels
    spec:
      terminationGracePeriodSeconds: 10
      containers:
      - name: nginx
        image: registry.k8s.io/nginx-slim:0.8
        ports:
        - containerPort: 80
          name: web
        volumeMounts:
        - name: www
          mountPath: /usr/share/nginx/html
  volumeClaimTemplates:
  - metadata:
      name: www
    spec:
      accessModes: [ "ReadWriteOnce" ]
      storageClassName: "nfs-slow"
      resources:
        requests:
          storage: 1Gi
EFO
</pre>
</div>

<p>
æ ¹æ® pvc æ¨¡æ¿è‡ªåŠ¨åˆ›å»º pvc
</p>

<p>
éœ€è¦æå‰å‡†å¤‡å¥½ä¸ pvc ç›¸åŒçš„ç±»ï¼ˆstorageClassNameï¼‰çš„ pvã€‚
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-h:60831fb1-bac2-4bd4-8b64-7b8419099e65" class="outline-5">
<h5 id="h:60831fb1-bac2-4bd4-8b64-7b8419099e65">PVC åˆ›å»ºå’ŒæŒ‚è½½å¤„ç† Pending çš„åŸå› </h5>
<div class="outline-text-5" id="text-h:60831fb1-bac2-4bd4-8b64-7b8419099e65">
<p>
åˆ›å»º PVC ä¹‹åï¼Œä¸€ç›´ç»‘å®šä¸ä¸Š PVï¼ˆPendingï¼‰ï¼š
</p>
<ul class="org-ul">
<li>PVC çš„ç©ºé—´ç”³è¯·å¤§å°å¤§äº PV çš„å¤§å°</li>
<li>PVC çš„ StorageClassName æ²¡æœ‰å’Œ PV çš„ä¸€è‡´</li>
<li>PVC çš„ accessModes å’Œ PV çš„ä¸ä¸€è‡´</li>
</ul>


<p>
åˆ›å»ºæŒ‚è½½äº† PVC çš„ Pod ä¹‹åï¼Œä¸€ç›´å¤„äº Pending çŠ¶æ€ï¼š
</p>
<ul class="org-ul">
<li>PVC æ²¡æœ‰è¢«åˆ›å»ºæˆåŠŸï¼Œæˆ–è€…è¢«åˆ›å»º</li>
<li>PVC å’Œ Pod ä¸åœ¨åŒä¸€ä¸ª Namespace</li>
</ul>

<p>
åˆ é™¤PVCå, k8sä¼šåˆ›å»ºä¸€ä¸ªç”¨äºå›æ”¶çš„Pod, æ ¹æ®PVçš„å›æ”¶ç­–ç•¥è¿›è¡Œpvçš„å›æ”¶, å›æ”¶å®Œä»¥åPVçš„çŠ¶æ€å°±ä¼šå˜æˆå¯è¢«ç»‘å®šçš„çŠ¶æ€ä¹Ÿå°±æ˜¯ç©ºé—²çŠ¶æ€, å…¶ä»–çš„PendingçŠ¶æ€çš„PVCå¦‚æœåŒ¹é…åˆ°äº†è¿™ä¸ªPVï¼Œä»–å°±èƒ½å’Œè¿™ä¸ªPVè¿›è¡Œç»‘å®šã€‚
</p>


<p>
PVæ–‡æ¡£ï¼š<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">https://kubernetes.io/docs/concepts/storage/persistent-volumes/</a>
</p>

<p>
<a href="https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/">https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-h:cd448add-22b2-442a-a54c-6bfea0e331ed" class="outline-4">
<h4 id="h:cd448add-22b2-442a-a54c-6bfea0e331ed">æ”¹å˜é»˜è®¤å­˜å‚¨ç±»</h4>
<div class="outline-text-4" id="text-h:cd448add-22b2-442a-a54c-6bfea0e331ed">
<p>
æ‰€æœ‰æœªè®¾ç½® storageClassName çš„ PVC éƒ½åªèƒ½ç»‘å®šåˆ°éš¶å±äºé»˜è®¤å­˜å‚¨ç±»çš„ PV å·ã€‚ 
</p>

<p>
è®¾ç½®é»˜è®¤ StorageClass çš„å·¥ä½œæ˜¯é€šè¿‡å°†å¯¹åº” StorageClass å¯¹è±¡çš„æ³¨è§£ storageclass.kubernetes.io/is-default-class èµ‹å€¼ä¸º true æ¥å®Œæˆçš„ã€‚
</p>

<p>
å®˜æ–¹å‚è€ƒï¼š<a href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/change-default-storage-class/">https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/change-default-storage-class/</a>
</p>
</div>
</div>
<div id="outline-container-h:dad680e5-2a6d-47f7-88cb-63cfe23a8fe9" class="outline-4">
<h4 id="h:dad680e5-2a6d-47f7-88cb-63cfe23a8fe9">ä½¿ç”¨NFSåšä¸ºPVC</h4>
<div class="outline-text-4" id="text-h:dad680e5-2a6d-47f7-88cb-63cfe23a8fe9">
<p>
å®‰è£…NFSæœåŠ¡
</p>
<div class="org-src-container">
<pre class="src src-sh">apt install nfs-server
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314;&#20849;&#20139;&#25968;&#25454;&#30446;&#24405;</span>
mkdir -pv /data/nfs-share
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#25480;&#26435;</span>
cat &lt;&lt;\EOF &gt;&gt; /etc/exports
<span style="color: #ffa54f;">/data/nfs-share *(rw,no_root_squash)</span>
<span style="color: #ffa54f;">EOF</span>

systemctl restart nfs-server
</pre>
</div>

<p>
éƒ¨ç½² NFSé©±åŠ¨
</p>

<p>
å‡†å¤‡æ–‡ä»¶
</p>
<div class="org-src-container">
<pre class="src src-sh">cat &lt;&lt;\EOF&gt; rback.yaml
<span style="color: #ffa54f;">kind: ClusterRole</span>
<span style="color: #ffa54f;">apiVersion: rbac.authorization.k8s.io/v1</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: nfs-client-provisioner-runner</span>
<span style="color: #ffa54f;">rules:</span>
<span style="color: #ffa54f;">- apiGroups: [""]</span>
<span style="color: #ffa54f;">  resources: ["persistentvolumes"]</span>
<span style="color: #ffa54f;">  verbs: ["get", "list", "watch", "create", "delete"]</span>
<span style="color: #ffa54f;">- apiGroups: [""]</span>
<span style="color: #ffa54f;">  resources: ["persistentvolumeclaims"]</span>
<span style="color: #ffa54f;">  verbs: ["get", "list", "watch", "update"]</span>
<span style="color: #ffa54f;">- apiGroups: [""]</span>
<span style="color: #ffa54f;">  resources: ["endpoints"]</span>
<span style="color: #ffa54f;">  verbs: ["get", "list", "watch", "create", "update", "patch"]</span>
<span style="color: #ffa54f;">- apiGroups: ["storage.k8s.io"]</span>
<span style="color: #ffa54f;">  resources: ["storageclasses"]</span>
<span style="color: #ffa54f;">  verbs: ["get", "list", "watch"]</span>
<span style="color: #ffa54f;">- apiGroups: [""]</span>
<span style="color: #ffa54f;">  resources: ["events"]</span>
<span style="color: #ffa54f;">  verbs: ["create", "update", "patch"]</span>
<span style="color: #ffa54f;">---</span>
<span style="color: #ffa54f;">kind: ClusterRoleBinding</span>
<span style="color: #ffa54f;">apiVersion: rbac.authorization.k8s.io/v1</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: run-nfs-client-provisioner</span>
<span style="color: #ffa54f;">subjects:</span>
<span style="color: #ffa54f;">- kind: ServiceAccount</span>
<span style="color: #ffa54f;">  name: nfs-client-provisioner</span>
<span style="color: #ffa54f;">  namespace: default</span>
<span style="color: #ffa54f;">roleRef:</span>
<span style="color: #ffa54f;">  kind: ClusterRole</span>
<span style="color: #ffa54f;">  name: nfs-client-provisioner-runner</span>
<span style="color: #ffa54f;">  apiGroup: rbac.authorization.k8s.io</span>
<span style="color: #ffa54f;">---</span>
<span style="color: #ffa54f;">kind: Role</span>
<span style="color: #ffa54f;">apiVersion: rbac.authorization.k8s.io/v1</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: leader-locking-nfs-client-provisioner</span>
<span style="color: #ffa54f;">rules:</span>
<span style="color: #ffa54f;">- apiGroups: [""]</span>
<span style="color: #ffa54f;">  resources: ["endpoints"]</span>
<span style="color: #ffa54f;">  verbs: ["get", "list", "watch", "create", "update", "patch"]</span>
<span style="color: #ffa54f;">---</span>
<span style="color: #ffa54f;">kind: RoleBinding</span>
<span style="color: #ffa54f;">apiVersion: rbac.authorization.k8s.io/v1</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: leader-locking-nfs-client-provisioner</span>
<span style="color: #ffa54f;">subjects:</span>
<span style="color: #ffa54f;">- kind: ServiceAccount</span>
<span style="color: #ffa54f;">  name: nfs-client-provisioner</span>
<span style="color: #ffa54f;">  # replace with namespace where provisioner is deployed</span>
<span style="color: #ffa54f;">  namespace: default</span>
<span style="color: #ffa54f;">roleRef:</span>
<span style="color: #ffa54f;">  kind: Role</span>
<span style="color: #ffa54f;">  name: leader-locking-nfs-client-provisioner</span>
<span style="color: #ffa54f;">  apiGroup: rbac.authorization.k8s.io</span>
<span style="color: #ffa54f;">EOF</span>

cat &lt;&lt;\EOF&gt; deployment.yaml
<span style="color: #ffa54f;">apiVersion: v1</span>
<span style="color: #ffa54f;">kind: ServiceAccount</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: nfs-client-provisioner</span>
<span style="color: #ffa54f;">---</span>
<span style="color: #ffa54f;">kind: Deployment</span>
<span style="color: #ffa54f;">apiVersion: apps/v1</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: nfs-client-provisioner</span>
<span style="color: #ffa54f;">spec:</span>
<span style="color: #ffa54f;">  replicas: 1</span>
<span style="color: #ffa54f;">  strategy:</span>
<span style="color: #ffa54f;">    type: Recreate</span>
<span style="color: #ffa54f;">  selector:</span>
<span style="color: #ffa54f;">    matchLabels:</span>
<span style="color: #ffa54f;">      app: nfs-client-provisioner</span>
<span style="color: #ffa54f;">  template:</span>
<span style="color: #ffa54f;">    metadata:</span>
<span style="color: #ffa54f;">      labels:</span>
<span style="color: #ffa54f;">        app: nfs-client-provisioner</span>
<span style="color: #ffa54f;">    spec:</span>
<span style="color: #ffa54f;">      serviceAccount: nfs-client-provisioner</span>
<span style="color: #ffa54f;">      containers:</span>
<span style="color: #ffa54f;">        - name: nfs-client-provisioner</span>
<span style="color: #ffa54f;">          image: quay.io/external_storage/nfs-client-provisioner:latest</span>
<span style="color: #ffa54f;">          volumeMounts:</span>
<span style="color: #ffa54f;">            - name: nfs-client-root</span>
<span style="color: #ffa54f;">              mountPath: /persistentvolumes</span>
<span style="color: #ffa54f;">          env:</span>
<span style="color: #ffa54f;">            - name: PROVISIONER_NAME</span>
<span style="color: #ffa54f;">              value: fuseim.pri/ifs</span>
<span style="color: #ffa54f;">            - name: NFS_SERVER</span>
<span style="color: #ffa54f;">              value: 172.17.79.3</span>
<span style="color: #ffa54f;">            - name: NFS_PATH</span>
<span style="color: #ffa54f;">              value: /data/nfs-share</span>
<span style="color: #ffa54f;">      volumes:</span>
<span style="color: #ffa54f;">        - name: nfs-client-root</span>
<span style="color: #ffa54f;">          nfs:</span>
<span style="color: #ffa54f;">            server: 172.17.79.3</span>
<span style="color: #ffa54f;">            path: /data/nfs-share</span>
<span style="color: #ffa54f;">EOF</span>

cat &lt;&lt;\EOF&gt; class.yaml
<span style="color: #ffa54f;">apiVersion: storage.k8s.io/v1</span>
<span style="color: #ffa54f;">kind: StorageClass</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: nfs-csi</span>
<span style="color: #ffa54f;">provisioner: fuseim.pri/ifs</span>
<span style="color: #ffa54f;">reclaimPolicy: Retain #PV&#30340;&#21024;&#38500;&#31574;&#30053;&#65292;&#40664;&#35748;&#20026;delete&#65292;&#21024;&#38500;&#21518;PV&#31435;&#21363;&#21024;&#38500;NFS server&#30340;&#25968;&#25454;</span>
<span style="color: #ffa54f;">mountOptions:</span>
<span style="color: #ffa54f;">  - noatime #&#35775;&#38382;&#25991;&#20214;&#26102;&#19981;&#26356;&#26032;&#25991;&#20214;inode&#20013;&#30340;&#26102;&#38388;&#25139;</span>
<span style="color: #ffa54f;">parameters:</span>
<span style="color: #ffa54f;">  archiveOnDelete: "true"  #true&#20026;&#21024;&#38500;pod&#26102;&#20445;&#30041;pod&#25968;&#25454;&#12290;false &#21024;&#38500;&#26102;&#19981;&#20445;&#30041;&#25968;&#25454;</span>
<span style="color: #ffa54f;">EOF</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314;&#35282;&#33394;</span>
kubectl create -f rbac.yaml
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314; ServiceAccount &#21644;&#37096;&#32626; NFS-Client Provisioner</span>
kubectl create -f deployment.yaml
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314; NFS StorageClass</span>
kubectl create -f class.yaml
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#39564;&#35777;NFS&#37096;&#32626;&#25104;&#21151;</span>
kubectl get pod -l <span style="color: #a0522d;">app</span>=nfs-client-provisioner
</pre>
</div>

<p>
åŠ¨æ€åˆ›å»ºpvc
</p>
<div class="org-src-container">
<pre class="src src-sh">cat &lt;&lt;\EOF&gt; sts.yaml

<span style="color: #ffa54f;">apiVersion: apps/v1</span>
<span style="color: #ffa54f;">kind: StatefulSet</span>
<span style="color: #ffa54f;">metadata:</span>
<span style="color: #ffa54f;">  name: nacos</span>
<span style="color: #ffa54f;">spec:</span>
<span style="color: #ffa54f;">...</span>
<span style="color: #ffa54f;">  serviceName: nacos-headless</span>
<span style="color: #ffa54f;">  replicas: 3</span>
<span style="color: #ffa54f;">  template:</span>
<span style="color: #ffa54f;">    metadata:</span>
<span style="color: #ffa54f;">      labels:</span>
<span style="color: #ffa54f;">        app: nacos</span>
<span style="color: #ffa54f;">...</span>
<span style="color: #ffa54f;">    spec:</span>
<span style="color: #ffa54f;">      containers:</span>
<span style="color: #ffa54f;">        - name: nacos</span>
<span style="color: #ffa54f;">          imagePullPolicy: Always</span>
<span style="color: #ffa54f;">          image: nacos/nacos-server:latest</span>
<span style="color: #ffa54f;">          volumeMounts:</span>
<span style="color: #ffa54f;">            - name: data</span>
<span style="color: #ffa54f;">              mountPath: /home/nacos/data</span>
<span style="color: #ffa54f;">              subPath: data</span>
<span style="color: #ffa54f;">  volumeClaimTemplates:</span>
<span style="color: #ffa54f;">    - metadata:</span>
<span style="color: #ffa54f;">        name: data</span>
<span style="color: #ffa54f;">      spec:</span>
<span style="color: #ffa54f;">        storageClassName: nfs-csi</span>
<span style="color: #ffa54f;">        accessModes: [ "ReadWriteMany" ]</span>
<span style="color: #ffa54f;">        resources:</span>
<span style="color: #ffa54f;">          requests:</span>
<span style="color: #ffa54f;">            storage: 10Gi</span>
<span style="color: #ffa54f;">EOF</span>
</pre>
</div>
</div>
</div>
</div>
</section>
</main class="container">
<footer id="postamble" class="status">
<footer data-astro-cid-sz7xmlte data-turbo-permanent id=rootFooter>
    <script>
        const shuffle = e => e.map((e => ({
            v: e,
            sort: Math.random()
        }))).sort(( (e, o) => e.sort - o.sort)).map(( ({v: e}) => e));
        var songList = ["barbie-girl--stantough", "blue-da-ba-dee--cornelius-link", "hips-dont-lie--stantough", "i-want-it-that-way--stantough", "seven-nation-army--stantough", "smooth-criminal--stantough"]
          , songOrder = songOrder ?? shuffle(songList).map((e => `/audio/music/${e}.opus`))
          , song = new Audio(songOrder[0])
          , nextSong = new Audio(songOrder[1])
          , songIndex = 2
          , musicWrapper = void 0
          , arrow = void 0
          , notes = void 0;
        song.addEventListener("ended", next);
        const toggle = () => song.paused ? play() : pause();
        function play() {
            song.play(),
            musicWrapper = musicWrapper || document.getElementById("musicWrapper"),
            notes = notes || document.getElementById("notesWrapper"),
            musicWrapper.classList.add("shakeManHorse"),
            notes.classList.remove("hideNotes")
        }
        function pause() {
            song.pause(),
            musicWrapper = musicWrapper || document.getElementById("musicWrapper"),
            notes = notes || document.getElementById("notesWrapper"),
            musicWrapper.classList.remove("shakeManHorse"),
            notes.classList.add("hideNotes")
        }
        function next() {
            song = nextSong,
            play(),
            songIndex === songOrder.length && (songIndex = 0),
            nextSong = new Audio(songOrder[songIndex]),
            songIndex += 1
        }
        function skip() {
            pause(),
            (arrow = arrow || document.getElementById("musicArrow")).classList.add("shootArrow");
            new Audio("/audio/effects/ohno.m4a").play(),
            arrow.addEventListener("animationend", arrowShootHandler, !1)
        }
        function arrowShootHandler() {
            arrow.removeEventListener("animationend", arrowShootHandler, !1),
            arrow.classList.remove("shootArrow");
            new Audio("/audio/effects/heythathurt.m4a").play(),
            next()
        }
    </script>
    <div id=musicPlayer data-astro-cid-q7a5pyro>
        <button class=skip data-astro-cid-q7a5pyro onclick=skip() title="Skip song">
            <div id=skipWrapper data-astro-cid-q7a5pyro>
                <img alt="Medieval drollery of a man/snail/bat/monkey shooting an arrow" class=archer decoding=async height=334 loading=lazy src=/images/archer-no-arrow.448ccd8b_Z1KfRYq.webp width=226 data-astro-cid-q7a5pyro>
                <img alt="Arrow for archer" class="arrow complete" decoding=async height=23 loading=lazy src=/images/no-archer-full-arrow.87aa9971_Z2qL2KO.webp width=141 data-astro-cid-q7a5pyro id=musicArrow>
            </div>
        </button>
        <button class=playPause data-astro-cid-q7a5pyro onclick=toggle() title="Play/pause song">
            <div id=musicWrapper data-astro-cid-q7a5pyro>
                <div class=hideNotes id=notesWrapper data-astro-cid-q7a5pyro>
                    <div class=lyreNotes data-astro-cid-6gcrueho>
                        <div class=note1 data-astro-cid-6gcrueho>&#9835;&#9833;</div>
                        <div class=note2 data-astro-cid-6gcrueho>&#9833;</div>
                        <div class=note3 data-astro-cid-6gcrueho>&#9839;&#9834;</div>
                        <div class=note4 data-astro-cid-6gcrueho>&#9834;</div>
                    </div>
                    <div class=fluteNotes data-astro-cid-6gcrueho>
                        <div class=note1 data-astro-cid-6gcrueho>&#9835;&#9833;</div>
                        <div class=note2 data-astro-cid-6gcrueho>&#9833;</div>
                        <div class=note3 data-astro-cid-6gcrueho>&#9839;&#9834;</div>
                        <div class=note4 data-astro-cid-6gcrueho>&#9834;</div>
                    </div>
                </div>
                <img alt="Medieval drollery of a man/horse playing a lyre and a horn" class=manHorse decoding=async height=665 loading=lazy src=/images/man-horse-band.e3a2efcf_q8FCa.webp width=531 data-astro-cid-q7a5pyro>
            </div>
        </button>
    </div>
    <hr data-astro-cid-sz7xmlte>
    <div class=salutation data-astro-cid-gdmrbrho>
        <p data-astro-cid-gdmrbrho>
            <span class=flower2 data-astro-cid-gdmrbrho>A</span>
            <span class=smallcap data-astro-cid-gdmrbrho>pax vobiscum</span>
            <span class="flower2 wiggle" data-astro-cid-gdmrbrho id=leaf>a</span>
        </p>
    </div>
    <script>
        function animateLeafBlownHandler() {
            leaf.removeEventListener("animationend", animateLeafBlownHandler, !1),
            leaf.classList.remove("blownAway"),
            leaf.classList.add("wiggle")
        }
        function animateLeaf() {
            leaf = leaf ?? document.getElementById("leaf"),
            leaf.classList.remove("wiggle"),
            leaf.classList.add("blownAway"),
            leaf.addEventListener("animationend", animateLeafBlownHandler, !1)
        }
        document.getElementById("leaf").onclick = animateLeaf
    </script>


    <div class=bar data-astro-cid-p3givckg>
        <div class=list data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:gnuemacs height=1em viewBox="0 0 24 24" width=1em>
                    <title>emacs</title>
                    <symbol id=ai:simple-icons:gnuemacs>
                        <path d="M12 24C5.448 24 .118 18.617.118 12S5.448 0 12 0s11.882 5.383 11.882 12S18.552 24 12 24zM12 .661C5.813.661.779 5.748.779 12S5.813 23.339 12 23.339S23.221 18.253 23.221 12S18.187.661 12 .661zM8.03 20.197s.978.069 2.236-.042c.51-.045 2.444-.235 3.891-.552c0 0 1.764-.377 2.707-.725c.987-.364 1.524-.673 1.766-1.11c-.011-.09.074-.408-.381-.599c-1.164-.488-2.514-.4-5.185-.457c-2.962-.102-3.948-.598-4.472-.997c-.503-.405-.25-1.526 1.907-2.513c1.086-.526 5.345-1.496 5.345-1.496c-1.434-.709-4.109-1.955-4.659-2.224c-.482-.236-1.254-.591-1.421-1.021c-.19-.413.448-.768.804-.87c1.147-.331 2.766-.536 4.24-.56c.741-.012.861-.059.861-.059c1.022-.17 1.695-.869 1.414-1.976c-.252-1.13-1.579-1.795-2.84-1.565c-1.188.217-4.05 1.048-4.05 1.048c3.539-.031 4.131.028 4.395.398c.156.218-.071.518-1.015.672c-1.027.168-3.163.37-3.163.37c-2.049.122-3.492.13-3.925 1.046c-.283.599.302 1.129.558 1.46c1.082 1.204 2.646 1.853 3.652 2.331c.379.18 1.49.52 1.49.52c-3.265-.18-5.619.823-7.001 1.977c-1.562 1.445-.871 3.168 2.33 4.228c1.891.626 2.828.921 5.648.667c1.661-.09 1.923-.036 1.939.1c.023.192-1.845.669-2.355.816c-1.298.374-4.699 1.129-4.716 1.133z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:gnuemacs></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Emacs</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:org height=1em viewBox="0 0 24 24" width=1em>
                    <title>org-mode</title>
                    <symbol id=ai:simple-icons:org>
                        <path d="M17.169 0c-.566.004-2.16 3.312-3.376 5.94a2.19 2.19 0 0 1-.408-1.267c-.03-.582-1.089.237-.936 1.275c-.068-.035-1.26.227-1.26.23c-.23-.93-.802-1.618-1.15-.563c-.701 1.663-.88 2.984.115 4.585c-.908 4.058-6.948 6.053-6.32 9.33c.175.004 1.634 3.48 6.337 2.057c5.557-1.577 8.624 2.116 8.978 2.375c.52.526-1.348-4.573-5.302-6.865c-2.339-1.276-.87-3.474-.703-4.25c0 0 1.874 1.312 3.232-.692c1.227.316 2.05-.224 3.105.158c.64.28 3.336.11 2.334-1.396c-.148.129.07.27-.075.46c-.043.056-.128.232-.408.315c-.314.149-.83.27-1.43-.37c-.434-.32-.748-.04-.992-.063c.152-.098.577-.315 1.264-.315c.388 0 .594.336.854.338c.174 0 .685-.262.787-.365c.63-.41.697-.278 1.012-.905c.17-.759-.215-.92-.332-1.129c-.032-.483-.436-.67-.919-.326c-1.106-.198-2.192-.105-2.728-.15c-1.175-.164-2.153-.786-2.153-.786c.143-.19.075-.6-.842-.628c-.315-.104-.45-.2-.745-.307c.61-1.37.674-2.007 1.418-4.004c.261-1.053 1.039-2.685.643-2.682zm-4.297 8.093c.03-.086.443.138.952.176c.395.03.805.048 1.296-.025c.03-.005.172.095-.15.194c-.02.01-.062-.01-.065.196c0 .022-.01.04-.02.046c-.15.152-.708.223-1.065.1c-.436-.17-.482-.316-.517-.443c-.305-.147-.47-.123-.43-.244zM9.685 10.2C8.86 9 8.929 8.36 8.96 7.256C7.961 8.288 6.855 8.3 5.18 8.58c-1.299.234-3.657 2.447-4.025 4.742c-.043.608-.08 2.183.424 3.498c.492 1.13.828 1.727 1.844 2.335c-.882-3.169 5.296-5.33 6.263-8.955z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:org></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Orgmode</p>
                </div>
            </span>
            <a href=/donations.html class=entry data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:astro height=1em viewBox="0 0 24 24" width=1em>
                    <title>Donations</title>
                    <symbol id=ai:simple-icons:astro>
                        <path d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.158 3.158 0 0 1-1.407-1.188a3.31 3.31 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165h.002zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614c.302 0 .57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727l-5.516 14.99z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:astro></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>æ‰“èµ</p>
                </div>
            </span>
            </a>
            <span class=entry data-astro-cid-p3givckg>
                <svg xmlns="http://www.w3.org/2000/svg" class=heading data-astro-cid-p3givckg data-icon=simple-icons:copyright width="1em" height="1em" viewBox="0 0 24 24">
                    <title>Copyright</title>
                    <path fill="currentColor" d="M19 2a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm-5 5h-4a1 1 0 0 0-1 1l.007.117A1 1 0 0 0 10 9h3v5a1 1 0 0 1-1.993.117L11 14a1 1 0 0 0-2 0a3 3 0 0 0 6 0V8a1 1 0 0 0-1-1" />
                    <use xlink:href=#ai:simple-icons:copyright></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Â© 2024 Jasper Hsu</p>
                </div>
            </span>
        </div>
        <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="list license" data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Creative Commons</title>
                    <symbol id=ai:fa6-brands:creative-commons>
                        <path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Creative Commons</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-by height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Attribute</title>
                    <symbol id=ai:fa6-brands:creative-commons-by>
                        <path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3c3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7c3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-by></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Attribute</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-nc height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Noncommercial</title>
                    <symbol id=ai:fa6-brands:creative-commons-nc>
                        <path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256C0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9c0 110.9 92.1 202.4 203.7 202.4c122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2c0-6.2-2.2-11.2-6.6-15.1c-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1c53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1c0-57-19.8-105-59.3-143.9c-39.3-39.9-87.2-59.8-143.6-59.8z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-nc></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Noncommercial</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-sa height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Share Alike</title>
                    <symbol id=ai:fa6-brands:creative-commons-sa>
                        <path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7c99.8 0 127.5 82.5 127.5 134.2c0 63.6-41 132.9-128.9 132.9c-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2c23.3 0 58-18.2 58-82.8c0-82.5-49.1-80.6-56.7-80.6c-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2l-49-49.2h19.4z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-sa></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Share Alike</p>
                </div>
            </span>
        </a>
    </div>
</footer>
</footer>
</body>
</html>
