<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linux: Linuxç”¨æˆ·ç»„å’Œæƒé™ç®¡ç†</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/static/font.css"/>
<link rel="stylesheet" type="text/css" href="/static/drollery.e825b870.css"/>
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@jasperhsu">
<meta name="google-adsense-account" content="ca-pub-1741779893655624">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1741779893655624" crossorigin="anonymous"></script>
</head>
<body>
<header id="preamble" class="status">
<header class="{className}" data-astro-cid-3ef6ksr2>
  <div class=header-branding data-astro-cid-g2lrb5xm>
      <span class=header-text data-astro-cid-g2lrb5xm>
          <span class=dropcap data-astro-cid-g2lrb5xm aria-hidden=true>
              <span class=actual data-astro-cid-g2lrb5xm>J</span>
              <span class=rest data-astro-cid-g2lrb5xm>asper Hsu</span>
              <span class=period data-astro-cid-g2lrb5xm>.</span>
          </span>
          <span class=sr-only data-astro-cid-g2lrb5xm>Drollery</span>
      </span>
      <img alt="Medieval drollery of a knight on a horse" class=spring decoding=async height=250 loading=lazy src=/images/knight-horse.a96eee7d_Z1WCOYs.webp width=68 data-astro-cid-g2lrb5xm>
  </div>

  <nav data-astro-cid-pux6a34n>
      <span class=flower2 data-astro-cid-pux6a34n>M</span>
      <a href=/jcodelog.html class=nobracket data-astro-cid-pux6a34n>æŠ€æœ¯</a>
      <span class=flower2 data-astro-cid-pux6a34n>K</span>
      <a href=/reading/index.html class=nobracket data-astro-cid-pux6a34n>é˜…è¯»</a>
      <span class=flower2 data-astro-cid-pux6a34n>J</span>
      <a href=/lisp/jasper-emacs.html class=nobracket data-astro-cid-pux6a34n>æˆ‘çš„Emacsé…ç½®</a>
      <span class=flower2 data-astro-cid-pux6a34n>L</span>
      <a href=/link/index.html class=nobracket data-astro-cid-pux6a34n>å‹é“¾</a>
      <span class=flower2 data-astro-cid-pux6a34n>M</span>
      <a href=/about.html class=nobracket data-astro-cid-pux6a34n>å…³äº</a>
      <span class=flower2 data-astro-cid-pux6a34n>J</span>
  </nav>


  <div class="container" data-astro-cid-3ef6ksr2>
    <p class="info" data-astro-cid-3ef6ksr2>
              ğŸ† æ¬¢è¿æ¥åˆ°æœ¬ç«™ï¼š
              <a href="https://xuchangwei.com/">https://xuchangwei.com/</a>ã€‚
              <strong>å¸Œæœ›è¿™é‡Œæœ‰ä½ æ„Ÿå…´è¶£çš„å†…å®¹</strong>ã€‚
            </p>
  </div>
  <div id=borderArtWrapper class="tt1" data-astro-cid-5hce7sga data-turbo-permanent>
      <script>
          var man, shakeCount = 0, noSound = new Audio("/audio/effects/no.m4a"), screamSound = new Audio("/audio/effects/scream.m4a");
          function animateManShakeHandler() {
              man.removeEventListener("animationend", animateManShakeHandler, !1),
              shakeCount += 1,
              man.classList.remove("shakeMan")
          }
          function animateManFallHandler() {
              man.removeEventListener("animationend", animateManFallHandler, !1),
              man.classList.add("hide")
          }
          function animateMan() {
              man = man ?? document.getElementById("borderMan"),
              3 === shakeCount ? (man.classList.add("fallMan"),
              screamSound.play(),
              man.addEventListener("animationend", animateManFallHandler, !1)) : (man.classList.add("shakeMan"),
              noSound.play(),
              man.addEventListener("animationend", animateManShakeHandler, !1))
          }
      </script>
      <div class=borderArt data-astro-cid-5dda5nwp id=articleBorder>
          <img alt="flowery border with man falling" decoding=async height=620 loading=lazy src=/images/border-vines-no-man.b7d246cc_DRxSe.webp width=909 class=border data-astro-cid-5dda5nwp>
          <div class=fallWrapper data-astro-cid-5dda5nwp>
              <img alt="flowery border with man falling" decoding=async height=292 loading=lazy src=/images/man-no-vines.247a3187_Z2ioXNM.webp width=98 class=man data-astro-cid-5dda5nwp id=borderMan onclick=animateMan()>
          </div>
      </div>
  </div>
</header>
</header>
<main class="container" id="content" class="content">
<header>
<h1 class="title">Linux: Linuxç”¨æˆ·ç»„å’Œæƒé™ç®¡ç†</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:e915acc0-0239-4ab4-9831-f2cce014045d">Linuxå®‰å…¨æ¨¡å‹</a>
<ul>
<li><a href="#h:c0023fbf-6a3e-433a-a038-88c399718419">ç”¨æˆ·</a></li>
<li><a href="#h:41c17e50-33a9-4511-934f-160182c34abb">ç”¨æˆ·ç»„</a></li>
<li><a href="#h:0605796a-9698-4317-8541-fa8234256894">ç”¨æˆ·å’Œç»„çš„å…³ç³»</a></li>
<li><a href="#h:bbe30fb4-91f8-431f-bbc9-07cc42f24990">å®‰å…¨ä¸Šä¸‹æ–‡</a></li>
</ul>
</li>
<li><a href="#h:baaedeff-8558-4968-baf3-907ad8d723b8">ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶</a>
<ul>
<li><a href="#h:2ed3f31a-8067-4f62-8ca0-631383761665">ç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶</a></li>
<li><a href="#h:d90ee329-fed1-44c2-b2d2-2284745fc7b1">passwdæ–‡ä»¶æ ¼å¼</a></li>
<li><a href="#h:d4e15c54-9cce-4c26-b08c-e24c1c847c8c">shadowæ–‡ä»¶æ ¼å¼</a></li>
<li><a href="#h:5aa21057-0d30-481e-9500-c51d8fa946bf">groupæ–‡ä»¶æ ¼å¼</a></li>
<li><a href="#h:4d9724ea-9157-49e7-a354-6ea1230a3ca5">gshdowæ–‡ä»¶æ ¼å¼</a></li>
<li><a href="#h:47e2d5d3-8379-4bf7-9609-b327e693d276">æ–‡ä»¶æ“ä½œ</a></li>
</ul>
</li>
<li><a href="#h:fd709d98-1d23-4d68-bbbc-2d0aeb9e4332">ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤</a>
<ul>
<li><a href="#h:acf9dc75-e1ac-4844-a609-5fa1e976cae6">ç”¨æˆ·åˆ›å»º useradd</a>
<ul>
<li><a href="#h:10b86d25-e5f9-4772-bfae-dbac2d61c0dc">ç”¨æˆ·é»˜è®¤å€¼è®¾å®š</a></li>
</ul>
</li>
<li><a href="#h:690a6fde-d52d-4ffb-b064-ab829a1037a0">ç”¨æˆ·å±æ€§ä¿®æ”¹ usermod</a></li>
<li><a href="#h:aefe51ef-0960-47c8-a58a-7d2f73278e56">åˆ é™¤ç”¨æˆ· userdel</a></li>
<li><a href="#h:f55c6304-45af-40ec-a012-e5216dcb61f3">æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯ id</a></li>
<li><a href="#h:525611b9-2b08-449c-bc70-40f7b430edcc">åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤ su</a></li>
<li><a href="#h:4d206d46-cea6-4219-a556-08ccad9491af">è®¾ç½®å¯†ç  passwd</a></li>
<li><a href="#h:0577cca3-7a19-46d2-93c4-09e6a4367e6b">ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥ chage</a></li>
<li><a href="#h:da620709-ddce-423c-bade-42ded8138086">ç”¨æˆ·ç›¸å…³çš„å…¶å®ƒå‘½ä»¤ chfn chsh finger</a></li>
<li><a href="#h:51cb7201-6606-4d39-b6f5-e9f00b845b01">åˆ›å»ºç»„ groupadd</a></li>
<li><a href="#h:e2cf5394-7a1c-4058-b015-27635e5dfced">ä¿®æ”¹ç»„ groupmod</a></li>
<li><a href="#h:4e400a21-806b-47f0-911c-2e20aa79fbbf">ç»„åˆ é™¤ groupdel</a></li>
<li><a href="#h:ba939e6d-9aa0-437b-97ad-1e36561b5480">æ›´æ”¹ç»„å¯†ç  gpasswd</a></li>
<li><a href="#h:3e337a2b-940f-4956-829e-b3b60d64bf23">ä¸´æ—¶åˆ‡æ¢ä¸»ç»„ newgrp</a></li>
<li><a href="#h:89fe19e0-d9f9-4c18-a837-4d47ddfd0ab7">æ›´æ”¹å’ŒæŸ¥çœ‹ç»„æˆå‘˜ groupmems groups</a></li>
<li><a href="#h:6f33a3e5-8d40-486b-8391-d31fd08fff66">ç»ƒä¹ </a></li>
</ul>
</li>
<li><a href="#h:717ca5d6-3f12-4aaf-a071-d220213e7bcd">æ–‡ä»¶æƒé™ç®¡ç†</a>
<ul>
<li><a href="#h:c03bffd3-93fb-4444-9ee4-80a51b53eeb6">æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ</a>
<ul>
<li><a href="#h:5d121906-50cf-4247-b75b-d7ae22dae843">è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown</a></li>
<li><a href="#h:526e1246-d8c0-4dd3-8674-d34ff8c1c6c0">è®¾ç½®æ–‡ä»¶çš„å±ç»„ä¿¡æ¯chgrp</a></li>
</ul>
</li>
<li><a href="#h:f56a80bd-bbf3-4548-ac91-e7c42cd10025">æ–‡ä»¶æƒé™</a>
<ul>
<li><a href="#h:43f348a7-46fe-44f9-90bc-3d1b8308e014">æ–‡ä»¶æƒé™è¯´æ˜</a></li>
<li><a href="#h:d38390ea-e6f9-4c27-a295-dbbaa18699c0">ä¿®æ”¹æ–‡ä»¶æƒé™chmod</a></li>
</ul>
</li>
<li><a href="#h:07a79a95-5a80-4e90-b00b-41fc214367dc">æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™ umask</a></li>
<li><a href="#h:6dc21724-7544-4254-a0af-47d8411695ce">Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™</a>
<ul>
<li><a href="#h:87770dd2-108c-4d25-9f03-5680f54b0ca0">ç‰¹æ®Šæƒé™SUID</a></li>
<li><a href="#h:fd5ec574-1a60-431f-8b30-300f97a72b5e">ç‰¹æ®Šæƒé™SGID</a></li>
<li><a href="#h:b90a7343-f978-4f94-adf4-2fb4af9bd766">ç‰¹æ®Šæƒé™ Sticky ä½</a></li>
<li><a href="#h:356cd941-2023-4a9b-aa57-7aa2cac89bb7">ç‰¹æ®Šæƒé™æ•°å­—æ³•</a></li>
</ul>
</li>
<li><a href="#h:c95c19f3-3417-499d-a3b6-7794ec1d88ab">è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§ chattr lsattr</a></li>
<li><a href="#h:7b182dba-2068-493b-a368-b272aac2e1d2">è®¿é—®æ§åˆ¶åˆ—è¡¨</a>
<ul>
<li><a href="#h:36c90aae-7ef1-45f0-99d3-994f817ac25f">ACLæƒé™åŠŸèƒ½</a></li>
<li><a href="#h:185a4f6c-53ce-433a-ae9b-926d5cd7967e">ACLç›¸å…³å‘½ä»¤ setfacl getfacl</a></li>
</ul>
</li>
<li><a href="#h:b5f88181-e59b-4852-96ca-56ee7892a553">å¤‡ä»½å’Œè¿˜åŸACL</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li>TAGS: <a href="../../index.html">Linux</a></li>
</ul>


<p>
Linuxç”¨æˆ·ç»„å’Œæƒé™ç®¡ç†
</p>

<p>
å†…å®¹æ¦‚è¿°
</p>

<ul class="org-ul">
<li>Linuxçš„å®‰å…¨æ¨¡å‹</li>
<li>ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶</li>
<li>ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤</li>
<li>ç†è§£å¹¶è®¾ç½®æ–‡ä»¶æƒé™</li>
<li>é»˜è®¤æƒé™</li>
<li>ç‰¹æ®Šæƒé™</li>
<li>æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨</li>
</ul>
<section id="outline-container-h:e915acc0-0239-4ab4-9831-f2cce014045d" class="outline-2">
<h2 id="h:e915acc0-0239-4ab4-9831-f2cce014045d">Linuxå®‰å…¨æ¨¡å‹</h2>
<div class="outline-text-2" id="text-h:e915acc0-0239-4ab4-9831-f2cce014045d">
<p>
èµ„æºåˆ†æ´¾ï¼š
</p>

<ul class="org-ul">
<li>Authenticationï¼šè®¤è¯ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½</li>
<li>Authorizationï¼šæˆæƒï¼Œä¸åŒçš„ç”¨æˆ·è®¾ç½®ä¸åŒæƒé™</li>
<li>Accouting|Auditionï¼šå®¡è®¡</li>
</ul>

<p>
å½“ç”¨æˆ·ç™»å½•æˆåŠŸæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä»¤ç‰Œtokenï¼ŒåŒ…æ‹¬ï¼šç”¨æˆ·æ ‡è¯†å’Œç»„æˆå‘˜ç­‰ä¿¡æ¯
</p>
</div>
<div id="outline-container-h:c0023fbf-6a3e-433a-a038-88c399718419" class="outline-3">
<h3 id="h:c0023fbf-6a3e-433a-a038-88c399718419">ç”¨æˆ·</h3>
<div class="outline-text-3" id="text-h:c0023fbf-6a3e-433a-a038-88c399718419">
<p>
Linuxä¸­æ¯ä¸ªç”¨æˆ·æ˜¯é€šè¿‡User Id ï¼ˆUIDï¼‰æ¥å”¯ä¸€æ ‡è¯†çš„
</p>

<ul class="org-ul">
<li>ç®¡ç†å‘˜ï¼šroot, 0</li>
<li>æ™®é€šç”¨æˆ·ï¼š1-60000 è‡ªåŠ¨åˆ†é…
<ul class="org-ul">
<li><p>
ç³»ç»Ÿç”¨æˆ·ï¼š1-499 ï¼ˆCentOS 6ä»¥å‰ï¼‰, 1-999 ï¼ˆCentOS 7ä»¥åï¼‰
</p>

<p>
å¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…
</p></li>

<li><p>
ç™»å½•ç”¨æˆ·ï¼š500+ ï¼ˆCentOS6ä»¥å‰ï¼‰, 1000+ï¼ˆCentOS7ä»¥åï¼‰
</p>

<p>
ç»™ç”¨æˆ·è¿›è¡Œäº¤äº’å¼ç™»å½•ä½¿ç”¨
</p></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-h:41c17e50-33a9-4511-934f-160182c34abb" class="outline-3">
<h3 id="h:41c17e50-33a9-4511-934f-160182c34abb">ç”¨æˆ·ç»„</h3>
<div class="outline-text-3" id="text-h:41c17e50-33a9-4511-934f-160182c34abb">
<p>
Linuxä¸­å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·åŠ å…¥ç”¨æˆ·ç»„ä¸­ï¼Œç”¨æˆ·ç»„æ˜¯é€šè¿‡Group IDï¼ˆGIDï¼‰æ¥
å”¯ä¸€æ ‡è¯†çš„ã€‚
</p>

<ul class="org-ul">
<li>ç®¡ç†å‘˜ç»„ï¼šroot, 0</li>
<li>æ™®é€šç»„ï¼š
<ul class="org-ul">
<li>ç³»ç»Ÿç»„ï¼š1-499ï¼ˆCentOS 6ä»¥å‰ï¼‰, 1-999ï¼ˆCentOS7ä»¥åï¼‰,
å¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…</li>
<li>æ™®é€šç»„ï¼š500+ï¼ˆCentOS 6ä»¥å‰ï¼‰, 1000+ï¼ˆCentOS7ä»¥åï¼‰, ç»™ç”¨æˆ·ä½¿ç”¨</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-h:0605796a-9698-4317-8541-fa8234256894" class="outline-3">
<h3 id="h:0605796a-9698-4317-8541-fa8234256894">ç”¨æˆ·å’Œç»„çš„å…³ç³»</h3>
<div class="outline-text-3" id="text-h:0605796a-9698-4317-8541-fa8234256894">
<ul class="org-ul">
<li>ç”¨æˆ·çš„ä¸»è¦ç»„(primary group)ï¼šç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªä¸»ç»„ï¼Œé»˜è®¤åˆ›
å»ºç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·ååŒåçš„ç»„ï¼Œåšä¸ºç”¨æˆ·çš„ä¸»è¦ç»„ï¼Œç”±äºæ­¤ç»„ä¸­åªæœ‰
ä¸€ä¸ªç”¨æˆ·ï¼Œåˆç§°ä¸ºç§æœ‰ç»„</li>

<li>ç”¨æˆ·çš„é™„åŠ ç»„(supplementary group)ï¼šä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºé›¶ä¸ªæˆ–å¤šä¸ªè¾…åŠ©ç»„ï¼Œ
é™„å±ç»„</li>
</ul>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#id postfix
<span style="color: #a0522d;">uid</span>=89(postfix) <span style="color: #a0522d;">gid</span>=89(postfix) <span style="color: #a0522d;">groups</span>=89(postfix),12(mail)
</pre>
</div>
</div>
</div>
<div id="outline-container-h:bbe30fb4-91f8-431f-bbc9-07cc42f24990" class="outline-3">
<h3 id="h:bbe30fb4-91f8-431f-bbc9-07cc42f24990">å®‰å…¨ä¸Šä¸‹æ–‡</h3>
<div class="outline-text-3" id="text-h:bbe30fb4-91f8-431f-bbc9-07cc42f24990">
<p>
Linuxå®‰å…¨ä¸Šä¸‹æ–‡Contextï¼šè¿è¡Œä¸­çš„ç¨‹åºï¼Œå³è¿›ç¨‹(process)ï¼Œä»¥è¿›ç¨‹å‘èµ·è€…çš„
èº«ä»½è¿è¡Œï¼Œè¿›ç¨‹æ‰€èƒ½å¤Ÿè®¿é—®èµ„æºçš„æƒé™å–å†³äºè¿›ç¨‹çš„è¿è¡Œè€…çš„èº«ä»½
</p>

<p>
æ¯”å¦‚ï¼šåˆ†åˆ«ä»¥root å’Œwang çš„èº«ä»½è¿è¡Œ /bin/cat /etc/shadowï¼Œå¾—åˆ°çš„ç»“æœæ˜¯
ä¸åŒçš„ï¼Œèµ„æºèƒ½å¦èƒ½è¢«è®¿é—®ï¼Œæ˜¯ç”±è¿è¡Œè€…çš„èº«ä»½å†³å®šï¼Œéç¨‹åºæœ¬èº«
</p>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[wang@centos8 ~]$<span style="color: #a0522d;">cat</span> /etc/shadow
cat: /etc/shadow: Permission denied
[root@centos8 ~]#cat /etc/shadow
root:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">zsrWEC56PrKifAEz</span>$<span style="color: #a0522d;">hylCuGySe</span>.H6l6O2MRvbtqy/VZgnZbau.y57dE85.YHq03MTJVV4UvQ
VIDcYA1IJzbgpWE0vTU.BtPHLbNBNn0:18246:0:99999:7:::
bin:*:18027:0:99999:7:::
daemon:*:18027:0:99999:7:::
adm:*:18027:0:99999:7:::
lp:*:18027:0:99999:7:::
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:baaedeff-8558-4968-baf3-907ad8d723b8" class="outline-2">
<h2 id="h:baaedeff-8558-4968-baf3-907ad8d723b8">ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶</h2>
<div class="outline-text-2" id="text-h:baaedeff-8558-4968-baf3-907ad8d723b8">
</div>
<div id="outline-container-h:2ed3f31a-8067-4f62-8ca0-631383761665" class="outline-3">
<h3 id="h:2ed3f31a-8067-4f62-8ca0-631383761665">ç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶</h3>
<div class="outline-text-3" id="text-h:2ed3f31a-8067-4f62-8ca0-631383761665">
<ul class="org-ul">
<li>/etc/passwdï¼šç”¨æˆ·åŠå…¶å±æ€§ä¿¡æ¯(åç§°ã€UIDã€ä¸»ç»„IDç­‰ï¼‰</li>
<li>/etc/shadowï¼šç”¨æˆ·å¯†ç åŠå…¶ç›¸å…³å±æ€§</li>
<li>/etc/groupï¼šç»„åŠå…¶å±æ€§ä¿¡æ¯</li>
<li>/etc/gshadowï¼šç»„å¯†ç åŠå…¶ç›¸å…³å±æ€§</li>
</ul>
</div>
</div>
<div id="outline-container-h:d90ee329-fed1-44c2-b2d2-2284745fc7b1" class="outline-3">
<h3 id="h:d90ee329-fed1-44c2-b2d2-2284745fc7b1">passwdæ–‡ä»¶æ ¼å¼</h3>
<div class="outline-text-3" id="text-h:d90ee329-fed1-44c2-b2d2-2284745fc7b1">
<div class="org-src-container">
<pre class="src src-sh">root@debian:~# whatis passwd
<span style="color: #0000ff;">passwd</span> (1)           - change user password
<span style="color: #0000ff;">passwd</span> (1ssl)        - OpenSSL application commands
<span style="color: #0000ff;">passwd</span> (5)           - the password file
root@debian:~# man 5 passwd 
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">name:password:UID:GID:GECOS:directory:shell
</pre>
</div>

<ol class="org-ol">
<li>login nameï¼šç™»å½•ç”¨åï¼ˆxuï¼‰</li>
<li><p>
passwdï¼šå¯†ç  (x); å ä½ç¬¦ <code>x</code> è¡¨ç¤ºå¯†ç å­˜åœ¨/etc/shadowä¸­ï¼›
</p>

<p>
å¦‚æœæ˜¯ <code>!</code> è¯´æ˜æ­¤ç”¨æˆ·ä¸èƒ½ç”¨å¯†ç ç™»å½•ï¼›
</p>

<p>
æˆ–è€…æ˜¯ <code>*</code> å·; ç»†èŠ‚ <code>man 5 passwd</code> ; <code>man pwconv(å¯†ç è½¬æ¢)</code>
</p></li>

<li>UIDï¼šç”¨æˆ·èº«ä»½ç¼–å· (ä» 1000 å¼€å§‹)</li>
<li>GIDï¼šç™»å½•é»˜è®¤æ‰€åœ¨ç»„ç¼–å· (1000)</li>
<li>GECOSï¼šç”¨æˆ·å…¨åæˆ–æ³¨é‡Š</li>
<li>home directoryï¼šç”¨æˆ·ä¸»ç›®å½• (/home/wang)</li>
<li>shellï¼šç”¨æˆ·é»˜è®¤ä½¿ç”¨shell (/bin/bash)</li>
</ol>

<p>
èŒƒä¾‹ï¼šæŸ¥çœ‹passwdæ–‡ä»¶
</p>
<div class="org-src-container">
<pre class="src src-sh">root@debian:~# getent passwd  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#31561;&#20215;&#20110;cat /etc/passwd</span>

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#26597;&#30475;&#25351;&#23450;&#29992;&#25143;&#23494;&#30721;&#25991;&#20214;&#26684;&#24335;</span>
root@debian:~# getent passwd  jasper
jasper:x:1000:1000:jasper,,,:/home/jasper:/bin/bash
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d4e15c54-9cce-4c26-b08c-e24c1c847c8c" class="outline-3">
<h3 id="h:d4e15c54-9cce-4c26-b08c-e24c1c847c8c">shadowæ–‡ä»¶æ ¼å¼</h3>
<div class="outline-text-3" id="text-h:d4e15c54-9cce-4c26-b08c-e24c1c847c8c">
<div class="org-src-container">
<pre class="src src-sh">username:password:last_change:min_change:max_change:warm:failed_expire:expiration:reserved
<span style="color: #0000ff;">&#26684;&#24335;</span>(&#20061;&#27573;):&#29992;&#25143;&#21517;:&#21152;&#23494;&#30340;&#23494;&#30721;:&#26368;&#36817;&#19968;&#27425;&#20462;&#25913;&#23494;&#30721;&#30340;&#26102;&#38388;:&#26368;&#30701;&#20351;&#29992;&#26399;&#38480;:&#26368;&#38271;&#20351;&#29992;&#26399;&#38480;:&#35686;&#21578;&#26399;&#27573;:&#23494;&#30721;&#31105;&#29992;&#26399;:&#36807;&#26399;&#26399;&#38480;:&#20445;&#30041;&#23383;&#27573; 

root:$<span style="color: #a0522d;">1</span>$<span style="color: #a0522d;">HDHf2v4i</span>$<span style="color: #a0522d;">LMo</span>.xGHfxQDOf8e043C.g/:16779:0:99999:7:::
</pre>
</div>

<ol class="org-ol">
<li>username: ç™»å½•ç”¨å</li>
<li>password: ä¸€èˆ¬ç”¨sha512åŠ å¯†</li>
<li><p>
last_change :
</p>

<p>
ä»1970å¹´1æœˆ1æ—¥(Unixå…ƒå¹´)èµ·åˆ°å¯†ç æœ€è¿‘ä¸€æ¬¡è¢«æ›´æ”¹çš„æ—¶é—´ï¼Œå¦‚16779ï¼Œè¡¨ç¤ºä¹‹åç¬¬16779
å¤©ï¼Œä½¿ç”¨ <code>date -d '1970-01-01 16779 days'</code> æŸ¥çœ‹å½“å¤©ä¿®æ”¹çš„æ—¥æœŸ
</p></li>

<li>min_change: å¯†ç å†è¿‡å‡ å¤©å¯ä»¥è¢«å˜æ›´ï¼ˆ0è¡¨ç¤ºéšæ—¶å¯è¢«å˜æ›´ï¼‰</li>
<li>max_change :å¯†ç å†è¿‡å‡ å¤©å¿…é¡»è¢«å˜æ›´ï¼ˆ99999è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼‰</li>
<li>warm : å¯†ç è¿‡æœŸå‰å‡ å¤©ç³»ç»Ÿæé†’ç”¨æˆ·ï¼ˆé»˜è®¤ä¸ºä¸€å‘¨ï¼‰</li>
<li>failed_expire : å¯†ç è¿‡æœŸå‡ å¤©åå¸å·ä¼šè¢«é”å®š</li>
<li><p>
expiration : ä»1970å¹´1æœˆ1æ—¥ç®—èµ·ï¼Œå¤šå°‘å¤©åå¸å·å¤±æ•ˆã€‚
</p>

<p>
ä¸åŒäºå¯†ç è¿‡æœŸï¼›è´¦æˆ·è¿‡æœŸæ—¶ï¼Œç”¨æˆ·å°†ä¸è¢«å…è®¸ç™»å½•ï¼›å¯†ç è¿‡æœŸæ—¶ï¼Œç”¨æˆ·å°†ä¸è¢«å…è®¸ä½¿ç”¨å…¶å¯†ç ç™»å½•ã€‚
</p></li>

<li>reserved : ä¿ç•™å­—æ®µ</li>
</ol>

<p>
ç”¨æˆ·å¯†ç æ®µè¯´æ˜ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">password: &#19968;&#33324;&#29992;sha512&#21152;&#23494;&#12290;

&#31995;&#32479;&#29992;&#25143;&#26159;&#19981;&#33021;&#30331;&#24405;&#30340;&#65292;&#23494;&#30721;&#23383;&#27573;&#20026;&#26143;&#21495;&#65288;*&#65289;&#65307;

&#20004;&#20010;&#24863;&#21497;&#21495;&#65288;!!&#65289;&#34920;&#31034;&#36825;&#20010;&#29992;&#25143;&#34987;&#38145;&#23450;&#20102;&#65292;&#26080;&#27861;&#30331;&#24405;&#65307;

&#32654;&#20803;&#31526;&#21495;&#65288;$&#65289;&#20986;&#29616;&#22312;&#21152;&#23494;&#26684;&#24335;&#30340;&#23494;&#30721;&#37324;&#65292;&#36215;&#21040;&#20998;&#38548;&#20316;&#29992;&#65307;

&#30001;&#19977;&#37096;&#20998;&#32452;&#25104;&#30340;&#65292;&#20197;$<span style="color: #a0522d;">&#20998;&#38548;</span>&#65292;&#21363;&#65306;$<span style="color: #a0522d;">id</span>$<span style="color: #a0522d;">salt</span>$<span style="color: #a0522d;">encrypted</span>  $<span style="color: #a0522d;">&#25968;&#23383;</span>$<span style="color: #a0522d;">&#38543;&#26426;&#25968;</span>$<span style="color: #a0522d;">&#21152;&#23494;&#21518;&#30340;&#23494;&#30721;&#20018;</span>&#65307;
&#31532;3&#20010; $ &#20998;&#38548;&#30340;&#25165;&#26159;&#30495;&#27491;&#30340;&#23494;&#30721;&#20018;&#65307;
id&#34920;&#31034;&#21152;&#23494;&#31639;&#27861;&#65292;&#24403;id&#20026;1&#26102;&#65292;&#20351;&#29992;md5&#21152;&#23494;&#65292;&#20197;&#27492;&#31867;&#25512;&#65292;id&#20026;6&#37319;&#29992;SHA512&#36827;&#34892;&#21152;&#23494;&#12290;
</pre>
</div>

<p>
å¯†ç å­˜å‚¨æ ¼å¼ï¼šå•å‘åŠ å¯†ï¼Œå¹¶å€ŸåŠ©äºsaltå®Œæˆ
</p>
<ul class="org-ul">
<li>1: md5</li>
<li>sha1</li>
<li>sha224</li>
<li>sha256</li>
<li>sha384</li>
<li>6: sha512</li>
</ul>

<p>
çœŸæ­£å®ç°å¯†ç æ¯”å¯¹æ˜¯è¿™æ ·çš„ï¼Œå¦‚ï¼Œ
ç”¨æˆ·ä½¿ç”¨å¯†ç ä¸ºhelloï¼ŒåŠ å…¥äº†éšæœºæ•°å¦‚12345678ï¼Œç”Ÿæˆä¸€ä¸ªåŠ å¯†å­—ä¸²hello12345678
åœ¨ç”¨æˆ·ç™»å½•æ—¶ï¼Œè¾“å…¥ hello å¯†ç ï¼Œè¿™æ—¶è®¡ç®—ç®—æ³•ä¼šæŠŠè®°å½•çš„æ•°(åœ¨ /etc/shadow
ä¸­è®°å½• )æå–å‡ºæ¥è¢«åœ¨ hello åé¢è®¡ç®—ä¸‹å¹¶ç”ŸæˆåŠ å¯†å­—ä¸²
hello12345678ï¼Œæœ€åå†è¿›è¡Œæ¥åŸå¯†ç æ¯”è¾ƒã€‚
</p>

<p>
æ›´æ”¹å¯†ç åŠ å¯†ç®—æ³•ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">authconfig  --passalgo=sha256 --update
</pre>
</div>

<p>
å¯†ç çš„å®‰å…¨ç­–ç•¥ï¼š
</p>

<ul class="org-ul">
<li>è¶³å¤Ÿé•¿</li>

<li>ä½¿ç”¨æ•°å­—ã€å¤§å†™å­—æ¯ã€å°å†™å­—æ¯åŠç‰¹æ®Šå­—ç¬¦ä¸­è‡³å°‘3ç§</li>

<li>ä½¿ç”¨éšæœºå¯†ç </li>

<li><p>
å®šæœŸæ›´æ¢,ä¸è¦ä½¿ç”¨æœ€è¿‘æ›¾ç»ä½¿ç”¨è¿‡çš„å¯†ç  èŒƒä¾‹ï¼šç”Ÿæˆéšæœºå¯†ç 
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#tr -dc <span style="color: #8b2252;">'[:alnum:]'</span> &lt; /dev/urandom | head -c 12
sFg6C8g5FAfe[root@centos8 ~]#openssl rand -base64 9
hvMkPmAyIrXMQInt
</pre>
</div>

<p>
ç”Ÿæˆéšæœºå¯†ç ï¼š<a href="https://suijimimashengcheng.51240.com/">https://suijimimashengcheng.51240.com/</a>
</p></li>
</ul>

<p>
ç”ŸæˆåŠ å¯†å¯†ç çš„æ–¹å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">md5&#21152;&#23494;</span>
openssl  passwd  -1  -salt <span style="color: #ff00ff;">`openssl rand -hex 4`</span>  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20351;&#29992;16&#36827;&#21046;&#38543;&#26426;&#24403;&#20316;&#8220;&#20304;&#26009;</span>
Password: 
$<span style="color: #a0522d;">1</span>$<span style="color: #a0522d;">fc43df06</span>$<span style="color: #a0522d;">iZPo9xnH5IrvkDvICWe0X1</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">&#20351;&#29992;grub-crypt&#21629;&#20196;&#65292;&#20250;&#25552;&#31034;&#36755;&#20986;&#23494;&#30721;&#65306;</span>
grub-crypt --md5

<span style="color: #b22222;"># </span><span style="color: #b22222;">python&#65292;&#21516;&#26679;&#20063;&#20250;&#25552;&#31034;&#36755;&#20986;&#23494;&#30721;</span>
<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">'import crypt,getpass; print crypt.crypt(getpass.getpass(), "$1$8_CHARACTER_SALT_HERE")'</span> | python -

<span style="color: #b22222;"># </span><span style="color: #b22222;">perl</span>
perl -e <span style="color: #8b2252;">'print crypt("1234abcdefg",q($1$password)),"\n"'</span>
&#24403;&#20351;&#29992;&#29305;&#27530;&#23383;&#31526;&#26102;&#65292;&#20363;&#22914;@$<span style="color: #a0522d;">&#31526;&#26102;&#38656;&#35201;&#22312;&#21069;&#38754;&#21152;&#19978;</span><span style="color: #8b2252;">\&#65292;</span>&#20363;&#65306;<span style="color: #8b2252;">\@\$</span>&#65292;&#21542;&#21017;&#21152;&#23494;&#23383;&#31526;&#20018;&#20250;&#38169;&#35823;
&#20854;&#20013;1234abcdefg&#20026;&#35201;&#32473;&#29992;&#25143;&#35774;&#32622;&#30340;&#23494;&#30721;&#65292;$<span style="color: #a0522d;">1</span>$<span style="color: #a0522d;">password&#23383;&#31526;&#20018;&#26159;&#33258;&#23450;&#20041;&#23383;&#31526;&#20018;</span>&#65292;shadow&#37324;&#19968;&#33324;&#29992;$<span style="color: #a0522d;">1</span>$<span style="color: #a0522d;">&#21518;&#38754;&#36319;8&#20010;&#23383;&#31526;&#36825;&#31181;&#26684;&#24335;</span>&#12290;
</pre>
</div>


<p>
èŒƒä¾‹ï¼šæŸ¥çœ‹cetnosç”¨æˆ·å¯†ç ä¿¡æ¯
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# cat /etc/shadow
centos:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">lLZBCZMe</span>$.AjEoX0iR.kPWZRIms30tjq3KbAr5vn3Is/d6uBe78Lx9lz4vjKTUJxluFow79dBoqmowXYADjR.X8iomGu6B1:17546:0:99999:7:::

[root@node01 ~]# echo <span style="color: #8b2252;">"17546"</span> | awk <span style="color: #8b2252;">'{print strftime("%F")}'</span>   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#36716;&#25442;&#26368;&#36817;&#19968;&#27425;&#20462;&#25913;&#23494;&#30721;&#26102;&#38388;&#20026;&#26131;&#35835;&#26102;&#38388;</span>
2018-01-16

[root@middle-ware ~]# getent passwd root
root:x:0:0:root:/root:/bin/bash

[root@middle-ware ~]# getent shadow root
root:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">G7pLVnKe4xdwkUQ6</span>$<span style="color: #a0522d;">oL0Z2gOtb7ssPatwwUKBhhAuft</span>.cJHkt7MO.FXw0ZxzIS0BX0R4A1o85bVrPEeiDZOdAhP9ffI725jtrfx/kP.::0:99999:7:::
</pre>
</div>

<p>
å®‰å…¨æ”»é˜²: hashcatã€Hydraã€John the ripper
</p>
</div>
</div>
<div id="outline-container-h:5aa21057-0d30-481e-9500-c51d8fa946bf" class="outline-3">
<h3 id="h:5aa21057-0d30-481e-9500-c51d8fa946bf">groupæ–‡ä»¶æ ¼å¼</h3>
<div class="outline-text-3" id="text-h:5aa21057-0d30-481e-9500-c51d8fa946bf">
<p>
æ ¼å¼ï¼š
</p>
<div class="org-src-container">
<pre class="src src-sh">group_name:password:GID:user_list
</pre>
</div>

<ol class="org-ol">
<li>ç¾¤ç»„åç§°ï¼šå°±æ˜¯ç¾¤ç»„åç§°</li>
<li>ç¾¤ç»„å¯†ç ï¼šé€šå¸¸ä¸éœ€è¦è®¾å®šï¼Œå ä½ç¬¦xï¼Œå¯†ç æ˜¯è¢«è®°å½•åœ¨/etc/gshadow</li>
<li>GIDï¼šå°±æ˜¯ç¾¤ç»„çš„ ID ä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨(åˆ†éš”ç¬¦ä¸ºé€—å·)</li>
</ol>

<p>
èŒƒä¾‹ï¼š   
</p>
<div class="org-src-container">
<pre class="src src-sh">distro:x:5000:gentoo
~]# id gentoo
<span style="color: #a0522d;">uid</span>=4001(gentoo) <span style="color: #a0522d;">gid</span>=4001(gentoo) <span style="color: #a0522d;">&#32452;</span>=4001(gentoo),5000(distro),5001(peguin)
</pre>
</div>
</div>
</div>
<div id="outline-container-h:4d9724ea-9157-49e7-a354-6ea1230a3ca5" class="outline-3">
<h3 id="h:4d9724ea-9157-49e7-a354-6ea1230a3ca5">gshdowæ–‡ä»¶æ ¼å¼</h3>
<div class="outline-text-3" id="text-h:4d9724ea-9157-49e7-a354-6ea1230a3ca5">
<p>
æ ¼å¼ï¼šgroup name:encrypted password:administrators:members
</p>

<ol class="org-ol">
<li>ç¾¤ç»„åç§°ï¼šå°±æ˜¯ç¾¤çš„åç§°</li>
<li>ç¾¤ç»„å¯†ç ï¼šä»¥ï¼å¼€å¤´è¡¨ç¤ºæ— åˆæ³•å¯†ç ï¼Œæ‰€ä»¥æ— ç”¨æˆ·ç»„ç®¡ç†å‘˜ã€‚*è¡¨ç¤ºç³»ç»Ÿç”¨æˆ·ç»„</li>
<li>ç»„ç®¡ç†å‘˜åˆ—è¡¨ï¼šç»„ç®¡ç†å‘˜çš„åˆ—è¡¨ï¼Œæ›´æ”¹ç»„å¯†ç å’Œæˆå‘˜</li>
<li>ä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨ï¼šå¤šä¸ªç”¨æˆ·é—´ç”¨é€—å·åˆ†éš”</li>
</ol>
</div>
</div>
<div id="outline-container-h:47e2d5d3-8379-4bf7-9609-b327e693d276" class="outline-3">
<h3 id="h:47e2d5d3-8379-4bf7-9609-b327e693d276">æ–‡ä»¶æ“ä½œ</h3>
<div class="outline-text-3" id="text-h:47e2d5d3-8379-4bf7-9609-b327e693d276">
<ul class="org-ul">
<li>vipwå’Œvigr</li>
<li>pwckå’Œgrpck</li>
</ul>

<p>
ç”¨æˆ·å¥åº·çŠ¶æ€å®¡è®¡ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# pwck
user <span style="color: #8b2252;">'ftp'</span>: directory <span style="color: #8b2252;">'/var/ftp'</span> does not exist
user <span style="color: #8b2252;">'gentoo'</span>: directory <span style="color: #8b2252;">'/var/tmp/gentoo'</span> does not exist
user <span style="color: #8b2252;">'fedora'</span>: program <span style="color: #8b2252;">'/bin/tcsh'</span> does not exist
pwck: no changes

[root@node01 ~]# grpck
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:fd709d98-1d23-4d68-bbbc-2d0aeb9e4332" class="outline-2">
<h2 id="h:fd709d98-1d23-4d68-bbbc-2d0aeb9e4332">ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤</h2>
<div class="outline-text-2" id="text-h:fd709d98-1d23-4d68-bbbc-2d0aeb9e4332">
<p>
ç”¨æˆ·ç®¡ç†å‘½ä»¤
</p>
<ul class="org-ul">
<li>useradd</li>
<li>usermod</li>
<li>userdel</li>
</ul>

<p>
ç»„å¸å·ç»´æŠ¤å‘½ä»¤
</p>
<ul class="org-ul">
<li>groupadd</li>
<li>groupmod</li>
<li>groupdel</li>
</ul>

<p>
èŒƒä¾‹ï¼šç”¨æˆ·å’Œç”¨æˆ·ç»„å¸¸ç”¨å‘½ä»¤
</p>
<div class="org-src-container">
<pre class="src src-sh">[root@proxy ~]# rpm -q --scripts postfix
preinstall scriptlet (using /bin/sh):
<span style="color: #b22222;"># </span><span style="color: #b22222;">Add user and groups if necessary</span>
/usr/sbin/groupadd -g 90 -r postdrop 2&gt;/dev/null
/usr/sbin/groupadd -g 89 -r postfix 2&gt;/dev/null
/usr/sbin/groupadd -g 12 -r mail 2&gt;/dev/null
/usr/sbin/useradd -d /var/spool/postfix -s /sbin/nologin -g postfix -G mail -M -r -u 89 postfix 2&gt;/dev/null
<span style="color: #a020f0;">exit</span> 0
</pre>
</div>
</div>
<div id="outline-container-h:acf9dc75-e1ac-4844-a609-5fa1e976cae6" class="outline-3">
<h3 id="h:acf9dc75-e1ac-4844-a609-5fa1e976cae6">ç”¨æˆ·åˆ›å»º useradd</h3>
<div class="outline-text-3" id="text-h:acf9dc75-e1ac-4844-a609-5fa1e976cae6">
<p>
useradd å‘½ä»¤å¯ä»¥åˆ›å»ºæ–°çš„Linuxç”¨æˆ· æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">useradd [options] LOGIN
</pre>
</div>

<p>
å¸¸è§é€‰é¡¹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">-u  UID                            <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#23450;&#29992;&#25143;id</span>
-o                                    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#37197;&#21512;-u &#36873;&#39033;&#65292;&#19981;&#26816;&#26597;UID&#30340;&#21807;&#19968;&#24615;</span>
-g GID                             <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#26126;&#29992;&#25143;&#25152;&#23646;&#22522;&#26412;&#32452;&#65292;&#21487;&#20026;&#32452;&#21517;&#65292;&#20063;&#21487;&#20197;GID.&#27492;&#32452;&#35201;&#20107;&#20808;&#23384;&#22312;</span>
-c <span style="color: #8b2252;">"COMMENT"</span>               <span style="color: #b22222;">#</span><span style="color: #b22222;">&#29992;&#25143;&#30340;&#27880;&#37322;&#20449;&#24687;</span>
-d HOME_DIR                  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20197;&#25351;&#23450;&#30340;&#36335;&#24452;(&#19981;&#23384;&#22312;)&#20026;&#23478;&#30446;&#24405;&#12290;&#36890;&#36807;&#22797;&#21046;/etc/skel&#27492;&#30446;&#24405;&#24182;&#37325;&#21629;&#21517;&#23454;&#29616;&#65307;&#25351;&#23450;&#30340;&#23478;&#30446;&#24405;&#36335;&#24452;&#22914;&#26524;&#23454;&#29616;&#23384;&#22312;&#65292;&#21017;&#19981;&#20250;&#20026;&#29992;&#25143;&#22797;&#21046;&#29615;&#22659;&#37197;&#32622;&#25991;&#20214;&#65307;</span>
-s SHELL                          <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#26126;&#29992;&#25143;&#30340;&#40664;&#35748;shell&#31243;&#24207;&#65292;&#21487;&#29992;&#21015;&#34920;&#22312;/etc/shells&#25991;&#20214;&#20013;&#12290;&#20063;&#21487;&#20197;&#19981;&#25351;&#26126;&#37324;&#38754;&#30340;shell&#65292;&#20294;&#26159;&#22312;&#23433;&#20840;&#26816;&#26597;&#26102;&#21487;&#33021;&#20250;&#25253;&#38169;&#12290;</span>
-G GROUP1[,GROUP2,...]   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20026;&#29992;&#25143;&#25351;&#26126;&#38468;&#21152;&#32452;&#65292;&#32452;&#39035;&#20107;&#20808;&#23384;&#22312;</span>
-N                                   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#19981;&#21019;&#24314;&#31169;&#29992;&#32452;&#20570;&#20027;&#32452;&#65292;&#20351;&#29992;users&#32452;&#20570;&#20027;&#32452;</span>
-r                                    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314;&#31995;&#32479;&#29992;&#25143; CentOS 6&#20043;&#21069;: ID&lt;500&#65292;CentOS 7&#20197;&#21518;: ID&lt;1000</span>
-m                                  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314;&#23478;&#30446;&#24405;&#65292;&#29992;&#20110;&#31995;&#32479;&#29992;&#25143;</span>
-M                                 <span style="color: #b22222;">#</span><span style="color: #b22222;">&#19981;&#21019;&#24314;&#23478;&#30446;&#24405;&#65292;&#29992;&#20110;&#38750;&#31995;&#32479;&#29992;&#25143;</span>
-f,--inactive                    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26356;&#25913;&#38750;&#27963;&#21160;&#26399;&#38480;&#22825;&#25968;&#12290;0 &#34920;&#31034;&#31435;&#21363;&#31105;&#27490;&#65292;-1 &#34920;&#31034;&#27704;&#19981;&#36807;&#26399;&#12290;</span>
-p                                  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#36755;&#20837;&#21152;&#23494;&#21475;&#20196;</span>
</pre>
</div>

<p>
èŒƒä¾‹:
</p>
<div class="org-src-container">
<pre class="src src-sh">useradd -r -u 48 -g apache -s /sbin/nologin -d /var/www -c <span style="color: #8b2252;">"Apache"</span> apache
</pre>
</div>
</div>
<div id="outline-container-h:10b86d25-e5f9-4772-bfae-dbac2d61c0dc" class="outline-4">
<h4 id="h:10b86d25-e5f9-4772-bfae-dbac2d61c0dc">ç”¨æˆ·é»˜è®¤å€¼è®¾å®š</h4>
<div class="outline-text-4" id="text-h:10b86d25-e5f9-4772-bfae-dbac2d61c0dc">
<p>
useradd å‘½ä»¤é»˜è®¤å€¼è®¾å®šç”±/etc/default/useraddå®šä¹‰
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#cat /etc/default/useradd
<span style="color: #b22222;"># </span><span style="color: #b22222;">useradd defaults file</span>
<span style="color: #a0522d;">GROUP</span>=100
<span style="color: #a0522d;">HOME</span>=/home
<span style="color: #a0522d;">INACTIVE</span>=-1   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#23545;&#24212;/etc/shadow&#25991;&#20214;&#31532;7&#21015;&#65292;&#21363;&#29992;&#25143;&#23494;&#30721;&#36807;&#26399;&#30340;&#23485;&#38480;&#26399;</span>
<span style="color: #a0522d;">EXPIRE</span>=     <span style="color: #b22222;">#</span><span style="color: #b22222;">&#23545;&#24212;/etc/shadow&#25991;&#20214;&#31532;8&#21015;&#65292;&#21363;&#29992;&#25143;&#24080;&#21495;&#30340;&#26377;&#25928;&#26399;</span>
<span style="color: #a0522d;">SHELL</span>=/bin/bash
<span style="color: #a0522d;">SKEL</span>=/etc/skel
<span style="color: #a0522d;">CREATE_MAIL_SPOOL</span>=yes
</pre>
</div>

<p>
æ˜¾ç¤ºæˆ–æ›´æ”¹é»˜è®¤è®¾ç½®
</p>

<div class="org-src-container">
<pre class="src src-sh">useradd -D <span style="color: #b22222;"># </span><span style="color: #b22222;">&#26174;&#31034;&#21019;&#24314;&#29992;&#25143;&#30340;&#40664;&#35748;&#37197;&#32622; &#25110; cat /etc/default/useradd &#32467;&#26524;&#19968;&#26679;</span>

useradd &#8211;D -s SHELL <span style="color: #b22222;"># </span><span style="color: #b22222;">&#20462;&#25913;&#23436;&#31995;&#32479;&#40664;&#35748;&#28155;&#21152;&#29992;&#25143;&#30340; shell</span>
useradd &#8211;D &#8211;b BASE_DIR
useradd &#8211;D &#8211;g GROUP
</pre>
</div>

<p>
æ–°å»ºç”¨æˆ·çš„ç›¸å…³æ–‡ä»¶
</p>

<ul class="org-ul">
<li>/etc/default/useradd</li>
<li>/etc/skel/*</li>
<li>/etc/login.defs</li>
</ul>

<p>
<b>useradd -Dï¼šæ˜¾ç¤ºåˆ›å»ºç”¨æˆ·çš„é»˜è®¤é…ç½®</b>
</p>

<p>
å…¶å®åœ¨ä¿®æ”¹/etc/default/useradd
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# useradd -D
<span style="color: #a0522d;">GROUP</span>=100   
<span style="color: #a0522d;">HOME</span>=/home
<span style="color: #a0522d;">INACTIVE</span>=-1  &#38750;&#27963;&#21160;&#26399;&#38480;&#20026;&#31105;&#29992;&#65292;&#23485;&#38480;&#26399;
<span style="color: #a0522d;">EXPIRE</span>=         &#36807;&#21435;&#26399;&#38480;9999
<span style="color: #a0522d;">SHELL</span>=/bin/bash
<span style="color: #a0522d;">SKEL</span>=/etc/skel
<span style="color: #a0522d;">CREATE_MAIL_SPOOL</span>=yes &#35201;&#19981;&#35201;&#21019;&#24314;&#37038;&#20214;&#32531;&#23384;&#24207;&#21015;&#65292;/var/spool/mail/&#30446;&#24405;&#21019;&#24314;
</pre>
</div>

<p>
è§£é‡Šï¼š
</p>
<ul class="org-ul">
<li>GROUP : åˆ›å»ºç”¨æˆ·æ—¶è¦ç»™å®ƒæ·»åŠ ä¸€ä¸ªåŒåçš„ç§æœ‰ç»„ ï¼Œé»˜è®¤ 100</li>
<li>HOME : ç”¨æˆ·åˆ›å»ºæ—¶å°¤å…¶æ˜¯ç³»ç»Ÿç»„æ—¶è¦ä¸è¦åˆ›å»ºä¸€ä¸ªå®¶ç›®å½•ï¼Œå¦‚æœåˆ›å»ºï¼Œå®¶ç›®
å½•æ‰€åœ¨çš„ä½ç½®ã€‚é»˜è®¤åœ¨ /home ç›®å½•ï¼Œå³åœ¨ /home ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå„ç”¨æˆ·åŒå
çš„ç›®å½•ã€‚</li>
<li>INACTIVE : éæ´»åŠ¨æœŸé™ã€‚é»˜è®¤ -1 è¡¨ç¤ºç¦ç”¨</li>
<li>EXPIRE : è¿‡å»æœŸé™ï¼Œæ²¡æœ‰æ—¶é—´åˆ™è¡¨ç¤ºä¸ºæ°¸ä¸è¿‡æœŸï¼Œé»˜è®¤ä¸º99999</li>
<li>SHELL : æŒ‡æ˜ç”¨æˆ·ä½¿ç”¨çš„ shell ç±»å‹ï¼Œé»˜è®¤ /bin/bash</li>
<li>SKEL : å¤åˆ¶ç”¨æˆ·éª¨æ¶ä¿¡æ¯çš„ä½ç½®ï¼Œé»˜è®¤ä½ç½®ä¸º/etc/skel</li>
<li>CREATE_MAIL_SPOOL : æ˜¯å¦ç»™ç”¨æˆ·åˆ›å»ºé‚®ä»¶ç¼“å­˜åºåˆ—ï¼Œé»˜è®¤ yesï¼Œè¡¨ç¤ºæ¯åˆ›å»º
ä¸€ä¸ªç”¨æˆ·ä¼šåœ¨ <i>var/spool/mail</i> ç›®å½•åˆ›å»ºç”¨æˆ·ä¸“ç”¨çš„é‚®ç®±</li>
</ul>


<p>
æ³¨æ„ï¼šåˆ›å»ºç”¨æˆ·æ—¶çš„è¯¸å¤šé»˜è®¤è®¾å®šé…ç½®æ–‡ä»¶ä¸º/etc/login.defs
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# egrep -v <span style="color: #8b2252;">'^$|^#'</span> /etc/login.defs
MAIL_DIR        /var/spool/mail  &#37038;&#20214;&#38431;&#21015;&#30446;&#24405;
PASS_MAX_DAYS   99999     &#23494;&#30721;&#26368;&#22823;&#20351;&#29992;&#22825;&#25968;&#65292;99999&#22522;&#26412;&#34920;&#31034;&#27704;&#36828;
PASS_MIN_DAYS   0         &#23494;&#30721;&#26368;&#23567;&#20351;&#29992;&#22825;&#25968;
PASS_MIN_LEN    5           &#23494;&#30721;&#26368;&#23567;&#38271;&#24230;
PASS_WARN_AGE   7       &#23494;&#30721;&#36807;&#26399;&#35686;&#21578;&#26085;&#26399;
UID_MIN                   1000        &#26222;&#36890;&#29992;&#25143;&#26368;&#23567; ID &#21495;
UID_MAX                 60000     &#26222;&#36890;&#29992;&#26368;&#22823; ID &#21495;
SYS_UID_MIN               201    &#31995;&#32479;&#29992;&#25143;&#26368;&#23567;ID&#21495;
SYS_UID_MAX               999   &#31995;&#32479;&#29992;&#25143;&#26368;&#22823; ID &#21495;
GID_MIN         1000         &#26368;&#23567;&#29992;&#25143;&#32452;ID&#21495;
GID_MAX         60000       &#26368;&#22823;&#29992;&#25143;&#32452;ID&#21495;
CREATE_HOME     yes       &#21019;&#24314;&#23478;&#30446;&#24405;
UMASK           077      &#40664;&#35748;&#36974;&#32617;&#30721;
USERGROUPS_ENAB yes     &#21024;&#38500;&#29992;&#25143;&#26159;&#22914;&#26524;&#20854;&#32452;&#27809;&#26377;&#29992;&#25143;&#19968;&#24182;&#21024;&#38500;
ENCRYPT_METHOD SHA512   &#20351;&#29992;&#39069;&#21152;&#23494;&#31639;&#27861;&#20026;SHA512  
</pre>
</div>

<p>
å¤åˆ¶å°æŠ€å·§
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">&#22797;&#21046;&#30446;&#24405;&#19979;&#30340;&#38544;&#34255;&#25991;&#20214;</span>
cp  /etc/skel/.[^.]* /home/test
<span style="color: #b22222;"># </span><span style="color: #b22222;">&#22797;&#21046;&#30446;&#24405;&#19979;&#30340;&#25152;&#26377;&#25991;&#20214;</span>
cp -r /etc/skel/. /home/test
cp -r /etc/skel /home/test
</pre>
</div>

<p>
æ‰¹é‡ä¿®æ”¹ç”¨æˆ·å£ä»¤
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">echo</span> username:passwd | chpasswd
</pre>
</div>

<p>
æ‰¹é‡åˆ›å»ºç”¨æˆ·
</p>
<div class="org-src-container">
<pre class="src src-sh">newusers passwd &#26684;&#24335;&#25991;&#20214; 
</pre>
</div>

<p>
èŒƒä¾‹: CentOS 6 åˆ›å»ºå¹¶æŒ‡å®šåŸºäºsha512çš„ç”¨æˆ·å¯†ç 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#26041;&#27861; 1&#65306;
[root@centos6 ~]#grub-crypt --help
Usage: grub-crypt [OPTION]...
Encrypt a password.
&#160;-h, --help &#160;&#160;&#160;&#160;&#160;&#160;Print this message and exit
&#160;-v, --version &#160;&#160;&#160;&#160;&#160;Print the version information and exit
&#160;--md5 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Use MD5 to encrypt the password
&#160;--sha-256 &#160;&#160;&#160;&#160;&#160;&#160;&#160;Use SHA-256 to encrypt the password
&#160;--sha-512 &#160;&#160;&#160;&#160;&#160;&#160;&#160;Use SHA-512 to encrypt the password (default)
Report bugs to <a href="mailto:bug-grub%40gnu.org">&lt;bug-grub@gnu.org&gt;</a>.
EOF

[root@centos6 ~]#grub-crypt --sha-512
Password:
Retype password:
$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">v9A2</span>/xUNwAWwEmHN$<span style="color: #a0522d;">q7Wz</span>.uscsV/8J5Gss3KslX8hKXOoaP3hDpOBWeBfMQHVIRZiwHUUkii84cvQWIMnvtnXYsdVHuLO4KhOiSOMh/

[root@centos6 ~]#useradd -p <span style="color: #8b2252;">'$6$v9A2/xUNwAWwEmHN$q7Wz.uscsV/8J5Gss3KslX8hKXOoaP3hDpOBWeBfMQHVIRZiwHUUkii84cvQWIMnvtnXYsdVHuLO4KhOiSOMh/'</span> test

[root@centos6 ~]#getent shadow test
<span style="color: #483d8b;">test</span>:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">v9A2</span>/xUNwAWwEmHN$<span style="color: #a0522d;">q7Wz</span>.uscsV/8J5Gss3KslX8hKXOoaP3hDpOBWeBfMQHVIRZiwHUUkii84cvQWIMnvtnXYsdVHuLO4KhOiSOMh/:18459:0:99999:7:::

&#26041;&#27861;2&#65306;
useradd -p <span style="color: #ff00ff;">`echo meu | openssl passwd -6 -salt ARZrof3ZBlFLYESn -stdin`</span> zhang 
</pre>
</div>

<p>
èŒƒä¾‹: åˆ©ç”¨Pythonç¨‹åºåœ¨CentOS7 ç”Ÿæˆsha512åŠ å¯†å¯†ç 
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos7 ~]#python -c <span style="color: #8b2252;">'import crypt,getpass;pw="me";print(crypt.crypt(pw))'</span>
$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">pt2FMf6YqKea3mh</span>$.7Hkslg17uI.Wu7tVVtkzrwktXrOC8DxcMFC4JO1igrqR7VAi87H5PHOuLTUEjl7eJqKUhMT1e9ixojn1
</pre>
</div>

<p>
èŒƒä¾‹: CentOS8 ç”Ÿæˆsha512åŠ å¯†å¯†ç 
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#openssl passwd -6 me
$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">UOyYOao</span>.iM2.rPnM$<span style="color: #a0522d;">jCpTehqh5e234fXcDzkDMddthpKNL3scOZjTHh9fXds8Eu6gNdEQqLMQgOboipZ08mnz2V</span>.
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:690a6fde-d52d-4ffb-b064-ab829a1037a0" class="outline-3">
<h3 id="h:690a6fde-d52d-4ffb-b064-ab829a1037a0">ç”¨æˆ·å±æ€§ä¿®æ”¹ usermod</h3>
<div class="outline-text-3" id="text-h:690a6fde-d52d-4ffb-b064-ab829a1037a0">
<p>
usermod å‘½ä»¤å¯ä»¥ä¿®æ”¹ç”¨æˆ·å±æ€§ æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">usermod [OPTION] login
</pre>
</div>

<p>
å¸¸è§é€‰é¡¹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">-u UID                   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;UID</span>
-g GID                   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#20027;&#32452;,&#27880;&#24847;&#35813;&#20107;&#20808;&#23384;&#22312;</span>
-G GROUP1[,GROUP2,...[,GROUPN]]]  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#38468;&#21152;&#32452;&#65292;&#21407;&#26469;&#30340;&#38468;&#21152;&#32452;&#23558;&#20250;&#34987;&#35206;&#30422;&#65307;&#33509;&#20445;&#30041;&#21407;&#26377;&#65292;&#21017;&#35201;&#21516;&#26102;&#20351;&#29992;-a&#36873;&#39033;</span>
-s SHELL                <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#30340;&#40664;&#35748;SHELL</span>
-c <span style="color: #8b2252;">'COMMENT'</span>      <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#30340;&#27880;&#37322;&#20449;&#24687;</span>
-d HOME               <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#23478;&#30446;&#24405;&#19981;&#20250;&#33258;&#21160;&#21019;&#24314;&#65307;&#33509;&#35201;&#21019;&#24314;&#26032;&#23478;&#30446;&#24405;&#24182;&#31227;&#21160;&#21407;&#23478;&#25968;&#25454;&#65292;&#21516;&#26102;&#20351;&#29992;-m&#36873;&#39033;</span>
-l login_name:        <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#30340;&#21517;&#23383;</span>
-L                           <span style="color: #b22222;">#</span><span style="color: #b22222;">lock&#25351;&#23450;&#29992;&#25143;,&#22312;/etc/shadow &#23494;&#30721;&#26639;&#30340;&#22686;&#21152; !</span>
-U                          <span style="color: #b22222;">#</span><span style="color: #b22222;">unlock&#25351;&#23450;&#29992;&#25143;,&#23558; /etc/shadow &#23494;&#30721;&#26639;&#30340; ! &#25343;&#25481;</span>
-e YYYY-MM-DD    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#26126;&#29992;&#25143;&#36134;&#21495;&#36807;&#26399;&#26085;&#26399;</span>
-f INACTIVE            <span style="color: #b22222;">#</span><span style="color: #b22222;">&#35774;&#23450;&#38750;&#27963;&#21160;&#26399;&#38480;&#65292;&#21363;&#23485;&#38480;&#26399;</span>
-m, --move-home  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21482;&#33021;&#19982;-d&#36873;&#39033;&#19968;&#21516;&#20351;&#29992;&#65292;&#29992;&#20110;&#23558;&#21407;&#26469;&#30340;&#23478;&#30446;&#24405;&#31227;&#21160;&#20026;&#26032;&#30340;&#23478;&#30446;&#24405;&#65307;</span>
-p                          <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#26126;&#23494;&#30721;</span>
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">&#28165;&#31354;&#29992;&#25143;&#30340;&#38468;&#21152;&#32452;</span>
usermod -G <span style="color: #8b2252;">''</span> wang

<span style="color: #b22222;"># </span><span style="color: #b22222;">bobo &#28155;&#21152;&#21040; wheel &#32452;&#20013;</span>
sudo usermod -aG wheel bobo

<span style="color: #b22222;"># </span><span style="color: #b22222;">&#26356;&#25913;bobo&#30340;&#32452;&#20026;g1,g2,g3</span>
usermod -G g1,g2,g3 bobo

<span style="color: #b22222;"># </span><span style="color: #b22222;">&#38145;&#23450;&#29992;&#25143;</span>
usermod -L &#29992;&#25143;&#21517;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:aefe51ef-0960-47c8-a58a-7d2f73278e56" class="outline-3">
<h3 id="h:aefe51ef-0960-47c8-a58a-7d2f73278e56">åˆ é™¤ç”¨æˆ· userdel</h3>
<div class="outline-text-3" id="text-h:aefe51ef-0960-47c8-a58a-7d2f73278e56">
<p>
userdel å¯åˆ é™¤Linux ç”¨æˆ· æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">userdel [OPTION]... Login

&#24120;&#35265;&#36873;&#39033;&#65306;
-f, --force     <span style="color: #b22222;">#</span><span style="color: #b22222;">&#24378;&#21046;</span>
-r, --remove <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21024;&#38500;&#29992;&#25143;&#23478;&#30446;&#24405;&#21644;&#37038;&#31665;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-h:f55c6304-45af-40ec-a012-e5216dcb61f3" class="outline-3">
<h3 id="h:f55c6304-45af-40ec-a012-e5216dcb61f3">æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯ id</h3>
<div class="outline-text-3" id="text-h:f55c6304-45af-40ec-a012-e5216dcb61f3">
<p>
id å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç”¨æˆ·çš„UIDï¼ŒGIDç­‰ä¿¡æ¯
</p>

<div class="org-src-container">
<pre class="src src-sh">id [OPTION]... [USER]

&#24120;&#35265;&#36873;&#39033;&#65306;
-u  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;UID</span>
-g  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;GID</span>
-G  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;&#29992;&#25143;&#25152;&#23646;&#30340;&#32452;&#30340;ID</span>
-n  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;&#21517;&#31216;&#65292;&#38656;&#37197;&#21512;ugG&#20351;&#29992;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-h:525611b9-2b08-449c-bc70-40f7b430edcc" class="outline-3">
<h3 id="h:525611b9-2b08-449c-bc70-40f7b430edcc">åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤ su</h3>
<div class="outline-text-3" id="text-h:525611b9-2b08-449c-bc70-40f7b430edcc">
<p>
su: å³ switch userï¼Œå‘½ä»¤å¯ä»¥åˆ‡æ¢ç”¨æˆ·èº«ä»½ï¼Œå¹¶ä¸”ä»¥æŒ‡å®šç”¨æˆ·çš„èº«ä»½æ‰§è¡Œå‘½ä»¤
æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">su [options...] [-] [user [args...]]

&#24120;&#35265;&#36873;&#39033;&#65306;
-l --login                               <span style="color: #b22222;">#</span><span style="color: #b22222;">su -l UserName &#30456;&#24403;&#20110; su - UserName</span>
-s                                          <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#23450;SHELL</span>
-c, --command &lt;command&gt; <span style="color: #b22222;">#</span><span style="color: #b22222;">pass a single command to the shell with -c</span>
</pre>
</div>

<p>
åˆ‡æ¢ç”¨æˆ·çš„æ–¹å¼ï¼š
</p>

<ul class="org-ul">
<li>su UserNameï¼šéç™»å½•å¼åˆ‡æ¢ï¼Œå³ä¸ä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œä¸æ”¹å˜å½“å‰å·¥ä½œç›®å½•ï¼Œå³ä¸å®Œå…¨åˆ‡æ¢</li>
<li>su - UserNameï¼šç™»å½•å¼åˆ‡æ¢ï¼Œä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œåˆ‡æ¢è‡³è‡ªå·²çš„å®¶ç›®å½•ï¼Œå³å®Œå…¨åˆ‡æ¢</li>
</ul>

<p>
è¯´æ˜ï¼šroot suè‡³å…¶ä»–ç”¨æˆ·æ— é¡»å¯†ç ï¼›érootç”¨æˆ·åˆ‡æ¢æ—¶éœ€è¦å¯†ç 
</p>

<p>
æ³¨æ„ï¼šsu åˆ‡æ¢æ–°ç”¨æˆ·åï¼Œä½¿ç”¨ exit é€€å›è‡³æ—§çš„ç”¨æˆ·ï¼Œè€Œä¸è¦å†ç”¨ suåˆ‡æ¢è‡³æ—§
ç”¨æˆ·ï¼Œå¦åˆ™ä¼šç”Ÿæˆå¾ˆå¤šçš„bashå­è¿›ç¨‹ï¼Œç¯å¢ƒå¯èƒ½ä¼šæ··ä¹±ã€‚
</p>

<p>
æ¢ä¸ªèº«ä»½æ‰§è¡Œå‘½ä»¤ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">su [-] UserName -c <span style="color: #8b2252;">'COMMAND'</span>
</pre>
</div>

<p>
åˆ‡æ¢ç”¨æˆ·å¹¶ç»™å®šä¸€ä¸ªbash
</p>

<div class="org-src-container">
<pre class="src src-sh">su - docker -s <span style="color: #8b2252;">'/bin/bash'</span>
</pre>
</div>

<p>
èŒƒä¾‹ï¼šç”¨æˆ·ä¸å¯ç™»å½•çš„æ–¹æ³•
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#su -s /sbin/nologin wang
This account is currently not available.
[root@centos8 ~]#whoami
root

[root@centos8 ~]#su -s /bin/false wang <span style="color: #b22222;"># </span><span style="color: #b22222;">&#19981;&#25253;&#38169;</span>
[root@centos8 ~]#whoami
root
</pre>
</div>


<p>
èŒƒä¾‹ï¼šåˆ‡æ¢ç”¨æˆ·æ‰§è¡Œå‘½ä»¤
</p>

<div class="org-src-container">
<pre class="src src-sh">[wang@centos8 ~]$<span style="color: #a0522d;">su</span> - root -c <span style="color: #8b2252;">"getent shadow"</span>

[root@middle-ware ~]# su - admin -c <span style="color: #8b2252;">'touch a.txt'</span>
[root@middle-ware ~]# ll ~admin
total 0
-rw-rw-r-- 1 admin admin 0 Dec 26 01:00 a.txt
</pre>
</div>

<p>
èŒƒä¾‹ï¼šåˆ‡æ¢ç”¨æˆ·æŒ‡å®šSHELL
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#su bin
This account is currently not available.
[root@centos8 ~]#su -s /bin/bash bin
bash-4.4$ whoami
bin
bash-4.4$
[root@centos8 ~]#getent passwd tss
tss:x:59:59:Account used by the trousers package to sandbox the tcsd
daemon:/dev/null:/sbin/nologin

[root@centos8 ~]#su - -s /bin/bash tss
Last login: Fri Mar 27 09:46:43 CST 2020 on pts/0
su: warning: cannot change directory to /dev/null: Not a directory
-bash: /dev/null/.bash_profile: Not a directory
[tss@centos8 root]$<span style="color: #a0522d;">pwd</span>
/root
[tss@centos8 root]$<span style="color: #a0522d;">whoami</span>
tss
</pre>
</div>
</div>
</div>
<div id="outline-container-h:4d206d46-cea6-4219-a556-08ccad9491af" class="outline-3">
<h3 id="h:4d206d46-cea6-4219-a556-08ccad9491af">è®¾ç½®å¯†ç  passwd</h3>
<div class="outline-text-3" id="text-h:4d206d46-cea6-4219-a556-08ccad9491af">

<figure id="org630aaea">
<img src="images/image-20210215223043542.png" alt="image-20210215223043542.png" width="60%">

</figure>

<p>
passwd å¯ä»¥ä¿®æ”¹ç”¨æˆ·å¯†ç  æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">passwd [OPTIONS] UserName

1) passwd&#65306;&#20462;&#25913;&#29992;&#25143;&#33258;&#24049;&#30340;&#23494;&#30721;&#65307;
2) passwd USERNAME&#65306;&#20462;&#25913;&#25351;&#23450;&#29992;&#25143;&#30340;&#23494;&#30721;&#65292;&#20294;&#20165;root&#26377;&#27492;&#26435;&#38480;&#65307;
</pre>
</div>

<p>
å¸¸ç”¨é€‰é¡¹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">-d                       <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21024;&#38500;&#25351;&#23450;&#29992;&#25143;&#23494;&#30721;</span>
-l                        <span style="color: #b22222;">#</span><span style="color: #b22222;">&#38145;&#23450;&#25351;&#23450;&#29992;&#25143;&#12290;&#19981;&#33021;&#30331;&#24405;  /etc/shadow &#31532;&#20108;&#27573;&#20986;&#29616;2&#20010;&#24863;&#21497;&#21495;</span>
-u                       <span style="color: #b22222;">#</span><span style="color: #b22222;">&#35299;&#38145;&#25351;&#23450;&#29992;&#25143;</span>
-e                       <span style="color: #b22222;">#</span><span style="color: #b22222;">&#24378;&#21046;&#29992;&#25143;&#19979;&#27425;&#30331;&#24405;&#20462;&#25913;&#23494;&#30721;</span>
-f                        <span style="color: #b22222;">#</span><span style="color: #b22222;">&#24378;&#21046;&#25805;&#20316;</span>
-n mindays         <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#23450;&#26368;&#30701;&#20351;&#29992;&#26399;&#38480;</span>
-x maxdays         <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26368;&#22823;&#20351;&#29992;&#26399;&#38480;</span>
-w warndays       <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25552;&#21069;&#22810;&#23569;&#22825;&#24320;&#22987;&#35686;&#21578;</span>
-i inactivedays    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#38750;&#27963;&#21160;&#26399;&#38480;</span>
-S                      <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26597;&#30475;&#29992;&#25143;&#29366;&#24577;</span>
--stdin               <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20174;&#26631;&#20934;&#36755;&#20837;&#25509;&#25910;&#29992;&#25143;&#23494;&#30721;,Ubuntu&#26080;&#27492;&#36873;&#39033;</span>
</pre>
</div>

<p>
èŒƒä¾‹ï¼šéäº¤äº’å¼ä¿®æ”¹ç”¨æˆ·å¯†ç 
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"PASSWORD"</span> | passwd --stdin USERNAME

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#36866;&#29992;&#20110;&#32418;&#24125;&#31995;&#21015;&#30340;Linux&#29256;&#26412;</span>
[root@centos8 ~]#echo <span style="color: #8b2252;">'123456'</span> | passwd --stdin me

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#27492;&#26041;&#24335;&#26356;&#36890;&#29992;&#65292;&#36866;&#29992;&#20110;&#21508;&#31181;Linux&#29256;&#26412;&#65292;&#22914;:ubuntu</span>
[root@centos8 ~]#echo -e <span style="color: #8b2252;">'123456\n123456'</span> | passwd me
</pre>
</div>

<p>
èŒƒä¾‹: Ubuntu éäº¤äº’å¼ä¿®æ”¹ç”¨æˆ·å¯†ç 
</p>
<div class="org-src-container">
<pre class="src src-sh">[root@ubuntu1804 ~]#echo wang:centos |chpasswd
[root@ubuntu1804 ~]#passwd wang &lt;&lt;EOF
<span style="color: #ffa54f;">&gt; centos</span>
<span style="color: #ffa54f;">&gt; centos</span>
<span style="color: #ffa54f;">&gt; EOF</span>

<span style="color: #ffa54f;">[root@ubuntu1804 ~]#echo -e '123456\123456' | passwd wang</span>
</pre>
</div>

<p>
èŒƒä¾‹ï¼šè®¾ç½®ç”¨æˆ·ä¸‹æ¬¡å¿…é¡»æ›´æ”¹å¯†ç 
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#useradd wang
[root@centos8 ~]#echo 123456 | passwd --stdin wang
Changing password for user wang.
passwd: all authentication tokens updated successfully.

[root@centos8 ~]#getent shadow wang
wang:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">4</span>f78ko7hJ4fcMvIH$<span style="color: #a0522d;">lpbOkFfziDBLT</span>.8XBCi8c/N7wysDAejN5H9Fgxkt99HRDLTEosO43CK
Yi2XSSVHxAK568Olj3C5bwfNExlves/:18348:0:99999:7:::

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#24378;&#21046;&#19979;&#27425;&#30331;&#24405;&#20462;&#25913;&#23494;&#30721;</span>
[root@centos8 ~]#passwd -e wang
Expiring password for user wang.
passwd: Success
[root@centos8 ~]#getent shadow wang
wang:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">4</span>f78ko7hJ4fcMvIH$<span style="color: #a0522d;">lpbOkFfziDBLT</span>.8XBCi8c/N7wysDAejN5H9Fgxkt99HRDLTEosO43CK
Yi2XSSVHxAK568Olj3C5bwfNExlves/:0:0:99999:7:::

[root@centos8 ~]#su - admin
Last login: Fri Mar 27 09:55:27 CST 2020 on pts/0
[cici@centos8 ~]$<span style="color: #a0522d;">su</span> - wang
Password:
You are required to change your password immediately (administrator enforced)
Current password:
New password:
BAD PASSWORD: The password is shorter than 8 characters
New password:
BAD PASSWORD: The password fails the dictionary check - it is too
simplistic/systematic
su: Have exhausted maximum number of retries for service

[cici@centos8 ~]$<span style="color: #a0522d;">su</span> - wang
Password:
You are required to change your password immediately (administrator enforced)
Current password:
New password:
Retype new password:
Last login: Fri Mar 27 10:01:20 CST 2020 on pts/0
Last failed login: Fri Mar 27 10:02:37 CST 2020 on pts/0
There was 1 failed login attempt since the last successful login.
[wang@centos8 ~]$<span style="color: #a0522d;">exit</span>
<span style="color: #a020f0;">logout</span>
[cici@centos8 ~]$<span style="color: #a0522d;">exit</span>
<span style="color: #a020f0;">logout</span>
[cici@centos8 ~]#getent shadow wang
wang:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">TX0iLjF52ByHh1zH</span>$<span style="color: #a0522d;">g</span>.WI4LNfauuwgnxpRhd7ePqFKHZ85YU3r6Lh2S0PWRXWGjGlDVtomLW
qpdiWrT.vwqD/Wzok.kzQhUHc8UCs91:18348:0:99999:7:::
</pre>
</div>

<p>
èŒƒä¾‹ï¼š-d : æ¸…é™¤ç”¨æˆ·å¯†ç ä¸²ï¼›
</p>
<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# useradd docker
[root@node01 ~]# echo <span style="color: #8b2252;">'123456'</span> | passwd --stdin docker
[root@node01 ~]# tail /etc/shadow
docker:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">G6nWXI99</span>$<span style="color: #a0522d;">0</span>x0tH.fh2RO1Vl0nbRZBWI6yK.M6csr5EnovKWOqRm.NLd10pw/0PCFqiCvBWA/yWW2La00oZS.lWWjQqjDA30:17550:0:99999:7:::

[root@node01 ~]# passwd -d docker
[root@node01 ~]# tail /etc/shadow
docker::17550:0:99999:7:::
</pre>
</div>

<p>
èŒƒä¾‹ï¼š-l, -u : é”å®šå’Œè§£é”ç”¨æˆ·ï¼› ä¸èƒ½ç™»å½• /etc/shadow ç¬¬äºŒæ®µå‡ºç°2ä¸ªæ„Ÿå¹å·
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# useradd -c <span style="color: #8b2252;">"Fedora Core"</span> -s /bin/tcsh fedora <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314;&#29992;&#25143;fedora,&#20854;&#27880;&#37322;&#20449;&#24687;&#20026;"Fedora Core",&#40664;&#35748;shell&#20026;/bin/tcsh</span>

[root@node01 ~]# passwd -l fedora
[root@node01 ~]# tail -1 /etc/shadow
fedora:!!:17549:0:99999:7:::

[root@node01 ~]# passwd  -S fedora <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26597;&#30475;&#29992;&#25143;&#29366;&#24577;</span>
fedora LK 2018-01-18 0 99999 7 -1 (Password locked.)

[root@node01 ~]# passwd -uf fedora <span style="color: #b22222;"># </span><span style="color: #b22222;">&#35299;&#38145;&#29992;&#25143;</span>
[root@node01 ~]# passwd  -S fedora
fedora NP 2018-01-18 0 99999 7 -1 (Empty password.)
[root@node01 ~]# tail -1 /etc/shadow
fedora::17549:0:99999:7:::
</pre>
</div>

<p>
linuxç³»ç»Ÿé”å®šä¸€ä¸ªç”¨æˆ·è´¦å·ï¼Œæ–¹æ³•æœ‰å¾ˆå¤šï¼š
</p>
<ol class="org-ol">
<li>ä»¥Rootç™»é™†ï¼Œåˆ é™¤ç”¨æˆ·userdel -r ç”¨æˆ·åï¼›</li>
<li>ä»¥Rootç™»é™†ï¼Œé”å®šç”¨æˆ·usermod -L ç”¨æˆ·åï¼›</li>
<li>ä»¥Rootç™»é™†ï¼Œä¸ç»™ç”¨æˆ·äº¤äº’å¼çš„shell ï¼š usermod -s sbin/nonloginï¼› ä»¥ä¸Šä¸‰ç§æœ€ç®€å•ã€‚</li>
</ol>
</div>
</div>
<div id="outline-container-h:0577cca3-7a19-46d2-93c4-09e6a4367e6b" class="outline-3">
<h3 id="h:0577cca3-7a19-46d2-93c4-09e6a4367e6b">ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥ chage</h3>
<div class="outline-text-3" id="text-h:0577cca3-7a19-46d2-93c4-09e6a4367e6b">
<p>
chage å¯ä»¥ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥ æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chage [OPTION]... LOGIN

&#24120;&#35265;&#36873;&#39033;&#65306;
-d LAST_DAY                         <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26356;&#25913;&#23494;&#30721;&#30340;&#26102;&#38388;</span>
-m --mindays MIN_DAYS      <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26368;&#30701;&#20351;&#29992;&#26102;&#38388;</span>
-M --maxdays MAX_DAYS     <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26368;&#38271;&#20351;&#29992;&#26102;&#38388;</span>
-W --warndays WARN_DAYS  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#35686;&#21578;&#26102;&#38388;</span>
-I --inactive INACTIVE            <span style="color: #b22222;">#</span><span style="color: #b22222;">&#23494;&#30721;&#36807;&#26399;&#21518;&#30340;&#23485;&#38480;&#26399;</span>
-E --expiredate EXPIRE_DATE <span style="color: #b22222;">#</span><span style="color: #b22222;">&#29992;&#25143;&#30340;&#26377;&#25928;&#26399;</span>
-l                                           <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;&#23494;&#30721;&#31574;&#30053;</span>
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#chage -m 3 -M 42 -W 14 -I 7 -E 2020-10-10 wang
[root@centos8 ~]#chage -l wang
Last password change : Dec 18, 2019

Password expires : Jan 29, 2020
Password inactive : Feb 05, 2020
Account expires : Oct 10, 2020
Minimum number of days between password change : 3
Maximum number of days between password change : 42
Number of days of warning before password expires : 14
[root@centos8 ~]#getent shadow wang
wang:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">82</span>L7A37XJgzKTegH$<span style="color: #a0522d;">lFzqrMHmFwW740U32bvWHUuakPDKOiULE</span>/CxcyDzSe1qi1X2ALulDw1
WYrhd2wE00.lWO0im5//7biyV.juk5.:18248:3:42:14:7:18545:

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#19979;&#19968;&#27425;&#30331;&#24405;&#24378;&#21046;&#37325;&#35774;&#23494;&#30721;</span>
[root@centos8 ~]#chage -d 0 wang
[root@centos8 ~]#getent shadow wang
wang:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">82</span>L7A37XJgzKTegH$<span style="color: #a0522d;">lFzqrMHmFwW740U32bvWHUuakPDKOiULE</span>/CxcyDzSe1qi1X2ALulDw1
WYrhd2wE00.lWO0im5//7biyV.juk5.:0:3:42:14:7:18545:
[root@centos8 ~]#chage -l wang
Last password change : password must be changed
Password expires : password must be changed
Password inactive : password must be changed
Account expires : Oct 10, 2020
Minimum number of days between password change : 3
Maximum number of days between password change : 42
Number of days of warning before password expires : 14
[root@centos8 ~]#getent shadow wang
wang:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">82</span>L7A37XJgzKTegH$<span style="color: #a0522d;">lFzqrMHmFwW740U32bvWHUuakPDKOiULE</span>/CxcyDzSe1qi1X2ALulDw1
WYrhd2wE00.lWO0im5//7biyV.juk5.:0:3:42:14:7:18545:
</pre>
</div>
</div>
</div>
<div id="outline-container-h:da620709-ddce-423c-bade-42ded8138086" class="outline-3">
<h3 id="h:da620709-ddce-423c-bade-42ded8138086">ç”¨æˆ·ç›¸å…³çš„å…¶å®ƒå‘½ä»¤ chfn chsh finger</h3>
<div class="outline-text-3" id="text-h:da620709-ddce-423c-bade-42ded8138086">
<ul class="org-ul">
<li>chfn æŒ‡å®šä¸ªäººä¿¡æ¯</li>
<li>chsh æŒ‡å®šshellï¼Œç›¸å½“äºusermod -s</li>
<li>finger å¯çœ‹ç”¨æˆ·ä¸ªäººä¿¡æ¯</li>
</ul>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos7 ~]#chfn cici
Changing finger information for cici.
Name [cici]: zcici
Office []:it
Office Phone []: 10000
Home Phone []: 11111
Finger information changed.
[root@centos7 ~]#finger cici
Login: cici      Name: zcici
Directory: /home/cici        Shell: /bin/bash
Office: it, x1-0000 Home Phone: x1-1111
Never logged in.
No mail.
No Plan.
[root@centos7 ~]#getent passwd cici
cici:x:1000:1000:zcici,it,10000,11111:/home/cici:/bin/bash
[root@centos7 ~]#chsh -s /bin/csh cici
Changing shell for cici.
Shell changed.
[root@centos7 ~]#getent passwd cici
cici:x:1000:1000:wangsicong,wanda,10000,11111:/home/cici:/bin/csh
[root@centos7 ~]#usermod -s /bin/bash cici
[root@centos7 ~]#getent passwd cici
cici:x:1000:1000:wangsicong,wanda,10000,11111:/home/cici:/bin/bash
</pre>
</div>

<p>
èŒƒä¾‹: ä¿®æ”¹ç”¨æˆ·ä½¿ç”¨ä¸å¯ç™»å½•çš„shellç±»å‹
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#getent passwd cici
cici:x:1000:1000:zcici,IT,110,119,:/home/cici:/bin/bash
[root@centos8 ~]#chsh -s /sbin/nologin cici
Changing shell for cici.
chsh: Warning: <span style="color: #8b2252;">"/sbin/nologin"</span> is not listed<span style="color: #a020f0;"> in</span> /etc/shells.
Shell changed.
[root@centos8 ~]#su - cici
This account is currently not available.
[root@centos8 ~]#chsh -s /bin/false cici
Changing shell for cici.
chsh: Warning: <span style="color: #8b2252;">"/bin/false"</span> is not listed<span style="color: #a020f0;"> in</span> /etc/shells.
Shell changed.
[root@centos8 ~]#su - cici
[root@centos8 ~]#id
<span style="color: #a0522d;">uid</span>=0(root) <span style="color: #a0522d;">gid</span>=0(root) <span style="color: #a0522d;">groups</span>=0(root)
[root@centos8 ~]#chsh -s /bin/bash cici
Changing shell for cici.
Shell changed.
[root@centos8 ~]#su - cici
[cici@centos8 ~]$
</pre>
</div>
</div>
</div>
<div id="outline-container-h:51cb7201-6606-4d39-b6f5-e9f00b845b01" class="outline-3">
<h3 id="h:51cb7201-6606-4d39-b6f5-e9f00b845b01">åˆ›å»ºç»„ groupadd</h3>
<div class="outline-text-3" id="text-h:51cb7201-6606-4d39-b6f5-e9f00b845b01">
<p>
groupaddå®ç°åˆ›å»ºç»„ æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">groupadd [OPTION]... group_name
</pre>
</div>

<p>
å¸¸è§é€‰é¡¹ï¼š
</p>
<pre class="example" id="org0725a82">
-g GID æŒ‡æ˜GIDå·ï¼›[GID_MIN, GID_MAX]
-r åˆ›å»ºç³»ç»Ÿç»„ï¼ŒCentOS 6ä¹‹å‰: ID&lt;500ï¼ŒCentOS 7ä»¥å: ID&lt;1000 èŒƒä¾‹:
</pre>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# groupadd -g 2000 grp1 <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#23450;&#32452;ID</span>
[root@node01 ~]# groupadd testgrp2  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#19981;&#21152; -g &#36873;&#39033;&#65292;&#40664;&#35748;&#26159;&#19978;&#19968;&#20010;&#32452; GID+1</span>
[root@node01 ~]# tail -2 /etc/group
grp1:x:2000:
testgrp2:x:2001:
[root@node01 ~]# groupadd -r -g 306 mariadb  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#32452;&#21512;&#20351;&#29992; -r -g &#65292;&#21019;&#24314;&#31995;&#32479;&#32452;&#24182;&#25351;&#23450;GID </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-h:e2cf5394-7a1c-4058-b015-27635e5dfced" class="outline-3">
<h3 id="h:e2cf5394-7a1c-4058-b015-27635e5dfced">ä¿®æ”¹ç»„ groupmod</h3>
<div class="outline-text-3" id="text-h:e2cf5394-7a1c-4058-b015-27635e5dfced">
<p>
groupmod ç»„å±æ€§ä¿®æ”¹
</p>

<p>
æ ¼å¼ï¼š
</p>
<div class="org-src-container">
<pre class="src src-sh">groupmod [OPTION]... group

&#24120;&#35265;&#36873;&#39033;&#65306;
-n group_name  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#21517;&#23383;</span>
-g GID                <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26032;&#30340;GID</span>
</pre>
</div>

<p>
å¦‚ï¼Œå°†ç³»ç»Ÿç»„ mariadb çš„ GID ä¸º306 æ”¹ä¸º GID ä¸º 702
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# groupadd -r -g 306 mariadb
[root@node01 ~]# groupmod -g 702 mariadb
[root@node01 ~]# tail -2 /etc/group
testgrp2:x:2001:
mariadb:x:702:
</pre>
</div>

<p>
å¦‚ï¼Œå°†ç»„ mariadb é‡å‘½åä¸º perconaserver
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# groupmod -n perconaserver mariadb
[root@node01 ~]# tail -2 /etc/group
testgrp2:x:2001:
perconaserver:x:702:
</pre>
</div>
</div>
</div>
<div id="outline-container-h:4e400a21-806b-47f0-911c-2e20aa79fbbf" class="outline-3">
<h3 id="h:4e400a21-806b-47f0-911c-2e20aa79fbbf">ç»„åˆ é™¤ groupdel</h3>
<div class="outline-text-3" id="text-h:4e400a21-806b-47f0-911c-2e20aa79fbbf">
<p>
groupdel å¯ä»¥åˆ é™¤ç»„ æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">groupdel [options] GROUP
</pre>
</div>

<p>
å¸¸è§é€‰é¡¹ï¼š -f, &#x2013;force å¼ºåˆ¶åˆ é™¤ï¼Œå³ä½¿æ˜¯ç”¨æˆ·çš„ä¸»ç»„ä¹Ÿå¼ºåˆ¶åˆ é™¤ç»„
</p>
</div>
</div>
<div id="outline-container-h:ba939e6d-9aa0-437b-97ad-1e36561b5480" class="outline-3">
<h3 id="h:ba939e6d-9aa0-437b-97ad-1e36561b5480">æ›´æ”¹ç»„å¯†ç  gpasswd</h3>
<div class="outline-text-3" id="text-h:ba939e6d-9aa0-437b-97ad-1e36561b5480">
<p>
gpasswdå‘½ä»¤ï¼Œå¯ä»¥æ›´æ”¹ç»„å¯†ç ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹é™„åŠ ç»„çš„æˆå‘˜å…³ç³»
</p>

<p>
ç”¨æˆ·ä¸´æ—¶åˆ‡æ¢åˆ°ä¸å±äºè‡ªå·±çš„é™„å±ç»„çš„å…¶ä»–ç»„æ—¶å€™è¦é€šè¿‡ç»„å¯†ç éªŒè¯
</p>

<p>
æ— å¯†ç çš„ç»„ä¸èƒ½è¢«ä»»ä½•ç”¨æˆ·åˆ‡æ¢ï¼Œä»…èƒ½è¢«ç»„æ‰€åŒ…å«çš„ç”¨æˆ·åˆ‡æ¢
</p>

<p>
æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">gpasswd [OPTION] GROUP
</pre>
</div>

<p>
å¸¸è§é€‰é¡¹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">-a user &#23558;user&#28155;&#21152;&#33267;&#25351;&#23450;&#32452;&#20013;
-d user &#20174;&#25351;&#23450;&#38468;&#21152;&#32452;&#20013;&#31227;&#38500;&#29992;&#25143;user
-A user1,user2,... &#35774;&#32622;&#26377;&#31649;&#29702;&#26435;&#38480;&#30340;&#29992;&#25143;&#21015;&#34920;
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">&#22686;&#21152;&#32452;&#25104;&#21592;</span>
[root@centos8 ~]#groupadd admins
[root@centos8 ~]#id wang
<span style="color: #a0522d;">uid</span>=1000(wang) <span style="color: #a0522d;">gid</span>=1000(wang) <span style="color: #a0522d;">groups</span>=1000(wang)
[root@centos8 ~]#gpasswd -a wang admins
Adding user wang to group admins
[root@centos8 ~]#id wang
<span style="color: #a0522d;">uid</span>=1000(wang) <span style="color: #a0522d;">gid</span>=1000(wang) <span style="color: #a0522d;">groups</span>=1000(wang),1002(admins)
[root@centos8 ~]#groups wang
wang : wang admins
[root@centos8 ~]#getent group admins
admins:x:1002:wang

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21024;&#38500;&#32452;&#25104;&#21592;</span>
[root@centos8 ~]#gpasswd -d wang admins
Removing user wang from group admins
[root@centos8 ~]#groups wang
wang : wang
[root@centos8 ~]#id wang
<span style="color: #a0522d;">uid</span>=1000(wang) <span style="color: #a0522d;">gid</span>=1000(wang) <span style="color: #a0522d;">groups</span>=1000(wang)
[root@centos8 ~]#getent group admins
admins:x:1002:
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# groupadd mygrp  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314;&#32452;</span>
[root@node01 ~]# cat /etc/gshadow | grep mygrp <span style="color: #b22222;"># </span><span style="color: #b22222;">&#19968;&#33324;&#21019;&#24314;&#30340;&#32452;&#37117;&#26159;&#27809;&#26377;&#23494;&#30721;&#30340;</span>
mygrp:!::archlinux
[root@node01 ~]# gpasswd mygrp   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#32473;&#32452; mygrp &#35774;&#23450;&#23494;&#30721;</span>

[root@node01 ~]# useradd docker <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21019;&#24314; docker &#29992;&#25143;</span>
[root@node01 ~]# su - docker <span style="color: #b22222;">#</span><span style="color: #b22222;">su  -  USER&#21629;&#20196;&#20999;&#25442;&#21040;&#29992;&#25143;&#29615;&#22659;</span>
[docker@node01 ~]$ id
<span style="color: #a0522d;">uid</span>=1001(docker) <span style="color: #a0522d;">gid</span>=2002(docker) <span style="color: #a0522d;">groups</span>=2002(docker)

[docker@node01 ~]$ newgrp mygrp <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20020;&#26102;&#20999;&#25442;&#29992;&#25143;&#30340;&#22522;&#26412;&#32452;&#65292;&#22914;&#26524;&#32452;&#35774;&#23450;&#20102;&#23494;&#30721;&#38656;&#35201;&#36755;&#20837;&#23494;&#30721;</span>
Password:
[docker@node01 ~]$ id
<span style="color: #a0522d;">uid</span>=1001(docker) <span style="color: #a0522d;">gid</span>=1001(mygrp) <span style="color: #a0522d;">groups</span>=1001(mygrp),2002(docker)
[docker@node01 ~]$ exit <span style="color: #b22222;">#</span><span style="color: #b22222;">&#36864;&#20986;&#20020;&#26102;&#22522;&#26412;&#32452;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-h:3e337a2b-940f-4956-829e-b3b60d64bf23" class="outline-3">
<h3 id="h:3e337a2b-940f-4956-829e-b3b60d64bf23">ä¸´æ—¶åˆ‡æ¢ä¸»ç»„ newgrp</h3>
<div class="outline-text-3" id="text-h:3e337a2b-940f-4956-829e-b3b60d64bf23">
<p>
newgrp å‘½ä»¤å¯ä»¥ä¸´æ—¶åˆ‡æ¢ä¸»ç»„ï¼Œ å¦‚æœç”¨æˆ·æœ¬ä¸å±äºæ­¤ç»„ï¼Œåˆ™éœ€è¦ç»„å¯†ç 
</p>

<p>
æ ¼å¼ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">newgrp</span> [-] [group]
</pre>
</div>

<p>
å¦‚æœä½¿ç”¨ <code>-</code> é€‰é¡¹ï¼Œå¯ä»¥åˆå§‹åŒ–ç”¨æˆ·ç¯å¢ƒ
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#gpasswd root
Changing the password for group root
New Password:
Re-enter new password:
[root@centos8 ~]#getent gshadow root
root:$<span style="color: #a0522d;">6</span>$<span style="color: #a0522d;">UKK78gqOvw</span>/Ug$<span style="color: #a0522d;">exBe4gHUYzSj</span>/Gip0YkXII8RkPca7QGVto6Ws5SFd6lhxxklCsfKqiv1qy
EQZOfGK2WbR7/I.A2.7j1SUGuB91::

[cici@centos8 ~]$<span style="color: #a0522d;">newgrp</span> root
Password:
[cici@centos8 ~]$<span style="color: #a0522d;">id</span>
<span style="color: #a0522d;">uid</span>=1000(cici) <span style="color: #a0522d;">gid</span>=0(root) <span style="color: #a0522d;">groups</span>=0(root),1000(cici)
[cici@centos8 ~]$<span style="color: #a0522d;">getent</span> passwd cici
cici:x:1000:1000:zcici,IT,110,119,:/home/cici:/bin/bash
[cici@centos8 ~]$<span style="color: #a0522d;">touch</span> wang1.txt
[cici@centos8 ~]$<span style="color: #a0522d;">ll</span>
total 0
-rw-r--r-- 1 cici root 0 Dec 18 09:38 wang1.txt
[cici@centos8 ~]$<span style="color: #a0522d;">exit</span>
<span style="color: #a020f0;">exit</span>
[cici@centos8 ~]$<span style="color: #a0522d;">id</span>
<span style="color: #a0522d;">uid</span>=1000(cici) <span style="color: #a0522d;">gid</span>=1000(cici) <span style="color: #a0522d;">groups</span>=1000(cici)
[cici@centos8 ~]$<span style="color: #a0522d;">touch</span> wang2.txt
[cici@centos8 ~]$<span style="color: #a0522d;">ll</span>
total 0
-rw-r--r-- 1 cici root 0 Dec 18 09:38 wang1.txt
-rw-rw-r-- 1 cici cici 0 Dec 18 09:38 wang2.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-h:89fe19e0-d9f9-4c18-a837-4d47ddfd0ab7" class="outline-3">
<h3 id="h:89fe19e0-d9f9-4c18-a837-4d47ddfd0ab7">æ›´æ”¹å’ŒæŸ¥çœ‹ç»„æˆå‘˜ groupmems groups</h3>
<div class="outline-text-3" id="text-h:89fe19e0-d9f9-4c18-a837-4d47ddfd0ab7">
<p>
groupmems å¯ä»¥ç®¡ç†é™„åŠ ç»„çš„æˆå‘˜å…³ç³» æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">groupmems [options] [action]

&#24120;&#35265;&#36873;&#39033;&#65306;
-g, --group groupname <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26356;&#25913;&#20026;&#25351;&#23450;&#32452; (&#21482;&#26377;root)</span>
-a, --add username      <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25351;&#23450;&#29992;&#25143;&#21152;&#20837;&#32452;</span>
-d, --delete username <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20174;&#32452;&#20013;&#21024;&#38500;&#29992;&#25143;</span>
-p, --purge                  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20174;&#32452;&#20013;&#28165;&#38500;&#25152;&#26377;&#25104;&#21592;</span>
-l, --list                       <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;&#32452;&#25104;&#21592;&#21015;&#34920;</span>
</pre>
</div>

<p>
groups å¯æŸ¥çœ‹ç”¨æˆ·ç»„å…³ç³» æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">groups [OPTION].[USERNAME]...
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#groupmems -l -g admins
[root@centos8 ~]#groupmems -a cici -g admins
[root@centos8 ~]#id cici
<span style="color: #a0522d;">uid</span>=1001(cici) <span style="color: #a0522d;">gid</span>=1001(cici) <span style="color: #a0522d;">groups</span>=1001(cici),1002(admins)
[root@centos8 ~]#groupmems -l -g admins
cici
[root@centos8 ~]#groupmems -a wang -g admins
[root@centos8 ~]#groupmems -l -g admins
cici wang
[root@centos8 ~]#groupmems -d wang -g admins
[root@centos8 ~]#groups wang
wang : wang admins
[root@centos8 ~]#groupmems -l -g admins
cici
[root@centos8 ~]#groupmems -p -g admins
[root@centos8 ~]#groupmems -l -g admins
</pre>
</div>
</div>
</div>
<div id="outline-container-h:6f33a3e5-8d40-486b-8391-d31fd08fff66" class="outline-3">
<h3 id="h:6f33a3e5-8d40-486b-8391-d31fd08fff66">ç»ƒä¹ </h3>
<div class="outline-text-3" id="text-h:6f33a3e5-8d40-486b-8391-d31fd08fff66">
<ol class="org-ol">
<li>åˆ›å»ºç”¨æˆ·gentooï¼Œé™„åŠ ç»„ä¸ºbinå’Œrootï¼Œé»˜è®¤shellä¸º/bin/cshï¼Œæ³¨é‡Šä¿¡æ¯ä¸ºâ€Gentoo
Distributionâ€</li>
<li>åˆ›å»ºä¸‹é¢çš„ç”¨æˆ·ã€ç»„å’Œç»„æˆå‘˜å…³ç³» åå­—ä¸ºwebs çš„ç»„ ç”¨æˆ·nginxï¼Œä½¿ç”¨webs
ä½œä¸ºé™„åŠ ç»„ ç”¨æˆ·varnishï¼Œä½¿ç”¨webs ä½œä¸ºé™„åŠ ç»„
ç”¨æˆ·mysqlï¼Œä¸å¯äº¤äº’ç™»å½•ç³»ç»Ÿï¼Œä¸”ä¸æ˜¯webs
çš„æˆå‘˜ï¼Œnginxï¼Œvarnishï¼Œmysqlå¯†ç éƒ½æ˜¯123456</li>
</ol>
</div>
</div>
</section>
<section id="outline-container-h:717ca5d6-3f12-4aaf-a071-d220213e7bcd" class="outline-2">
<h2 id="h:717ca5d6-3f12-4aaf-a071-d220213e7bcd">æ–‡ä»¶æƒé™ç®¡ç†</h2>
<div class="outline-text-2" id="text-h:717ca5d6-3f12-4aaf-a071-d220213e7bcd">
</div>
<div id="outline-container-h:c03bffd3-93fb-4444-9ee4-80a51b53eeb6" class="outline-3">
<h3 id="h:c03bffd3-93fb-4444-9ee4-80a51b53eeb6">æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ</h3>
<div class="outline-text-3" id="text-h:c03bffd3-93fb-4444-9ee4-80a51b53eeb6">

<figure id="org5392325">
<img src="images/image-20210215223117180.png" alt="image-20210215223117180.png" width="60%">

</figure>

<div class="org-src-container">
<pre class="src src-sh">[root@node01 ~]# ls -l
-rw-r--r--. 1 root root 30499 Dec 8 12:04 Xorg.0.log
</pre>
</div>
</div>
<div id="outline-container-h:5d121906-50cf-4247-b75b-d7ae22dae843" class="outline-4">
<h4 id="h:5d121906-50cf-4247-b75b-d7ae22dae843">è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown</h4>
<div class="outline-text-4" id="text-h:5d121906-50cf-4247-b75b-d7ae22dae843">
<p>
chown å‘½ä»¤å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å±ä¸»ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±ç»„ æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">chown [OPTION]... [OWNER][:[GROUP]] FILE...
chown [OPTION]... --reference=RFILE FILE...
</pre>
</div>

<p>
ç”¨æ³•è¯´æ˜ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">OWNER                <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21482;&#20462;&#25913;&#25152;&#26377;&#32773;</span>
OWNER:GROUP    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21516;&#26102;&#20462;&#25913;&#25152;&#26377;&#32773;&#21644;&#23646;&#32452;&#65292;&#20882;&#21495;&#20063;&#21487;&#29992; . &#26367;&#25442;</span>
:GROUP                <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21482;&#20462;&#25913;&#23646;&#32452;&#65292;&#20882;&#21495;&#20063;&#21487;&#29992; . &#26367;&#25442;</span>
--reference=RFILE <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21442;&#32771;&#25351;&#23450;&#30340;&#30340;&#23646;&#24615;&#65292;&#26469;&#20462;&#25913; </span>
-R                         <span style="color: #b22222;">#</span><span style="color: #b22222;">&#36882;&#24402;&#65292;&#27492;&#36873;&#39033;&#24910;&#29992;&#65292;&#38750;&#24120;&#21361;&#38505;&#65281;</span>
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#cp /etc/fstab f1.txt
[root@centos8 data]#pwd
/data
[root@centos8 data]#ll
-rw-r--r-- 1 root root 709 Dec 18 10:13 f1.txt
[root@centos8 data]#chown wang f1.txt
[root@centos8 data]#ll
-rw-r--r-- 1 wang root 709 Dec 18 10:13 f1.txt
[root@centos8 data]#chown :admins f1.txt
[root@centos8 data]#ll f1.txt
-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt

[root@centos8 data]#chown root.bin f1.txt
[root@centos8 data]#ll
-rw-r--r-- 1 root bin 709 Dec 18 10:13 f1.txt

[root@centos8 data]#chown wang:admins f1.txt
[root@centos8 data]#ll
-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt

[root@centos8 data]#cp /etc/issue f2.txt
[root@centos8 data]#ll
-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt
-rw-r--r-- 1 root root 23 Dec 18 10:15 f2.txt

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21442;&#32771;&#25351;&#23450;&#30340;&#30340;&#23646;&#24615;&#65292;&#26469;&#20462;&#25913; </span>
[root@centos8 data]#chown --reference=f1.txt f2.txt
[root@centos8 data]#ll
-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt
-rw-r--r-- 1 wang admins 23 Dec 18 10:15 f2.txt
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#chown -R wang.admins /data/
</pre>
</div>
</div>
</div>
<div id="outline-container-h:526e1246-d8c0-4dd3-8674-d34ff8c1c6c0" class="outline-4">
<h4 id="h:526e1246-d8c0-4dd3-8674-d34ff8c1c6c0">è®¾ç½®æ–‡ä»¶çš„å±ç»„ä¿¡æ¯chgrp</h4>
<div class="outline-text-4" id="text-h:526e1246-d8c0-4dd3-8674-d34ff8c1c6c0">
<p>
chgrp å‘½ä»¤å¯ä»¥åªä¿®æ”¹æ–‡ä»¶çš„å±ç»„ è·Ÿ chown ç”¨æˆ·ç”¨æ³•æ˜¯ä¸€æ ·çš„ï¼ŒåŠŸèƒ½ä¸Šä¸»è¦è®°
chown å°±å¥½ã€‚
</p>

<p>
æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">chgrp [OPTION]... GROUP FILE...
chgrp [OPTION]... --reference=RFILE FILE...
</pre>
</div>

<p>
-R é€’å½’ èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#ll f1.txt
-rw-r--r-- 1 wang root 709 Dec 18 10:13 f1.txt
[root@centos8 data]#chgrp admins f1.txt
[root@centos8 data]#ll f1.txt
-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:f56a80bd-bbf3-4548-ac91-e7c42cd10025" class="outline-3">
<h3 id="h:f56a80bd-bbf3-4548-ac91-e7c42cd10025">æ–‡ä»¶æƒé™</h3>
<div class="outline-text-3" id="text-h:f56a80bd-bbf3-4548-ac91-e7c42cd10025">

<figure id="org01bf858">
<img src="images/image-20210215223129361.png" alt="image-20210215223129361.png" width="60%">

</figure>

<p>
ç¬¬1åˆ—ï¼Œæ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶æƒé™ä¿¡æ¯
</p>
<pre class="example" id="org8046e92">
-ï¼šæ–‡ä»¶ç±»å‹ï¼Œ-,d,b,c,l,s,p
rw-ï¼šå·¦3ä½ï¼Œæ–‡ä»¶å±ä¸»çš„æƒé™
r--ï¼šä¸­3ä½ï¼Œæ–‡ä»¶å±ç»„çš„æƒé™ï¼›
r--ï¼šå³3ä½ï¼Œå…¶ä»–ç”¨æˆ·ï¼ˆéå±ä¸»ã€å±ç»„ï¼‰çš„æƒé™
</pre>
</div>
<div id="outline-container-h:43f348a7-46fe-44f9-90bc-3d1b8308e014" class="outline-4">
<h4 id="h:43f348a7-46fe-44f9-90bc-3d1b8308e014">æ–‡ä»¶æƒé™è¯´æ˜</h4>
<div class="outline-text-4" id="text-h:43f348a7-46fe-44f9-90bc-3d1b8308e014">
<p>
æ–‡ä»¶çš„æƒé™ä¸»è¦é’ˆå¯¹ä¸‰ç±»å¯¹è±¡è¿›è¡Œå®šä¹‰
</p>

<div class="org-src-container">
<pre class="src src-sh">owner &#23646;&#20027;, u
group &#23646;&#32452;, g
other &#20854;&#20182;, o
</pre>
</div>

<p>
æ³¨æ„ï¼šç”¨æˆ·çš„æœ€ç»ˆæƒé™ï¼Œæ˜¯ä»å·¦å‘å³è¿›è¡Œé¡ºåºåŒ¹é…ï¼Œå³ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œå…¶ä»–
äººï¼Œä¸€æ—¦åŒ¹é…æƒé™ç«‹å³ç”Ÿæ•ˆï¼Œä¸å†å‘å³æŸ¥çœ‹å…¶æƒé™
</p>

<p>
æ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§å¸¸ç”¨æƒé™
</p>

<p>
æ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§æƒé™
</p>

<div class="org-src-container">
<pre class="src src-sh">r  Readable
w Writable
x  eXcutable
</pre>
</div>

<p>
<b>å¯¹æ–‡ä»¶çš„æƒé™ï¼š</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">r   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21487;&#20351;&#29992;&#25991;&#20214;&#26597;&#30475;&#31867;&#24037;&#20855;&#65292;&#27604;&#22914;&#65306;cat&#65292;&#21487;&#20197;&#33719;&#21462;&#20854;&#20869;&#23481;</span>
w  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21487;&#20462;&#25913;&#20854;&#20869;&#23481;</span>
x   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21487;&#20197;&#25226;&#27492;&#25991;&#20214;&#25552;&#35831;&#20869;&#26680;&#21551;&#21160;&#20026;&#19968;&#20010;&#36827;&#31243;&#65292;&#21363;&#21487;&#20197;&#25191;&#34892;&#65288;&#36816;&#34892;&#65289;&#27492;&#25991;&#20214;&#65288;&#27492;&#25991;&#20214;&#30340;&#20869;&#23481;&#24517;&#39035;&#26159;&#21487;&#25191;&#34892;&#65289;</span>

&#25991;&#20214;&#26435;&#38480;&#24120;&#29992;&#32452;&#21512;
---  0
r     4
r-x  5
rw  6
rwx 7
</pre>
</div>

<p>
<b>å¯¹ç›®å½•çš„æƒé™ï¼š</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">r &#21487;&#20197;&#20351;&#29992;ls&#26597;&#30475;&#27492;&#30446;&#24405;&#20013;&#25991;&#20214;&#21015;&#34920;
w &#21487;&#22312;&#27492;&#30446;&#24405;&#20013;&#21019;&#24314;&#25991;&#20214;&#65292;&#20063;&#21487;&#21024;&#38500;&#27492;&#30446;&#24405;&#20013;&#30340;&#25991;&#20214;&#65292;&#32780;&#21644;&#27492;&#34987;&#21024;&#38500;&#30340;&#25991;&#20214;&#30340;&#26435;&#38480;&#26080;&#20851;
x &#21487;&#20197;cd&#36827;&#20837;&#27492;&#30446;&#24405;&#65292;&#21487;&#20197;&#20351;&#29992;ls -l&#26597;&#30475;&#27492;&#30446;&#24405;&#20013;&#25991;&#20214;&#20803;&#25968;&#25454;&#65288;&#39035;&#37197;&#21512;r&#26435;&#38480;&#65289;&#65292;&#23646;&#20110;&#30446;&#24405;&#30340;&#21487;&#35775;&#38382;&#30340;&#26368;&#23567;&#26435;&#38480;
X &#21482;&#32473;&#30446;&#24405;x&#26435;&#38480;&#65292;&#19981;&#32473;&#26080;&#25191;&#34892;&#26435;&#38480;&#30340;&#25991;&#20214;x&#26435;&#38480;

&#30446;&#24405;&#26435;&#38480;&#24120;&#29992;&#32452;&#21512;
-  &#19981;&#33021;&#35775;&#38382;&#30446;&#24405;
r-x &#21482;&#35835;&#30446;&#24405;
rwx &#21487;&#35835;&#20889;&#30446;&#24405;
</pre>
</div>

<p>
<b>æ•°å­¦æ³•çš„æƒé™</b>
</p>


<figure id="org1e1ce7d">
<img src="images/image-20210215223157347.png" alt="image-20210215223157347.png" width="60%">

</figure>

<p>
å…«è¿›åˆ¶æ•°å­—
</p>

<div class="org-src-container">
<pre class="src src-sh">--- 000 0
--x 001 1
-w- 010 2
-wx 011 3
r-- 100 4
r-x 101 5
rw- 110 6
rwx 111 7
</pre>
</div>

<p>
ä¾‹å¦‚ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">rw-r----- 640
rwxr-xr-x 755
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d38390ea-e6f9-4c27-a295-dbbaa18699c0" class="outline-4">
<h4 id="h:d38390ea-e6f9-4c27-a295-dbbaa18699c0">ä¿®æ”¹æ–‡ä»¶æƒé™chmod</h4>
<div class="outline-text-4" id="text-h:d38390ea-e6f9-4c27-a295-dbbaa18699c0">
<p>
æ ¼å¼
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod [OPTION]... MODE[,MODE]... FILE...
chmod [OPTION]... OCTAL-MODE FILE...
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21442;&#32771;RFILE&#25991;&#20214;&#30340;&#26435;&#38480;&#65292;&#23558;FILE&#30340;&#20462;&#25913;&#20026;&#21516;RFILE</span>
chmod [OPTION]... --reference=RFILE FILE...

-R: &#36882;&#24402;&#20462;&#25913;&#26435;&#38480;
</pre>
</div>

<p>
è¯´æ˜ï¼š
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">1.&#27169;&#24335;&#27861;</span>
MODE&#65306;who opt permission
who:u,g,o,a
opt:+,-,=
permission:r,w,x

&#20462;&#25913;&#25351;&#23450;&#19968;&#31867;&#29992;&#25143;&#30340;&#25152;&#26377;&#26435;&#38480;
<span style="color: #a0522d;">u</span>= <span style="color: #a0522d;">g</span>= <span style="color: #a0522d;">o</span>= <span style="color: #a0522d;">ug</span>= <span style="color: #a0522d;">a</span>= <span style="color: #a0522d;">u</span>=,<span style="color: #a0522d;">g</span>=
&#20462;&#25913;&#25351;&#23450;&#19968;&#31867;&#29992;&#25143;&#26576;&#20010;&#25110;&#26576;&#20010;&#26435;&#38480;
u+ u- g+ g- o+ o- a+ a- + -

<span style="color: #b22222;">#</span><span style="color: #b22222;">2&#25968;&#23383;&#30340;&#34920;&#31034;&#26041;&#27861;&#65306;</span>
8bites &#20108;&#36827;&#21046;&#34920;&#31034;&#26435;&#38480;&#30340;&#32452;&#21512;&#26426;&#21046;
--- 000 0
r-- 100 4
-w- 010 2
--x  001 1
</pre>
</div>

<p>
å¦‚æœæ˜¯è½¯è¿æ¥æ–‡ä»¶ï¼Œä¿®æ”¹çš„æ˜¯è½¯é“¾æ¥å¯¹åº”çš„æ–‡ä»¶ã€‚
</p>

<p>
èŒƒä¾‹: è®¾ç½® X æƒé™
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#ll dir
total 8
-rw-r--r-- 1 root root 709 Dec 18 11:09 f1.txt
-rwxr--r-- 1 root root 709 Dec 18 11:09 f2.txt
drw-r--r-- 2 root root 6 Dec 18 11:15 subdir
[root@centos8 data]#ll -d dir
drwxr-xr-- 3 root root 48 Dec 18 11:15 dir
[root@centos8 data]#chmod -R a+X dir
[root@centos8 data]#ll -d dir
drwxr-xr-x 3 root root 48 Dec 18 11:15 dir
[root@centos8 data]#ll dir
total 8
-rw-r--r-- 1 root root 709 Dec 18 11:09 f1.txt
-rwxr-xr-x 1 root root 709 Dec 18 11:09 f2.txt
drwxr-xr-x 2 root root 6 Dec 18 11:15 subdir
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod u+wx,g-r,<span style="color: #a0522d;">o</span>=rx file
chmod -R g+rwX /testdir
chmod 600 file
</pre>
</div>

<p>
æ–‡ä»¶644ï¼Œ ç›®å½•755
</p>
<div class="org-src-container">
<pre class="src src-sh">chmod 644 -R ./
find ./ -type d -print|xargs chmod 755;
</pre>
</div>

<p>
<b>èŒƒä¾‹ï¼šé¢è¯•é¢˜</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">&#25191;&#34892; cp /etc/issue /data/dir &#25152;&#38656;&#35201;&#30340;&#26368;&#23567;&#26435;&#38480;&#65311;
/bin/cp     &#38656;&#35201;x&#26435;&#38480;
/etc/         &#38656;&#35201;x&#26435;&#38480;
/etc/issue &#38656;&#35201;r &#26435;&#38480;
/data        &#38656;&#35201;x&#26435;&#38480;
/data/dir  &#38656;&#35201;w,x &#26435;&#38480;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:07a79a95-5a80-4e90-b00b-41fc214367dc" class="outline-3">
<h3 id="h:07a79a95-5a80-4e90-b00b-41fc214367dc">æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™ umask</h3>
<div class="outline-text-3" id="text-h:07a79a95-5a80-4e90-b00b-41fc214367dc">
<p>
umask çš„å€¼å¯ä»¥ç”¨æ¥ä¿ç•™åœ¨åˆ›å»ºæ–‡ä»¶æƒé™
</p>

<p>
æ–‡ä»¶çš„æƒé™åå‘æ©ç ï¼Œé®ç½©ç ï¼›é®ç½©ç ä¹Ÿæ˜¯æƒé™ä½
</p>

<p>
umaskèƒ½å®ç°åˆ›å»ºæ–‡ä»¶å’Œç›®å½•æ—¶ï¼Œè®¡ç®—å‡ºæ–‡ä»¶çš„é»˜è®¤æƒé™ï¼›
</p>

<p>
(1)umaskï¼šæŸ¥çœ‹å½“å‰umask
</p>

<p>
ç³»ç»Ÿé»˜è®¤ä¸ºï¼š0022è¡¨ç¤ºç‰¹æ®Šæƒé™ã€æ‰€æœ‰è€…æƒé™ã€æ‰€æœ‰ç»„æƒé™ã€å…¶ä»–äººæƒé™
</p>

<p>
æ›´æ”¹é»˜è®¤è®¾ç½®ä½ç½®ï¼š/etc/login.defs
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@node1 ~]# cat /etc/login.defs
UMASK           077
</pre>
</div>

<p>
å®ç°æ–¹å¼ï¼š
</p>

<ul class="org-ul">
<li>æ–°å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™: 666-umaskï¼Œå¦‚æœæ‰€å¾—ç»“æœæŸä½å­˜åœ¨æ‰§è¡Œï¼ˆå¥‡æ•°ï¼‰æƒé™ï¼Œåˆ™å°†å…¶æƒé™+1,å¶æ•°ä¸å˜</li>
<li>æ–°å»ºç›®å½•çš„é»˜è®¤æƒé™: 777-umask</li>
</ul>

<p>
éç‰¹æƒç”¨æˆ·umaské»˜è®¤æ˜¯ 002
</p>

<p>
rootçš„umask é»˜è®¤æ˜¯ 022
</p>

<p>
umaskç®—æ³•
</p>

<div class="org-src-container">
<pre class="src src-sh">666  123

110110110
001010011  mask
110100100
644
</pre>
</div>

<p>
æŸ¥çœ‹umask
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">umask</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#27169;&#24335;&#26041;&#24335;&#26174;&#31034;</span>
<span style="color: #483d8b;">umask</span> &#8211;S
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#36755;&#20986;&#21487;&#34987;&#35843;&#29992;</span>
<span style="color: #483d8b;">umask</span> &#8211;p
</pre>
</div>

<p>
ä¿®æ”¹umask
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">umask</span> <span style="color: #b22222;">#</span>
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">umask</span> 002
<span style="color: #483d8b;">umask</span> <span style="color: #a0522d;">u</span>=rw,<span style="color: #a0522d;">g</span>=r,<span style="color: #a0522d;">o</span>=
</pre>
</div>

<p>
æŒä¹…ä¿å­˜umask
</p>

<ul class="org-ul">
<li>å…¨å±€è®¾ç½®ï¼š /etc/bashrc</li>
<li>ç”¨æˆ·è®¾ç½®ï¼š~/.bashrc</li>
</ul>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#umask
0022
[root@centos8 ~]#umask -S
<span style="color: #a0522d;">u</span>=rwx,<span style="color: #a0522d;">g</span>=rx,<span style="color: #a0522d;">o</span>=rx
[root@centos8 ~]#umask -p
<span style="color: #483d8b;">umask</span> 0022
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#umask
0022
[root@centos8 ~]#( <span style="color: #483d8b;">umask</span> 666; touch /data/f1.txt )
[root@centos8 ~]#umask
0022
[root@centos8 ~]#ll /data/f1.txt
---------- 1 root root 0 Mar 27 14:55 /data/f1.txt
</pre>
</div>

<p>
ç»ƒä¹ 
</p>

<ol class="org-ol">
<li>å½“ç”¨æˆ·dockerå¯¹/testdir ç›®å½•æ— æ‰§è¡Œæƒé™æ—¶ï¼Œæ„å‘³ç€æ— æ³•åšå“ªäº›æ“ä½œï¼Ÿ</li>
<li>å½“ç”¨æˆ·mongodbå¯¹/testdir ç›®å½•æ— è¯»æƒé™æ—¶ï¼Œæ„å‘³ç€æ— æ³•åšå“ªäº›æ“ä½œï¼Ÿ</li>
<li>å½“ç”¨æˆ·redis å¯¹/testdir
ç›®å½•æ— å†™æƒé™æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„åªè¯»æ–‡ä»¶file1æ˜¯å¦å¯ä¿®æ”¹å’Œåˆ é™¤ï¼Ÿ</li>
<li>å½“ç”¨æˆ·zabbixå¯¹/testdir
ç›®å½•æœ‰å†™å’Œæ‰§è¡Œæƒé™æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„åªè¯»æ–‡ä»¶file1æ˜¯å¦å¯ä¿®æ”¹å’Œåˆ é™¤ï¼Ÿ</li>
<li>å¤åˆ¶/etc/fstabæ–‡ä»¶åˆ°/var/tmpä¸‹ï¼Œè®¾ç½®æ–‡ä»¶æ‰€æœ‰è€…ä¸ºtomcatè¯»å†™æƒé™ï¼Œæ‰€
å±ç»„ä¸ºappsç»„æœ‰è¯»å†™æƒé™ï¼Œå…¶ä»–äººæ— æƒé™</li>
<li>è¯¯åˆ é™¤äº†ç”¨æˆ·gitçš„å®¶ç›®å½•ï¼Œè¯·é‡å»ºå¹¶æ¢å¤è¯¥ç”¨æˆ·å®¶ç›®å½•åŠç›¸åº”çš„æƒé™å±æ€§</li>
</ol>
</div>
</div>
<div id="outline-container-h:6dc21724-7544-4254-a0af-47d8411695ce" class="outline-3">
<h3 id="h:6dc21724-7544-4254-a0af-47d8411695ce">Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™</h3>
<div class="outline-text-3" id="text-h:6dc21724-7544-4254-a0af-47d8411695ce">
<p>
å‰é¢ä»‹ç»äº†ä¸‰ç§å¸¸è§çš„æƒé™ï¼šr, w, x è¿˜æœ‰ä¸‰ç§ç‰¹æ®Šæƒé™ï¼šSUID, SGID, Sticky
</p>

<p>
ç‰¹æ®Šæƒé™ï¼š
</p>
<ul class="org-ul">
<li>SUID ä½œç”¨äºäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶ä¸Šï¼Œç”¨æˆ·æ‰§è¡Œæ­¤ç¨‹åºå°†ç»§æ‰¿æ­¤ç¨‹åºçš„æ‰€æœ‰è€…çš„æƒé™</li>
<li><p>
SGID
</p>

<p>
ä½œç”¨äºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸Šï¼Œç”¨æˆ·å°†ç»§æ‰¿æ­¤ç¨‹åºæ‰€æœ‰ç»„çš„æƒé™
</p>

<p>
ä½œç”¨äºç›®å½•ä¸Šï¼Œæ­¤ç›®å½•ä¸­æ–°å»ºçš„æ–‡ä»¶çš„æ‰€å±ç»„å°†è‡ªåŠ¨ä»æ­¤ç›®å½•ç»§æ‰¿
</p></li>
<li>STICKY ç²˜æ»ä½ï¼Œä½œç”¨äºç›®å½•ä¸Šï¼Œæ­¤ç›®å½•ä¸­çš„æ–‡ä»¶åªèƒ½ç”±æ‰€æœ‰è€…è‡ªå·±æ¥åˆ é™¤(rooté™¤å¤–)</li>
</ul>


<figure id="orgbf2c9ba">
<img src="images/image-20210215225046748.png" alt="image-20210215225046748.png" width="60%">

</figure>
</div>
<div id="outline-container-h:87770dd2-108c-4d25-9f03-5680f54b0ca0" class="outline-4">
<h4 id="h:87770dd2-108c-4d25-9f03-5680f54b0ca0">ç‰¹æ®Šæƒé™SUID</h4>
<div class="outline-text-4" id="text-h:87770dd2-108c-4d25-9f03-5680f54b0ca0">
<p>
å‰æï¼šè¿›ç¨‹æœ‰å±ä¸»å’Œå±ç»„ï¼›æ–‡ä»¶æœ‰å±ä¸»å’Œå±ç»„
</p>

<ol class="org-ol">
<li>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹,å–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰
æ‰§è¡Œæƒé™</li>
<li>å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºå‘èµ·è€…,è¿›ç¨‹çš„å±ç»„ä¸ºå‘èµ·è€…æ‰€å±çš„ç»„</li>
<li>è¿›ç¨‹è®¿é—®æ–‡ä»¶æ—¶çš„æƒé™ï¼Œå–å†³äºè¿›ç¨‹çš„å‘èµ·è€…
<ol class="org-ol">
<li>è¿›ç¨‹çš„å‘èµ·è€…ï¼ŒåŒæ–‡ä»¶çš„å±ä¸»ï¼šåˆ™åº”ç”¨æ–‡ä»¶å±ä¸»æƒé™</li>
<li>è¿›ç¨‹çš„å‘èµ·è€…ï¼Œå±äºæ–‡ä»¶å±ç»„ï¼›åˆ™åº”ç”¨æ–‡ä»¶å±ç»„æƒé™</li>
<li>åº”ç”¨æ–‡ä»¶â€œå…¶å®ƒâ€æƒé™</li>
</ol></li>
</ol>

<p>
äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ŠSUIDæƒé™åŠŸèƒ½ï¼š
</p>

<ul class="org-ul">
<li>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹ï¼šå–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰
æ‰§è¡Œæƒé™</li>
<li>å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºåŸç¨‹åºæ–‡ä»¶çš„å±ä¸»</li>
<li>SUIDåªå¯¹äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆ</li>
<li>SUIDè®¾ç½®åœ¨ç›®å½•ä¸Šæ— æ„ä¹‰</li>
</ul>

<p>
SUIDæƒé™è®¾å®šï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod u+s FILE... <span style="color: #b22222;">#</span><span style="color: #b22222;">&#28155;&#21152;</span>
chmod 4xxx FILE
chmod u-s FILE... <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21435;&#25481;</span>
</pre>
</div>

<p>
å±ä¸»æ— æ‰§è¡Œæƒé™æ˜¾ç¤ºå¤§S
</p>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#ls -l /usr/bin/passwd
-rwsr-xr-x. 1 root root 34928 May 11 2019 /usr/bin/passwd
</pre>
</div>
</div>
</div>
<div id="outline-container-h:fd5ec574-1a60-431f-8b30-300f97a72b5e" class="outline-4">
<h4 id="h:fd5ec574-1a60-431f-8b30-300f97a72b5e">ç‰¹æ®Šæƒé™SGID</h4>
<div class="outline-text-4" id="text-h:fd5ec574-1a60-431f-8b30-300f97a72b5e">
<p>
äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ŠSGIDæƒé™åŠŸèƒ½ï¼š
</p>

<ul class="org-ul">
<li>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹ï¼šå–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰
æ‰§è¡Œæƒé™</li>
<li>å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ç»„ä¸ºåŸç¨‹åºæ–‡ä»¶çš„å±ç»„</li>
</ul>

<p>
SGIDæƒé™è®¾å®šï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod g+s FILE...
chmod 2xxx FILE
chmod g-s FILE...
</pre>
</div>

<p>
ç›®å½•ä¸Šçš„SGIDæƒé™åŠŸèƒ½ï¼š
</p>

<p>
é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå…¶å±ç»„ä¸ºæ­¤ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¸€æ—¦æŸç›®å½•è¢«è®¾å®š
äº†SGIDï¼Œåˆ™å¯¹æ­¤ç›®å½•æœ‰
</p>

<p>
å†™æƒé™çš„ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶æ‰€å±çš„ç»„ä¸ºæ­¤ç›®å½•çš„å±ç»„ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºä¸€
ä¸ªåä½œç›®å½•
</p>

<p>
SGIDæƒé™è®¾å®šï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod g+s DIR...
chmod 2xxx DIR
chmod g-s DIR...
</pre>
</div>

<p>
å±ç»„æ— æ‰§è¡Œæƒé™æ˜¾ç¤ºå¤§S
</p>
</div>
</div>
<div id="outline-container-h:b90a7343-f978-4f94-adf4-2fb4af9bd766" class="outline-4">
<h4 id="h:b90a7343-f978-4f94-adf4-2fb4af9bd766">ç‰¹æ®Šæƒé™ Sticky ä½</h4>
<div class="outline-text-4" id="text-h:b90a7343-f978-4f94-adf4-2fb4af9bd766">
<p>
å…·æœ‰å†™æƒé™çš„ç›®å½•é€šå¸¸ç”¨æˆ·å¯ä»¥åˆ é™¤è¯¥ç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼Œæ— è®ºè¯¥æ–‡ä»¶çš„æƒé™æˆ–
æ‹¥æœ‰æƒ
</p>

<p>
åœ¨ç›®å½•è®¾ç½®Sticky ä½ï¼Œåªæœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–rootå¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶ sticky
</p>

<p>
è®¾ç½®åœ¨æ–‡ä»¶ä¸Šæ— æ„ä¹‰
</p>

<p>
Stickyæƒé™è®¾å®šï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod o+t DIR...
chmod 1xxx DIR
chmod o-t DIR...
</pre>
</div>

<p>
å…¶å®ƒç”¨æˆ·æ— æ‰§è¡Œæƒé™æ˜¾ç¤ºå¤§T
</p>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 ~]#ll -d /tmp
drwxrwxrwt. 15 root root 4096 Dec 12 20:16 /tmp
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">[admin@middle-ware ~]$ chmod 0644 a.txt 
[admin@middle-ware ~]$ ll
-rw-r--r-- 1 admin admin 0 Dec 26 01:00 a.txt

[admin@middle-ware ~]$ chmod 7644 a.txt 
[admin@middle-ware ~]$ ll
-rwSr-Sr-T 1 admin admin 0 Dec 26 01:00 a.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-h:356cd941-2023-4a9b-aa57-7aa2cac89bb7" class="outline-4">
<h4 id="h:356cd941-2023-4a9b-aa57-7aa2cac89bb7">ç‰¹æ®Šæƒé™æ•°å­—æ³•</h4>
<div class="outline-text-4" id="text-h:356cd941-2023-4a9b-aa57-7aa2cac89bb7">
<p>
SUID SGID STICKY
</p>

<div class="org-src-container">
<pre class="src src-sh">000 0
001 1
010 2
011 3
100 4
101 5
110 6
111 7
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">chmod 4777 /tmp/a.txt
</pre>
</div>

<p>
æƒé™ä½æ˜ å°„
</p>
<pre class="example" id="org7e537d4">
SUID: user,å æ®å±ä¸»çš„æ‰§è¡Œæƒé™ä½
 sï¼šå±ä¸»æ‹¥æœ‰xæƒé™
 Sï¼šå±ä¸»æ²¡æœ‰xæƒé™
SGID: group,å æ®å±ç»„çš„æ‰§è¡Œæƒé™ä½
 sï¼š groupæ‹¥æœ‰xæƒé™
 Sï¼šgroupæ²¡æœ‰xæƒé™
Sticky: other,å æ®otherçš„æ‰§è¡Œæƒé™ä½
 tï¼šotheræ‹¥æœ‰xæƒé™
 Tï¼šotheræ²¡æœ‰xæƒé™
</pre>
</div>
</div>
</div>
<div id="outline-container-h:c95c19f3-3417-499d-a3b6-7794ec1d88ab" class="outline-3">
<h3 id="h:c95c19f3-3417-499d-a3b6-7794ec1d88ab">è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§ chattr lsattr</h3>
<div class="outline-text-3" id="text-h:c95c19f3-3417-499d-a3b6-7794ec1d88ab">
<p>
è®¾ç½®æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§ï¼Œå¯ä»¥è®¿é—® root ç”¨æˆ·è¯¯æ“ä½œåˆ é™¤æˆ–ä¿®æ”¹æ–‡ä»¶
</p>

<p>
ä¸èƒ½åˆ é™¤ï¼Œæ”¹åï¼Œæ›´æ”¹
</p>

<div class="org-src-container">
<pre class="src src-sh">chattr +i file
</pre>
</div>

<p>
åªèƒ½è¿½åŠ å†…å®¹ï¼Œä¸èƒ½åˆ é™¤ï¼Œæ”¹å
</p>

<div class="org-src-container">
<pre class="src src-sh">chattr +a file
</pre>
</div>

<p>
æ˜¾ç¤ºç‰¹å®šå±æ€§Â·
</p>

<div class="org-src-container">
<pre class="src src-sh">lsattr
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#chattr +i dir
[root@centos8 data]#lsattr dir
------------------ dir/fstab
------------------ dir/f1.txt
[root@centos8 data]#lsattr *
------------------ dir/fstab
------------------ dir/f1.txt
------------------ f11.txt
------------------ f22.txt
[root@centos8 data]#ll
total 8
drwxr-xr-x 2 root root  33 Dec 18 14:32 dir
-rw-r--r-- 1 root root 719 Dec 18 14:30 f11.txt
-rw-r--r-- 1 root root  6 Dec 18 14:30 f22.txt
[root@centos8 data]#rm -rf dir
rm: cannot remove <span style="color: #8b2252;">'dir/fstab'</span>: Operation not permitted
rm: cannot remove <span style="color: #8b2252;">'dir/f1.txt'</span>: Operation not permitted
[root@centos8 data]#lsattr
------------------ ./f11.txt
------------------ ./f22.txt
----i------------- ./dir
[root@centos8 data]#chattr -i dir
[root@centos8 data]#lsattr 
------------------ ./f11.txt
------------------ ./f22.txt
------------------ ./dir
</pre>
</div>

<p>
chattrå‘½ä»¤çš„ç”¨æ³•ï¼šchattr [ -RVf ] [ -v version ] [ mode ] files&#x2026;
</p>

<p>
æœ€å…³é”®çš„æ˜¯åœ¨[mode]éƒ¨åˆ†ï¼Œ[mode]éƒ¨åˆ†æ˜¯ç”±+-=å’Œ[ASacDdIijsTtu]
</p>

<p>
è¿™äº›å­—ç¬¦ç»„åˆçš„ã€‚å…¶å¯¹åº”çš„å‚æ•°æœ‰ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">+  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#22312;&#21407;&#26377;&#21442;&#25968;&#35774;&#23450;&#22522;&#30784;&#19978;&#65292;&#36861;&#21152;&#21442;&#25968;&#12290;</span>
-   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#22312;&#21407;&#26377;&#21442;&#25968;&#35774;&#23450;&#22522;&#30784;&#19978;&#65292;&#31227;&#38500;&#21442;&#25968;&#12290;</span>
=   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26356;&#26032;&#20026;&#25351;&#23450;&#21442;&#25968;&#35774;&#23450;&#12290;</span>
A   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#25991;&#20214;&#25110;&#30446;&#24405;&#30340; atime (access time)&#19981;&#21487;&#34987;&#20462;&#25913;(modified), &#21487;&#20197;&#26377;&#25928;&#39044;&#38450;&#20363;&#22914;&#25163;&#25552;&#30005;&#33041;&#30913;&#30424;I/O&#38169;&#35823;&#30340;&#21457;&#29983;&#12290;</span>
S   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#30828;&#30424;I/O&#21516;&#27493;&#36873;&#39033;&#65292;&#21151;&#33021;&#31867;&#20284;sync&#12290;</span>
a   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21363;append&#65292;&#35774;&#23450;&#35813;&#21442;&#25968;&#21518;&#65292;&#21482;&#33021;&#21521;&#25991;&#20214;&#20013;&#28155;&#21152;&#25968;&#25454;&#65292;&#32780;&#19981;&#33021;&#21024;&#38500;&#65292;&#22810;&#29992;&#20110;&#26381;&#21153;&#22120;&#26085;&#24535;&#25991;&#20214;&#23433;&#20840;&#65292;&#21482;&#26377;root&#25165;&#33021;&#35774;&#23450;&#36825;&#20010;&#23646;&#24615;&#12290;</span>
c   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21363;compresse&#65292;&#35774;&#23450;&#25991;&#20214;&#26159;&#21542;&#32463;&#21387;&#32553;&#21518;&#20877;&#23384;&#20648;&#12290;&#35835;&#21462;&#26102;&#38656;&#35201;&#32463;&#36807;&#33258;&#21160;&#35299;&#21387;&#25805;&#20316;&#12290;</span>
d   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21363;no dump&#65292;&#35774;&#23450;&#25991;&#20214;&#19981;&#33021;&#25104;&#20026;dump&#31243;&#24207;&#30340;&#22791;&#20221;&#30446;&#26631;&#12290;</span>
i   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#35774;&#23450;&#25991;&#20214;&#19981;&#33021;&#34987;&#21024;&#38500;&#12289;&#25913;&#21517;&#12289;&#35774;&#23450;&#38142;&#25509;&#20851;&#31995;&#65292;&#21516;&#26102;&#19981;&#33021;&#20889;&#20837;&#25110;&#26032;&#22686;&#20869;&#23481;&#12290;i&#21442;&#25968;&#23545;&#20110;&#25991;&#20214; &#31995;&#32479;&#30340;&#23433;&#20840;&#35774;&#32622;&#26377;&#24456;&#22823;&#24110;&#21161;&#12290;</span>
j   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#21363;journal&#65292;&#35774;&#23450;&#27492;&#21442;&#25968;&#20351;&#24471;&#24403;&#36890;&#36807;mount&#21442;&#25968;&#65306;data=ordered &#25110;&#32773; data=writeback</span>
&#25346;&#36733;&#30340;&#25991;&#20214;&#31995;&#32479;&#65292;&#25991;&#20214;&#22312;&#20889;&#20837;&#26102;&#20250;&#20808;&#34987;&#35760;&#24405;(&#22312;journal&#20013;)&#12290;
&#22914;&#26524;filesystem&#34987;&#35774;&#23450;&#21442;&#25968;&#20026; <span style="color: #a0522d;">data</span>=journal&#65292;&#21017;&#35813;&#21442;&#25968;&#33258;&#21160;&#22833;&#25928;&#12290;
s  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20445;&#23494;&#24615;&#22320;&#21024;&#38500;&#25991;&#20214;&#25110;&#30446;&#24405;&#65292;&#21363;&#30828;&#30424;&#31354;&#38388;&#34987;&#20840;&#37096;&#25910;&#22238;&#12290;</span>
u  <span style="color: #b22222;">#</span><span style="color: #b22222;">&#19982;s&#30456;&#21453;&#65292;&#24403;&#35774;&#23450;&#20026;u&#26102;&#65292;&#25968;&#25454;&#20869;&#23481;&#20854;&#23454;&#36824;&#23384;&#22312;&#30913;&#30424;&#20013;&#65292;&#21487;&#20197;&#29992;&#20110;undeletion&#12290;</span>
</pre>
</div>

<p>
æ³¨ï¼šchattrå‘½ä»¤ä¿®æ”¹å±æ€§èƒ½å¤Ÿæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œä½†æ˜¯å®ƒå¹¶ä¸é€‚åˆæ‰€æœ‰çš„ç›®å½•ã€‚
chattrå‘½ä»¤ä¸èƒ½ä¿æŠ¤/ã€/devã€/tmpã€/varç›®å½•ã€‚
</p>
</div>
</div>
<div id="outline-container-h:7b182dba-2068-493b-a368-b272aac2e1d2" class="outline-3">
<h3 id="h:7b182dba-2068-493b-a368-b272aac2e1d2">è®¿é—®æ§åˆ¶åˆ—è¡¨</h3>
<div class="outline-text-3" id="text-h:7b182dba-2068-493b-a368-b272aac2e1d2">
</div>
<div id="outline-container-h:36c90aae-7ef1-45f0-99d3-994f817ac25f" class="outline-4">
<h4 id="h:36c90aae-7ef1-45f0-99d3-994f817ac25f">ACLæƒé™åŠŸèƒ½</h4>
<div class="outline-text-4" id="text-h:36c90aae-7ef1-45f0-99d3-994f817ac25f">
<p>
ACLï¼šAccess Control Listï¼Œå®ç°çµæ´»çš„æƒé™ç®¡ç†
</p>

<p>
é™¤äº†æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ‰€å±ç»„å’Œå…¶å®ƒäººï¼Œå¯ä»¥å¯¹æ›´å¤šçš„ç”¨æˆ·è®¾ç½®æƒé™
</p>

<p>
CentOS7é»˜è®¤åˆ›å»ºçš„xfså’Œext4æ–‡ä»¶ç³»ç»Ÿå…·æœ‰ACLåŠŸèƒ½
</p>

<p>
CentOS7ä¹‹å‰ç‰ˆæœ¬ï¼Œé»˜è®¤æ‰‹å·¥åˆ›å»ºçš„ext4æ–‡ä»¶ç³»ç»Ÿæ— ACLåŠŸèƒ½,éœ€æ‰‹åŠ¨å¢åŠ 
</p>

<div class="org-src-container">
<pre class="src src-sh">tune2fs &#8211;o acl /dev/sdb1
mount &#8211;o acl /dev/sdb1 /mnt/test
</pre>
</div>

<p>
ACLç”Ÿæ•ˆé¡ºåºï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">&#25152;&#26377;&#32773;&#65292;&#33258;&#23450;&#20041;&#29992;&#25143;&#65292;&#25152;&#23646;&#32452;|&#33258;&#23450;&#20041;&#32452;&#65292;&#20854;&#20182;&#20154;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:185a4f6c-53ce-433a-ae9b-926d5cd7967e" class="outline-4">
<h4 id="h:185a4f6c-53ce-433a-ae9b-926d5cd7967e">ACLç›¸å…³å‘½ä»¤ setfacl getfacl</h4>
<div class="outline-text-4" id="text-h:185a4f6c-53ce-433a-ae9b-926d5cd7967e">
<p>
setfacl å¯ä»¥è®¾ç½®ACLæƒé™
</p>

<p>
getfacl å¯æŸ¥çœ‹è®¾ç½®çš„ACLæƒé™
</p>

<p>
setfacl
</p>

<div class="org-src-container">
<pre class="src src-sh">-b,--remove-all&#65306;&#21024;&#38500;&#25152;&#26377;&#25193;&#23637;&#30340;acl&#35268;&#21017;&#65292;&#22522;&#26412;&#30340;acl&#35268;&#21017;(&#25152;&#26377;&#32773;&#65292;&#32676;&#32452;&#65292;&#20854;&#20182;&#65289;&#23558;&#34987;&#20445;&#30041;&#12290;
-k,--remove-default&#65306;&#21024;&#38500;&#32570;&#30465;&#30340;acl&#35268;&#21017;&#12290;&#22914;&#26524;&#27809;&#26377;&#32570;&#30465;&#35268;&#21017;&#65292;&#23558;&#19981;&#25552;&#31034;&#12290;
-n&#65292;--no-mask&#65306;&#19981;&#35201;&#37325;&#26032;&#35745;&#31639;&#26377;&#25928;&#26435;&#38480;&#12290;setfacl&#40664;&#35748;&#20250;&#37325;&#26032;&#35745;&#31639;ACL mask&#65292;&#38500;&#38750;mask&#34987;&#26126;&#30830;&#30340;&#21046;&#23450;&#12290;
--mask&#65306;&#37325;&#26032;&#35745;&#31639;&#26377;&#25928;&#26435;&#38480;&#65292;&#21363;&#20351;ACL mask&#34987;&#26126;&#30830;&#25351;&#23450;&#12290;
-d&#65292;--default&#65306;&#35774;&#23450;&#40664;&#35748;&#30340;acl&#35268;&#21017;&#12290;
--restore=file&#65306;&#20174;&#25991;&#20214;&#24674;&#22797;&#22791;&#20221;&#30340;acl&#35268;&#21017;&#65288;&#36825;&#20123;&#25991;&#20214;&#21487;&#30001;getfacl -R&#20135;&#29983;&#65289;&#12290;&#36890;&#36807;&#36825;&#31181;&#26426;&#21046;&#21487;&#20197;&#24674;&#22797;&#25972;&#20010;&#30446;&#24405;&#26641;&#30340;acl&#35268;&#21017;&#12290;&#27492;&#21442;&#25968;&#19981;&#33021;&#21644;&#38500;--test&#20197;&#22806;&#30340;&#20219;&#20309;&#21442;&#25968;&#19968;&#21516;&#25191;&#34892;&#12290;
--test&#65306;&#27979;&#35797;&#27169;&#24335;&#65292;&#19981;&#20250;&#25913;&#21464;&#20219;&#20309;&#25991;&#20214;&#30340;acl&#35268;&#21017;&#65292;&#25805;&#20316;&#21518;&#30340;acl&#35268;&#26684;&#23558;&#34987;&#21015;&#20986;&#12290;
-R&#65292;--recursive&#65306;&#36882;&#24402;&#30340;&#23545;&#25152;&#26377;&#25991;&#20214;&#21450;&#30446;&#24405;&#36827;&#34892;&#25805;&#20316;&#12290;
-L&#65292;--logical&#65306;&#36319;&#36394;&#31526;&#21495;&#38142;&#25509;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#21482;&#36319;&#36394;&#31526;&#21495;&#38142;&#25509;&#25991;&#20214;&#65292;&#36339;&#36807;&#31526;&#21495;&#38142;&#25509;&#30446;&#24405;&#12290;
-P&#65292;--physical&#65306;&#36339;&#36807;&#25152;&#26377;&#31526;&#21495;&#38142;&#25509;&#65292;&#21253;&#25324;&#31526;&#21495;&#38142;&#25509;&#25991;&#20214;&#12290;
--version&#65306;&#36755;&#20986;setfacl&#30340;&#29256;&#26412;&#21495;&#24182;&#36864;&#20986;&#12290;
--help&#65306;&#36755;&#20986;&#24110;&#21161;&#20449;&#24687;&#12290;
--&#65306;&#26631;&#35782;&#21629;&#20196;&#34892;&#21442;&#25968;&#32467;&#26463;&#65292;&#20854;&#21518;&#30340;&#25152;&#26377;&#21442;&#25968;&#37117;&#23558;&#34987;&#35748;&#20026;&#26159;&#25991;&#20214;&#21517;
-&#65306;&#22914;&#26524;&#25991;&#20214;&#21517;&#26159;-&#65292;&#21017;setfacl&#23558;&#20174;&#26631;&#20934;&#36755;&#20837;&#35835;&#21462;&#25991;&#20214;&#21517;&#12290;
</pre>
</div>

<p>
setfaclå‘½ä»¤ï¼š
</p>
<div class="org-src-container">
<pre class="src src-sh">&#36171;&#26435;&#32473;&#29992;&#25143;&#65306;
setfacl -m u:USERNAME:MODE FILE...

&#36171;&#26435;&#32423;&#32452;&#65306;
setfacl -m g:GROUPNAME:MODE FILE...

&#25764;&#38144;&#36171;&#26435;&#65306;
setfacl -x u:USERNAME FILE...
setfacl -x g:GROUPNAME FILE...
</pre>
</div>

<p>
-R é€’å½’æ“ä½œ
</p>


<div class="org-src-container">
<pre class="src src-sh">[root@node2 tmp]# setfacl -Rm u:jasper:rwx learngit/
[root@node2 tmp]# cd learngit/
[root@node2 learngit]# ll
total 24
drwxrwxr-x+ 2 root root 4096 Aug 19 15:48 abc
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#ll f1.txt
-rw-r--r-- 1 root root 709 Dec 18 14:37 f1.txt
[root@centos8 data]#setfacl -m u:wang:- f1.txt
[root@centos8 data]#ll
total 4
-rw-r--r--+ 1 root root 709 Dec 18 14:37 f1.txt
[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:---
group::r--
mask::r--
other::r--

[root@centos8 data]#su wang
[wang@centos8 data]$<span style="color: #a0522d;">cat</span> f1.txt
cat: f1.txt: Permission denied
[wang@centos8 data]$<span style="color: #a0522d;">echo</span> xx &gt;&gt; f1.txt
bash: f1.txt: Permission denied
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
group::r--
other::r--
[root@centos8 data]#setfacl -m u:wang:0 f1.txt
[root@centos8 data]#setfacl -m g:admins:w f1.txt
[root@centos8 data]#ll f1.txt
-rw-rw-r--+ 1 root root 718 Dec 18 14:44 f1.txt
[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:---
group::r--
group:admins:-w-
mask::rw-
other::r--

[root@centos8 data]#id wang
<span style="color: #a0522d;">uid</span>=1000(wang) <span style="color: #a0522d;">gid</span>=1000(wang) <span style="color: #a0522d;">groups</span>=1000(wang)
[root@centos8 data]#id me
<span style="color: #a0522d;">uid</span>=1001(me) <span style="color: #a0522d;">gid</span>=1001(me) <span style="color: #a0522d;">groups</span>=1001(me)
[root@centos8 data]#su cici
[cici@centos8 data]$<span style="color: #a0522d;">cat</span> f1.txt
&#12290;&#12290;&#12290;&#21487;&#30475;&#30475;
[cici@centos8 data]$<span style="color: #a0522d;">exit</span>
<span style="color: #a020f0;">exit</span>
[root@centos8 data]#gpasswd -a me admins
Adding user me to group admins
[root@centos8 data]#id me
<span style="color: #a0522d;">uid</span>=1001(me) <span style="color: #a0522d;">gid</span>=1001(me) <span style="color: #a0522d;">groups</span>=1001(me),1002(admins)
[root@centos8 data]#su me
[cici@centos8 data]$<span style="color: #a0522d;">echo</span> d11&gt;&gt; f1.txt
[cici@centos8 data]$<span style="color: #a0522d;">cat</span> f1.txt
cat: f1.txt: Permission denied
[cici@centos8 data]$<span style="color: #a0522d;">exit</span>
<span style="color: #a020f0;">exit</span>

[root@centos8 data]#su wang
[wang@centos8 data]$<span style="color: #a0522d;">cat</span> f1.txt
cat: f1.txt: Permission denied
[wang@centos8 data]$<span style="color: #a0522d;">echo</span> wangdata &gt;&gt; f1.txt
bash: f1.txt: Permission denied
[wang@centos8 data]$<span style="color: #a0522d;">exit</span>
<span style="color: #a020f0;">exit</span>

[root@centos8 data]#groupmems -a wang -g admins
[root@centos8 data]#id wang
<span style="color: #a0522d;">uid</span>=1000(wang) <span style="color: #a0522d;">gid</span>=1000(wang) <span style="color: #a0522d;">groups</span>=1000(wang),1002(admins)
[root@centos8 data]#su wang
[wang@centos8 data]$<span style="color: #a0522d;">getfacl</span> f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:---
group::r--
group:admins:-w-
mask::rw-
other::r--
[wang@centos8 data]$<span style="color: #a0522d;">cat</span> f1.txt
cat: f1.txt: Permission denied
[wang@centos8 data]$<span style="color: #a0522d;">echo</span> wangdata2 &gt;&gt; f1.txt
bash: f1.txt: Permission denied
</pre>
</div>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">mount -o acl /directory
getfacl file |directory
setfacl  -m u:wang:rwx file|directory
setfacl  -m g:admins:rw file| directory
setfacl  -x u:wang file |directory
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#28165;&#38500;&#25152;&#26377;ACL&#26435;&#38480;</span>
setfacl -b file1
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#22797;&#21046;file1&#30340;acl&#26435;&#38480;&#32473;file2</span>
getfacl file1 | setfacl --set-file=-  file2 
</pre>
</div>

<p>
<b>mask æƒé™</b>
</p>

<ul class="org-ul">
<li>maskåªå½±å“é™¤æ‰€æœ‰è€…å’Œotherçš„ä¹‹å¤–çš„äººå’Œç»„çš„æœ€å¤§æƒé™</li>

<li>maskéœ€è¦ä¸ç”¨æˆ·çš„æƒé™è¿›è¡Œé€»è¾‘ä¸è¿ç®—åï¼Œæ‰èƒ½å˜æˆæœ‰é™çš„æƒé™(Effective
Permission)</li>

<li><p>
ç”¨æˆ·æˆ–ç»„çš„è®¾ç½®å¿…é¡»å­˜åœ¨äºmaskæƒé™è®¾å®šèŒƒå›´å†…æ‰ä¼šç”Ÿæ•ˆ èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">setfacl -m mask::rx file
</pre>
</div></li>
</ul>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#ll f1.txt
-rw-rw-r--+ 1 root root 728 Dec 18 14:51 f1.txt
[root@centos8 data]#chmod <span style="color: #a0522d;">g</span>=r f1.txt
[root@centos8 data]#ll f1.txt
-rw-r--r--+ 1 root root 728 Dec 18 14:51 f1.txt
[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:---
group::r--
group:admins:-w- <span style="color: #b22222;">#</span><span style="color: #b22222;">effective:---</span>
mask::r--
other::r--

[root@centos8 data]#setfacl -m mask::rw f1.txt
[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:---
group::r--
group:admins:-w-
mask::rw-
other::r--

[root@centos8 data]#setfacl -m u:wang:rwx f1.txt
[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:rwx
group::r--
group:admins:-w-
mask::rwx
other::r--

[root@centos8 data]#setfacl -m mask::rw f1.txt
[root@centos8 data]#getfacl f1.txt
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:rwx <span style="color: #b22222;">#</span><span style="color: #b22222;">effective:rw-</span>
group::r--
group:admins:-w-
mask::rw-
other::r--
</pre>
</div>

<p>
&#x2013;seté€‰é¡¹ä¼šæŠŠåŸæœ‰çš„ACLé¡¹éƒ½åˆ é™¤ï¼Œç”¨æ–°çš„æ›¿ä»£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸€å®šè¦åŒ…å«UGO
çš„è®¾ç½®ï¼Œä¸èƒ½è±¡-mä¸€æ ·ï¼Œåªæ˜¯æ·»åŠ ACLå°±å¯ä»¥
</p>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh">setfacl --set u::rw,u:wang:rw,g::r,o::- file1
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:b5f88181-e59b-4852-96ca-56ee7892a553" class="outline-3">
<h3 id="h:b5f88181-e59b-4852-96ca-56ee7892a553">å¤‡ä»½å’Œè¿˜åŸACL</h3>
<div class="outline-text-3" id="text-h:b5f88181-e59b-4852-96ca-56ee7892a553">
<p>
ä¸»è¦çš„æ–‡ä»¶æ“ä½œå‘½ä»¤cpå’Œmvéƒ½æ”¯æŒACLï¼Œåªæ˜¯cpå‘½ä»¤éœ€è¦åŠ ä¸Š-på‚æ•°ã€‚ä½†æ˜¯tarç­‰
å¸¸è§çš„å¤‡ä»½å·¥å…·æ˜¯ä¸ ä¼šä¿ç•™ç›®å½•å’Œæ–‡ä»¶çš„ACLä¿¡æ¯
</p>

<p>
èŒƒä¾‹ï¼š
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">&#22791;&#20221;ACL</span>
getfacl -R /tmp/dir &gt; acl.txt
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#28040;&#38500;ACL&#26435;&#38480;</span>
setfacl -R -b /tmp/dir
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#36824;&#21407;ACL&#26435;&#38480;</span>
setfacl -R  --set-file=acl.txt /tmp/dir
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#36824;&#21407;ACL&#26435;&#38480;</span>
setfacl --restore acl.txt
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#26597;&#30475;ACL&#26435;&#38480;</span>
getfacl -R /tmp/dir
</pre>
</div>

<p>
èŒƒä¾‹:
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@centos8 data]#getfacl *
<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f1.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:rwx <span style="color: #b22222;">#</span><span style="color: #b22222;">effective:rw-</span>
group::r--
group:admins:-w-
mask::rw-
other::r--

<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f2.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
group::r--
other::r--

<span style="color: #b22222;"># </span><span style="color: #b22222;">file: f3.txt</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">owner: root</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">group: root</span>
user::rw-
user:wang:rwx <span style="color: #b22222;">#</span><span style="color: #b22222;">effective:rw-</span>
group::r--
group:admins:-w-
mask::rw-
other::r--

[root@centos8 data]#cd
[root@centos8 ~]#tar cvf data.tar /data/
tar: Removing leading <span style="color: #ff00ff;">`/' from member names</span>
<span style="color: #ff00ff;">/data/</span>
<span style="color: #ff00ff;">/data/f1.txt</span>
<span style="color: #ff00ff;">/data/f2.txt</span>
<span style="color: #ff00ff;">/data/f3.txt</span>
<span style="color: #ff00ff;">[root@centos8 ~]#tar xvf data.tar -C /opt</span>
<span style="color: #ff00ff;">data/</span>
<span style="color: #ff00ff;">data/f1.txt</span>
<span style="color: #ff00ff;">data/f2.txt</span>
<span style="color: #ff00ff;">data/f3.txt</span>
<span style="color: #ff00ff;">[root@centos8 ~]#ls /opt</span>
<span style="color: #ff00ff;">data</span>
<span style="color: #ff00ff;">[root@centos8 ~]#cd /opt/data</span>
<span style="color: #ff00ff;">[root@centos8 data]#ll</span>
<span style="color: #ff00ff;">total 12</span>
<span style="color: #ff00ff;">-rw-rw-r-- 1 root root 728 Dec 18 14:51 f1.txt</span>
<span style="color: #ff00ff;">-rw-r--r-- 1 root root 728 Dec 18 15:01 f2.txt</span>
<span style="color: #ff00ff;">-rw-rw-r-- 1 root root 728 Dec 18 14:51 f3.txt</span>
<span style="color: #ff00ff;">[root@centos8 data]#getfacl -R /data &gt; /root/acl.txt</span>
<span style="color: #ff00ff;">getfacl: Removing leading '/' from absolute path names</span>
<span style="color: #ff00ff;">[root@centos8 data]#cat /root/acl.txt</span>
<span style="color: #ff00ff;"># file: data</span>
<span style="color: #ff00ff;"># owner: root</span>
<span style="color: #ff00ff;"># group: admins</span>
<span style="color: #ff00ff;">user::rwx</span>
<span style="color: #ff00ff;">group::rwx</span>
<span style="color: #ff00ff;">other::rwx</span>
<span style="color: #ff00ff;"># file: data/f1.txt</span>
<span style="color: #ff00ff;"># owner: root</span>
<span style="color: #ff00ff;"># group: root</span>
<span style="color: #ff00ff;">user::rw-</span>
<span style="color: #ff00ff;">user:wang:rwx #effective:rw-</span>
<span style="color: #ff00ff;">group::r--</span>
<span style="color: #ff00ff;">group:admins:-w-</span>
<span style="color: #ff00ff;">mask::rw-</span>
<span style="color: #ff00ff;">other::r--</span>
<span style="color: #ff00ff;"># file: data/f2.txt</span>
<span style="color: #ff00ff;"># owner: root</span>
<span style="color: #ff00ff;"># group: root</span>
<span style="color: #ff00ff;">user::rw-</span>
<span style="color: #ff00ff;">group::r--</span>
<span style="color: #ff00ff;">other::r--</span>
<span style="color: #ff00ff;"># file: data/f3.txt</span>
<span style="color: #ff00ff;"># owner: root</span>
<span style="color: #ff00ff;"># group: root</span>
<span style="color: #ff00ff;">user::rw-</span>
<span style="color: #ff00ff;">user:wang:rwx #effective:rw-</span>
<span style="color: #ff00ff;">group::r--</span>
<span style="color: #ff00ff;">group:admins:-w-</span>
<span style="color: #ff00ff;">mask::rw-</span>
<span style="color: #ff00ff;">other::r--</span>

<span style="color: #ff00ff;">[root@centos8 data]#ll /opt/data</span>
<span style="color: #ff00ff;">total 12</span>
<span style="color: #ff00ff;">-rw-rw-r-- 1 root root 728 Dec 18 14:51 f1.txt</span>
<span style="color: #ff00ff;">-rw-r--r-- 1 root root 728 Dec 18 15:01 f2.txt</span>
<span style="color: #ff00ff;">-rw-rw-r-- 1 root root 728 Dec 18 14:51 f3.txt</span>
<span style="color: #ff00ff;">[root@centos8 data]#cd</span>
<span style="color: #ff00ff;">[root@centos8 ~]#setfacl -R --set-file=/root/acl.txt /opt</span>
<span style="color: #ff00ff;">[root@centos8 ~]#ll /opt/data/</span>
<span style="color: #ff00ff;">total 12</span>
<span style="color: #ff00ff;">-rw-rw-r--+ 1 root root 728 Dec 18 14:51 f1.txt</span>
<span style="color: #ff00ff;">-rw-rw-r--+ 1 root root 728 Dec 18 15:01 f2.txt</span>
<span style="color: #ff00ff;">-rw-rw-r--+ 1 root root 728 Dec 18 14:51 f3.txt</span>
<span style="color: #ff00ff;">[root@centos8 ~]#setfacl -b -R /opt/data</span>
<span style="color: #ff00ff;">[root@centos8 ~]#ll /opt/data</span>
<span style="color: #ff00ff;">total 12</span>
<span style="color: #ff00ff;">-rw-r--r-- 1 root root 728 Dec 18 14:51 f1.txt</span>
<span style="color: #ff00ff;">-rw-r--r-- 1 root root 728 Dec 18 15:01 f2.txt</span>
<span style="color: #ff00ff;">-rw-r--r-- 1 root root 728 Dec 18 14:51 f3.txt</span>
<span style="color: #ff00ff;">[root@centos8 ~]#</span>
</pre>
</div>

<p>
ç»ƒä¹ 
</p>

<ol class="org-ol">
<li>åœ¨/testdir/diré‡Œåˆ›å»ºçš„æ–°æ–‡ä»¶è‡ªåŠ¨å±äºwebsç»„ï¼Œç»„appsçš„æˆå‘˜å¦‚ï¼štomcat
èƒ½å¯¹è¿™äº›æ–°æ–‡ä»¶æœ‰è¯»å†™æƒé™ï¼Œç»„dbsçš„æˆå‘˜å¦‚ï¼šmysqlåªèƒ½å¯¹æ–°æ–‡ä»¶æœ‰è¯»æƒé™ï¼Œ
å…¶å®ƒç”¨æˆ·ï¼ˆä¸å±äºwebs,apps,dbsï¼‰ä¸èƒ½è®¿é—®è¿™ä¸ªæ–‡ä»¶å¤¹</li>
<li>è¯¯å°† /bin/chmod æ–‡ä»¶çš„æ‰§è¡Œæƒé™åˆ é™¤ï¼Œå¦‚ä½•æ¢å¤ï¼Ÿ</li>
</ol>
</div>
</div>
</section>
</main class="container">
<footer id="postamble" class="status">
<footer data-astro-cid-sz7xmlte data-turbo-permanent id=rootFooter>
    <script>
        const shuffle = e => e.map((e => ({
            v: e,
            sort: Math.random()
        }))).sort(( (e, o) => e.sort - o.sort)).map(( ({v: e}) => e));
        var songList = ["barbie-girl--stantough", "blue-da-ba-dee--cornelius-link", "hips-dont-lie--stantough", "i-want-it-that-way--stantough", "seven-nation-army--stantough", "smooth-criminal--stantough"]
          , songOrder = songOrder ?? shuffle(songList).map((e => `/audio/music/${e}.opus`))
          , song = new Audio(songOrder[0])
          , nextSong = new Audio(songOrder[1])
          , songIndex = 2
          , musicWrapper = void 0
          , arrow = void 0
          , notes = void 0;
        song.addEventListener("ended", next);
        const toggle = () => song.paused ? play() : pause();
        function play() {
            song.play(),
            musicWrapper = musicWrapper || document.getElementById("musicWrapper"),
            notes = notes || document.getElementById("notesWrapper"),
            musicWrapper.classList.add("shakeManHorse"),
            notes.classList.remove("hideNotes")
        }
        function pause() {
            song.pause(),
            musicWrapper = musicWrapper || document.getElementById("musicWrapper"),
            notes = notes || document.getElementById("notesWrapper"),
            musicWrapper.classList.remove("shakeManHorse"),
            notes.classList.add("hideNotes")
        }
        function next() {
            song = nextSong,
            play(),
            songIndex === songOrder.length && (songIndex = 0),
            nextSong = new Audio(songOrder[songIndex]),
            songIndex += 1
        }
        function skip() {
            pause(),
            (arrow = arrow || document.getElementById("musicArrow")).classList.add("shootArrow");
            new Audio("/audio/effects/ohno.m4a").play(),
            arrow.addEventListener("animationend", arrowShootHandler, !1)
        }
        function arrowShootHandler() {
            arrow.removeEventListener("animationend", arrowShootHandler, !1),
            arrow.classList.remove("shootArrow");
            new Audio("/audio/effects/heythathurt.m4a").play(),
            next()
        }
    </script>
    <div id=musicPlayer data-astro-cid-q7a5pyro>
        <button class=skip data-astro-cid-q7a5pyro onclick=skip() title="Skip song">
            <div id=skipWrapper data-astro-cid-q7a5pyro>
                <img alt="Medieval drollery of a man/snail/bat/monkey shooting an arrow" class=archer decoding=async height=334 loading=lazy src=/images/archer-no-arrow.448ccd8b_Z1KfRYq.webp width=226 data-astro-cid-q7a5pyro>
                <img alt="Arrow for archer" class="arrow complete" decoding=async height=23 loading=lazy src=/images/no-archer-full-arrow.87aa9971_Z2qL2KO.webp width=141 data-astro-cid-q7a5pyro id=musicArrow>
            </div>
        </button>
        <button class=playPause data-astro-cid-q7a5pyro onclick=toggle() title="Play/pause song">
            <div id=musicWrapper data-astro-cid-q7a5pyro>
                <div class=hideNotes id=notesWrapper data-astro-cid-q7a5pyro>
                    <div class=lyreNotes data-astro-cid-6gcrueho>
                        <div class=note1 data-astro-cid-6gcrueho>&#9835;&#9833;</div>
                        <div class=note2 data-astro-cid-6gcrueho>&#9833;</div>
                        <div class=note3 data-astro-cid-6gcrueho>&#9839;&#9834;</div>
                        <div class=note4 data-astro-cid-6gcrueho>&#9834;</div>
                    </div>
                    <div class=fluteNotes data-astro-cid-6gcrueho>
                        <div class=note1 data-astro-cid-6gcrueho>&#9835;&#9833;</div>
                        <div class=note2 data-astro-cid-6gcrueho>&#9833;</div>
                        <div class=note3 data-astro-cid-6gcrueho>&#9839;&#9834;</div>
                        <div class=note4 data-astro-cid-6gcrueho>&#9834;</div>
                    </div>
                </div>
                <img alt="Medieval drollery of a man/horse playing a lyre and a horn" class=manHorse decoding=async height=665 loading=lazy src=/images/man-horse-band.e3a2efcf_q8FCa.webp width=531 data-astro-cid-q7a5pyro>
            </div>
        </button>
    </div>
    <hr data-astro-cid-sz7xmlte>
    <div class=salutation data-astro-cid-gdmrbrho>
        <p data-astro-cid-gdmrbrho>
            <span class=flower2 data-astro-cid-gdmrbrho>A</span>
            <span class=smallcap data-astro-cid-gdmrbrho>pax vobiscum</span>
            <span class="flower2 wiggle" data-astro-cid-gdmrbrho id=leaf>a</span>
        </p>
    </div>
    <script>
        function animateLeafBlownHandler() {
            leaf.removeEventListener("animationend", animateLeafBlownHandler, !1),
            leaf.classList.remove("blownAway"),
            leaf.classList.add("wiggle")
        }
        function animateLeaf() {
            leaf = leaf ?? document.getElementById("leaf"),
            leaf.classList.remove("wiggle"),
            leaf.classList.add("blownAway"),
            leaf.addEventListener("animationend", animateLeafBlownHandler, !1)
        }
        document.getElementById("leaf").onclick = animateLeaf
    </script>


    <div class=bar data-astro-cid-p3givckg>
        <div class=list data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:gnuemacs height=1em viewBox="0 0 24 24" width=1em>
                    <title>emacs</title>
                    <symbol id=ai:simple-icons:gnuemacs>
                        <path d="M12 24C5.448 24 .118 18.617.118 12S5.448 0 12 0s11.882 5.383 11.882 12S18.552 24 12 24zM12 .661C5.813.661.779 5.748.779 12S5.813 23.339 12 23.339S23.221 18.253 23.221 12S18.187.661 12 .661zM8.03 20.197s.978.069 2.236-.042c.51-.045 2.444-.235 3.891-.552c0 0 1.764-.377 2.707-.725c.987-.364 1.524-.673 1.766-1.11c-.011-.09.074-.408-.381-.599c-1.164-.488-2.514-.4-5.185-.457c-2.962-.102-3.948-.598-4.472-.997c-.503-.405-.25-1.526 1.907-2.513c1.086-.526 5.345-1.496 5.345-1.496c-1.434-.709-4.109-1.955-4.659-2.224c-.482-.236-1.254-.591-1.421-1.021c-.19-.413.448-.768.804-.87c1.147-.331 2.766-.536 4.24-.56c.741-.012.861-.059.861-.059c1.022-.17 1.695-.869 1.414-1.976c-.252-1.13-1.579-1.795-2.84-1.565c-1.188.217-4.05 1.048-4.05 1.048c3.539-.031 4.131.028 4.395.398c.156.218-.071.518-1.015.672c-1.027.168-3.163.37-3.163.37c-2.049.122-3.492.13-3.925 1.046c-.283.599.302 1.129.558 1.46c1.082 1.204 2.646 1.853 3.652 2.331c.379.18 1.49.52 1.49.52c-3.265-.18-5.619.823-7.001 1.977c-1.562 1.445-.871 3.168 2.33 4.228c1.891.626 2.828.921 5.648.667c1.661-.09 1.923-.036 1.939.1c.023.192-1.845.669-2.355.816c-1.298.374-4.699 1.129-4.716 1.133z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:gnuemacs></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Emacs</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:org height=1em viewBox="0 0 24 24" width=1em>
                    <title>org-mode</title>
                    <symbol id=ai:simple-icons:org>
                        <path d="M17.169 0c-.566.004-2.16 3.312-3.376 5.94a2.19 2.19 0 0 1-.408-1.267c-.03-.582-1.089.237-.936 1.275c-.068-.035-1.26.227-1.26.23c-.23-.93-.802-1.618-1.15-.563c-.701 1.663-.88 2.984.115 4.585c-.908 4.058-6.948 6.053-6.32 9.33c.175.004 1.634 3.48 6.337 2.057c5.557-1.577 8.624 2.116 8.978 2.375c.52.526-1.348-4.573-5.302-6.865c-2.339-1.276-.87-3.474-.703-4.25c0 0 1.874 1.312 3.232-.692c1.227.316 2.05-.224 3.105.158c.64.28 3.336.11 2.334-1.396c-.148.129.07.27-.075.46c-.043.056-.128.232-.408.315c-.314.149-.83.27-1.43-.37c-.434-.32-.748-.04-.992-.063c.152-.098.577-.315 1.264-.315c.388 0 .594.336.854.338c.174 0 .685-.262.787-.365c.63-.41.697-.278 1.012-.905c.17-.759-.215-.92-.332-1.129c-.032-.483-.436-.67-.919-.326c-1.106-.198-2.192-.105-2.728-.15c-1.175-.164-2.153-.786-2.153-.786c.143-.19.075-.6-.842-.628c-.315-.104-.45-.2-.745-.307c.61-1.37.674-2.007 1.418-4.004c.261-1.053 1.039-2.685.643-2.682zm-4.297 8.093c.03-.086.443.138.952.176c.395.03.805.048 1.296-.025c.03-.005.172.095-.15.194c-.02.01-.062-.01-.065.196c0 .022-.01.04-.02.046c-.15.152-.708.223-1.065.1c-.436-.17-.482-.316-.517-.443c-.305-.147-.47-.123-.43-.244zM9.685 10.2C8.86 9 8.929 8.36 8.96 7.256C7.961 8.288 6.855 8.3 5.18 8.58c-1.299.234-3.657 2.447-4.025 4.742c-.043.608-.08 2.183.424 3.498c.492 1.13.828 1.727 1.844 2.335c-.882-3.169 5.296-5.33 6.263-8.955z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:org></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Orgmode</p>
                </div>
            </span>
            <a href=/donations.html class=entry data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:astro height=1em viewBox="0 0 24 24" width=1em>
                    <title>Donations</title>
                    <symbol id=ai:simple-icons:astro>
                        <path d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.158 3.158 0 0 1-1.407-1.188a3.31 3.31 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165h.002zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614c.302 0 .57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727l-5.516 14.99z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:astro></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>æ‰“èµ</p>
                </div>
            </span>
            </a>
            <span class=entry data-astro-cid-p3givckg>
                <svg xmlns="http://www.w3.org/2000/svg" class=heading data-astro-cid-p3givckg data-icon=simple-icons:copyright width="1em" height="1em" viewBox="0 0 24 24">
                    <title>Copyright</title>
                    <path fill="currentColor" d="M19 2a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm-5 5h-4a1 1 0 0 0-1 1l.007.117A1 1 0 0 0 10 9h3v5a1 1 0 0 1-1.993.117L11 14a1 1 0 0 0-2 0a3 3 0 0 0 6 0V8a1 1 0 0 0-1-1" />
                    <use xlink:href=#ai:simple-icons:copyright></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Â© 2024 Jasper Hsu</p>
                </div>
            </span>
        </div>
        <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="list license" data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Creative Commons</title>
                    <symbol id=ai:fa6-brands:creative-commons>
                        <path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Creative Commons</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-by height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Attribute</title>
                    <symbol id=ai:fa6-brands:creative-commons-by>
                        <path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3c3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7c3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-by></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Attribute</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-nc height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Noncommercial</title>
                    <symbol id=ai:fa6-brands:creative-commons-nc>
                        <path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256C0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9c0 110.9 92.1 202.4 203.7 202.4c122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2c0-6.2-2.2-11.2-6.6-15.1c-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1c53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1c0-57-19.8-105-59.3-143.9c-39.3-39.9-87.2-59.8-143.6-59.8z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-nc></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Noncommercial</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-sa height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Share Alike</title>
                    <symbol id=ai:fa6-brands:creative-commons-sa>
                        <path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7c99.8 0 127.5 82.5 127.5 134.2c0 63.6-41 132.9-128.9 132.9c-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2c23.3 0 58-18.2 58-82.8c0-82.5-49.1-80.6-56.7-80.6c-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2l-49-49.2h19.4z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-sa></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Share Alike</p>
                </div>
            </span>
        </a>
    </div>
</footer>
</footer>
</body>
</html>
