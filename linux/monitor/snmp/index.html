<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linux: Snmp</title>
<meta name="generator" content="Org Mode" />
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@jasperhsu">
<meta name="google-adsense-account" content="ca-pub-1741779893655624">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1741779893655624" crossorigin="anonymous"></script>
<!-- from -->
<!--
<style>#back-to-top{background:#000;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;bottom:20px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);color:#fff;cursor:pointer;display:block;height:56px;opacity:1;outline:0;position:fixed;right:20px;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-transition:bottom .2s,opacity .2s;-o-transition:bottom .2s,opacity .2s;-moz-transition:bottom .2s,opacity .2s;transition:bottom .2s,opacity .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:56px;z-index:1}#back-to-top svg{display:block;fill:currentColor;height:24px;margin:16px auto 0;width:24px}#back-to-top.hidden{bottom:-56px;opacity:0}</style>
-->
<link rel="stylesheet" href="/static/aandds.com/css/main.css">
<link rel="stylesheet" href="/static/aandds.com/css/drollery.min.css">
<script type="text/javascript" src="/static/aandds.com/js/main.js"></script>
<!--
<script id="MathJax-script" async="" src="/static/aandds.com/js/mathjax.js"></script>

<script type="text/javascript" src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
-->
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Linux: Snmp</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:66c95420-7ee3-4223-8cc8-afa4b59c985e">SNMP 简单网络管理协议</a>
<ul>
<li><a href="#h:170377c9-6018-4c66-963b-fb6057a6f9fa">安装</a></li>
</ul>
</li>
<li><a href="#h:213a605f-35c1-41f0-bc02-2b542d5ef7ef">net-snmp配置文件详解</a>
<ul>
<li><a href="#h:5e819359-f430-4515-864f-a8daef106a58">主要4步骤</a></li>
<li><a href="#h:fd639f2d-1fdc-450c-8009-db645c5b720c">SNMP Trap发送目的地设置</a></li>
<li><a href="#h:efde33d6-f9f7-440c-b3c8-a2dd96695719">自定义脚本</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li>TAGS: <a href="../../index.html">Linux</a></li>
</ul>
<section id="outline-container-h:66c95420-7ee3-4223-8cc8-afa4b59c985e" class="outline-2">
<h2 id="h:66c95420-7ee3-4223-8cc8-afa4b59c985e">SNMP 简单网络管理协议</h2>
<div class="outline-text-2" id="text-h:66c95420-7ee3-4223-8cc8-afa4b59c985e">
<p>
网络管理系统：监控（监视并控制）网络中各种设备的运行状态。
</p>

<p>
SNMP，Simple Network Management Protocol，简单网络管理协议，用于网络设备的管理。
</p>

<p>
SNMP是一组协议标准，包括三个部分——管理信息库（MIB）、管理信息结构（SMI）和管理通信协议（SNMP）。
</p>

<p>
管理信息库（MIB）给出了管理对象的具体定义。
</p>

<p>
SNMP发展过程中一个重要的补充是 RMON,Remote Monitor,远程监控。
</p>

<p>
SNMPv1 版本的缺陷是 ：SNMPv1只提供简单的共同体名认证，安全措施很弱。
</p>

<p>
BER，Basic Encoding Rules，基本编码规则，用于对SNMP数据类型进行编码。
</p>

<p>
SNMP管理模型
</p>

<p>
网络管理的四个层次。  网元/网络/服务/商务 管理层。
</p>

<p>
由三部分组成，管理者（Manager）、管理代理（Agent）、管理信息库（MIB）。
</p>

<p>
SMI,Structure of Management Information,管理信息结构，用来规定管理信息库的定义。
</p>

<p>
SMI对一个管理对象的描述包括三个部分——名字、语法和编码。
</p>

<p>
抽象语法表示
</p>

<p>
ASN.1,Abstract Syntax Notation 1。描述了一种对数据进行表示、编码、传输和解码的数据格式。
</p>

<p>
ASN.1有四种类型：简单类型、结构类型、标签类型、其他类型。
</p>
</div>
<div id="outline-container-h:170377c9-6018-4c66-963b-fb6057a6f9fa" class="outline-3">
<h3 id="h:170377c9-6018-4c66-963b-fb6057a6f9fa">安装</h3>
<div class="outline-text-3" id="text-h:170377c9-6018-4c66-963b-fb6057a6f9fa">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">&#23433;&#35013;net-snmp</span>
wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
yum install net-snmp -y
<span style="color: #483d8b;">cd</span> /etc/snmp/
cp snmpd.conf snmpd.conf.bak
cat snmpd.conf.bak |grep -vE <span style="color: #8b2252;">'^$|^#'</span> &gt; snmpd.conf

cat &gt;/etc/snmp/snmpd.conf&lt;&lt;\EOF
<span style="color: #ffa54f;">com2sec notConfigUser  default       public</span>
<span style="color: #ffa54f;">group   notConfigGroup v1           notConfigUser</span>
<span style="color: #ffa54f;">group   notConfigGroup v2c           notConfigUser</span>
<span style="color: #ffa54f;">view    all    included   .1</span>
<span style="color: #ffa54f;">view    systemview    included   .1.3.6.1.2.1.1</span>
<span style="color: #ffa54f;">view    systemview    included   .1.3.6.1.2.1.25.1.1</span>
<span style="color: #ffa54f;">access  notConfigGroup ""      any       noauth    exact  all none none</span>
<span style="color: #ffa54f;">access  notConfigGroup ""      any       noauth    exact  systemview none none</span>
<span style="color: #ffa54f;">syslocation Unknown (edit /etc/snmp/snmpd.conf)</span>
<span style="color: #ffa54f;">syscontact Root <a href="mailto:root%40localhost">&lt;root@localhost&gt;</a> (configure /etc/snmp/snmp.local.conf)</span>
<span style="color: #ffa54f;">dontLogTCPWrappersConnects yes</span>
<span style="color: #ffa54f;">EOF</span>

systemctl start snmpd
yum -y install net-snmp-utils
</pre>
</div>

<p>
RHEL5, 6 使用 snmpd 时， 默认启动服务只监听 127.0.0.1:199
</p>

<p>
可通过下面方法更改监听需求
</p>
<div class="org-src-container">
<pre class="src src-sh">vi /etc/snmp/snmpd.conf
smuxsocket 0.0.0.0:199
</pre>
</div>

<p>
检查
</p>

<div class="org-src-container">
<pre class="src src-sh">snmpwalk -v 2c -c flt123&#160; 192.168.2.250 hrSWRunPerfMem|sed <span style="color: #8b2252;">'/: 0 KB/d'</span>|cut -d <span style="color: #8b2252;">" "</span> -f4|awk <span style="color: #8b2252;">'{s+=$1}END{print s}'</span> &#23545;&#31243;&#24207;&#21344;&#29992;&#20869;&#23384;&#30456;&#21152;&#27714;&#21644;

(py3) [root@rabbitmq01 ~]# snmpwalk -v 2c -c public localhost 1.3.6.1.2.1 |grep ifDescr
IF-MIB::ifDescr.1 = STRING: lo
IF-MIB::ifDescr.2 = STRING: eth0

(py3) [root@rabbitmq01 ~]# snmpwalk -v 2c -c flt123 localhost 1.3.6.1.2.1|cut -d <span style="color: #8b2252;">":"</span> -f1 &gt;s
(py3) [root@rabbitmq01 ~]# cat s|wc -l
3928
(py3) [root@rabbitmq01 ~]# cat s |sort -u |uniq
DISMAN-EVENT-MIB
EtherLike-MIB
HOST-RESOURCES-MIB
IF-MIB
IP-FORWARD-MIB
IP-MIB
IPV6-MIB
MTA-MIB
NOTIFICATION-LOG-MIB
RMON-MIB
SCTP-MIB
SNMPv2-MIB
SNMPv2-SMI
TCP-MIB
UDP-MIB
</pre>
</div>

<p>
HOST-RESOURCES-MIB主要包括：
</p>
<ul class="org-ul">
<li>hrSystem：主要包括系统启动时间、当前进程数、最大支持进程数等等。</li>
<li>hrstorage：主要包括物理内存大小，各个分区、虚拟内存的大小和使用情况</li>
<li>hrdevice：硬件设备情况、每个cpu的负载情况等</li>
<li>hrswrun：操作系统类型的标志、进程列表（进程的状态、名字、路径、参数等）</li>
<li>hrSWRunPerf：每个进程占用的内存、以及占用的CPU时间（累计）</li>
<li>hrSWinstalled：系统安装的软件信息</li>
</ul>

<pre class="example" id="org12f3ec5">
HOST-RESOURCES-MIB::hrSWRunStatus.8171 = INTEGER: running(1)
HOST-RESOURCES-MIB::hrSWRunStatus.8332 = INTEGER: runnable(2)
HOST-RESOURCES-MIB::hrSWInstalledName.250 = STRING: "net-snmp-libs-5.5-49.el6_5.4"
HOST-RESOURCES-MIB::hrSWInstalledType.250 = INTEGER: application(4)
HOST-RESOURCES-MIB::hrSWInstalledDate.250 = STRING: 2014-10-14,10:1:21.0,+8:0
</pre>

<p>
RFC1213-MIB主要包括（跟服务器相关的）:
</p>
<ul class="org-ul">
<li>.iso.org.dod.internet.mgmt.mib-2.udp.udpTable:服务器上的UDP端口占用情况。</li>
<li>.iso.org.dod.internet.mgmt.mib-2.tcp.tcpConnTable：服务器上的TCP连接情况</li>
</ul>

<p>
UCD-SNMP-MIB主要包括：  1.3.6.1.4.1.2021  在linux系统里
</p>
<ul class="org-ul">
<li>2021.4  memory</li>
<li>2021.10  laTable  负载</li>
<li>2021.11  systemStats</li>
<li>2021.100  version</li>
<li>2021.101  snmperrs</li>
</ul>

<p>
Statistics for MIB UCD-SNMP-MIB:
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">Objects: 171</td>
<td class="org-left">OIDS: 162</td>
<td class="org-left">Object Groups: 0</td>
</tr>

<tr>
<td class="org-left">Traps: 0</td>
<td class="org-left">Notifications: 2</td>
<td class="org-left">Notification Groups: 0</td>
</tr>

<tr>
<td class="org-left">Tables: 7</td>
<td class="org-left">Tabulars: 63</td>
<td class="org-left">Scalars/Other: 90</td>
</tr>
</tbody>
</table>

<pre class="example" id="org647a9e6">
(py3) [root@rabbitmq01 ~]# snmpd -v

NET-SNMP version:  5.7.2
Web:               http://www.net-snmp.org/
Email:             net-snmp-coders@lists.sourceforge.net

(py3) [root@rabbitmq01 ~]# snmpwalk -v 2c -O n  -c public localhost 1.3.6.1.2.1.system  # 检查snmp是否正确

(py3) [root@rabbitmq01 ~]# snmptranslate -Tp .1 # 列出整MIB树结构

(py3) [root@rabbitmq01 ~]# snmptranslate -On -IR system   #（-On表示以数字格式输出，-IR表示随机访问MIB
.1.3.6.1.2.1.1
(py3) [root@rabbitmq01 ~]# snmptranslate -Onf -IR system  #（-f表示列出名称型的OID）
.iso.org.dod.internet.mgmt.mib-2.system
(py3) [root@rabbitmq01 ~]# snmptranslate -Tl|more   # 字符加数字形式
(py3) [root@rabbitmq01 ~]# snmptranslate -Ts|more    字符形式
(py3) [root@rabbitmq01 ~]# snmptranslate -To|more    数字形式
(py3) [root@rabbitmq01 ~]# snmptranslate -Tt|more    层次形式
(py3) [root@rabbitmq01 ~]# snmptranslate -Ta|more
dump DEFINITIONS ::= BEGIN
org OBJECT IDENTIFIER ::= { iso 3 }
dod OBJECT IDENTIFIER ::= { org 6 }
(py3) [root@rabbitmq01 ~]# snmptranslate -Tp 1.3.6.1.2.1.3
+--at(3)
   |
   +--atTable(1)
      |
      +--atEntry(1)
         |  Index: atIfIndex, atNetAddress
         |
         +-- -RW- INTEGER   atIfIndex(1)
         +-- -RW- String    atPhysAddress(2)

 (py3) [root@rabbitmq01 ~]# snmptranslate -Tz |more
"org"			"1.3"
"dod"			"1.3.6"
"internet"			"1.3.6.1"
"directory"			"1.3.6.1.1"
"mgmt"			"1.3.6.1.2"
"mib-2"			"1.3.6.1.2.1"

测试topsec防火墙的mib
(py3) [root@rabbitmq01 ~]# snmpwalk -v 2c -c public  localhost  interface
IF-MIB::ifNumber.0 = INTEGER: 2
IF-MIB::ifIndex.1 = INTEGER: 1
IF-MIB::ifIndex.2 = INTEGER: 2
IF-MIB::ifDescr.1 = STRING: lo
IF-MIB::ifDescr.2 = STRING: eth0
(py3) [root@rabbitmq01 ~]# snmpwalk -v 2c -c public localhost 1.3.6.1.4.1
(py3) [root@rabbitmq01 ~]# snmptranslate -Tp 1.3.6.1.4.1 |more
+--enterprises(1)
   |
   +--ucdavis(2021)
</pre>
</div>
</div>
</section>
<section id="outline-container-h:213a605f-35c1-41f0-bc02-2b542d5ef7ef" class="outline-2">
<h2 id="h:213a605f-35c1-41f0-bc02-2b542d5ef7ef">net-snmp配置文件详解</h2>
<div class="outline-text-2" id="text-h:213a605f-35c1-41f0-bc02-2b542d5ef7ef">
<p>
net-snmp的配置文件是有一定的层次结构的，配置起来也很方便。网上找了很多资料，大概把这个配置文件的各个信息搞懂了一点。其实在net-snmp的EXAMPLE.conf文件中对齐有详细的描述，不过是英文的。
</p>

<p>
开启子代理模式
</p>

<p>
开发net-snmp子代理后，如果想要使用它，必须开启子代理功能。如果不开启，子代理运行的时候将会报错 Warning: Failed to connect to the agentx master agent ([NIL])
</p>

<p>
设置snmpd监听的地址端口
</p>

<p>
snmpd默认是监听本地所有的IP地址的 UDP 161端口 等待snmp请求。如果不希望使用默认的监听设置，可以使用自定义的选项
</p>

<pre class="example" id="org63229fb">
#  Listen for connections from the local system only
# 只监听本地的连接
agentAddress  udp:127.0.0.1:161

#  Listen for connections on all interfaces (both IPv4 *and* IPv6)
# 监听所有接口的连接
#agentAddress udp:161,udp6:[::1]:161
</pre>
</div>
<div id="outline-container-h:5e819359-f430-4515-864f-a8daef106a58" class="outline-3">
<h3 id="h:5e819359-f430-4515-864f-a8daef106a58">主要4步骤</h3>
<div class="outline-text-3" id="text-h:5e819359-f430-4515-864f-a8daef106a58">
<p>
<b>1. 定义安全体名和共同体名称</b> 
</p>

<p>
共同体这个是SNMPv2中的，如果只是使用SNMPv3协议，可以不需要。
</p>

<p>
rocommunity    共同体名
</p>

<p>
rwcommunity    共同体名
</p>

<p>
使用 rocommunity 来定义一个只读权限的共同体，使用 rwcommunity 来定义一个读写权限的共同体。
</p>

<p>
定义完共同体之后就要定义一个安全体，并把共同体映射到一个安全体中去。安全体用于控制外部访问的来源的。
</p>

<p>
使用com2sec关键字来定义安全体。
</p>

<pre class="example" id="orga0981f0">
#第一步，定义安全体名称，将一个共同体映射到一个安全体名称里：
#sec.name： 安全体名称
#source：可以访问的ip地址范围，默认值"default”，即任何ip都可以访问。
#community：共同体名称
#
#            sec.name        souce            community
com2sec        read            default                public
com2sec        write            default                public
com2sec        test            default                public

# 1. com2sec
# 命令格式一：com2sec   [-Cn context]   sec.name   source   community
# 功能： map an SNMPv1 or SNMPv2c community string to a security name，即将实体(community)字符串映射为安全的
# 名字，v1 和v2版本都是明文密码，也就无所谓安全性了。v3中增加了安全性。
# 参数说明：-Cn context：可选的，在v3版本中使用
#     sec.name： 内部映射的名字，字符串，后面用到
#     community：实体字符串，外部使用的名字
#     source：可以访问的ip地址范围，默认值"default”，即任何ip都可以访问。

#    也可以限制ip范围，有两种方式：IP/MASK和IP/BITS
#        IP/MASK：10.10.10.0/255.255.255.0
#        IP/BITS ：10.10.10.0/24：只有ip地址在10.10.10.0
#        mask为24个1，即255.255.255.0
# 命令格式二：com2sec6  [-Cn context] sec.name source community
#     针对ipv6，其他和com2sec相同
# 命令格式三：com2secunix [-Cn context] sec.name sockpath community
#     只限本地socket可以访问
#------------------------------------------------------------------------
#因为SNMPv3已经使用usm作为安全模型，使用，去掉共同体定义。
#com2sec 是net-snmp中定义安全体名字的关键字，表示这一行定义一个安全体名字。
</pre>

<p>
<b>2. 定义安全组</b>
</p>

<p>
定义完安全体之后，就要定义安全组了。安全体是用于控制访问的的来源的，安全组就是控制安全体中允许的来源的访问授权模式的。
</p>

<pre class="example" id="org126b1a5">
#com2sec 是net-snmp中定义安全体名字的关键字，表示这一行定义一个安全体名字。
#第二步，定义安全组，将安全体名称加进一个安全组中
#
#groupName  安全组名称
#securityModel 安全模型，可选值：v1，v2c，usm
#securityName  安全体名称

#            groupName         securityModel         securityName
group        readgroup            usm                    read
group        writegroup            usm                    write
group        testgroup            usm                    test

#group是定义安全组的关键字
# 2. group
# 命令格式：group   groupName   securityModel   sec.name
# 功能：将sec.name映射到一个group中，组中具有相同的存取权限。组中至少有两个
#     sec.name，如果只有一个sec.name，也会被解释为两个。即有两个相同的
# 参数说明：groupName：组名
#            securityModel：v1、v2c、usm、tsm、ksm其一
</pre>

<p>
<b>3. 定义视图，供安全组使用</b>
</p>

<p>
定义完安全组后，需要定义一个视图。视图就是这个安全体的可见范围。
</p>

<p>
对于每一个安全体，需要向其授权一些视图，视图确定了可以访问那些节点。
</p>

<pre class="example" id="org39cc1ae">
#第三步，定义视图，供安全组使用
#view.name  视图名
#incl/excl  对下面的MIB子树是包括还是排除(included/excluded)
#subtree    视图中所涉及的mib子树
#mask(optional)  掩码
#        view.name    incl/excl       subtree                    [mask]
view    all            included        .1
view    test        included        system
view    test        included        system.sysLocation
#view    if2            included        .1.3.6.1.2.1.2.2.1.0.2   FFA0

# 此处定义的就是VACM中的视图子树和掩码，配置将出现在VACM相关表中。
# 此处对网络接口2定义了一个视图，将来作为一个独立的context,mask参见VACM。
# view 是定义视图的关键字
#这里 all，范围是 .1。

# 3. view
# 命令格式：view viewName type oid[mask]
# 功能：定义一个view，表示整个OID树的子树，同一个子树可以定义多个view
# 参数说明:    viewName：view名字
#            type：有两个值:include 和 exclude
#            oid：可以访问的oid
#            [mask]：对oid的mask
#                例如：view all include 1.3.6.1.2.1.4  0xf0
#                0xf0：1111 0000，即访问的oid的前4位必须是1.3.6.1，否则不能访问，即
#                可以访问1.3.6.1下所有的子oid
</pre>

<p>
<b>4. 向安全组授权相应的视图</b>
</p>

<pre class="example" id="orga50999a">
#第四步，向安全组授权相应的视图
# group 安全组名
# context 上下文v1，v2中始终为空
# sec.model 安全模型，可选值：v1，v2，usm
# sec.level 安全级别  可选值：auth,noauth,priv,      v1,v2c中只能为noauth
# prefix 前缀。指定context如何与PDU中的context匹配，V3使用
# read   授权的读视图
# write 


授权的写视图
# notif  授权的trap视图

#       group    context        sec.model    sec.level    prefix    read   write   notif
access  readgroup    ""            any        noauth        exact     all    none    none
access  writegroup    ""            any        noauth        exact     all    none    none
access  testgroup    ""            any        noauth        exact     all    none    none
#acess  readgroup "interface2"    usm        priv        exact     if2    if2        if2
# 4. access
# 命令格式：access groupName context model level prefx read write notify
# 功能：设置访问某一个view的存取权限
# 参数说明:    groupName：控制存取权限的组名
#             context：v1和v2c版本，context必须设置为""
#             model：v1、v2c、usm、tsm、ksm
#             最后3中是v3版本的授权模式，usm（User-Based Security Model）是默认授权模式，tsm用于SSH or DTLS，ksm用于支持Kerberos
#             level：可以去3种值：noauth、auth、priv
#             noauth：允许无权限访问（v1，v2c使用）
#             auth：必须有权限才能访问
#             priv：强制加密访问
#             prefx：exact or prefix
#             read、write、notify：指明某一个view的权限是否可以GET*, SET*、
#             TRAP/INFORM，如果该view不能read，则置none
</pre>

<p>
<b>5. 添加用户（仅限SNMPv3）</b>
</p>

<p>
SNMPv3使用了用户加密鉴权的认证方式，所以需要创建相关的用户。这里也可以用net-snmp-config –create-snmpv3-user来实现。
</p>

<p>
创建用户使用createUser关键字来进行。后面的参数依次是用户名、验证方式、验证码、加密方式、加密码
</p>

<p>
创建的用户需要指明用户的权限，使用关键字rouser和rwuser来操作。
</p>

<p>
rouser用于指定用户的权限为只读，如果后面加上priv来指明需要加密。可以使用auth来指明需要认证。
</p>

<p>
rwuser用于指定用户的权限为读写，其他的与上面一致。
</p>

<pre class="example" id="orgfdd930a">
# 第五步，添加用户
#            user    验证方式    验证码        加密方式    加密码
createUser  fx        MD5            "md5123456"    DES            "des123456"
createUser  fxr        MD5            "md5123456"
#用户的权限设置
rwuser    fx  priv  #读写用户，用户名fx，指明需要加密
rouser    fxr      #只读用户

#rouser [-s SECMODEL] USER [noauth|auth|priv [OID | -V VIEW [CONTEXT]]]
#rwuser [-s SECMODEL] USER [noauth|auth|priv [OID | -V VIEW [CONTEXT]]]
</pre>
</div>
</div>
<div id="outline-container-h:fd639f2d-1fdc-450c-8009-db645c5b720c" class="outline-3">
<h3 id="h:fd639f2d-1fdc-450c-8009-db645c5b720c">SNMP Trap发送目的地设置</h3>
<div class="outline-text-3" id="text-h:fd639f2d-1fdc-450c-8009-db645c5b720c">
<p>
以上都是对SNMP代理程序的外部请求的相关设置。SNMP代理还有一个重要的功能就是主动向网管端发送“通知”。
</p>

<p>
对此需要指定网关端的目的地址。
</p>

<p>
使用snmpsink来指定发送SNMPv1版本的Trap的目的地址和共同体名称
</p>

<p>
使用snmp2sink来指定发送SNMPv2版本的Trap的目的地址和共同体名称
</p>

<p>
使用informasink来指定发送INFORMs的目的地址和共同体名称
</p>

<p>
使用trappsess来指定发送SNMPv3版本的Trap的相关信息。其中引擎ID和用户名，验证方式，验证码等都必须和接收trap的网关软件端设置的一致。
</p>

<pre class="example" id="orgecce06e">
#   发送 SNMPv1  traps
trapsink     localhost public
#   发送 SNMPv2c traps
trap2sink    localhost public
#   发送 SNMPv2c INFORMs
informsink   localhost public
#   发送SNMPv3 traps
#trapsess -v 2 -u 用户名  -e  引擎ID       -a 验证方式 -A 验证码  -l  鉴权方式   目的IP
trapsess -v 3 -u myuser -e 0x010203040506 -a MD5 -A 111111111 -l authNoPriv 192.168.1.108
</pre>

<p>
范例： 配合使用cloudforse 的snmpd.conf配置
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@datanode03 snmp]# vim snmpd.conf

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#31532;&#19968;&#27493;&#65292;&#23450;&#20041;&#23433;&#20840;&#20307;&#21517;&#31216;&#65292;&#23558;&#19968;&#20010;&#20849;&#21516;&#20307;&#26144;&#23556;&#21040;&#19968;&#20010;&#23433;&#20840;&#20307;&#21517;&#31216;&#37324;&#65306;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">com2sec &#26159;net-snmp&#20013;&#23450;&#20041;&#23433;&#20840;&#20307;&#21517;&#23383;&#30340;&#20851;&#38190;&#23383;&#65292;&#34920;&#31034;&#36825;&#19968;&#34892;&#23450;&#20041;&#19968;&#20010;&#23433;&#20840;&#20307;&#21517;&#23383;&#12290;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">sec.name&#65306; &#23433;&#20840;&#20307;&#21517;&#31216;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">source&#65306;&#21487;&#20197;&#35775;&#38382;&#30340;ip&#22320;&#22336;&#33539;&#22260;&#65292;&#40664;&#35748;&#20540;"default&#8221;&#65292;&#21363;&#20219;&#20309;ip&#37117;&#21487;&#20197;&#35775;&#38382;&#12290;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">community&#65306;&#20849;&#21516;&#20307;&#21517;&#31216;</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;">#       </span><span style="color: #b22222;">sec.name    souce            community</span>
com2sec cici  10.161.212.216       public
com2sec cici  114.215.191.163      public
com2sec cici  10.161.171.134      public
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#31532;&#20108;&#27493;&#65292;&#23450;&#20041;&#23433;&#20840;&#32452;&#65292;&#23558;&#23433;&#20840;&#20307;&#21517;&#31216;&#21152;&#36827;&#19968;&#20010;&#23433;&#20840;&#32452;&#20013;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">groupName  &#23433;&#20840;&#32452;&#21517;&#31216;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">securityModel &#23433;&#20840;&#27169;&#22411;&#65292;&#21487;&#36873;&#20540;&#65306;v1&#65292;v2c&#65292;usm</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">securityName  &#23433;&#20840;&#20307;&#21517;&#31216;</span>
<span style="color: #b22222;">#</span>
<span style="color: #b22222;">#      </span><span style="color: #b22222;">groupName    securityModel  securityName</span>
group   ciciGroup v1           cici
group   ciciGroup v2c          cici
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#31532;&#19977;&#27493;&#65292;&#23450;&#20041;&#35270;&#22270;&#65292;&#20379;&#23433;&#20840;&#32452;&#20351;&#29992;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">view.name  &#35270;&#22270;&#21517;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">incl/excl  &#23545;&#19979;&#38754;&#30340;MIB&#23376;&#26641;&#26159;&#21253;&#25324;&#36824;&#26159;&#25490;&#38500;(included/excluded)</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">subtree    &#35270;&#22270;&#20013;&#25152;&#28041;&#21450;&#30340;mib&#23376;&#26641;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">mask(optional)  &#25513;&#30721;</span>
<span style="color: #b22222;">#        </span><span style="color: #b22222;">view.name    incl/excl       subtree                    [mask]</span>
view    systemview    included   .1.3.6.1.2.1.1
view    systemview    included   .1.3.6.1.2.1.25.1.1
view    systemview    included .1.3.6.1.2.1.2
view    all           included  .1                      80
<span style="color: #b22222;">#</span><span style="color: #b22222;">&#31532;&#22235;&#27493;&#65292;&#21521;&#23433;&#20840;&#32452;&#25480;&#26435;&#30456;&#24212;&#30340;&#35270;&#22270;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">group &#23433;&#20840;&#32452;&#21517;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">context &#19978;&#19979;&#25991;v1&#65292;v2&#20013;&#22987;&#32456;&#20026;&#31354;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">sec.model &#23433;&#20840;&#27169;&#22411;&#65292;&#21487;&#36873;&#20540;&#65306;v1&#65292;v2&#65292;usm</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">sec.level &#23433;&#20840;&#32423;&#21035;  &#21487;&#36873;&#20540;&#65306;auth,noauth,priv,      v1,v2c&#20013;&#21482;&#33021;&#20026;noauth</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">prefix &#21069;&#32512;&#12290;&#25351;&#23450;context&#22914;&#20309;&#19982;PDU&#20013;&#30340;context&#21305;&#37197;&#65292;V3&#20351;&#29992;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">read   &#25480;&#26435;&#30340;&#35835;&#35270;&#22270;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">write  &#25480;&#26435;&#30340;&#20889;&#35270;&#22270;</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">notif  &#25480;&#26435;&#30340;trap&#35270;&#22270;</span>
<span style="color: #b22222;">#       </span><span style="color: #b22222;">group    context  sec.model  sec.level  prefix read write notif</span>

access  ciciGroup <span style="color: #8b2252;">""</span>      any       noauth    exact  all none none
view all    included  .1
syslocation Unknown (edit /etc/snmp/snmpd.conf)
syscontact Root <a href="mailto:root%40localhost">&lt;root@localhost&gt;</a> (configure /etc/snmp/snmp.local.conf)
dontLogTCPWrappersConnects yes

[root@datanode03 snmp]# systemctl start snmpd

&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#27979;&#35797;&#65292;&#39564;&#35777; SNMP &#37197;&#32622;&#30340;&#27491;&#30830;&#24615;&#12290;&#22312;&#30417;&#25511;&#20027;&#26426;&#20013;&#25191;&#34892;&#20197;&#19979;&#21629;&#20196;&#65306;
yum -y install net-snmp-utils

snmpwalk&#21442;&#25968;&#36873;&#39033;&#65306;
&#8211;h&#65306;&#26174;&#31034;&#24110;&#21161;&#12290;
&#8211;v&#65306;&#25351;&#23450;snmp&#30340;&#29256;&#26412;, 1&#25110;&#32773;2c&#25110;&#32773;3&#12290;
&#8211;c&#65306;&#25351;&#23450;&#36830;&#25509;&#35774;&#22791;SNMP&#23494;&#30721;&#12290;&#22242;&#20307;&#21517;
&#8211;V&#65306;&#26174;&#31034;&#24403;&#21069;snmpwalk&#21629;&#20196;&#34892;&#29256;&#26412;&#12290;
&#8211;r&#65306;&#25351;&#23450;&#37325;&#35797;&#27425;&#25968;&#65292;&#40664;&#35748;&#20026;0&#27425;&#12290;
&#8211;t&#65306;&#25351;&#23450;&#27599;&#27425;&#35831;&#27714;&#30340;&#31561;&#24453;&#36229;&#26102;&#26102;&#38388;&#65292;&#21333;&#20026;&#31186;&#65292;&#40664;&#35748;&#20026;3&#31186;&#12290;
&#8211;l&#65306;&#25351;&#23450;&#23433;&#20840;&#32423;&#21035;&#65306;noAuthNoPriv|authNoPriv|authPriv&#12290;
&#8211;a&#65306;&#39564;&#35777;&#21327;&#35758;&#65306;MD5|SHA&#12290;&#21482;&#26377;-l&#25351;&#23450;&#20026;authNoPriv&#25110;authPriv&#26102;&#25165;&#38656;&#35201;&#12290;
&#8211;A&#65306;&#39564;&#35777;&#23383;&#31526;&#20018;&#12290;&#21482;&#26377;-l&#25351;&#23450;&#20026;authNoPriv&#25110;authPriv&#26102;&#25165;&#38656;&#35201;&#12290;
&#8211;x&#65306;&#21152;&#23494;&#21327;&#35758;&#65306;DES&#12290;&#21482;&#26377;-l&#25351;&#23450;&#20026;authPriv&#26102;&#25165;&#38656;&#35201;&#12290;
&#8211;X&#65306;&#21152;&#23494;&#23383;&#31526;&#20018;&#12290;&#21482;&#26377;-l&#25351;&#23450;&#20026;authPriv&#26102;&#25165;&#38656;&#35201;&#12290;


snmpwalk&#20351;&#29992;&#26041;&#27861;&#24456;&#31616;&#21333;&#65292;&#22914;&#19979;&#65306;
snmpwalk -v 1&#25110;2c(&#20195;&#34920;SNMP&#29256;&#26412;) -c SNMP&#23494;&#30721; IP&#22320;&#22336; OID(&#23545;&#35937;&#26631;&#31034;&#31526;)
&#8211;v&#65306;&#25351;&#23450;snmp&#30340;&#29256;&#26412;, 1&#25110;&#32773;2&#65292;&#35813;&#21442;&#25968;&#24517;&#39035;&#26377;&#12290;
&#8211;c&#65306;&#25351;&#23450;&#36830;&#25509;&#35774;&#22791;SNMP&#35835;&#23494;&#30721;&#65292;&#35813;&#21442;&#25968;&#24517;&#39035;&#26377;&#12290;
IP&#65306;&#25351;&#23450;&#35201;walk&#30340;&#35774;&#22791;&#30340;IP&#22320;&#22336;&#65292;&#35813;&#21442;&#25968;&#24517;&#39035;&#26377;&#12290;
OID&#65306;&#20195;&#34920;&#35201;&#33719;&#21462;&#35774;&#22791;&#30340;&#25351;&#26631;oid&#65292;&#35813;&#21442;&#25968;&#19981;&#26159;&#24517;&#39035;&#30340;&#12290; http://www.net-snmp.org/docs/mibs/ip.html  https://www.cnblogs.com/createyuan/p/3997228.html

[root@rabbit-hd-212216 ~]#  snmpwalk -v 1 10.46.72.199 -c public system
SNMPv2-MIB::sysDescr.0 = STRING: Linux datanode03 3.10.0-327.22.2.el7.x86_64 <span style="color: #b22222;">#</span><span style="color: #b22222;">1 SMP Thu Jun 23 17:05:11 UTC 2016 x86_64</span>
SNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (382) 0:00:03.82
SNMPv2-MIB::sysContact.0 = STRING: Root <a href="mailto:root%40localhost">&lt;root@localhost&gt;</a> (configure /etc/snmp/snmp.local.conf)
SNMPv2-MIB::sysName.0 = STRING: datanode03
&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;
[root@rabbit-hd-212216 ~]#
&#19978;&#36848;&#20449;&#24687;&#35828;&#26126; SNMP &#24050;&#32463;&#27491;&#24120;&#24037;&#20316;&#20102;&#12290; 
</pre>
</div>
</div>
</div>
<div id="outline-container-h:efde33d6-f9f7-440c-b3c8-a2dd96695719" class="outline-3">
<h3 id="h:efde33d6-f9f7-440c-b3c8-a2dd96695719">自定义脚本</h3>
<div class="outline-text-3" id="text-h:efde33d6-f9f7-440c-b3c8-a2dd96695719">
<p>
现在我们在目标主机上来写一些脚本来获取 Memory、CPU、DiskIO 等状态。
</p>

<p>
Memory 脚本：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/bin/</span><span style="color: #a020f0;">sh</span>
/usr/bin/free -m | grep Mem |awk <span style="color: #8b2252;">'{print $4}'</span>
/usr/bin/free -m | grep Mem |awk <span style="color: #8b2252;">'{print $2}'</span>
[root@chenyi ~]# sh memory.sh
809
1006
</pre>
</div>

<p>
CPU 脚本：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/bin/</span><span style="color: #a020f0;">sh</span>
<span style="color: #a0522d;">idle</span>=<span style="color: #ff00ff;">`sar  -u 1 3 | grep Average | awk '{print $6}'`</span>
<span style="color: #a0522d;">used</span>=<span style="color: #ff00ff;">`echo "101 - $idle" | bc -l -s`</span>
<span style="color: #483d8b;">echo</span> $<span style="color: #a0522d;">used</span>
<span style="color: #483d8b;">echo</span> $<span style="color: #a0522d;">idle</span>
</pre>
</div>


<p>
Disk I/O 脚本：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/bin/</span><span style="color: #a020f0;">sh</span>
<span style="color: #a0522d;">used1</span>=<span style="color: #ff00ff;">`sar -d 1 3 | tail -1 | awk '{print $4}'`</span>
<span style="color: #a0522d;">used2</span>=<span style="color: #ff00ff;">`echo "$used1 / 2" | bc -l`</span>
<span style="color: #483d8b;">echo</span> $<span style="color: #a0522d;">used2</span>
<span style="color: #483d8b;">echo</span> $<span style="color: #a0522d;">used2</span>
</pre>
</div>

<p>
现在我们已经能得到这数据了，怎么才能让监控主机通过 snmpd 得到这些数据呢？可以在目标主机的/etc/snmp/snmpd.conf文件中加入这些配置：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #a020f0;">exec</span> .1.3.6.1.4.1.2021.53 memory /bin/sh /root/memory.sh
<span style="color: #a020f0;">exec</span> .1.3.6.1.4.1.2021.54 cpu /bin/sh /root/cpu.sh
<span style="color: #a020f0;">exec</span> .1.3.6.1.4.1.2021.55 disk /bin/sh /root/disk.sh
[root@chenyi ~]# service snmpd restart
&#20572;&#27490; snmpd&#65306;                                               [&#30830;&#23450;]
&#27491;&#22312;&#21551;&#21160; snmpd&#65306;                                           [&#30830;&#23450;]
</pre>
</div>

<p>
这样在监控主机上运行：
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@chenyi ~]# snmpwalk -v 1 192.168.1.220 -c public .1.3.6.1.4.1.2021.53
UCD-SNMP-MIB::ucdavis.53.1.1 = INTEGER: 1
UCD-SNMP-MIB::ucdavis.53.2.1 = STRING: <span style="color: #8b2252;">"memory"</span>
UCD-SNMP-MIB::ucdavis.53.3.1 = STRING: <span style="color: #8b2252;">"/bin/sh /root/memory.sh"</span>
UCD-SNMP-MIB::ucdavis.53.100.1 = INTEGER: 0
UCD-SNMP-MIB::ucdavis.53.101.1 = STRING: <span style="color: #8b2252;">"442"</span>
UCD-SNMP-MIB::ucdavis.53.101.2 = STRING: <span style="color: #8b2252;">"1006"</span>
UCD-SNMP-MIB::ucdavis.53.102.1 = INTEGER: 0
</pre>
</div>

<p>
其中UCD-SNMP-MIB::ucdavis.53.101.1 = STRING: "442"中的 442 就是 mem.sh 输出的第一个数据，1006 是 mem.sh 输出的第二个数据。
</p>

<div class="org-src-container">
<pre class="src src-sh">[root@chenyi ~]# snmpwalk -v 1  192.168.1.220 -c public .1.3.6.1.4.1.2021.53 | grep 53.101 | awk -F<span style="color: #8b2252;">\"</span> <span style="color: #8b2252;">'{print $2}'</span>
443
1006
</pre>
</div>

<p>
我们已经通过 snmpd 从监控主机上得到了目标主机上内存使用状态的两个参数，其它脚本也是一样的。
</p>

<p>
来个配置
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">&#23450;&#20041;&#19968;&#20010;&#20351;&#29992; community 'myCommunity' &#21644;&#28304;&#32593;&#32476; 172.17.1.0/24 &#30340;&#29992;&#25143; 'myUser'</span>
com2sec myUser 172.17.1.0/24 myCommunity

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#23558; myUser &#21152;&#21040; 'myGroup' &#32452;&#65292;&#23450;&#20041;&#32452;&#26435;&#38480;</span>
group    myGroup    v1        myUser
group    myGroup    v2c        myUser

view all included .1

access myGroup    <span style="color: #8b2252;">""</span>    any    noauth     exact    all    all    none
</pre>
</div>
</div>
</div>
</section>
</div>
<div id="postamble" class="status">
    <div class=bar data-astro-cid-p3givckg>
        <div class=list data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:gnuemacs height=1em viewBox="0 0 24 24" width=1em>
                    <title>emacs</title>
                    <symbol id=ai:simple-icons:gnuemacs>
                        <path d="M12 24C5.448 24 .118 18.617.118 12S5.448 0 12 0s11.882 5.383 11.882 12S18.552 24 12 24zM12 .661C5.813.661.779 5.748.779 12S5.813 23.339 12 23.339S23.221 18.253 23.221 12S18.187.661 12 .661zM8.03 20.197s.978.069 2.236-.042c.51-.045 2.444-.235 3.891-.552c0 0 1.764-.377 2.707-.725c.987-.364 1.524-.673 1.766-1.11c-.011-.09.074-.408-.381-.599c-1.164-.488-2.514-.4-5.185-.457c-2.962-.102-3.948-.598-4.472-.997c-.503-.405-.25-1.526 1.907-2.513c1.086-.526 5.345-1.496 5.345-1.496c-1.434-.709-4.109-1.955-4.659-2.224c-.482-.236-1.254-.591-1.421-1.021c-.19-.413.448-.768.804-.87c1.147-.331 2.766-.536 4.24-.56c.741-.012.861-.059.861-.059c1.022-.17 1.695-.869 1.414-1.976c-.252-1.13-1.579-1.795-2.84-1.565c-1.188.217-4.05 1.048-4.05 1.048c3.539-.031 4.131.028 4.395.398c.156.218-.071.518-1.015.672c-1.027.168-3.163.37-3.163.37c-2.049.122-3.492.13-3.925 1.046c-.283.599.302 1.129.558 1.46c1.082 1.204 2.646 1.853 3.652 2.331c.379.18 1.49.52 1.49.52c-3.265-.18-5.619.823-7.001 1.977c-1.562 1.445-.871 3.168 2.33 4.228c1.891.626 2.828.921 5.648.667c1.661-.09 1.923-.036 1.939.1c.023.192-1.845.669-2.355.816c-1.298.374-4.699 1.129-4.716 1.133z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:gnuemacs></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Emacs</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:org height=1em viewBox="0 0 24 24" width=1em>
                    <title>org-mode</title>
                    <symbol id=ai:simple-icons:org>
                        <path d="M17.169 0c-.566.004-2.16 3.312-3.376 5.94a2.19 2.19 0 0 1-.408-1.267c-.03-.582-1.089.237-.936 1.275c-.068-.035-1.26.227-1.26.23c-.23-.93-.802-1.618-1.15-.563c-.701 1.663-.88 2.984.115 4.585c-.908 4.058-6.948 6.053-6.32 9.33c.175.004 1.634 3.48 6.337 2.057c5.557-1.577 8.624 2.116 8.978 2.375c.52.526-1.348-4.573-5.302-6.865c-2.339-1.276-.87-3.474-.703-4.25c0 0 1.874 1.312 3.232-.692c1.227.316 2.05-.224 3.105.158c.64.28 3.336.11 2.334-1.396c-.148.129.07.27-.075.46c-.043.056-.128.232-.408.315c-.314.149-.83.27-1.43-.37c-.434-.32-.748-.04-.992-.063c.152-.098.577-.315 1.264-.315c.388 0 .594.336.854.338c.174 0 .685-.262.787-.365c.63-.41.697-.278 1.012-.905c.17-.759-.215-.92-.332-1.129c-.032-.483-.436-.67-.919-.326c-1.106-.198-2.192-.105-2.728-.15c-1.175-.164-2.153-.786-2.153-.786c.143-.19.075-.6-.842-.628c-.315-.104-.45-.2-.745-.307c.61-1.37.674-2.007 1.418-4.004c.261-1.053 1.039-2.685.643-2.682zm-4.297 8.093c.03-.086.443.138.952.176c.395.03.805.048 1.296-.025c.03-.005.172.095-.15.194c-.02.01-.062-.01-.065.196c0 .022-.01.04-.02.046c-.15.152-.708.223-1.065.1c-.436-.17-.482-.316-.517-.443c-.305-.147-.47-.123-.43-.244zM9.685 10.2C8.86 9 8.929 8.36 8.96 7.256C7.961 8.288 6.855 8.3 5.18 8.58c-1.299.234-3.657 2.447-4.025 4.742c-.043.608-.08 2.183.424 3.498c.492 1.13.828 1.727 1.844 2.335c-.882-3.169 5.296-5.33 6.263-8.955z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:org></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Orgmode</p>
                </div>
            </span>
            <a href=/donations.html class=entry data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:astro height=1em viewBox="0 0 24 24" width=1em>
                    <title>Donations</title>
                    <symbol id=ai:simple-icons:astro>
                        <path d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.158 3.158 0 0 1-1.407-1.188a3.31 3.31 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165h.002zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614c.302 0 .57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727l-5.516 14.99z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:astro></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>打赏</p>
                </div>
            </span>
            </a>
            <span class=entry data-astro-cid-p3givckg>
                <svg xmlns="http://www.w3.org/2000/svg" class=heading data-astro-cid-p3givckg data-icon=simple-icons:copyright width="1em" height="1em" viewBox="0 0 24 24">
                    <title>Copyright</title>
                    <path fill="currentColor" d="M19 2a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm-5 5h-4a1 1 0 0 0-1 1l.007.117A1 1 0 0 0 10 9h3v5a1 1 0 0 1-1.993.117L11 14a1 1 0 0 0-2 0a3 3 0 0 0 6 0V8a1 1 0 0 0-1-1" />
                    <use xlink:href=#ai:simple-icons:copyright></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>© 2025 Jasper Hsu</p>
                </div>
            </span>
        </div>
        <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="list license" data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Creative Commons</title>
                    <symbol id=ai:fa6-brands:creative-commons>
                        <path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Creative Commons</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-by height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Attribute</title>
                    <symbol id=ai:fa6-brands:creative-commons-by>
                        <path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3c3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7c3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-by></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Attribute</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-nc height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Noncommercial</title>
                    <symbol id=ai:fa6-brands:creative-commons-nc>
                        <path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256C0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9c0 110.9 92.1 202.4 203.7 202.4c122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2c0-6.2-2.2-11.2-6.6-15.1c-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1c53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1c0-57-19.8-105-59.3-143.9c-39.3-39.9-87.2-59.8-143.6-59.8z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-nc></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Noncommercial</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-sa height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Share Alike</title>
                    <symbol id=ai:fa6-brands:creative-commons-sa>
                        <path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7c99.8 0 127.5 82.5 127.5 134.2c0 63.6-41 132.9-128.9 132.9c-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2c23.3 0 58-18.2 58-82.8c0-82.5-49.1-80.6-56.7-80.6c-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2l-49-49.2h19.4z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-sa></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Share Alike</p>
                </div>
            </span>
        </a>
    </div>
<!--
<script type="text/javascript" src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.min.js"></script>
<div id="back-to-top" class=""><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></div>
-->
</div>
</body>
</html>
