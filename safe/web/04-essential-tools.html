<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Safe: 04-信息安全工具使用-渗透必备工具</title>
<meta name="generator" content="Org Mode" />
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@jasperhsu">
<meta name="google-adsense-account" content="ca-pub-1741779893655624">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1741779893655624" crossorigin="anonymous"></script>
<!-- from -->
<!--
<style>#back-to-top{background:#000;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;bottom:20px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);color:#fff;cursor:pointer;display:block;height:56px;opacity:1;outline:0;position:fixed;right:20px;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-transition:bottom .2s,opacity .2s;-o-transition:bottom .2s,opacity .2s;-moz-transition:bottom .2s,opacity .2s;transition:bottom .2s,opacity .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:56px;z-index:1}#back-to-top svg{display:block;fill:currentColor;height:24px;margin:16px auto 0;width:24px}#back-to-top.hidden{bottom:-56px;opacity:0}</style>
-->
<link rel="stylesheet" href="/static/aandds.com/css/main.css">
<link rel="stylesheet" href="/static/aandds.com/css/drollery.min.css">
<script type="text/javascript" src="/static/aandds.com/js/main.js"></script>
<!--
<script id="MathJax-script" async="" src="/static/aandds.com/js/mathjax.js"></script>

<script type="text/javascript" src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
-->
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Safe: 04-信息安全工具使用-渗透必备工具</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:eb1b8633-48ba-43bb-b67b-83c463b5308c">BurpSuite</a>
<ul>
<li><a href="#h:c1ddcb85-8688-40d2-9e85-fd5eeeac2358">BurpSuite 概述</a>
<ul>
<li><a href="#h:d928c933-5ea6-4eb7-bf23-27b287dc7f38">java 环境安装</a></li>
<li><a href="#h:8e7a2d56-63bf-4819-b9ca-fb03ac61b794">下载Burp Suite</a></li>
<li><a href="#h:cab13470-d7c5-406f-bf9c-424461d70062">安装使用注册机</a></li>
<li><a href="#h:beed67a0-15d5-42d7-a3ea-613668a9775c">从命令行启动Burp Suite</a></li>
<li><a href="#h:f9ad85a7-0fb1-4327-81eb-8a590f470a91">设置JVM内存大小</a></li>
</ul>
</li>
<li><a href="#h:76ca6f87-9461-46e4-916d-988e0a373612">SSL和Proxy高级选项</a>
<ul>
<li><a href="#h:7d2f83f2-f0a0-4c06-a935-437b9ec8b78e">CA证书的安装</a></li>
<li><a href="#h:eb6ca024-b9e2-4405-8f7b-5afab6c6c4c8">CA证书的卸载</a></li>
</ul>
</li>
<li><a href="#h:8a1b7989-eb61-4f5f-9275-b7f221243f7c">Burp Suite代理和浏览器设置</a>
<ul>
<li><a href="#h:f15405c4-e1cb-48fc-b25a-1cd65c38468e">IE设置</a></li>
<li><a href="#h:4b544d55-6b9f-48e0-9b32-7642eef7f31f">FireFox设置</a>
<ul>
<li><a href="#h:dac39ab0-feac-4814-9e4a-cc192fcb5eee">扩展插件</a></li>
</ul>
</li>
<li><a href="#h:22bb51d1-23ea-4eed-90c6-daae67151b3a">Google Chrome设置</a>
<ul>
<li><a href="#h:36a4e42b-4654-4280-8d4c-2cd1b1c17084">扩展插件</a></li>
</ul>
</li>
<li><a href="#h:c60c3d36-1250-4d4f-854e-d172a6a08f5c">手机抓包代理</a></li>
</ul>
</li>
<li><a href="#h:6d122307-6a86-4785-b244-9567bebc6052"><code>Proxy</code> 使用Burp Suite代理</a>
<ul>
<li><a href="#h:7ce5bf38-51c0-4e59-8cfd-e2427ed3065a">Burp Proxy基本使用</a>
<ul>
<li><a href="#h:6a3556c4-4768-4b86-8d95-05b1dd33ecfe">编码和字体</a></li>
</ul>
</li>
<li><a href="#h:4cbf432c-7cef-43df-a2f8-ea0d6b0096f9"><code>Proxy--&gt;Intercept</code> 数据拦截与控制</a></li>
<li><a href="#h:98cb40f1-3d65-4872-8489-1285839a13f4"><code>Proxy--&gt;Options</code> 可选项配置Options</a>
<ul>
<li><a href="#h:788e9b31-c959-4b2b-b352-8d9cab9c5bdc">Intercept Client Requests 客户端请求消息拦截</a></li>
<li><a href="#h:a28339d2-0a2b-4d66-87de-9072967898da">Intercept Server Responses 服务端返回消息拦截</a></li>
<li><a href="#h:11b1b020-6fb8-4b0b-af89-000adc9fde58">Response Modification 服务器返回消息修改</a></li>
<li><a href="#h:ba0d4804-e0d3-4526-a155-441ac2660930">Match and Replace 正则表达式配置</a></li>
<li><a href="#h:87942df2-16e0-41b6-ab20-b119ae34cd20">Miscellaneous 其他配置项</a></li>
<li><a href="#h:626a9747-1416-43d2-81b8-0bd23fe4cc73">Proxy Listeners Proxy监听设置</a></li>
</ul>
</li>
<li><a href="#h:b306d8d8-01a6-46c1-b372-5fed82f63e20"><code>Proxy--&gt;HTTP history</code> 历史记录History</a></li>
</ul>
</li>
<li><a href="#h:0da0fe27-d0c4-421e-b209-75d2ad8fc88a"><code>Target</code></a>
<ul>
<li><a href="#h:a58f50ea-40d7-4b9b-ade8-49def5164a60"><code>Trget--&gt;Scope</code> 目标域设置</a></li>
<li><a href="#h:89415902-8904-44b7-8e93-2a6f87746f73"><code>Target--&gt;Site Map</code> 站点地图</a></li>
<li><a href="#h:5cd9bbfb-2c5f-4bc3-9495-c0e04f42f417">Target工具的使用</a></li>
</ul>
</li>
<li><a href="#h:9bda798b-1189-43bb-992a-9d56832f9d42">Discover Content 爬取</a>
<ul>
<li><a href="#h:2c659c2c-6147-4848-a7ac-3272935ffaf6">Control 控制</a></li>
<li><a href="#h:1329a04d-a24a-4ad8-b7d4-71e986137845">Config 配置</a></li>
<li><a href="#h:06fc9f3c-b0ec-4858-82ed-01a38f9eeb00">Site Map 站点地图</a></li>
</ul>
</li>
<li><a href="#h:abc8282b-26b4-48f1-a967-c3b4df9c78e6"><code>Dashboard--&gt;scan</code> 控制台扫描</a>
<ul>
<li><a href="#h:5f0f67e4-3064-49f6-a4d6-fbd50375f255">启动方法</a></li>
<li><a href="#h:671679d3-c147-4806-99e6-2af717fce913">被动扫描</a></li>
<li><a href="#h:a260ad5d-0542-462d-9bfd-17b88edb97d1">主动扫描</a>
<ul>
<li><a href="#h:d93aaaa7-7f25-4990-b5c0-c341048b794e">扫描配置</a></li>
<li><a href="#h:153c8871-31cf-4ef3-be42-15af37a8cd5e">开始扫描</a></li>
</ul>
</li>
<li><a href="#h:6b2b4585-bcf1-4ec9-b294-6d5cb52dc24b">导出扫描报告</a></li>
</ul>
</li>
<li><a href="#h:cef92b90-5665-4be5-baf6-9f794effe0d5"><code>Intruder</code> 自动化测试</a>
<ul>
<li><a href="#h:b9be307a-a274-4fad-b1b8-cd24da9cf29e">Intruder使用场景和操作步骤</a></li>
<li><a href="#h:086aa9fe-f63c-4919-a410-7133f0b02f43"><code>Intruder--&gt;Payload</code> 类型与处理</a></li>
<li><a href="#h:8b65887c-1dd3-4be7-87a2-478edfb61344"><code>Intruder--&gt;Positions</code> Payload位置和攻击类型</a></li>
<li><a href="#h:658ba66e-c8f2-46d3-b79e-2d82b09e9346"><code>Intruder--&gt;Options</code> 可选项设置</a></li>
<li><a href="#h:73f61457-7afe-4c28-86f6-627a4bbd65b2">Intruder 攻击和结果分析</a></li>
</ul>
</li>
<li><a href="#h:28c98528-6773-4595-a23b-5128dce33de3"><code>Repeater</code> 重放</a>
<ul>
<li><a href="#h:ae0437ee-b776-47e6-8253-eab11a9e2268">Repeater的使用</a></li>
<li><a href="#h:d14f8133-5e64-4bb9-8c40-937cc006d85f">可选项设置（Options）</a></li>
</ul>
</li>
<li><a href="#h:5a5c6188-ae50-4826-9657-273435cf409f"><code>Decoder</code> 编解码</a></li>
<li><a href="#h:a670d670-7485-4cb9-8119-e6cc10d82fd8"><code>Comparer</code> 对比</a></li>
<li><a href="#h:58a9d397-f380-4e75-a9e1-3d58d14aa67f"><code>Extender</code> Burp Suite应用商店</a>
<ul>
<li><a href="#h:e9edc0c7-b95f-4e11-b2c9-d5f75e5cb49a"><code>Extender--&gt;BApp Store</code> 应用商店插件的安装使用</a></li>
<li><a href="#h:b73821f3-b2d3-4631-be0a-1d36695e1fd1"><code>Extender--&gt;Extensions</code> 管理和加载Burp 插件</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:d59e4440-9a3d-4242-b80c-6aad4ed2bb48">扫描工具</a>
<ul>
<li><a href="#h:821e08b2-935f-4c9a-bd3e-55f8d97535a6">应用漏洞和主机漏洞</a></li>
<li><a href="#h:78de4245-b78f-4ef0-bfba-189bd21ef45d">X-Scan</a></li>
<li><a href="#h:61816e8f-ead9-4b77-8b63-3538fba6ebf8">AppScan</a></li>
<li><a href="#h:8c40dbca-d2f1-412d-bc35-a6054adb282c">Xray 应用漏洞扫描器</a>
<ul>
<li><a href="#org2740b2c">Xray1.0</a>
<ul>
<li><a href="#h:805cfae0-9f6a-46ea-ba15-e7c86ac2c6b3">基础爬虫模式进行扫描（主动扫描）</a></li>
<li><a href="#h:5ab52c01-4084-4b25-a7c1-ae2d01fa6863">代理模式进行扫描（被动扫描）</a></li>
<li><a href="#h:a877eb96-7622-4680-973b-760a2821814a">流量走向</a></li>
<li><a href="#h:728ef7b9-2374-45db-a8f1-497b34d23865">快速使用</a></li>
<li><a href="#h:94a801bc-d079-4538-935a-bbc888703aef">与 Burp 联动</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:fa914bdf-c28f-4c76-af53-c70649d3b43d">AWVS-应用漏洞扫描器</a>
<ul>
<li><a href="#h:30e6d375-37bf-49ee-8bd6-aedd8cb11514">使用docker安装</a></li>
<li><a href="#h:6ffb4f40-6033-44a9-b8fc-afba72d29f31">发起扫描</a></li>
<li><a href="#h:1fb818b6-dba6-4f69-bda3-a8d188971f7d">添加自定义模板</a></li>
</ul>
</li>
<li><a href="#h:f917e63b-b23b-4f62-b921-1b98df021b09">Nessus-主机漏洞扫描工具</a>
<ul>
<li><a href="#h:067d778e-cead-4e77-b356-f36baedd66b1">Nessus 安装及使用</a>
<ul>
<li><a href="#h:01f41a97-1a42-4670-a867-0807bef165b4">启动服务</a></li>
<li><a href="#h:55376958-b5a6-4d1c-bd9f-fb46cc3690f4">开始扫描</a></li>
</ul>
</li>
<li><a href="#h:5846a4dc-5b94-45cd-a4d4-cf5ec46c2819">漏洞扫描器使用</a>
<ul>
<li><a href="#h:a2eebb06-5bfd-4e16-9608-cd8bd34a100c">主机漏洞扫描器的扫描原理：</a></li>
<li><a href="#h:20268cd7-ffba-4344-bc90-658ee2bc87a7">扫描前的准备工作</a></li>
<li><a href="#h:7c82c11d-5205-4e16-9567-e1655dc5db65">扫描实施</a></li>
<li><a href="#h:a2c4edce-890c-4b8c-a8a9-50c5232a81bc">扫描收尾工作</a></li>
</ul>
</li>
<li><a href="#h:724cc6d5-1e4c-4fdd-8735-e76743001bf7">扫描业务场景与漏洞闭环</a>
<ul>
<li><a href="#h:22b5f239-f224-4968-aaa2-c90ca6f5aac2">扫描业务场景</a></li>
<li><a href="#h:7aae887b-a86d-454d-b905-2fc5995f1d56">撰写企业级扫描报告</a></li>
<li><a href="#h:d2d412e0-f8f8-4e7c-9d31-572543ccef60">指导进行漏洞加固</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li>TAGS: <a href="../index.html">Safe</a></li>
</ul>


<p>
主要内容：
</p>
<ul class="org-ul">
<li>Wireshark 使用简介</li>
<li>Burp 安装与配置</li>
<li>Burp 代理和浏览器设置</li>
<li>Burp 漏洞扫描及检测模块</li>
<li>Burp Target 模块</li>
<li>Burp Intruder模块</li>
<li>Burp Repeater模块</li>
<li>Burp Comparer 模块及其它模块</li>
<li>Burp 实现手机抓包</li>
</ul>

<p>
抓包工具
</p>
<ul class="org-ul">
<li>Wireshark</li>
<li>Burp Suite</li>
</ul>

<p>
wiresharek 可以监听到除HTTP协议外，其他协议包数据。不能拦截、修改。
</p>

<p>
BurpSuite只可以监听到HTTP协议包。可拦截、修改。
</p>
<section id="outline-container-h:eb1b8633-48ba-43bb-b67b-83c463b5308c" class="outline-2">
<h2 id="h:eb1b8633-48ba-43bb-b67b-83c463b5308c">BurpSuite</h2>
<div class="outline-text-2" id="text-h:eb1b8633-48ba-43bb-b67b-83c463b5308c">
</div>
<div id="outline-container-h:c1ddcb85-8688-40d2-9e85-fd5eeeac2358" class="outline-3">
<h3 id="h:c1ddcb85-8688-40d2-9e85-fd5eeeac2358">BurpSuite 概述</h3>
<div class="outline-text-3" id="text-h:c1ddcb85-8688-40d2-9e85-fd5eeeac2358">
<p>
Burp Suite是一个集成化的渗透测试工具，它集合了多种渗透测试组件，使我们自动化地或手工地能更好的完成对web应用的渗透测试和攻击。
</p>

<p>
Burp Suite是由Java语言编写而成，而Java自身的跨平台性，使得软件的学习和使用更加方便。BurpSuite不像其他的自动化测试工具，它需要你手工的去配置一些参数，触发一些自动化流程，然后它才会开始工作。
</p>

<p>
下载地址：<a href="https://portswigger.net/burp/communitydownload">https://portswigger.net/burp/communitydownload</a>  Go staright to downloads
</p>
<ul class="org-ul">
<li>Burp Suite Community Edition 社区版，免费</li>
<li>Burp Suite Professional 专业版，收费</li>
</ul>

<p>
Burp Suite可执行程序是java文件类型的jar文件，免费版的可以从免费版下载地址进行下载。免费版的Burp Suite会有许多限制，很多的高级工具无法使用，如果想使用更多的高级功能，需要付费购买专业版。
</p>

<p>
专业版与免费版的主要区别有：
</p>
<ul class="org-ul">
<li>Burp Scan</li>
<li>工作空间的保存和恢复</li>
<li>拓展工具，如Target Analyzer, Discover Content 和 Task Scheduler</li>
</ul>

<p>
核心功能是抓包、3-4个核心模块，不用追求最新版。
</p>

<p>
官方文档: <a href="https://portswigger.net/burp/documentation">https://portswigger.net/burp/documentation</a>
</p>
</div>
<div id="outline-container-h:d928c933-5ea6-4eb7-bf23-27b287dc7f38" class="outline-4">
<h4 id="h:d928c933-5ea6-4eb7-bf23-27b287dc7f38">java 环境安装</h4>
<div class="outline-text-4" id="text-h:d928c933-5ea6-4eb7-bf23-27b287dc7f38">
<p>
Burp Suite是一个无需安装软件，下载完成后，直接从命令行启用即可。但Burp Suite是用Java语言开发的，运行时依赖于JRE，需要提前Java可运行环境。
</p>


<p>
下载  <a href="https://www.oracle.com/java/technologies/downloads/#java8">https://www.oracle.com/java/technologies/downloads/#java8</a>
</p>
</div>
<ul class="org-ul">
<li><a id="h:8d341601-e4b8-4a99-8c0b-4091d88d19df"></a>windows 安装java<br>
<div class="outline-text-6" id="text-h:8d341601-e4b8-4a99-8c0b-4091d88d19df">
<p>
<a href="https://portswigger.net/burp/documentation/desktop/troubleshooting/launch-from-command-line">java版本要求</a>: 
</p>
<ul class="org-ul">
<li>2025.4.4 至少需要 Java 21</li>
<li>2020.2 至少jdk 1.8</li>
</ul>

<p>
分别创建jdk目录:
</p>
<div class="org-src-container">
<pre class="src src-sh">d:\Program Files\Java\jdk1.8.0_144<span style="color: #8b2252;">\</span>
d:\Program Files\Java\jre<span style="color: #8b2252;">\</span>
</pre>
</div>

<p>
<b>环境变量：</b>
</p>

<p>
右键“我的电脑”&gt;属性&gt;高级系统设置&gt;
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #a0522d;">JAVA_HOME</span>=JDK&#30340;&#23433;&#35013;&#30446;&#24405;
<span style="color: #a0522d;">PATH</span>=%JAVA_HOME%\bin 
<span style="color: #a0522d;">CLASSPATH</span>=.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar
</pre>
</div>
</div>
</li>
<li><a id="h:a1f4f0d7-b551-4132-b518-79bda10fd45d"></a>mac 安装java<br>
<div class="outline-text-6" id="text-h:a1f4f0d7-b551-4132-b518-79bda10fd45d">
<p>
openjdk1.8: <a href="https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk#zulu">https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk#zulu</a>
</p>

<p>
jdk 11 17 20 : <a href="https://www.oracle.com/java/technologies/downloads/">https://www.oracle.com/java/technologies/downloads/</a>
</p>

<p>
查看当前版本
</p>
<div class="org-src-container">
<pre class="src src-sh">/usr/libexec/java_home -V
</pre>
</div>

<p>
~/.bash_profile 配置：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">export</span> <span style="color: #a0522d;">JAVA_8_HOME</span>=$(<span style="color: #ff00ff;">/usr/libexec/java_home -v1.8</span>)
<span style="color: #483d8b;">export</span> <span style="color: #a0522d;">JAVA_11_HOME</span>=$(<span style="color: #ff00ff;">/usr/libexec/java_home -v11</span>)
<span style="color: #483d8b;">export</span> <span style="color: #a0522d;">JAVA_17_HOME</span>=$(<span style="color: #ff00ff;">/usr/libexec/java_home -v17</span>)
<span style="color: #483d8b;">export</span> <span style="color: #a0522d;">JAVA_20_HOME</span>=$(<span style="color: #ff00ff;">/usr/libexec/java_home -v20</span>)

<span style="color: #483d8b;">alias</span> <span style="color: #a0522d;">java8</span>=<span style="color: #8b2252;">'export JAVA_HOME=$JAVA_8_HOME'</span>
<span style="color: #483d8b;">alias</span> <span style="color: #a0522d;">java11</span>=<span style="color: #8b2252;">'export JAVA_HOME=$JAVA_11_HOME'</span>
<span style="color: #483d8b;">alias</span> <span style="color: #a0522d;">java17</span>=<span style="color: #8b2252;">'export JAVA_HOME=$JAVA_17_HOME'</span>
<span style="color: #483d8b;">alias</span> <span style="color: #a0522d;">java20</span>=<span style="color: #8b2252;">'export JAVA_HOME=$JAVA_20_HOME'</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">default to Java 20</span>
java17
</pre>
</div>

<p>
生效
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">source</span> ~/.bash_profile
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-h:8e7a2d56-63bf-4819-b9ca-fb03ac61b794" class="outline-4">
<h4 id="h:8e7a2d56-63bf-4819-b9ca-fb03ac61b794">下载Burp Suite</h4>
<div class="outline-text-4" id="text-h:8e7a2d56-63bf-4819-b9ca-fb03ac61b794">
<p>
官网<a href="https://portswigger.net/burp/releases">https://portswigger.net/burp/releases</a>
</p>

<ul class="org-ul">
<li>打开下载文件夹-&gt;双击安装包-&gt;根据默认操作指示进行安装</li>
<li>安装完成后，双击打开burp suite</li>
<li>会提示需要注册码才能进去，这时关闭即可</li>
</ul>
</div>
</div>
<div id="outline-container-h:cab13470-d7c5-406f-bf9c-424461d70062" class="outline-4">
<h4 id="h:cab13470-d7c5-406f-bf9c-424461d70062">安装使用注册机</h4>
<div class="outline-text-4" id="text-h:cab13470-d7c5-406f-bf9c-424461d70062">
<p>
非社区版参考：
</p>
<ul class="org-ul">
<li>Windows: <a href="https://blog.csdn.net/LUOBIKUN/article/details/87457545">https://blog.csdn.net/LUOBIKUN/article/details/87457545</a></li>
<li>MacOS2025: <a href="https://blog.csdn.net/qq_53183573/article/details/131473133">https://blog.csdn.net/qq_53183573/article/details/131473133</a></li>
<li>Windows2025:<a href="https://2048.csdn.net/682ace9b606a8318e85744e8.html">https://2048.csdn.net/682ace9b606a8318e85744e8.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-h:beed67a0-15d5-42d7-a3ea-613668a9775c" class="outline-4">
<h4 id="h:beed67a0-15d5-42d7-a3ea-613668a9775c">从命令行启动Burp Suite</h4>
<div class="outline-text-4" id="text-h:beed67a0-15d5-42d7-a3ea-613668a9775c">
<p>
这时，你只要在cmd里执行
</p>

<div class="org-src-container">
<pre class="src src-sh">java -jar /your_burpsuite_path/burpSuite.jar
</pre>
</div>

<p>
即可启动Burp Suite，或者，
你将Burp Suite的jar放入class_path目录下，直接执行java -jar burpSuite.jar也可以启动。
</p>

<p>
注意：your_burpsuite_path为你Burp Suite所在路径，burpSuite.jar文件名必须跟你下载的jar文件名称一致。
</p>
</div>
</div>
<div id="outline-container-h:f9ad85a7-0fb1-4327-81eb-8a590f470a91" class="outline-4">
<h4 id="h:f9ad85a7-0fb1-4327-81eb-8a590f470a91">设置JVM内存大小</h4>
<div class="outline-text-4" id="text-h:f9ad85a7-0fb1-4327-81eb-8a590f470a91">
<p>
如果Java可运行环境配置正确的话，当你双击burpSuite.jar即可启动软件，这时，Burp Suite自己会自动分配最大的可用内存，具体实际分配了多少内存，默认一般为64M。
</p>

<p>
当我们在渗透测试过程，如果有成千上万个请求通过Burp Suite，这时就可能会导致Burp Suite因内存不足而崩溃，从而会丢失渗透测试过程中的相关数据，这是我们不希望看到的。因此，当我们启动Burp Suite时，通常会指定它使用的内存大小。一般来说，我们通常会分配2G的内存供Burp Suite使用，如果你的电脑内存足够，可以分配4G；如果你的电脑内存没那么大，你也可以分配128M。当你给Burp Suite分配足够多的内存时，它能做的工作也会更多。
</p>

<p>
指定Burp Suite占用内存大小的具体配置方法是在启动脚本里添加如下命令行参数：
</p>
<div class="org-src-container">
<pre class="src src-sh">java -jar -Xmx2048M /your_burpsuite_path/burpsuite.jar
</pre>
</div>

<p>
其中参数-Xmx指定JVM可用的最大内存，单位可以是M，也可以是G，如果是G为单位的话，则脚本内容为：
</p>
<div class="org-src-container">
<pre class="src src-sh">java -jar -Xmx2G /your_burpsuite_path/burpsuite.jar
</pre>
</div>

<p>
更多关于JVM性能调优的知识请阅读 <a href="https://docs.oracle.com/cd/E13222_01/wls/docs81/perform/JVMTuning.html">Oracle JVM Tuning</a>
</p>
</div>
</div>
</div>
<div id="outline-container-h:76ca6f87-9461-46e4-916d-988e0a373612" class="outline-3">
<h3 id="h:76ca6f87-9461-46e4-916d-988e0a373612">SSL和Proxy高级选项</h3>
<div class="outline-text-3" id="text-h:76ca6f87-9461-46e4-916d-988e0a373612">
<p>
在前一章，我们已经学习了HTTP消息如何通过Burp Proxy进行拦截和处理，本章我们将继续学习HTTPS协议消息的拦截和处理。
</p>

<p>
HTTPS协议是为了数据传输安全的需要，在HTTP原有的基础上，加入了安全套接字层SSL协议，通过CA证书来验证服务器的身份，并对通信消息进行加密。基于HTTPS协议这些特性，我们在使用Burp Proxy代理时，需要增加更多的设置，才能拦截HTTPS的消息。
</p>

<p>
本章包含的主要内容有
</p>
<ul class="org-ul">
<li>CA证书的安装</li>
<li>CA证书的卸载</li>
<li>Proxy监听设置</li>
</ul>

<p>
我们都知道，在HTTPS通信过程中，一个很重要的介质是CA证书，下面就我们一起来看看Burp Suite中CA证书的安装。
</p>
</div>
<div id="outline-container-h:7d2f83f2-f0a0-4c06-a935-437b9ec8b78e" class="outline-4">
<h4 id="h:7d2f83f2-f0a0-4c06-a935-437b9ec8b78e">CA证书的安装</h4>
<div class="outline-text-4" id="text-h:7d2f83f2-f0a0-4c06-a935-437b9ec8b78e">
<p>
一般来说，Burp Proxy代理过程中的CA主要分为如下几个步骤（以win7下IE9为例）：
</p>

<ul class="org-ul">
<li>首先打开Burp Proxy监听端口和IE的代理服务器设置。其次，你的IE浏览器中没有安装过Burp Suite的CA证书，如果已经安装，请先卸载证书。详细的卸载方法请参考CA证书的卸载章节。</li>

<li>启动浏览器，在地址栏输入<a href="http://burp">http://burp</a> 并回车，点CA进入证书下载页面</li>
</ul>


<figure id="orgeea0b20">
<img src="./images/Snipaste_2023-05-21_01-05-39.png" alt="Snipaste_2023-05-21_01-05-39.png" width="50%">

</figure>

<ul class="org-ul">
<li>本地安装。点击上图所示的证书下载，另存为到本地目录。双击导入证书，一直点"下一步"。</li>
<li>浏览器上安装证书
<ul class="org-ul">
<li>点击浏览器上的【工具】菜单，打开【Internet选项】。</li>
<li>在弹出的证书对话框中，点击【内容】-【证书】。</li>
<li>在弹出的证书对话框中，选中【受信任的根证书颁发机构】，点击【导入】。</li>
<li>点击【下一步】，选择步骤3保存的证书文件，进行下一步操作。</li>
<li>指定证书的存储位置，受信任的根证书颁发机构。如图</li>
</ul></li>
</ul>


<figure id="org222e4ad">
<img src="./images/Snipaste_2023-05-21_01-07-39.png" alt="Snipaste_2023-05-21_01-07-39.png" width="50%">

</figure>

<ul class="org-ul">
<li>点击【下一步】，直至完成。这时，会提示安全警告，点击【是】，提示导入完成。
<ul class="org-ul">
<li>firfox 找到隐私与安全中“证书”，“查看证书”选择导入证书。</li>
</ul></li>
<li>重启浏览器，CA证书即配置完成。</li>
</ul>
</div>
</div>
<div id="outline-container-h:eb6ca024-b9e2-4405-8f7b-5afab6c6c4c8" class="outline-4">
<h4 id="h:eb6ca024-b9e2-4405-8f7b-5afab6c6c4c8">CA证书的卸载</h4>
<div class="outline-text-4" id="text-h:eb6ca024-b9e2-4405-8f7b-5afab6c6c4c8">
<p>
CA证书的卸载的通常有两种方式，第一种方式在上一章节CA证书安装中的第6步，找到需要卸载的证书，点击【删除】即可。我们这里主要描述第二种删除方式，主要是为了解决在第一种方式的基础上删除按钮失效或者证书列表里看不到的证书也一起删除的方法。
</p>

<p>
本机删除证书：
</p>
<ol class="org-ol">
<li>win+r键，输入mmc，会弹出管理控制台。</li>
<li>点击【文件】菜单，打开【添加/删除管理单元】</li>
<li>找到证书，点击【添加】按钮</li>
<li>在弹出的对话框选中【计算机账户】，点【下一页】，点击【完成】，点【确定】。这样左侧栏就可以显示所有证书了。</li>
<li>选择【中间证书颁发机构】-【证书】，burp证书在中间证书颁发机构 PortSwigger CA，右键选择删除即可。</li>
<li>这时，再返回到IE浏览器的证书列表里，则不会再看到被删除的证书了。</li>
</ol>



<figure id="orgdcc27c4">
<img src="./images/img_20250525_134358.png" alt="img_20250525_134358.png" width="50%">

</figure>

<p>
除了IE之外，其他的浏览器如FireFox、Chrome、Sarifa等都证书的安装和卸载基本类似，操作时可以以IE的CA证书安装作为参考。
</p>
</div>
</div>
</div>
<div id="outline-container-h:8a1b7989-eb61-4f5f-9275-b7f221243f7c" class="outline-3">
<h3 id="h:8a1b7989-eb61-4f5f-9275-b7f221243f7c">Burp Suite代理和浏览器设置</h3>
<div class="outline-text-3" id="text-h:8a1b7989-eb61-4f5f-9275-b7f221243f7c">
<p>
Burp Suite代理工具是以拦截代理的方式，拦截所有通过代理的网络流量，如客
户端的请求数据、服务器端的返回信息等。Burp Suite主要拦截http和https协
议的流量，通过拦截，Burp Suite以中间人的方式， <b>可以对客户端请求数据、服务端返回做各种处理</b> ，以达到安全评估测试的目的。
</p>


<figure id="org8447437">
<img src="./images/Snipaste_2023-05-20_22-49-27.jpg" alt="Snipaste_2023-05-20_22-49-27.jpg" width="50%">

</figure>


<p>
在日常工作中，我们最常用的web客户端就是的web浏览器，我们可以通过代理的设置，做到对web浏览器的流量拦截，并对经过Burp Suite代理的流量数据进行处理。
</p>

<p>
下面我们就分别看看IE、Firefox、Google Chrome下是如何配置Burp Suite代理的。
</p>
</div>
<div id="outline-container-h:f15405c4-e1cb-48fc-b25a-1cd65c38468e" class="outline-4">
<h4 id="h:f15405c4-e1cb-48fc-b25a-1cd65c38468e">IE设置</h4>
<div class="outline-text-4" id="text-h:f15405c4-e1cb-48fc-b25a-1cd65c38468e">
<p>
当Burp Suite 启动之后，默认分配的代理地址和端口是127.0.0.1:8080，我们可以从Burp Suite的proxy选项卡的options上查看。如图：
</p>


<figure id="org97ceeb1">
<img src="./images/Snipaste_2023-05-20_23-09-04.png" alt="Snipaste_2023-05-20_23-09-04.png" width="50%">

</figure>

<p>
现在，我们通过如下步骤的设置即可完成IE通过Burp Suite 代理的相关配置。
</p>

<ul class="org-ul">
<li>启动IE浏览器</li>
<li>点击【工具】菜单，选择【Internet】选项</li>
<li>打开【连接】选项卡，点击【局域网设置】，进行代理设置。</li>
<li>在代理服务器设置的地址输入框中填写127.0.0.1,端口填写8080，点击【确定】，完成代理服务器的设置。</li>
</ul>

<p>
这时，IE的设置已经完成，你可以访问 <a href="http://burp">http://burp</a> 将会看到Burp Suite的欢迎界面。
</p>

<p>
注意IE浏览器开启的代理是系统全局代理。
</p>
</div>
</div>
<div id="outline-container-h:4b544d55-6b9f-48e0-9b32-7642eef7f31f" class="outline-4">
<h4 id="h:4b544d55-6b9f-48e0-9b32-7642eef7f31f">FireFox设置</h4>
<div class="outline-text-4" id="text-h:4b544d55-6b9f-48e0-9b32-7642eef7f31f">
<p>
与IE的设置类似，在FireFox中，我们也要进行一些参数设置，才能将FireFox浏览器的通信流量，通过Burp Suite代理进行传输。详细的步骤如下：
</p>

<ul class="org-ul">
<li>启动FireFox浏览器，菜单栏中点击【设置】。</li>
<li>拖到最下面【网络设置】，点击【设置】</li>
<li>在弹出对话框中，选中“手动配置代理”，填写127.0.0.1，端口填写8080，最后点击【确认】保存参数设置，完成FireFox的代理配置。</li>
</ul>


<figure id="org8bec55b">
<img src="./images/Snipaste_2023-05-20_23-16-07.png" alt="Snipaste_2023-05-20_23-16-07.png" width="50%">

</figure>
</div>
<div id="outline-container-h:dac39ab0-feac-4814-9e4a-cc192fcb5eee" class="outline-5">
<h5 id="h:dac39ab0-feac-4814-9e4a-cc192fcb5eee">扩展插件</h5>
<div class="outline-text-5" id="text-h:dac39ab0-feac-4814-9e4a-cc192fcb5eee">
<p>
当然，FireFox浏览器中，可以添加FireFox的扩展组件，对代理服务器进行管理。
</p>

<ul class="org-ul">
<li>FoxyProxy
<ul class="org-ul">
<li>配置代理时，类型先Burp</li>
</ul></li>
<li>Proxy Swither</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:22bb51d1-23ea-4eed-90c6-daae67151b3a" class="outline-4">
<h4 id="h:22bb51d1-23ea-4eed-90c6-daae67151b3a">Google Chrome设置</h4>
<div class="outline-text-4" id="text-h:22bb51d1-23ea-4eed-90c6-daae67151b3a">
<p>
Google Chrome使用Burp Suite作为代理服务器的配置步骤如下：
</p>

<ol class="org-ol">
<li>启动Google Chrome浏览器，在地址栏输入chrome://settings/，回车后即显示Google Chrome浏览器的配置界面</li>
<li>点击底部的【系统】，找到"打开你计算机的代理设置"点击。</li>
<li>当然，你也可以直接在搜索框中输入“代理”，回车后将自动定位到代理服务器设置功能。</li>
</ol>
<p>
windows系统下将会弹出IE浏览器的代理设置，此时，按照IE浏览器的设置步骤，完成代理服务器的配置即可。
</p>
</div>
<div id="outline-container-h:36a4e42b-4654-4280-8d4c-2cd1b1c17084" class="outline-5">
<h5 id="h:36a4e42b-4654-4280-8d4c-2cd1b1c17084">扩展插件</h5>
<div class="outline-text-5" id="text-h:36a4e42b-4654-4280-8d4c-2cd1b1c17084">
<ul class="org-ul">
<li>FoxyProxy
<ul class="org-ul">
<li>配置代理时，类型先Burp</li>
</ul></li>
<li>SwitchyOmega : <a href="https://chrome.google.com/webstore/detail/padekgcemlokbadohgkifijomclgjgif">https://chrome.google.com/webstore/detail/padekgcemlokbadohgkifijomclgjgif</a>
<ul class="org-ul">
<li>gfwlist的列表url地址为：<a href="https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt">https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:c60c3d36-1250-4d4f-854e-d172a6a08f5c" class="outline-4">
<h4 id="h:c60c3d36-1250-4d4f-854e-d172a6a08f5c">手机抓包代理</h4>
<div class="outline-text-4" id="text-h:c60c3d36-1250-4d4f-854e-d172a6a08f5c">
<p>
1.手机和电脑接入同一个WIFI，在电脑上确认WIFI的IP地址，即代理地址
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">win0</span>
ifconfig <span style="color: #b22222;"># </span><span style="color: #b22222;">&#26080;&#32447;&#23616;&#22495;&#32593;ipv4&#22320;&#22336;</span>
</pre>
</div>


<figure id="org1169ffc">
<img src="./images/Snipaste_2023-05-20_23-28-52.png" alt="Snipaste_2023-05-20_23-28-52.png" width="50%">

</figure>

<p>
4.在burp上进行代理设置，与手机设置相同的代理IP地址
</p>
<ul class="org-ul">
<li>Proxy&#x2013;&gt;Options&#x2013;&gt;Add 新增一个同手机同网段IP地址端口8080，做为监控地址。</li>
</ul>


<figure id="orgc43fcf9">
<img src="./images/Snipaste_2023-05-20_23-30-24.png" alt="Snipaste_2023-05-20_23-30-24.png" width="50%">

</figure>

<p>
3.在手机上进行代理设置
</p>
<div class="org-src-container">
<pre class="src src-sh">- &#35774;&#32622;&#39029;&#38754;&#65292;&#28857;&#20987;&#25171;&#24320;WLAN&#26469;&#36827;&#34892;&#32593;&#32476;&#35774;&#32622;&#12290;
- &#25171;&#24320;WLAN&#21518;&#65292;&#28857;&#20987;&#36825;&#37324;&#24050;&#32463;&#36830;&#25509;&#19978;&#30340;wifi&#32593;&#32476;
- &#25171;&#24320;&#20102;&#32593;&#32476;&#35814;&#24773;&#39029;&#38754;&#65292;&#21487;&#20197;&#30475;&#21040;&#20195;&#29702;&#35774;&#32622;
- &#40664;&#35748;&#26159;&#26080;&#20195;&#29702;&#30340;&#12290;&#25105;&#20204;&#28857;&#20987;&#19979;&#25289;&#26694;&#21518;&#65292;&#36873;&#25321;&#8216;&#25163;&#21160;&#8217;&#65292;&#25163;&#21160;&#26469;&#35774;&#32622;&#20195;&#29702;&#65292;&#21487;&#20197;&#30475;&#21040;&#22810;&#20986;&#20102;&#20027;&#26426;&#21517;&#21644;&#31471;&#21475;&#36873;&#39033;
- &#22312;&#20027;&#26426;&#21517;&#21644;&#31471;&#21475;&#22635;&#20889;&#23545;&#24212;burpsuite&#30340;&#30417;&#21548;&#22320;&#22336;&#12290;&#22914;192.168.1.35:8080
- &#26368;&#21518;&#38754;&#30340;&#36873;&#39033;&#21487;&#20197;&#19981;&#22635;&#65292;&#36825;&#26159;&#22635;&#20889;&#19981;&#24076;&#26395;&#20351;&#29992;&#20195;&#29702;&#26469;&#19978;&#32593;&#30340;&#32593;&#22336;&#12290;
&#25152;&#26377;&#22635;&#20889;&#21518;&#65292;&#28857;&#20987;&#21491;&#19978;&#35282;&#30340;&#30830;&#23450;&#25353;&#38062;&#23601;&#21487;&#20197;&#20102;
</pre>
</div>


<figure id="org6b6fbde">
<img src="./images/Snipaste_2023-05-20_23-29-29.png" alt="Snipaste_2023-05-20_23-29-29.png" width="50%">

</figure>


<ol class="org-ol">
<li>手机浏览器访问 <a href="http://burp">http://burp</a> 下载证书并在手机上安装，即可对手机进行抓包</li>
</ol>

<p>
<b>注意：很多主流APP内置防护，禁止burp抓包，所以可能存在抓不到包的情况。</b>
</p>

<p>
准备完毕，剩下就是burpsuite抓包测试了。
</p>

<p>
不同手机可能有差异，不一定成功，所以这里我使用了手机模拟器
</p>

<p>
如果是用的手机模拟器，步骤:
参考：youtube: <a href="https://www.youtube.com/watch?v=klklh5IvrBg">https://www.youtube.com/watch?v=klklh5IvrBg</a>
1安装配置模拟器android-studio：
</p>
<ul class="org-ul">
<li>下载 android-studio: <a href="https://developer.android.com/studio">https://developer.android.com/studio</a></li>
<li>安装 android-studio，一路默认，下一步，中间需要翻墙下载包。</li>
<li>android-studio配置 参考：<a href="https://www.bilibili.com/read/cv17728065/">https://www.bilibili.com/read/cv17728065/</a>
<ul class="org-ul">
<li>安装sdk：打开Preference &#x2013;&gt; Appearance&amp;Behavior &#x2013;&gt; System Settings &#x2013;&gt; Android SDK。在SDK platform中可以看到你所下载的安卓版本，我这里安装的api22 和33。SKD tools安装Layout Inspector</li>
</ul></li>
</ul>

<p>
2解决代理不显示问题
</p>
<ul class="org-ul">
<li>android-studio配置
<ul class="org-ul">
<li>模拟器中显示代理：打开Preference &#x2013;&gt; Tools &#x2013;&gt; Emulator 取消勾选Launch in a tool window</li>
<li>重启android-studio</li>
</ul></li>
</ul>

<p>
3下载有漏洞的安卓应用InsecureBankv2
</p>
<ul class="org-ul">
<li>InsecureBankv2 <a href="https://github.com/dineshshetty/Android-InsecureBankv2">https://github.com/dineshshetty/Android-InsecureBankv2</a></li>
<li>打开项目：主界面 &#x2013;&gt; Profile or Debug APK &#x2013;&gt; 找到并打开下载目录的InsecureBankv2.apk文件</li>
</ul>


<figure id="orgd54266a">
<img src="./images/Snipaste_2023-05-28_07-43-05.png" alt="Snipaste_2023-05-28_07-43-05.png" width="50%">

</figure>

<ul class="org-ul">
<li>启动应用，账号密码admin/admin，serverip使用主机地址。需要提前启动server服务</li>
</ul>


<figure id="org15b0574">
<img src="./images/Snipaste_2023-05-28_08-53-00.png" alt="Snipaste_2023-05-28_08-53-00.png" width="50%">

</figure>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">cd</span> Android-InsecureBankv2/AndroLabServer
&gt; python app.py
The server is hosted on port: 8888

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#25552;&#21069;&#23433;&#35013;&#22909;&#23545;&#24212;&#27169;&#22359;</span>
python -m ensurepip --user --default-pip
python -m pip install --user --upgrade pip
python -m pip install web.py
python -m pip install flask
python -m pip install sqlalchemy
python -m pip install simplejson
</pre>
</div>

<p>
4ca证书安装
</p>
<ul class="org-ul">
<li>导出ca证书为burp.cer，再把证书拖拽到虚拟手机里</li>
</ul>


<figure id="org6f11c37">
<img src="./images/Snipaste_2023-05-28_08-21-27.png" alt="Snipaste_2023-05-28_08-21-27.png" width="50%">

</figure>

<ul class="org-ul">
<li>虚拟手机中加载证书：Setting &#x2013;&gt; Security &amp; location &#x2013;&gt; Encryption &amp; credentials &#x2013;&gt; Install from SD card &#x2013;&gt; Downloads 找到burp.cer 双击安装</li>
</ul>

<figure id="orgcfa9604">
<img src="./images/Snipaste_2023-05-28_08-37-44.png" alt="Snipaste_2023-05-28_08-37-44.png" width="50%">

</figure>

<ul class="org-ul">
<li>安装证书时要设置set lock，Continue without fingerprint &#x2013;&gt; PIN &#x2013;&gt; 随便设置一个，如，1234 &#x2013;&gt; DONE</li>
</ul>

<p>
5手机代理
</p>
<ul class="org-ul">
<li>Settings设置，手动代理这里要和burpsuite监控地址一致。如127.0.0.1:8080，Apply应用生效。</li>
</ul>

<figure id="orge2095f1">
<img src="./images/Snipaste_2023-05-28_08-45-18.png" alt="Snipaste_2023-05-28_08-45-18.png" width="50%">

</figure>

<p>
打开浏览器访问<a href="https://baidu.com">https://baidu.com</a> 还是无法抓包，手机还得装 JustTrustMe.apk / VirtualXposed_0.20.3.apk。
</p>
</div>
</div>
</div>
<div id="outline-container-h:6d122307-6a86-4785-b244-9567bebc6052" class="outline-3">
<h3 id="h:6d122307-6a86-4785-b244-9567bebc6052"><code>Proxy</code> 使用Burp Suite代理</h3>
<div class="outline-text-3" id="text-h:6d122307-6a86-4785-b244-9567bebc6052">
<p>
Burp Proxy 是Burp Suite的核心功能，通过代理模式，可以让我们拦截、查看、修改所有在客户端和服务端之间传输的数据。
</p>

<p>
本章主要讲述以下内容：
</p>

<ul class="org-ul">
<li>Burp Proxy基本使用</li>
<li>数据拦截与控制</li>
<li>可选项配置Options</li>
<li>历史记录History</li>
</ul>
</div>
<div id="outline-container-h:7ce5bf38-51c0-4e59-8cfd-e2427ed3065a" class="outline-4">
<h4 id="h:7ce5bf38-51c0-4e59-8cfd-e2427ed3065a">Burp Proxy基本使用</h4>
<div class="outline-text-4" id="text-h:7ce5bf38-51c0-4e59-8cfd-e2427ed3065a">
<p>
通过前面的学习，我们对Burp Suite代理模式和浏览器代理设置有了基本的了解。Burp Proxy的使用是一个循序渐进的过程，刚开始使用时，可能并不能很快就获取你所期望的结果，慢慢的当你熟悉了它的功能和使用方法，你就可以用它很好地对一个产品系统做安全能力评估。一般使用Burp Proxy时，大致涉及环节如下：
</p>

<p>
1.首先，确认JRE已经安装好，Burp Suite可以启动并正常运行，且已经完成浏览器的代理服务器配置。
</p>

<p>
2.打开Proxy功能中的Intercept选项卡，确认拦截功能为“Interception is on”状态，如果显示为“Intercept is off”则点击它，打开拦截功能。
</p>


<figure id="orgb5b6417">
<img src="./images/Snipaste_2023-05-20_23-34-18.png" alt="Snipaste_2023-05-20_23-34-18.png" width="50%">

</figure>

<p>
3.打开浏览器，输入你需要访问的URL（以 <a href="https://baike.baidu.com">https://baike.baidu.com/</a> 为例）并回车，这时你将会看到数据流量经过Burp Proxy并暂停，直到你点击【Forward】，才会继续传输下去。如果你点击了【Drop】，则这次通过的数据将会被丢弃，不再继续处理。
</p>

<p>
4.当我们点击【Forward】之后，我们将看到这次请求返回的所有数据。（默认不开启）。通过右键Do intercept&#x2013;&gt; Response to this request 来显示这次请求的响应信息。
</p>


<figure id="orgf13bc82">
<img src="./images/Snipaste_2023-05-20_23-35-19.png" alt="Snipaste_2023-05-20_23-35-19.png" width="50%">

</figure>

<p>
5.当Burp Suite拦截的客户端和服务器交互之后，我们可以在Burp Suite的消息分析选项卡中查看这次请求的实体内容、消息头、请求参数等信息。消息分析选项视图主要包括以下四项：
</p>


<figure id="orge8cb522">
<img src="./images/Snipaste_2023-05-20_23-36-01.png" alt="Snipaste_2023-05-20_23-36-01.png" width="50%">

</figure>

<ol class="org-ol">
<li>Raw：这是视图主要显示web请求真实格式，包含请求地址、http协议版本、主机头、浏览器信息、Accept可接受的内容类型、字符集、编码方式、cookie等。你可以通过手工修改这些信息，对服务器端进行渗透测试。</li>
<li>Params：这个视图主要显示客户端请求的参数信息、包括GET或者POST请求的参数、Cookie参数，渗透人员可以通过修改这些请求参数来完成对服务器端的渗透测试。</li>
<li>Headers：这个视图显示的信息和Raw的信息类似，只不过在这个视图中，展示得更直观、友好。</li>
<li>Hex：这个视图显示Raw的十六进制内容，你可以通过hex编辑器对请求的内容进行修改。</li>
</ol>

<p>
默认情况下，Burp Proxy只拦截请求的消息，普通文件请求如css、js、图片是不会被拦截的（无意义），你可以修改默认的拦截选项来拦截这些静态文件，当然，你也可以通过修改拦截的作用域、参数或者服务器端返回的关键字来控制Burp Proxy的消息拦截，这些在后面的章节中我们会进一步的学习。
</p>

<p>
所有流经Burp Proxy的消息，都会在 <b>http history</b> 记录下来，我们可以通过历史选项卡，查看传输的数据内容，对交互的数据进行测试和验证。同时，对于拦截到的消息和历史消息，都可以通过右击弹出菜单，发送到Burp的其他组件，如Scanner、Repeater、Intruder、Sequencer、Decoder、Comparer、Extender，进行进一步的测试。如下图所示：
</p>


<figure id="org595e8c2">
<img src="./images/Snipaste_2023-05-20_23-37-57.png" alt="Snipaste_2023-05-20_23-37-57.png" width="50%">

</figure>
</div>
<div id="outline-container-h:6a3556c4-4768-4b86-8d95-05b1dd33ecfe" class="outline-5">
<h5 id="h:6a3556c4-4768-4b86-8d95-05b1dd33ecfe">编码和字体</h5>
<div class="outline-text-5" id="text-h:6a3556c4-4768-4b86-8d95-05b1dd33ecfe">
<ul class="org-ul">
<li>在User option &#x2013;&gt; Display 中，Character Sets 设置为UTF-8，HTTP Message Display 为宋体13pt。</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:4cbf432c-7cef-43df-a2f8-ea0d6b0096f9" class="outline-4">
<h4 id="h:4cbf432c-7cef-43df-a2f8-ea0d6b0096f9"><code>Proxy--&gt;Intercept</code> 数据拦截与控制</h4>
<div class="outline-text-4" id="text-h:4cbf432c-7cef-43df-a2f8-ea0d6b0096f9">
<p>
Burp Proxy的拦截功能主要由Intercept选项卡中的Forward、Drop、Interception is on/off、Action（右键）、Comment以及Highlight构成，它们的功能分别是：
</p>

<ul class="org-ul">
<li>Forward: 放过。 当你查看过消息或者重新编辑过消息之后，点击此按钮，将发送消息至服务器端。</li>

<li>Drop: 丢弃。 丢弃当前拦截的消息，不再forward到服务器端。</li>

<li>Interception is on/off: 表示拦截功能打开，拦截所有通过Burp Proxy的请求数据；off表示拦截功能关闭，不再拦截通过Burp Proxy的所有请求数据。</li>

<li>Action: 和右键功能一样。 它的功能是除了将当前请求的消息传递到Scan、Repeater、Intruder、Sequencer、Decoder、Comparer组件外，还可以做一些请求消息的修改，如改变GET或者POST请求方式、改变请求body的编码，同时也可以改变请求消息的拦截设置，如不再拦截此主机的消息、不再拦截此IP地址的消息、不再拦截此种文件类型的消息、不再拦截此目录的消息，也可以指定针对此消息拦截它的服务器端返回消息。</li>
</ul>


<figure id="orgaf9882e">
<img src="./images/Snipaste_2023-05-20_23-42-41.png" alt="Snipaste_2023-05-20_23-42-41.png" width="50%">

</figure>

<ul class="org-ul">
<li>Comment和Highlight: 对拦截的消息添加备注和高亮颜色。加上备注和颜色后，在Proxy&#x2013;&gt;HTTTP history容易发现。</li>
</ul>


<figure id="org8ad8fc0">
<img src="./images/Snipaste_2023-05-21_00-12-40.png" alt="Snipaste_2023-05-21_00-12-40.png" width="50%">

</figure>

<p>
除了Intercept中可以对通过Proxy的消息进行控制外，在可选项设置选项卡Options中也有很多的功能设置也可以对流经的消息进行控制和处理。
</p>
</div>
</div>
<div id="outline-container-h:98cb40f1-3d65-4872-8489-1285839a13f4" class="outline-4">
<h4 id="h:98cb40f1-3d65-4872-8489-1285839a13f4"><code>Proxy--&gt;Options</code> 可选项配置Options</h4>
<div class="outline-text-4" id="text-h:98cb40f1-3d65-4872-8489-1285839a13f4">
<p>
当我们打开可选项设置选项卡Options，从界面显示来看，主要包括以下几大板块（涉及https的功能不包含在本章内容里，后面会一章专门叙述）：
</p>

<ul class="org-ul">
<li>客户端请求消息拦截</li>
<li>服务器端返回消息拦截</li>
<li>服务器返回消息修改</li>
<li>正则表达式配置</li>
<li>其他配置项</li>
</ul>
</div>
<div id="outline-container-h:788e9b31-c959-4b2b-b352-8d9cab9c5bdc" class="outline-5">
<h5 id="h:788e9b31-c959-4b2b-b352-8d9cab9c5bdc">Intercept Client Requests 客户端请求消息拦截</h5>
<div class="outline-text-5" id="text-h:788e9b31-c959-4b2b-b352-8d9cab9c5bdc">
<p>
客户端请求消息拦截是指拦截客户端发送到服务器端消息的相关配置选项，其界面如下：
</p>


<figure id="org5fc8b77">
<img src="./images/Snipaste_2023-05-21_00-17-08.png" alt="Snipaste_2023-05-21_00-17-08.png" width="50%">

</figure>

<p>
主要包含拦截规则配置、错误消息自动修复、自动更新Content-Length消息头三个部分。
</p>

<p>
1.ntercept request based on the follow rules: 默认被选中，则所有符合勾选按钮下方列表中的请求规则的消息都将被拦截。拦截时，对规则的过滤是自上而下进行的。当然，我们可以根据自己的需求，通过【Up】和【Down】按钮，调整规则所在位置和排序。同时，我们可以点击【Add】添加一条规则，也可以选中一条规则，通过点击【Edit】进行编辑、点击【Remove】进行删除。当我们点击【Add】按钮时，会弹出规则添加的输入对话框，如下图：
</p>


<figure id="orga504373">
<img src="./images/Snipaste_2023-05-21_00-19-21.png" alt="Snipaste_2023-05-21_00-19-21.png" width="50%">

</figure>

<p>
2.添加拦截规则时，共包含4个输入项。
</p>

<ul class="org-ul">
<li>Boolean opertor: 当前的规则与其他规则是与的方式（And）还是或的方式（Or）共存；</li>
<li>Match type: 匹配类型，此处匹配类型可以基于域名、IP地址、协议、请求方法、URL、文件类型、参数、cookies、头部或者内容、状态码、MIME类型、HTML页面的title等。</li>
<li>Match relationship: 此条规则是匹配还是不匹配。</li>
<li>Match condition: 输入的关键字。当我们输入这些信息，点击【OK】按钮，规则即被保存。</li>
</ul>


<p>
3.Automatically fix missing: 默认不勾选。选中，则表示在一次消息传输中，Burp Suite会自动修复丢失或多余的新行；比如说，一条被修改过的请求消息，如果丢失了头部结束的空行，Burp Suite会自动添加上；如果一次请求的消息体中，URL编码参数中包含任何新的换行，Burp Suite将会移除。此项功能在手工修改请求消息时，为了防止错误，有很好的保护效果。
</p>

<p>
4.Automatically update Content-Length: 默认被选中，则当请求的消息被修改后，Content-Length消息头部也会自动被修改，替换为与之相对应的值。很重要，不勾就是原始数据包长度很容易拦服务端拦截下来。
</p>
</div>
</div>
<div id="outline-container-h:a28339d2-0a2b-4d66-87de-9072967898da" class="outline-5">
<h5 id="h:a28339d2-0a2b-4d66-87de-9072967898da">Intercept Server Responses 服务端返回消息拦截</h5>
<div class="outline-text-5" id="text-h:a28339d2-0a2b-4d66-87de-9072967898da">
<p>
服务端返回消息拦截，顾名思义是指拦截服务器返回消息的相关配置项。
</p>

<p>
与客户端请求拦截功能一样。
它的功能主要包含intercept response based on the follow rules和Automatically update Content-Length header when the response edited两个选项。
</p>
</div>
</div>
<div id="outline-container-h:11b1b020-6fb8-4b0b-af89-000adc9fde58" class="outline-5">
<h5 id="h:11b1b020-6fb8-4b0b-af89-000adc9fde58">Response Modification 服务器返回消息修改</h5>
<div class="outline-text-5" id="text-h:11b1b020-6fb8-4b0b-af89-000adc9fde58">
<p>
服务器返回消息修改是指自动修改服务器端返回消息的相关设置项。
</p>

<p>
自上而下，每一个选择项分别对应的功能是:
</p>

<div class="org-src-container">
<pre class="src src-sh">- Unhide hidden form fields               <span style="color: #b22222;">#</span><span style="color: #b22222;">&#26174;&#31034;form&#34920;&#21333;&#20013;&#38544;&#34255;&#23383;&#27573;&#12290;&#22914;&#30331;&#24405;&#26102;&#25226;&#38544;&#34255;&#30340;token&#20540;&#26174;&#31034;&#20986;&#26469;&#12290;</span>
  - Prominently highlight unhidden fields <span style="color: #b22222;">#</span><span style="color: #b22222;">&#39640;&#20142;&#26174;&#31034;form&#34920;&#21333;&#20013;&#38544;&#34255;&#23383;&#27573;</span>
- Enable disabled form fields             <span style="color: #b22222;">#</span><span style="color: #b22222;">&#20351;form&#34920;&#21333;&#20013;&#30340;disable&#23383;&#27573;&#29983;&#25928;&#65292;&#21464;&#25104;&#21487;&#36755;&#20837;&#22495;</span>
- Remove input field length limits        <span style="color: #b22222;">#</span><span style="color: #b22222;">&#31227;&#38500;&#36755;&#20837;&#22495;&#38271;&#24230;&#38480;&#21046;&#12290;&#22914;&#25163;&#26426;&#21495;&#38271;&#24230;&#12290;</span>
- Remove JavaScript form validation       <span style="color: #b22222;">#</span><span style="color: #b22222;">&#31227;&#38500;JavaScript&#39564;&#35777;</span>
- Remove all JavaScript                   <span style="color: #b22222;">#</span><span style="color: #b22222;">&#31227;&#38500;&#25152;&#26377;&#30340;JavaScript</span>
- Remove &lt;object&gt; tags                    <span style="color: #b22222;">#</span><span style="color: #b22222;">&#31227;&#38500;&#26631;&#31614;</span>
- Convert HTTPS links to HTTP             <span style="color: #b22222;">#</span><span style="color: #b22222;">&#36716;&#25442;https&#36229;&#38142;&#25509;&#20026;http&#38142;&#25509;</span>
- Remove secure flag from cookies         <span style="color: #b22222;">#</span><span style="color: #b22222;">&#31227;&#38500;&#25152;&#26377;cookie&#20013;&#30340;&#23433;&#20840;&#26631;&#24535;</span>
</pre>
</div>

<p>
通过服务器返回消息修改可选择项的设置，可以方便渗透测试人员在安全评估过程中突破原有的数据限制，更好、更快地检测服务器的安全性。
</p>
</div>
</div>
<div id="outline-container-h:ba0d4804-e0d3-4526-a155-441ac2660930" class="outline-5">
<h5 id="h:ba0d4804-e0d3-4526-a155-441ac2660930">Match and Replace 正则表达式配置</h5>
<div class="outline-text-5" id="text-h:ba0d4804-e0d3-4526-a155-441ac2660930">
<p>
正则表达式：<a href="https://www.runoob.com/regexp/regexp-tutorial.html">https://www.runoob.com/regexp/regexp-tutorial.html</a>
</p>

<p>
此项配置主要用来自动替换请求消息和服务器端返回消息中的某些值和文本，它与前文的规则的不同之处还在于支持正则表达式语言。
</p>


<figure id="org424aea4">
<img src="./images/Snipaste_2023-05-21_00-41-22.png" alt="Snipaste_2023-05-21_00-41-22.png" width="50%">

</figure>

<p>
当点击【Add】按钮时，在弹出的匹配或替换规则输入对话框中我们可以看到，它可以对请求和返回消息的消息头，消息体、请求参数名、请求参数值、请求的第一行进行匹配和替换。
</p>

<p>
例如，当我们要替换所有请求消息中的参数邮箱地址为 abc@burpsuite.com 时，【ADD】添加匹配规则并保存验证。
</p>
<div class="org-src-container">
<pre class="src src-sh">Type: Request header <span style="color: #b22222;">#</span><span style="color: #b22222;">&#22312;&#21738;&#21305;&#37197;&#12290;&#36825;&#37324;&#22312;&#26159;&#35831;&#27714;&#22836;&#20013;&#21305;&#37197;&#26367;&#25442;</span>
Match: ([\w]+(<span style="color: #8b2252;">\.</span>[\w]+)*<span style="color: #8b2252;">\%</span>40[\w]+(<span style="color: #8b2252;">\.</span>[\w]+))
Replace: abc@buipsuite.com
Comment: replace email

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#21246;&#36873; Regex match &#21305;&#37197;&#29983;&#25928;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-h:87942df2-16e0-41b6-ab20-b119ae34cd20" class="outline-5">
<h5 id="h:87942df2-16e0-41b6-ab20-b119ae34cd20">Miscellaneous 其他配置项</h5>
<div class="outline-text-5" id="text-h:87942df2-16e0-41b6-ab20-b119ae34cd20">
<p>
其他配置项主要是杂项设置。了解即可。
</p>

<p>
自上而下依次的功能是
</p>
<ul class="org-ul">
<li>Use HTTP/1.0 in requests to server: 指定使用HTTP/1.0协议与服务器进行通信 这项设置用于强制客户端采用HTTP/1.0协议与服务器进行通信，一般客户端使用的HTTP协议版本依赖于客户端浏览器，但某些服务器或者应用，必须使用HTTP/1.0协议，此时可勾选此项</li>

<li>Use HTTP/1.0 in responses to client: 指定使用HTTP/1.0协议反馈消息给客户端。目前所有的浏览器均支持HTTP/1.0协议和HTTP/1.1协议，强制指定HTTP/1.0协议主要用于显示浏览器的某些方面的特征，比如，阻止HTTP管道攻击。</li>

<li>Set response header "Connection: close": 设置返回消息头中的“Connection:close” 每次连接结束后关闭连接。</li>
<li>Set "Connection close" on incoming requests</li>
<li>Strip Proxy-* headers in incoming requests: 请求消息头中脱掉Proxy-* 浏览器请求消息中，通常会携带代理服务器的相关信息，此选项主要用于清除消息头中的代理服务器信息，防止被服务端识别到从而禁止产生交互。</li>
<li>Remove unsupported encodings from Accept-Encoding headersin incoming requests</li>
<li>Strip Sec-WebSocket-Extensions headers in incoming requests</li>
<li>Unpack gzip / deflate in requests: 解压请求消息中的压缩文件 某些应用在与服务器端进行交互时，会压缩消息体，勾选此选项，则Burp Suite 会自动解压消息体</li>

<li>Unpack gzip / deflate in responses: 解压返回消息中的压缩文件 大多数浏览器支持压缩的消息体，勾选此选项，则Burp Suite 会自动解压被服务器端压缩的消息体</li>

<li>Disable web interface at <a href="http://burp">http://burp</a>: 禁用<a href="http://burp">http://burp</a></li>

<li>Suppress Burp error messages in browser: 不在浏览器中显示Burp Suite错误 在我们使用Burp Suite时，如果发生了Burp Suite自身的错误，会在浏览器中显示，如果勾选了此项，则不会在浏览器中显示此类错误。</li>
<li>Don't send items to Proxy history or live tasks</li>
<li>Don't send items to Proxy history or live tasks, if out of scope</li>
</ul>
</div>
</div>
<div id="outline-container-h:626a9747-1416-43d2-81b8-0bd23fe4cc73" class="outline-5">
<h5 id="h:626a9747-1416-43d2-81b8-0bd23fe4cc73">Proxy Listeners Proxy监听设置</h5>
<div class="outline-text-5" id="text-h:626a9747-1416-43d2-81b8-0bd23fe4cc73">
<p>
当我们启动Burp Suite时，默认会监听本机地址（127.0.0.1）的8080端口，除此之外，我们也可以在默认监听的基础上，根据我们自己的需求，对监听端口和地址等参数进行自由设置。特别是当我们测试非浏览器应用时，无法使用浏览器代理的方式去拦截客户端与服务器端通信的数据流量，这种情况下，我们会使用自定义的Proxy监听设置，而不会使用默认设置。
</p>

<p>
Proxy监听设置
</p>


<figure id="orgb336268">
<img src="./images/Snipaste_2023-05-21_01-51-42.png" alt="Snipaste_2023-05-21_01-51-42.png" width="50%">

</figure>

<p>
当我们在实际使用中，可能需要同时测试不同的应用程序时，我们可以通过设置不同的代理端口，来区分不同的应用程序，Proxy监听即提供这样的功能设置。点击图中的【Add】按钮，会弹出Proxy监听设置对话框，里面有更丰富的设置，满足我们不同的测试需求。
</p>


<figure id="org3fc1693">
<img src="./images/Snipaste_2023-05-21_01-52-45.png" alt="Snipaste_2023-05-21_01-52-45.png" width="50%">

</figure>

<p>
Proxy监听设置主要包含3块功能：
</p>

<p>
1.Binding: 端口绑定模式。Binding绑定的端口port是指Burp Proxy代理服务监听的端口，绑定IP地址分仅本地回路、所有接口、指定地址三种模式，在渗透测试中，无论你选择哪种模式，你需要明白一点，当你选择的非本地回路IP地址时，同局域网内的其他电脑也可以访问你的监听地址。
</p>

<p>
2.Request Handling: 请求处理。可以当其他软件的中间人。主要是用来控制接收到Burp Proxy监听端口的请求后，如何对请求进行处理的，即使用burp再次转发。
</p>

<p>
如与xray联动。打开 Request handing 配置代理转发，host 为 xray 地址，port 为 xray 端口，OK 完成
</p>


<figure id="org8b66e1d">
<img src="./images/Snipaste_2023-05-21_01-53-50.png" alt="Snipaste_2023-05-21_01-53-50.png" width="50%">

</figure>

<p>
其具体配置可分为：主机名/域名的转发、端口的转发、强制使用SSL和隐形代理4个部分。当我们配置了主机或域名的转发，则所有的请求会转发到指定的主机或域名上；如果我们配置了端口的转发时，所有的请求都会被转发到这个端口上。同时我们可以指定，通过Burp Proxy的消息是否强制使用SSL，如果设置了此项，则请求若是http协议，经Burp Proxy代理后将转换为https协议。隐形代理主要是用于测试富客户端(能完成很多功能的客户端，如qq)应用或者是非浏览器代理方式的应用，当我们设置了它，访问这些应用时，将通过非代理的方式，直接连接Burp Proxy的监听端口。
</p>

<p>
3.Certificate: SSL证书。 这些设置控制呈现给SSL客户端的服务器SSL证书。可以解决使用拦截代理时出现的一些SSL问题：
</p>

<p>
（1）可以消除浏览器的SSL警报，并需要建立SSL例外。其中，网页加载来自其他域的SSL保护的项目，可以确保这些正确的加载到浏览器，而不需要为每个域手动接受代理的SSL证书。
</p>

<p>
（2）可以解决SSL证书连接到服务端应用程序无效的问题， 有下列选项可供设置：
</p>
<div class="org-src-container">
<pre class="src src-sh">a. &#20351;&#29992;&#33258;&#31614;&#21517;&#35777;&#20070;&#65288;Use a self-signed certificate &#65289; &#8212;&#8212; &#19968;&#20010;&#31616;&#21333;&#30340;&#33258;&#31614;&#21517;SSL&#35777;&#20070;&#21576;&#29616;&#32473;&#24744;&#30340;&#27983;&#35272;&#22120;&#65292;&#23427;&#24635;&#26159;&#20250;&#23548;&#33268;SSL&#35686;&#21578;&#12290;

b. &#29983;&#25104;&#27599;&#20010;&#20027;&#26426;&#30340;CA&#31614;&#21517;&#35777;&#20070;&#65288;Generate CA-signed per-host certificates&#65289;&#8212;&#8212; &#36825;&#26159;&#40664;&#35748;&#36873;&#39033;&#12290;&#22312;&#23433;&#35013;&#26102;&#65292;Burp&#21019;&#36896;&#20102;&#19968;&#20010;&#29420;&#29305;&#30340;&#33258;&#31614;&#21517;&#30340;&#35777;&#20070;&#39041;&#21457;&#26426;&#26500;&#65288;CA&#65289;&#35777;&#20070;&#65292;&#24182;&#23558;&#27492;&#35745;&#31639;&#26426;&#19978;&#20351;&#29992;&#12290;&#24403;&#20320;&#30340;&#27983;&#35272;&#22120;&#21457;&#20986;&#30340;SSL&#36830;&#25509;&#25351;&#23450;&#20027;&#26426;&#65292;Burp&#29983;&#25104;&#35813;&#20027;&#26426;&#30340;SSL&#35777;&#20070;&#65292;&#30001;CA&#35777;&#20070;&#31614;&#21517;&#12290;&#24744;&#21487;&#20197;&#23433;&#35013;Burp&#30340;CA&#35777;&#20070;&#20316;&#20026;&#27983;&#35272;&#22120;&#20013;&#30340;&#21463;&#20449;&#20219;&#30340;&#26681;&#65292;&#20174;&#32780;&#20351;&#27599;&#20010;&#20027;&#26426;&#35777;&#20070;&#27809;&#26377;&#20219;&#20309;&#35686;&#25253;&#12290;

c. &#29983;&#25104;&#19982;&#29305;&#23450;&#30340;&#20027;&#26426;&#21517;CA&#31614;&#21457;&#30340;&#35777;&#20070;&#65288;Generate a CA-signed certificate with a specific hostname&#65289;&#8212;&#8212; &#26159;&#31867;&#20284;&#20110;&#21069;&#38754;&#30340;&#36873;&#39033;&#65307;&#19981;&#21516;&#30340;&#26159;&#65292;Burp&#20250;&#29983;&#25104;&#19968;&#20010;&#20027;&#26426;&#35777;&#20070;&#19982;&#27599;&#19968;&#20010;SSL&#36830;&#25509;&#20351;&#29992;&#65292;&#20351;&#29992;&#25351;&#23450;&#30340;&#20027;&#26426;&#21517;&#12290;

d. &#20351;&#29992;&#33258;&#23450;&#20041;&#35777;&#20070;&#65288;Use a custom certificate&#65289;&#8212;&#8212; &#27492;&#36873;&#39033;&#21487;&#20197;&#21152;&#36733;&#19968;&#20010;&#29305;&#23450;&#30340;&#35777;&#20070;&#65288;PKCS&#65283;12&#26684;&#24335;&#65289;&#21576;&#29616;&#32473;&#27983;&#35272;&#22120;&#12290;&#22914;&#26524;&#20351;&#29992;&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#19968;&#20010;&#29305;&#23450;&#30340;&#26381;&#21153;&#22120;&#35777;&#20070;&#65288;&#20363;&#22914;&#65292;&#19982;&#32473;&#23450;&#30340;&#24207;&#21015;&#21495;&#25110;&#35777;&#20070;&#38142;&#65289;&#65292;&#23458;&#25143;&#31471;&#24212;&#35813;&#20351;&#29992;&#36825;&#20010;&#36873;&#39033;&#12290;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:b306d8d8-01a6-46c1-b372-5fed82f63e20" class="outline-4">
<h4 id="h:b306d8d8-01a6-46c1-b372-5fed82f63e20"><code>Proxy--&gt;HTTP history</code> 历史记录History</h4>
<div class="outline-text-4" id="text-h:b306d8d8-01a6-46c1-b372-5fed82f63e20">
<p>
Burp Proxy的历史记录由HTTP history和WebSockets history（用不到）两个部分组成。
</p>


<figure id="orga6d924e">
<img src="./images/Snipaste_2023-05-21_00-55-02.png" alt="Snipaste_2023-05-21_00-55-02.png" width="50%">

</figure>

<p>
HTTP history界面由筛选过滤器、历史记录列表、消息详情3个部分组成。
</p>


<figure id="orge14cbe7">
<img src="./images/Snipaste_2023-05-21_00-55-55.png" alt="Snipaste_2023-05-21_00-55-55.png" width="50%">

</figure>


<figure id="orgda0d3d2">
<img src="./images/Snipaste_2023-05-21_00-56-31.png" alt="Snipaste_2023-05-21_00-56-31.png" width="50%">

</figure>

<p>
当我们在某一条历史记录上单击，会在下方的消息详解块显示此条消息的文本详细信息。当我们在某条消息上双击，则会弹出此条消息的详细对话框。
</p>


<figure id="org6e04e44">
<img src="./images/Snipaste_2023-05-21_00-59-25.png" alt="Snipaste_2023-05-21_00-59-25.png" width="50%">

</figure>

<p>
我们可以点击对话框右上方的【Previous】、【Next】按钮，浏览上一条或下一条消息的内容，也可以修改Raw的请求参数，然后执行多种【Action】操作。
</p>


<figure id="orgcdc9b90">
<img src="./images/Snipaste_2023-05-21_01-00-09.png" alt="Snipaste_2023-05-21_01-00-09.png" width="50%">

</figure>

<p>
历史消息列表中主要包含请求序列号、请求协议和主机名、请求的方式、URL路径、请求参数、Cookie、是否用户编辑过消息、服务器端返回的HTTP状态码等信息。通过这些信息，我们可以对一次客户端与服务器端交互的HTTP消息详情做出准确的分析，同时，在下方的详情视图中，也提供基于正则表达式方式的匹配查找功能，更好的方便渗透测试人员查找消息体中的相关信息。
</p>


<figure id="orgb910654">
<img src="./images/Snipaste_2023-05-21_01-01-01.png" alt="Snipaste_2023-05-21_01-01-01.png" width="50%">

</figure>

<p>
当我们在做系统的安全评估过程中，会在HTTP history中保存了大量的日志记录，为了更便捷的管理历史消息，Burp提供了筛选过滤器功能。当我们点击HTTP history标签下的Filter时，将弹出筛选过滤器界面。
</p>


<figure id="org827ae35">
<img src="./images/Snipaste_2023-05-21_01-01-46.png" alt="Snipaste_2023-05-21_01-01-46.png" width="50%">

</figure>

<p>
按照过滤条件的不同，筛选过滤器划分出7个子板块，分别是:
</p>
<ul class="org-ul">
<li>Filter by request type按照请求类型过滤：你可以选择仅显示当前作用域的、仅显示有服务端响应的和仅显示带有请求参数的消息。
<ul class="org-ul">
<li>Show only in-sope iterms: 当你勾选“仅显示当前作用域”时，此作用域需要在Burp Target的Scope选项中进行配置，需要搭配Burp Target使用（后面会说）。</li>
<li>Hide iterms without reqsponse: 隐藏没有响应的数据包</li>
<li>Show only parameterized requests: 只显示有请求参数的请求。</li>
</ul></li>

<li>Filter by MIME type按照MIME类型（多用途互联网邮件扩展类型）过滤：你可以控制是否显示服务器端返回的不同的文件类型的消息，比如只显示HTML、CSS或者图片。此过滤器目前支持HTML、Script、XML、CSS、其他文本、图片、Flash、二进制文件8种形式。</li>

<li>Filter by status code按照服务器返回的HTTP状态码过滤：Burp根据服务器的状态码，按照2XX，3XX，4XX，5XX分别进行过滤。比如，如果你只想显示返回状态码为200的请求成功消息，则勾选2XX。</li>

<li>Filter by search term按照查找条件过滤：此过滤器是针对服务器端返回的消息内容，与输入的关键字进行匹配，具体的匹配方式，你可以选择
<ul class="org-ul">
<li>（1）Regex正则表达式 （2）Case sensitive大小写敏感 （3）Negative search否定查找</li>
<li>三种方式可以任意组合，前面两种匹配方式容易理解，第3种匹配方式是指与关键字匹配上的将不再显示。</li>
</ul></li>

<li>Filter by file extension按照文件类型过滤：通过文件类型在过滤消息列表，这里有两个选择可供操作。一是仅显示哪些，另一个是不显示哪些。如果是仅显示哪些，在show only的输入框中填写显示的文件类型，同样，如果不显示哪些文件类型，只要在hide的输入框中填写不需要显示的文件类型即可。</li>

<li>Filter by annotation按照注解过滤：此过滤器的功能是指，根据每一个消息拦截时候的备注或者是否高亮来作为筛选条件控制哪些消息在历史列表中显示。</li>

<li>Filter by listener按照监听端口过滤：此过滤器通常使用于当我们在Proxy Listeners中多个监听端口时，仅仅显示某个监听端口通信的消息，一般情况下，搭配中间件、数据库等漏洞使用。</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:0da0fe27-d0c4-421e-b209-75d2ad8fc88a" class="outline-3">
<h3 id="h:0da0fe27-d0c4-421e-b209-75d2ad8fc88a"><code>Target</code></h3>
<div class="outline-text-3" id="text-h:0da0fe27-d0c4-421e-b209-75d2ad8fc88a">
<p>
Burp Target 组件主要包含站点地图、目标域、Target 工具三部分组成，可以帮助渗透测试人员更好地了解目标应用的整体状况、当前工作涉及哪些目标域、分析可能存在的攻击面等信息，下面我们就分别来看看Burp Target的三个组成部分。
</p>

<p>
本章的主要内容有：
</p>
<ul class="org-ul">
<li>目标域设置 Target Scope</li>
<li>站点地图 Site Map</li>
<li>Target 工具的使用</li>
</ul>
</div>
<div id="outline-container-h:a58f50ea-40d7-4b9b-ade8-49def5164a60" class="outline-4">
<h4 id="h:a58f50ea-40d7-4b9b-ade8-49def5164a60"><code>Trget--&gt;Scope</code> 目标域设置</h4>
<div class="outline-text-4" id="text-h:a58f50ea-40d7-4b9b-ade8-49def5164a60">
<p>
Target Scope中作用域的定义比较宽泛，通常来说，当我们对某个系统进行渗透测试时，可以通过域名或者主机名去限制拦截内容，这里域名或主机名就是我们说的作用域；如果我们想限制得更为细粒度化，比如，你只想拦截login目录下的所有请求，也可以在此设置，此时，作用域就是目录。总体来说，Target Scope主要使用于下面几种场景中：
</p>

<ul class="org-ul">
<li>限制站点地图和Proxy历史中的显示结果</li>
<li>告诉Burp Proxy拦截哪些请求</li>
<li>Burp Spider抓取哪些内容，2.0版本后改为在Site map中右击选择 Engagement tools&#x2013;&gt;Discover content发现目录</li>
<li>Burp Scan自动扫描哪些作用域的安全漏洞</li>
<li>在Burp Intruder和Burp Repeater中指定URL</li>
</ul>

<p>
<b>注意：设置了目标域仅仅是让Target&#x2013;&gt;Site mapt和Proxy&#x2013;&gt;HTTP history过滤目标。跟正常拦截没有关系，流量还是经过Burpsuite，只是不展示出来。</b>
</p>

<p>
通过Target Scope我们能方便地控制Burp的拦截范围、操作对象，减少无效的噪音（此处演示一下）。在Target Scope的设置中，主要包含两部分功能：包含规则和去除规则。
</p>


<figure id="org11ba14b">
<img src="./images/Snipaste_2023-05-21_01-58-27.png" alt="Snipaste_2023-05-21_01-58-27.png" width="50%">

</figure>

<ul class="org-ul">
<li>Include in scpoe：包含作用域，过滤想要的数据</li>
<li>Exclude from scope：不包含作用域，过滤不想要的数据</li>
</ul>


<p>
use advanced scope control高级设置：
</p>
<ul class="org-ul">
<li>勾选高级设置后，Add时有更多选项。可以精确到协议、域名或IP地址、端口、文件名，做更细致的过滤。</li>
</ul>


<figure id="org273952b">
<img src="./images/Snipaste_2023-05-21_01-59-04.png" alt="Snipaste_2023-05-21_01-59-04.png" width="50%">

</figure>


<figure id="orga3e8db1">
<img src="./images/Snipaste_2023-05-21_01-59-32.png" alt="Snipaste_2023-05-21_01-59-32.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:89415902-8904-44b7-8e93-2a6f87746f73" class="outline-4">
<h4 id="h:89415902-8904-44b7-8e93-2a6f87746f73"><code>Target--&gt;Site Map</code> 站点地图</h4>
<div class="outline-text-4" id="text-h:89415902-8904-44b7-8e93-2a6f87746f73">
<p>
当我们设置了Target Scope （默认全部为允许），使用Burp Proxy进行代理拦截，在渗透测试中通过浏览器代理浏览应用时，Burp会自动将浏览信息记录下来，包含每一个请求和应答的详细信息，保存在Target站点地图中。
</p>

<p>
下图所示站点地图为一次渗透测试中，通过浏览器浏览的历史记录在站点地图中的展现结果。
</p>


<figure id="org8c0a8a5">
<img src="./images/Snipaste_2023-05-21_02-00-52.png" alt="Snipaste_2023-05-21_02-00-52.png" width="50%">

</figure>

<p>
从图中我们可以看出，Site Map的左边为访问的URL，按照网站的层级和深度，树形展示整个应用系统的结构和关联其他域的url情况；右边显示的是某一个url被访问的明细列表，共访问哪些url，请求和应答内容分别是什么，都有着详实的记录。 基于左边的树形结构，我们可以选择某个分支，对指定的路径进行扫描和抓取。
</p>
<ul class="org-ul">
<li>在Site map中右击选择 Engagement tools&#x2013;&gt;Discover content发现目录</li>
</ul>



<figure id="orge969120">
<img src="./images/img_20250525_152140.png" alt="img_20250525_152140.png" width="50%">

</figure>

<p>
同时，我们也可以将某个域直接加入Target Scope中。
</p>
<ul class="org-ul">
<li>在Site map中右击选择Add to scope</li>
</ul>


<figure id="orgaded368">
<img src="./images/Snipaste_2023-05-21_02-02-09.png" alt="Snipaste_2023-05-21_02-02-09.png" width="50%">

</figure>

<p>
除了加入 Target Scope外，从上图中，我们也可以看到，对于站点地图的分层，可以通过折叠和展开操作，更好的分析站点结构。
</p>
</div>
</div>
<div id="outline-container-h:5cd9bbfb-2c5f-4bc3-9495-c0e04f42f417" class="outline-4">
<h4 id="h:5cd9bbfb-2c5f-4bc3-9495-c0e04f42f417">Target工具的使用</h4>
<div class="outline-text-4" id="text-h:5cd9bbfb-2c5f-4bc3-9495-c0e04f42f417">
<p>
Target 工具的使用的使用主要包括以下部分：
</p>

<ul class="org-ul">
<li>手工获取站点地图</li>
<li>站点比较</li>
<li>攻击面分析</li>
</ul>

<p>
当我们手工获取站点地图时，需要遵循以下操作步骤：
</p>

<p>
1、设置浏览器代理和Burp Proxy代理，并使之能正常工作。
2、关闭Burp Proxy的拦截功能。
3、手工浏览网页，这时，Target会自动记录站点地图信息。
</p>

<p>
手工获取站点地图的方式有一个好处就是，我们可以根据自己的需要和分析，自主地控制访问内容，记录的信息比较准确但是可能不够全面。与自动抓取相比，则需要更长的时间，如果需要渗透测试的目标是一个大型系统，则对于系统的功能点依次操作一遍所需要的精力和时间对渗透测试人员来说付出都是很大的。
</p>

<p>
攻击面分析是Burp Suite 交互工具（Engagement tools）中的功能，这里我们先看看Analyze Target使用。
</p>

<p>
1.首先，我们通过站点地图，打开Analyze Target，如图所示。Engagement tools&#x2013;&gt;Analyze target
</p>


<figure id="orge0b89b5">
<img src="./images/Snipaste_2023-05-21_02-03-58.png" alt="Snipaste_2023-05-21_02-03-58.png" width="50%">

</figure>

<p>
2.在弹出的分析界面中，我们能看到Summary概况、Dynamic URLs动态URL、Static URLs静态URL、Parameters参数4个视图。
</p>


<figure id="org530ad69">
<img src="./images/Snipaste_2023-05-21_02-04-21.png" alt="Snipaste_2023-05-21_02-04-21.png" width="50%">

</figure>

<p>
3.Summary概况视图主要展示当前站点动态URL数量、静态URL数量、参数的总数、唯一的参数名数目，通过这些信息，帮助我们对当前站点的总体状况有粗线条的了解。
</p>

<p>
伪静态页面：不是静态页面，伪装成静态，实际上是动态。如。
</p>
<div class="org-src-container">
<pre class="src src-sh">&#21407;&#22987;&#21160;&#24577;&#39029;&#38754;&#65306; www.xxx.com/public/js?<span style="color: #a0522d;">version</span>=5.1.4
&#21464;&#24418;&#65306;www.xxxcom/public/js/5.14  &#19981;&#24102;&#20219;&#20309;&#21442;&#25968;
</pre>
</div>

<p>
4.Dynamic URLs动态URL视图展示所有动态的URL请求和应答消息，跟其他的工具类似，当你选中某一条消息时，下方会显示此消息的详细信息。
</p>


<figure id="org53a4f96">
<img src="./images/Snipaste_2023-05-21_02-05-00.png" alt="Snipaste_2023-05-21_02-05-00.png" width="50%">

</figure>

<p>
5.Static URLs静态URL视图与动态URL视图类似，如图：
</p>


<figure id="orgf2a00d8">
<img src="./images/Snipaste_2023-05-21_02-05-21.png" alt="Snipaste_2023-05-21_02-05-21.png" width="50%">

</figure>

<p>
6.Parameters参数视图有上中下三部分组成，上部为参数和参数计数统计区，你可以通过参数使用的次数进行排序，对使用频繁的参数进行分析；中部为参数对应的使用情况列表，记录对于的参数每一次的使用记录；下部为某一次使用过程中，请求消息和应答消息的详细信息。
</p>


<figure id="orgb75d621">
<img src="./images/Snipaste_2023-05-21_02-06-12.png" alt="Snipaste_2023-05-21_02-06-12.png" width="50%">

</figure>

<p>
在使用攻击面分析功能时，需要注意，此功能主要是针对站点地图中的请求URL进行分析，如果某些URL没有记录（未点击、未爬取到），则不会被分析到。
</p>

<p>
同时，在实际使用中，存在很多站点使用伪静态，如果请求的URL中不带有参数，则分析时无法区别，只能当做静态URL来分析。
</p>
</div>
</div>
</div>
<div id="outline-container-h:9bda798b-1189-43bb-992a-9d56832f9d42" class="outline-3">
<h3 id="h:9bda798b-1189-43bb-992a-9d56832f9d42">Discover Content 爬取</h3>
<div class="outline-text-3" id="text-h:9bda798b-1189-43bb-992a-9d56832f9d42">
<p>
通过前一章的学习，我们了解到，存在于Burp Target中的站点信息，我们可以直接传送到Burp Spider中进行站点信息的爬取。
</p>

<p>
在burp1.7版本中，存在一个独立模块，命名是Burp Spider。而在burp的2.0版本后，该模块被整合至交互工具（Engagement tools）中，命名是Discover Content。
</p>


<ul class="org-ul">
<li>鼠标右键Engagement tools交互工具&#x2013;&gt;Discover content发现目录</li>
</ul>

<p>
这一章我们重点来学习Discover Content的使用，主要包含三个方面：
</p>

<ul class="org-ul">
<li>控制（Control）</li>
<li>配置（Config）</li>
<li>站点地图（Site Map）</li>
</ul>

<p>
Discover Content的功能主要使用于大型的应用系统测试，它能在很短的时间内帮助我们快速地了解系统的结构和分布情况，下面我们就先来看看控制（Control）。
</p>
</div>
<div id="outline-container-h:2c659c2c-6147-4848-a7ac-3272935ffaf6" class="outline-4">
<h4 id="h:2c659c2c-6147-4848-a7ac-3272935ffaf6">Control 控制</h4>
<div class="outline-text-4" id="text-h:2c659c2c-6147-4848-a7ac-3272935ffaf6">
<p>
Discover Content 控制界面由发现会话状态（Discovery Session Status）和排列任务（QueuedTasks）两部分组成。
</p>

<p>
点击一下 "Session is not running" 就开始主动爬取操作，再点一下暂停。
</p>



<figure id="orgb1bda5a">
<img src="./images/Snipaste_2023-05-21_02-07-41.png" alt="Snipaste_2023-05-21_02-07-41.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:1329a04d-a24a-4ad8-b7d4-71e986137845" class="outline-4">
<h4 id="h:1329a04d-a24a-4ad8-b7d4-71e986137845">Config 配置</h4>
<div class="outline-text-4" id="text-h:1329a04d-a24a-4ad8-b7d4-71e986137845">
<p>
Discover content 配置界面由Target、Filenames、File Extensions、Discovery Engine四部分组成。
</p>

<ul class="org-ul">
<li>Target（目标）
<ul class="org-ul">
<li>Start directory：开始目录</li>
<li>Discover：爬取对象的类型
<ul class="org-ul">
<li>Recurse Subdirectories：递归子目录</li>
</ul></li>
</ul></li>
</ul>


<figure id="org33d1e2a">
<img src="./images/img_20250525_205905.png" alt="img_20250525_205905.png" width="50%">

</figure>

<ul class="org-ul">
<li><p>
Filenames（文件名）
</p>

<p>
通常默认就行。配置Burp用于生成要测试的文件名的源。
</p>

<ul class="org-ul">
<li>Built-in short file list：内置短文件列表</li>
<li>Built-in short directory list：内置短目录列表</li>
<li>Built-in long file list：内置长文件列表</li>
<li>Built-in long directory list：内置长目录列表</li>
<li>Custom file list：自定义文件列表</li>
<li>Custom directory list：自定义目录列表</li>
<li>Names observed in use on target site：在目标站点上观察到的使用中的名称</li>
<li>Derivations based on discovered items：基于已发现项目的推导</li>
</ul></li>
</ul>


<figure id="org588bab1">
<img src="./images/Snipaste_2023-05-21_02-09-30.png" alt="Snipaste_2023-05-21_02-09-30.png" width="50%">

</figure>

<ul class="org-ul">
<li><p>
File Extensions（文件扩展名）
</p>

<p>
本项设置会控制发现会话如何向正在测试的文件中添加文件扩展名。
</p>

<ul class="org-ul">
<li>Test these extensions 测试这些扩展文件：asp, aspx, htm, html, jsp, php</li>
<li>Test all extensions observed in use on target site, except for 测试所有在目标站点上监测到的扩展文件，除了以下这些：class, com, doc, exe, gif, gz, jar, jpeg,jpg, mp3, mpeg&#x2026;</li>
<li>Test these variant extensions on discoverd files 在发现的文件上测试这些变体扩展名：bac, BAC, backup, BACKUP, bak, BAK, conf, cs &#x2026;</li>
<li>Test file stems with no extension 测试没有扩展名的文件</li>
</ul></li>
</ul>


<figure id="org47ecaa9">
<img src="./images/Snipaste_2023-05-21_02-10-19.png" alt="Snipaste_2023-05-21_02-10-19.png" width="50%">

</figure>

<ul class="org-ul">
<li><p>
Discovery Engine（发现引擎）
</p>

<p>
这些设置用来控制发现站点内容时发出HTTP请求的引擎，保持默认配置即可。
</p></li>
</ul>


<figure id="orgaa45465">
<img src="./images/Snipaste_2023-05-21_02-11-03.png" alt="Snipaste_2023-05-21_02-11-03.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:06fc9f3c-b0ec-4858-82ed-01a38f9eeb00" class="outline-4">
<h4 id="h:06fc9f3c-b0ec-4858-82ed-01a38f9eeb00">Site Map 站点地图</h4>
<div class="outline-text-4" id="text-h:06fc9f3c-b0ec-4858-82ed-01a38f9eeb00">
<p>
爬取完成后形成的站点地图，和Target模块中的站点地图类似。唯一的区别是这里只是记录，没有分析漏洞。
</p>
</div>
</div>
</div>
<div id="outline-container-h:abc8282b-26b4-48f1-a967-c3b4df9c78e6" class="outline-3">
<h3 id="h:abc8282b-26b4-48f1-a967-c3b4df9c78e6"><code>Dashboard--&gt;scan</code> 控制台扫描</h3>
<div class="outline-text-3" id="text-h:abc8282b-26b4-48f1-a967-c3b4df9c78e6">
<p>
Burp Scan的功能主要是用来自动检测web系统的各种漏洞，我们可以使用Burp Scan代替我们手工去对系统进行普通漏洞类型的渗透测试，从而能使得我们把更多的精力放在那些必须要人工去验证的漏洞上。
</p>

<p>
Burp Scan这个功能模块的作用是扫描，可以用作Web应用程序的扫描器，是Pro版独有的，社区版则不带有此功能。2.0版本以后，burp取消Scanner模块，Scan功能集成在Dashboard（控制台）模块中。
</p>


<figure id="orgf93a66a">
<img src="./images/Snipaste_2023-05-21_02-12-02.png" alt="Snipaste_2023-05-21_02-12-02.png" width="50%">

</figure>

<p>
本章的主要内容有：
</p>
<ul class="org-ul">
<li>启动方法</li>
<li>被动扫描</li>
<li>主动扫描</li>
<li>导出扫描报告</li>
</ul>
</div>
<div id="outline-container-h:5f0f67e4-3064-49f6-a4d6-fbd50375f255" class="outline-4">
<h4 id="h:5f0f67e4-3064-49f6-a4d6-fbd50375f255">启动方法</h4>
<div class="outline-text-4" id="text-h:5f0f67e4-3064-49f6-a4d6-fbd50375f255">
<p>
1、Burp 控制台（Burp Dashboard）：默认捕获按钮开启，实现被动爬取和审计。
</p>

<ul class="org-ul">
<li>Live passive crawl from Porxy (all traffic)：被动爬虫 。 开启后在Target的站点地图中就可以看到了。</li>
<li>Live audit from Porxy (all traffic)：审计</li>
</ul>


<figure id="orgaf3ca1c">
<img src="./images/Snipaste_2023-05-21_02-12-44.png" alt="Snipaste_2023-05-21_02-12-44.png" width="50%">

</figure>

<p>
2、创建扫描
</p>

<ul class="org-ul">
<li>方法1：Dashboar&#x2013;&gt;New Scan</li>
<li>方法2：Target&#x2013;&gt;Site map&#x2013;&gt;右键</li>
<li>方法3：Proxy&#x2013;&gt;HTTP history&#x2013;&gt;右键</li>
</ul>


<figure id="org8d81406">
<img src="./images/Snipaste_2023-05-21_02-13-10.png" alt="Snipaste_2023-05-21_02-13-10.png" width="50%">

</figure>


<p>
Target：Site map下又有2个scan：
</p>
<ul class="org-ul">
<li>Passively scan this branch 被动扫描</li>
<li>Actively scan this branch 主动扫描</li>
</ul>


<figure id="orgea11153">
<img src="./images/Snipaste_2023-05-21_02-13-47.png" alt="Snipaste_2023-05-21_02-13-47.png" width="50%">

</figure>

<p>
Proxy&#x2013;&gt;HTTP history：
</p>
<ul class="org-ul">
<li>Do passive scan 被动扫描</li>
<li>Do active scan 主动扫描</li>
</ul>


<figure id="org3f5ec6f">
<img src="./images/Snipaste_2023-05-21_02-14-14.png" alt="Snipaste_2023-05-21_02-14-14.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:671679d3-c147-4806-99e6-2af717fce913" class="outline-4">
<h4 id="h:671679d3-c147-4806-99e6-2af717fce913">被动扫描</h4>
<div class="outline-text-4" id="text-h:671679d3-c147-4806-99e6-2af717fce913">
<p>
在Dashboard控制台模块下，有关于爬虫和审计两个功能的设置：
</p>
<ul class="org-ul">
<li>Live passive crawl from Proxy：实时被动爬虫（探测路径）</li>
<li>Live audit from Proxy：实时审计（审计漏洞）</li>
</ul>


<figure id="org08e85cd">
<img src="./images/Snipaste_2023-05-21_02-14-58.png" alt="Snipaste_2023-05-21_02-14-58.png" width="50%">

</figure>

<p>
当使用被动扫描时，Burp几乎不额外构造请求进行爬虫和扫描，它根据用户浏览网页进行常规请求， <b>对已经存在的请求和响应进行简单分析，这对系统的检测比较安全</b> ，尤其在你授权访问的许可下进行的，通常适用于生产环境的检测。一般来说，下列这些漏洞在被动模式中容易被检测出来：
</p>

<ol class="org-ol">
<li>提交的密码为未加密的明文（可用DVWA演示）</li>
<li>不安全的Cookie的属性，比如缺少的HttpOnly和安全标志</li>
<li>cookie的范围缺失</li>
<li>跨域脚本包含和站点引用泄漏</li>
<li>表单值自动填充，尤其是密码</li>
<li>SSL保护的内容缓存</li>
<li>目录列表</li>
<li>提交密码后应答延迟</li>
<li>session令牌的不安全传输</li>
<li>敏感信息泄露，像内部IP地址，电子邮件地址，堆栈跟踪等信息泄漏</li>
<li>不安全的ViewState的配置</li>
<li>错误或者不规范的Content-type指令</li>
</ol>

<p>
虽然被动扫描模式相比于主动模式有很多的不足，但同时也具有主动模式不具备的优点，除了前面说的对系统的检测在我们授权的范围内比较安全外，当某种业务场景的测试，每测试一次都会导致业务的某方面问题时，我们也可以使用被动扫描模式，去验证问题是否存在，减少测试的风险。
</p>
</div>
</div>
<div id="outline-container-h:a260ad5d-0542-462d-9bfd-17b88edb97d1" class="outline-4">
<h4 id="h:a260ad5d-0542-462d-9bfd-17b88edb97d1">主动扫描</h4>
<div class="outline-text-4" id="text-h:a260ad5d-0542-462d-9bfd-17b88edb97d1">
<p>
在Dashboard控制台模块下，点击New scan，进行扫描配置。会遵循 robot 协议的。
</p>


<figure id="org21e0e77">
<img src="./images/Snipaste_2023-05-21_02-16-01.png" alt="Snipaste_2023-05-21_02-16-01.png" width="50%">

</figure>

<p>
当使用主动扫描模式时，Burp 会向应用发送新的请求并通过payload验证漏洞。这种模式下的操作，会产生大量的请求和应答数据，直接影响系统的性能，通常使用在非生产环境。它对下列的两类漏洞有很好的扫描效果：
</p>

<ol class="org-ol">
<li>客户端的漏洞，像XSS、Http头注入、操作重定向；</li>
<li>服务端的漏洞，像SQL注入、命令行注入、文件遍历。</li>
</ol>

<p>
对于第一类漏洞，Burp在检测时，会提交一下input域，然后根据应答的数据进行解析。在检测过程中，Burp会对基础的请求信息进行修改，即根据漏洞的特征对参数进行修改，模拟人工测试，以达到检测漏洞的目的。 对于第二类漏洞，一般来说检测比较困难，因为是发生在服务器侧。比如说SQL注入，有可能是返回数据库错误提示信息，也有可能是什么也不反馈。
</p>

<p>
Burp在检测过程中，采用各个技术来验证漏洞是否存在，比如诱导时间延迟、强制修改Boolean值，与模糊测试的结果进行比较，以达到高准确性的漏洞扫描报告。
</p>
</div>
<div id="outline-container-h:d93aaaa7-7f25-4990-b5c0-c341048b794e" class="outline-5">
<h5 id="h:d93aaaa7-7f25-4990-b5c0-c341048b794e">扫描配置</h5>
<div class="outline-text-5" id="text-h:d93aaaa7-7f25-4990-b5c0-c341048b794e">
<p>
Scan details 扫描细节
</p>


<figure id="orgde0f616">
<img src="./images/Snipaste_2023-05-21_02-17-11.png" alt="Snipaste_2023-05-21_02-17-11.png" width="50%">

</figure>

<ul class="org-ul">
<li>Scan Type：扫描类型，分为 Crawl and audit 爬虫和审计和 Crawl 只爬虫。</li>

<li>URLs to Scan：扫描目标URL</li>

<li>Ignore protocols in URLs to scan: 忽略协议带来的影响</li>

<li>Detailed scope configuration：详细的范围配置，通过 Included URL prefixes（包括URL前缀）和Excluded URL prefixes（不包括URL前缀）来配置扫描。</li>

<li>Use advanced scope control：使用高级的范围控制，如果勾选，将配置Included URLs（包含的URL）和Excluded URLs（不包含的URL）来配置扫描。
<ul class="org-ul">
<li>点击 Add，弹出配置窗口：
<ul class="org-ul">
<li>Protocol：HTTP、HTTPS、Any 三个选项</li>
<li>Host or IP range：输入正则表达式、IP范围或者留白</li>
<li>Port：输入正则表达式或者留白</li>
<li>File：输入正则表达式、IP范围或者留白</li>
</ul></li>
</ul></li>
</ul>



<figure id="org2b77da2">
<img src="./images/img_20250525_213737.png" alt="img_20250525_213737.png" width="50%">

</figure>


<p>
Scan configuration 扫描配置：保持默认。
</p>

<p>
Application login 应用登录：如果扫描过程中需要登录，用于配置 username 和 password。一般不推荐登录扫描，它不可能把网站所有的漏洞都扫描出来，扫描器对安全人员来说只是一种参考，因为登录进去是可以人工控制的，交给扫描器的话有可能会增加大量脏数据对服务端造成影响。
</p>


<figure id="org45a64c9">
<img src="./images/Snipaste_2023-05-21_02-19-27.png" alt="Snipaste_2023-05-21_02-19-27.png" width="50%">

</figure>

<p>
Resource pool 资源池
</p>


<figure id="orgc0fcea7">
<img src="./images/Snipaste_2023-05-21_02-19-57.png" alt="Snipaste_2023-05-21_02-19-57.png" width="50%">

</figure>

<ul class="org-ul">
<li>Create new resource pool 创建新的资源池</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">1.Name&#65306;&#33258;&#23450;&#20041;
2.Maximum concurret requests&#65306;&#26368;&#22823;&#24182;&#21457;&#35831;&#27714;&#65292;&#40664;&#35748;&#37197;&#32622;&#20026; 10
3.Delay between request&#65306;&#35831;&#27714;&#20043;&#38388;&#24310;&#26102;
4.add random variations&#65306;&#28155;&#21152;&#38543;&#26426;&#21464;&#21270;&#65292;&#35831;&#27714;&#21644;&#35831;&#27714;&#20043;&#38388;&#30340;&#38388;&#38548;&#26159;&#38543;&#20415;&#21464;&#25442;&#30340;
5.miliseconds&#65306;&#27627;&#31186;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:153c8871-31cf-4ef3-be42-15af37a8cd5e" class="outline-5">
<h5 id="h:153c8871-31cf-4ef3-be42-15af37a8cd5e">开始扫描</h5>
<div class="outline-text-5" id="text-h:153c8871-31cf-4ef3-be42-15af37a8cd5e">
<p>
1.点击New scan，在弹框URLs to Scan中输入URL。如dvwa靶场地址 <a href="http://10.0.0.151:8080">http://10.0.0.151:8080</a>
</p>


<figure id="orge812d84">
<img src="./images/Snipaste_2023-05-21_02-20-48.png" alt="Snipaste_2023-05-21_02-20-48.png" width="50%">

</figure>

<p>
2.Site map会展示该url的目录结构
</p>


<figure id="org2b8652e">
<img src="./images/Snipaste_2023-05-21_02-21-11.png" alt="Snipaste_2023-05-21_02-21-11.png" width="50%">

</figure>

<p>
3.Dashboard会展示扫描的进度与问题总计
</p>

<ul class="org-ul">
<li>isuues：高中低和infomation 4个等级</li>
<li>View details: 查看详情
<ul class="org-ul">
<li>Issue activity: 查看有哪些漏洞</li>
</ul></li>
</ul>


<figure id="orgad05a88">
<img src="./images/Snipaste_2023-05-21_02-21-35.png" alt="Snipaste_2023-05-21_02-21-35.png" width="50%">

</figure>
</div>
</div>
</div>
<div id="outline-container-h:6b2b4585-bcf1-4ec9-b294-6d5cb52dc24b" class="outline-4">
<h4 id="h:6b2b4585-bcf1-4ec9-b294-6d5cb52dc24b">导出扫描报告</h4>
<div class="outline-text-4" id="text-h:6b2b4585-bcf1-4ec9-b294-6d5cb52dc24b">
<p>
1.在dashboard点View details在Issue activity中全选右键，点击Report selected issues
</p>

<p>
或者，在target-&gt;site map，选择某个url，右侧issues按ctrl+a全选，右键，点击Report selected issues
</p>


<figure id="orge48f825">
<img src="./images/Snipaste_2023-05-21_02-22-13.png" alt="Snipaste_2023-05-21_02-22-13.png" width="50%">

</figure>

<p>
2.选择报告格式
</p>
<ul class="org-ul">
<li>HTML：生成HTML格式的报告，以便在浏览器中打印或查看。</li>
<li>XML：生成XML格式的报告，适合导入其他工具或报告框架。</li>
</ul>

<p>
3.选择漏洞明细包含内容（保持默认配置）
</p>
<div class="org-src-container">
<pre class="src src-sh">&#38382;&#39064;&#32972;&#26223; &#8211; &#38382;&#39064;&#30340;&#26631;&#20934;&#25551;&#36848;&#65292;&#23545;&#20110;&#25152;&#26377;&#30456;&#21516;&#31867;&#22411;&#30340;&#38382;&#39064;&#37117;&#26159;&#30456;&#21516;&#30340;&#12290;
&#20462;&#22797;&#24314;&#35758; &#8211; &#26631;&#20934;&#30340;&#20462;&#22797;&#24314;&#35758;&#65292;&#23545;&#20110;&#25152;&#26377;&#30456;&#21516;&#31867;&#22411;&#30340;&#38382;&#39064;&#37117;&#26159;&#30456;&#21516;&#30340;&#12290;
&#21442;&#32771;&#20869;&#23481; &#8211; &#28431;&#27934;&#30340;&#34917;&#20805;&#35828;&#26126;&#12290;
&#38382;&#39064;&#35814;&#24773; &#8211; &#23545;&#20110;&#26576;&#20123;&#31867;&#22411;&#30340;&#38382;&#39064;&#65292;&#35814;&#24773;&#20013;&#21253;&#21547;&#26377;&#20851;&#29305;&#23450;&#38382;&#39064;&#30340;&#19968;&#20123;&#20854;&#20182;&#33258;&#23450;&#20041;&#20449;&#24687;&#65292;&#35831;&#27880;&#24847;&#26576;&#20123;&#21487;&#33021;&#36866;&#29992;&#20110;&#29305;&#23450;&#38382;&#39064;&#23454;&#20363;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;
&#20462;&#22797;&#32454;&#33410; &#8211; &#23545;&#20110;&#26576;&#20123;&#31867;&#22411;&#30340;&#38382;&#39064;&#65292;&#27492;&#22788;&#35828;&#26126;&#20102;&#36827;&#19968;&#27493;&#30340;&#20462;&#22797;&#32454;&#33410;&#65292;&#20174;&#36825;&#37324;&#20063;&#33021;&#30475;&#21040;&#38382;&#39064;&#30340;&#26576;&#20123;&#22266;&#23450;&#29305;&#24449;&#12290;
&#28431;&#27934;&#20998;&#31867; &#8211; &#22522;&#20110;<span style="color: #8b2252;">"&#24120;&#35265;&#28431;&#27934;&#20030;&#20363;(Common Weakness Enumeration)"</span>&#23545;&#28431;&#27934;&#20570;&#20102;&#31616;&#21333;&#30340;&#20998;&#31867;&#12290;
</pre>
</div>


<figure id="org987b7e0">
<img src="./images/Snipaste_2023-05-21_02-23-31.png" alt="Snipaste_2023-05-21_02-23-31.png" width="50%">

</figure>

<p>
4.请求消息和应答消息设置（保持默认配置）
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000ff;">&#20197;&#19979;&#36873;&#39033;&#21487;&#29992;&#20110;&#35831;&#27714;</span>(requests)&#21644;&#21709;&#24212;(responses)&#65306;
&#19981;&#21253;&#25324;&#20219;&#20309;&#28040;&#24687; &#8211; &#25253;&#21578;&#19981;&#21253;&#21547;&#20219;&#20309;&#26377;&#20851;HTTP&#30340;&#20449;&#24687;&#12290;
&#21253;&#21547;&#30456;&#20851;&#25688;&#24405; &#8211; &#25253;&#21578;&#23558;&#24037;&#20855;&#20869;&#32467;&#26524;&#20013;&#31361;&#20986;&#26174;&#31034;&#30340;&#37096;&#20998;&#20197;&#21450;&#30456;&#20851;&#30340;HTTP&#20449;&#24687;&#21253;&#21547;&#22312;&#20869;&#12290;
&#21253;&#25324;&#23436;&#25972; &#8211; &#25253;&#21578;&#23558;&#21253;&#21547;&#23436;&#25972;&#30340;HTTP&#20449;&#24687;&#65292;&#21487;&#33021;&#21253;&#21547;&#19982;&#38382;&#39064;&#26080;&#20851;&#30340;&#37096;&#20998;&#12290;&#21487;&#20197;&#23558;&#27599;&#26465;&#28040;&#24687;&#38480;&#21046;&#20026;&#25351;&#23450;&#30340;
&#26368;&#22823;&#38271;&#24230;&#65292;&#20197;&#38450;&#27490;&#25253;&#21578;&#20013;&#21576;&#29616;&#36807;&#22823;&#30340;&#28040;&#24687;&#32780;&#23548;&#33268;&#25253;&#21578;&#24613;&#21095;&#33192;&#32960;&#12290;
</pre>
</div>


<figure id="orge7bf8f7">
<img src="./images/Snipaste_2023-05-21_02-24-05.png" alt="Snipaste_2023-05-21_02-24-05.png" width="50%">

</figure>


<p>
5.选择报告包含哪些漏洞（全选）
</p>


<figure id="org03759bd">
<img src="./images/Snipaste_2023-05-21_02-24-24.png" alt="Snipaste_2023-05-21_02-24-24.png" width="50%">

</figure>

<p>
6.指定报告存放位置、名称等属性
</p>
<ul class="org-ul">
<li>点击select file，选择路径，输入文件名称，例如：report.html，点击next，导出完成。（这一步记住，一定要加后缀名.html）</li>
</ul>


<figure id="orgcb2fa84">
<img src="./images/Snipaste_2023-05-21_02-25-05.png" alt="Snipaste_2023-05-21_02-25-05.png" width="50%">

</figure>
</div>
</div>
</div>
<div id="outline-container-h:cef92b90-5665-4be5-baf6-9f794effe0d5" class="outline-3">
<h3 id="h:cef92b90-5665-4be5-baf6-9f794effe0d5"><code>Intruder</code> 自动化测试</h3>
<div class="outline-text-3" id="text-h:cef92b90-5665-4be5-baf6-9f794effe0d5">
<p>
Burp Intruder作为Burp Suite中一款功能极其强大的自动化测试工具，通常被系统安全渗透测试人员被使用在各种任务测试的场景中。本章我们主要学习的内容有：
</p>

<ul class="org-ul">
<li>Intruder使用场景和操作步骤</li>
<li>Payload类型与处理</li>
<li>Payload 位置和攻击类型</li>
<li>可选项设置（Options）</li>
<li>Intruder 攻击和结果分析</li>
</ul>
</div>
<div id="outline-container-h:b9be307a-a274-4fad-b1b8-cd24da9cf29e" class="outline-4">
<h4 id="h:b9be307a-a274-4fad-b1b8-cd24da9cf29e">Intruder使用场景和操作步骤</h4>
<div class="outline-text-4" id="text-h:b9be307a-a274-4fad-b1b8-cd24da9cf29e">
<p>
在渗透测试过程中，我们经常使用Burp Intruder，它的工作原理是：Intruder在原始请求数据的基础上，通过修改各种请求参数，以获取不同的请求应答。每一次请求中，Intruder通常会携带一个或多个有效攻击载荷（Payload），在不同的位置进行攻击重放，通过应答数据的比对分析来获得需要的特征数据。Burp Intruder通常被使用在以下场景：
</p>

<ol class="org-ol">
<li>标识符枚举：Web应用程序经常使用标识符来引用用户、账户、资产等数据信息。例如，用户名，文件ID和账户号码。</li>
<li>提取有用的数据：在某些场景下，而不是简单地识别有效标识符，你需要通过简单标识符提取一些其他的数据。比如说，你想通过用户的个人空间id，获取所有用户在个人空间的昵称和年龄。</li>
<li>模糊测试：很多输入型的漏洞，如SQL注入，跨站脚本和文件路径遍历可以通过请求参数提交各种测试字符串，并分析错误消息和其他异常情况，来对应用程序进行检测。由于的应用程序的大小和复杂性，手动执行这个测试是一个耗时且繁琐的过程。这样的场景，可以通过设置Payload，通过Burp Intruder自动化地对Web应用程序进行模糊测试。</li>
</ol>


<p>
通常来说，使用Burp Intruder进行测试，主要遵循以下步骤：
1.确认Burp Suite安装正确并正常启动，且完成了浏览器的代理设置。
</p>

<p>
2.进入Burp Proxy选项卡，关闭代理拦截功能。有没有这步都行
</p>

<p>
3.进行历史日志（History）子选项卡，查找可能存在问题的请求日志，并通过右击菜单，发送到Intruder。
</p>

<p>
或者在登录时直接拦截，右键Send to Intruder
</p>


<figure id="org974dc27">
<img src="./images/Snipaste_2023-05-21_02-27-06.png" alt="Snipaste_2023-05-21_02-27-06.png" width="50%">

</figure>

<p>
4.进入 Intruder 选项卡，打开Target和Positions子选项卡。这时，你会看到上一步发送过来的请求消息。
</p>


<figure id="orgc77678b">
<img src="./images/Snipaste_2023-05-21_02-27-49.png" alt="Snipaste_2023-05-21_02-27-49.png" width="50%">

</figure>

<p>
5.因为我们了解到Burp Intruder攻击的基础是围绕刚刚发送过来的原始请求信息，在原始信息指定的位置上设置一定数量的攻击载荷Payload，通过Payload来发送请求获取应答消息。默认情况下，Burp Intruder会对请求参数和Cookie参数设置成Payload position，用$包裹起来。如上图红色标注位置所示。当发送请求时，会将$标识的参数替换为Payload。
</p>

<p>
6.在Position界面的右边，有【Add $】、【Clear $】、【Auto $】、【Refresh】四个按钮，是用来控制请求消息中的参数在发送过程中是否被Payload替换。【Clear $】 去掉所有标记；鼠标选中参数，点击【Add $】 标记参数。
</p>

<p>
7.打开Payload子选项卡，选择Payload的生成或者选择策略，默认情况下选择“Simple list"，当然你也可以通过下拉选择其他Payload类型或者手工添加。 接下来在Payload Options中加载字典。
</p>


<figure id="org7f2f113">
<img src="./images/Snipaste_2023-05-21_02-28-56.png" alt="Snipaste_2023-05-21_02-28-56.png" width="50%">

</figure>

<p>
8.此时，我们再回到Position界面，检查一下要爆破的参数是否正确，确认无误后，在界面的右上角，点击【Start attack】，发起攻击。
</p>


<figure id="org953ab22">
<img src="./images/Snipaste_2023-05-21_02-29-24.png" alt="Snipaste_2023-05-21_02-29-24.png" width="50%">

</figure>

<p>
9.此时，Burp会自动打开一个新的界面，包含攻击执行的情况、Http状态码、长度等结果信息。
</p>


<figure id="org073b476">
<img src="./images/Snipaste_2023-05-21_02-29-53.png" alt="Snipaste_2023-05-21_02-29-53.png" width="50%">

</figure>

<p>
10.我们可以选择其中的某一次通信信息，查看请求消息和应答消息的详细。
</p>


<figure id="org56551fc">
<img src="./images/Snipaste_2023-05-21_02-30-23.png" alt="Snipaste_2023-05-21_02-30-23.png" width="50%">

</figure>

<p>
11.很多时候，为了更好的标明应答消息中是否包含有我们需要的信息，通常在进行攻击前，会进行Options选项的相关配置，使用最多的是正则表达式匹配（Grep - Match）。
</p>


<figure id="org0eb4e8d">
<img src="./images/Snipaste_2023-05-21_02-30-42.png" alt="Snipaste_2023-05-21_02-30-42.png" width="50%">

</figure>

<p>
12.同时，结果选项卡中所展示的列我们是可以进行指定的，我们可以在菜单Columns进行设置。
</p>


<figure id="orgcb1a37d">
<img src="./images/Snipaste_2023-05-21_02-31-07.png" alt="Snipaste_2023-05-21_02-31-07.png" width="50%">

</figure>

<p>
13.最后，选择我们需要的列，点击【Save】按钮，对攻击结果进行保存。
</p>


<figure id="org53a8bd2">
<img src="./images/Snipaste_2023-05-21_02-31-39.png" alt="Snipaste_2023-05-21_02-31-39.png" width="50%">

</figure>

<p>
14.当然，保存之前我们也可以对保存的内容进行设置。
</p>


<figure id="org15d9df1">
<img src="./images/Snipaste_2023-05-21_02-31-59.png" alt="Snipaste_2023-05-21_02-31-59.png" width="50%">

</figure>

<p>
以上这些，是Burp Intruder一次完成的操作步骤，在实际使用中，根据每一个人的使用习惯，会存在或多或少的变动。而每一个环节中涉及的更详细的配置，将在接下来的章节中做更细致的阐述。
</p>

<p>
<b>遇到一个登录网页（账号+密码），通常怎么测试：</b>
</p>
<ul class="org-ul">
<li>测试账号有没有枚举
<ul class="org-ul">
<li>输入一个不可能存在的账号，看看和存在账号的输出，通过提示不同来确定账号一定是存在的，那么就仅密码爆破就可以了</li>
</ul></li>
<li>测试有没有锁定策略
<ul class="org-ul">
<li>有锁定次数就不能爆破了</li>
</ul></li>
<li>开始爆破</li>
</ul>

<p>
<b>不能爆破的场景：</b>
</p>
<ul class="org-ul">
<li>账号有锁定机制</li>
<li>有图形验证码，且正确有效。而像登录不成功就不更换图形验证码就不算有效的验证码。</li>
<li>有短信验证码，且正确有效（4位纯数字的短信验证码可以爆破）</li>
<li>在想要爆破的请求包中，存在其它变化的参数（token）</li>
</ul>

<p>
范例：dvwa
</p>
<ul class="org-ul">
<li>拦截
<ul class="org-ul">
<li>打开dvwa登录测试页面 <a href="http://10.0.0.151:8080/vulnerabilities/brute/">http://10.0.0.151:8080/vulnerabilities/brute/</a></li>
<li>打开burpsuite 开启拦截。dvwa登录测试页填写账号密码提交</li>
<li>右键Send to Intruder。</li>
</ul></li>
<li>Intruder&#x2013;&gt;Positions
<ul class="org-ul">
<li>点【clean $】清除所有标记，只标记密码部分。 <code>GET /vulnerabilities/brute/?username=admin&amp;password=§11§&amp;Login=Login HTTP/1.1</code></li>
</ul></li>
<li>Intruder&#x2013;&gt;Payloads
<ul class="org-ul">
<li>Playload Sets: Payload type设置为Simple list</li>
<li>Playload Options: Load 加载个字典；Add 加入正常的密码password；这样快点</li>
</ul></li>
<li>Intruder&#x2013;&gt;Options
<ul class="org-ul">
<li>Grep - Match: 加一个成功匹配 "welcome"</li>
</ul></li>
<li>Intruder&#x2013;&gt;Payloads 点击【Start attack】开始。通过响应包的长度判断是否成功。</li>
</ul>
</div>
</div>
<div id="outline-container-h:086aa9fe-f63c-4919-a410-7133f0b02f43" class="outline-4">
<h4 id="h:086aa9fe-f63c-4919-a410-7133f0b02f43"><code>Intruder--&gt;Payload</code> 类型与处理</h4>
<div class="outline-text-4" id="text-h:086aa9fe-f63c-4919-a410-7133f0b02f43">
<p>
在Burp Intruder的Payload选项卡中，有Payload集合的设置选项，包含了经常使用的Payload类型，共18种。
</p>


<figure id="orgd757081">
<img src="./images/Snipaste_2023-05-21_02-33-55.png" alt="Snipaste_2023-05-21_02-33-55.png" width="50%">

</figure>

<p>
他们分别是：
</p>
<ol class="org-ol">
<li>简单列表（Simple list） ——最简单的Payload类型，通过配置一个字符串列表作为Payload，也可以手工添加字符串列表或从文件加载字符串列表。其设置界面如下图</li>
<li>运行时文件（Runtime file） ——指定文件，作为相对应Payload位置上的Payload列表。其设置界面如下图：</li>
<li>自定义迭代器（Custom iterator）——这是一款功能强大的Payload，它共有8个占位，每一个占位可以指定简单列表的Payload类型，然后根据占位的多少，与每一个简单列表的Payload进行笛卡尔积（集合相乘的结果），生成最终的Payload列表。例如，某个参数的值格式是username@@password，则设置此Payload的步骤是：</li>
<li>字符串替换（Character substitution）——顾名思义，此种Payload的类型是对预定义的字符串进行替换后生成新的Payload。比如说，预定义字符串为ABCD，按照下图的替换规则设置后，将对AB的值进行枚举后生成新的Payload。</li>
<li>大小写替换（Case modification）——对预定义的字符串，按照大小写规则，进行替换。比如说，预定义的字符串为Peter Wiener，则按照下图的设置后，会生成新的Payload。</li>
<li>字符块（Character blocks）——这种类型的Payload是指使用一个给出的输入字符串，根据指定设置产生指定大小的字符块，表现形式为生成指定长度的字符串。它通常是用来绕过应用防火墙（WAF），消耗WAF的检测时间。</li>
<li>数字类型（Number）——这种类型的Payload是指根据配置，生成一系列的数字作为Payload。它的设置界面如下：</li>
<li>日期类型（Dates）——这种类型的Payload是指根据配置，生成一系列的日期。界面如下</li>
<li>暴力字典（Brute forcer）——此类Payload生成包含一个指定的字符集的所有排列特定长度的有效载荷，通常用于枚举字典的生成，其设置界面如下：</li>
<li>空类型（Null payloads）——这种负载类型产生的Payload，其值是一个空字符串。在攻击时，需要同样的请求反复被执行，在没有任何修改原始请求的场景下此Payload是非常有用的。它可用于各种攻击，例如应用层Dos、或保持活会话令牌、资源竞争等。</li>
<li>字符扮演者（Character frobber）——这种类型的Payload的生成规律是：依次修改指定字符串在每个字符位置的值（不做特殊说明的情况下就是指十进制），每次都是在原字符上递增1个该字符的ASCII码。</li>
<li>用户名生成器（Username generator）这种类型的Payload主要用于用户名和email帐号的自动生成，其设置界面如下图：</li>
</ol>



<ul class="org-ul">
<li>简单列表（Simple list） ——最简单的Payload类型，通过配置一个字符串列表作为Payload，也可以手工添加字符串列表或从文件加载字符串列表。其设置界面如下图</li>
</ul>


<figure id="org4344c5d">
<img src="./images/Snipaste_2023-05-21_02-34-38.png" alt="Snipaste_2023-05-21_02-34-38.png" width="50%">

</figure>

<p>
在此操作界面上，选择的Payload列表中，已经预定义了一组简单Payload列表，包括XSS脚本、CGI脚本、SQL注入脚本、数字、大写字母、小写字母、用户名、密码、表单域的字段名、IIS文件名和目录名等等，极大地方便了渗透测试人员的使用。
</p>

<ul class="org-ul">
<li>运行时文件（Runtime file） ——指定文件，作为相对应Payload位置上的Payload列表。其设置界面如下图：</li>
</ul>


<figure id="org80f2388">
<img src="./images/Snipaste_2023-05-21_02-35-16.png" alt="Snipaste_2023-05-21_02-35-16.png" width="50%">

</figure>

<p>
当我们如上图所示，指定Payload type使用的类型为Runtime file时，下方的Payload Options将自动改变为文件选择按钮和输入框，当我们点击【select file】选择文件时，将弹出图中所示的对话框，选择指定的Payload文件。运行时，Burp Intruder将读取文件的每一行作为一个Payload。
</p>

<ul class="org-ul">
<li>自定义迭代器（Custom iterator）——这是一款功能强大的Payload，它共有8个占位，每一个占位可以指定简单列表的Payload类型，然后根据占位的多少，与每一个简单列表的Payload进行笛卡尔积（集合相乘的结果），生成最终的Payload列表。例如，某个参数的值格式是username@@password，则设置此Payload的步骤是：</li>
</ul>

<p>
位置1，选择Usernames
</p>


<figure id="org04cb77c">
<img src="./images/Snipaste_2023-05-21_02-36-20.png" alt="Snipaste_2023-05-21_02-36-20.png" width="50%">

</figure>

<p>
接着，指定位置2，输入值@@
</p>


<figure id="org85b36d1">
<img src="./images/Snipaste_2023-05-21_02-36-47.png" alt="Snipaste_2023-05-21_02-36-47.png" width="50%">

</figure>

<p>
最后指定位置3，选择Passwords
</p>


<figure id="org3201499">
<img src="./images/Snipaste_2023-05-21_02-37-10.png" alt="Snipaste_2023-05-21_02-37-10.png" width="50%">

</figure>


<p>
当我们开始攻击时，生成的Payload值如图所示
</p>


<figure id="orgb5901a7">
<img src="./images/Snipaste_2023-05-21_02-37-38.png" alt="Snipaste_2023-05-21_02-37-38.png" width="50%">

</figure>

<ul class="org-ul">
<li>字符串替换（Character substitution）——顾名思义，此种Payload的类型是对预定义的字符串进行替换后生成新的Payload。比如说，预定义字符串为ABCD，按照下图的替换规则设置后，将对AB的值进行枚举后生成新的Payload。</li>
</ul>


<figure id="org17b8963">
<img src="./images/Snipaste_2023-05-21_02-38-12.png" alt="Snipaste_2023-05-21_02-38-12.png" width="50%">

</figure>

<p>
生成的Payload如下图所示，分别替换了上图中的a和b的值为4与8
</p>


<figure id="org1796210">
<img src="./images/Snipaste_2023-05-21_02-38-35.png" alt="Snipaste_2023-05-21_02-38-35.png" width="50%">

</figure>

<ul class="org-ul">
<li>大小写替换（Case modification）——对预定义的字符串，按照大小写规则，进行替换。比如说，预定义的字符串为Peter Wiener，则按照下图的设置后，会生成新的Payload。</li>
</ul>


<figure id="orgc207679">
<img src="./images/Snipaste_2023-05-21_02-39-10.png" alt="Snipaste_2023-05-21_02-39-10.png" width="50%">

</figure>

<p>
生成的Payload如下
</p>


<figure id="orgbda2fa9">
<img src="./images/Snipaste_2023-05-21_02-39-33.png" alt="Snipaste_2023-05-21_02-39-33.png" width="50%">

</figure>

<p>
生成规则由上而下依次是：
</p>
<div class="org-src-container">
<pre class="src src-sh">No change&#65288;&#19981;&#25913;&#21464;&#65292;&#20351;&#29992;&#21407;&#22987;&#23383;&#31526;&#20018;&#65289;
To lower case&#65288;&#36716;&#20026;&#23567;&#20889;&#23383;&#27597;&#65289;
To upper case&#65288;&#36716;&#20026;&#22823;&#20889;&#23383;&#27597;&#65289;
To Propername&#65288;&#39318;&#23383;&#27597;&#22823;&#20889;&#65292;&#20854;&#20182;&#23567;&#20889;&#65289;
To ProperName&#65288;&#21333;&#35789;&#39318;&#23383;&#27597;&#22823;&#20889;&#65292;&#20854;&#20182;&#19981;&#25913;&#21464;)
</pre>
</div>

<p>
在实际使用中，可以根据自己的使用规则进行勾选设置。
</p>

<ul class="org-ul">
<li>字符块（Character blocks）——这种类型的Payload是指使用一个给出的输入字符串，根据指定设置产生指定大小的字符块，表现形式为生成指定长度的字符串。它通常是用来绕过应用防火墙（WAF），消耗WAF的检测时间。</li>
</ul>


<figure id="org5fa832e">
<img src="./images/Snipaste_2023-05-21_02-40-33.png" alt="Snipaste_2023-05-21_02-40-33.png" width="50%">

</figure>

<p>
Base string是指设置原始字符串，Min length是指Payload的最小长度，Max length是指Payload的最大长度，Step是指生成Payload时的步长。如上图的配置后，生成的Payload如下图所示：
</p>


<figure id="org4f881f2">
<img src="./images/Snipaste_2023-05-21_02-40-56.png" alt="Snipaste_2023-05-21_02-40-56.png" width="50%">

</figure>

<ul class="org-ul">
<li>数字类型（Number）——这种类型的Payload是指根据配置，生成一系列的数字作为Payload。它的设置界面如下：</li>
</ul>


<figure id="orgcc6964e">
<img src="./images/Snipaste_2023-05-21_02-41-48.png" alt="Snipaste_2023-05-21_02-41-48.png" width="50%">

</figure>

<p>
Type表示使用序列还是随机数，From表示从什么数字开始，To表示到什么数字截止，Step表示步长是多少。如果是随机数，则How many被激活，表示一共生成多少个随机数。Base表示数字使用十进制还是十六进制形式，Min integer digits表示最小的整数是多少，Max integer digits表示最大的整数是多少，如果是10进制，则Min fraction digits 表示小数点后最少几位数，Max fraction digits表示小数点后最多几位数。
</p>

<ul class="org-ul">
<li>日期类型（Dates）——这种类型的Payload是指根据配置，生成一系列的日期。界面如下</li>
</ul>


<figure id="org0012727">
<img src="./images/Snipaste_2023-05-21_02-43-00.png" alt="Snipaste_2023-05-21_02-43-00.png" width="50%">

</figure>

<p>
其设置选项比较简单，没有什么特别复杂的，不再赘述。至于日期格式，可以选择Burp自己提供的样例格式，也可以自定义。
</p>

<ul class="org-ul">
<li>暴力字典（Brute forcer）——此类Payload生成包含一个指定的字符集的所有排列特定长度的有效载荷，通常用于枚举字典的生成，其设置界面如下：</li>
</ul>


<figure id="org08dd4dd">
<img src="./images/Snipaste_2023-05-21_02-43-34.png" alt="Snipaste_2023-05-21_02-43-34.png" width="50%">

</figure>

<p>
Character set 表示生成字典的数据集，从此数据集中抽取字符进行生成。Min length表示生成Payload的最小长度，Max length表示生成Payload的最大长度。
</p>

<ul class="org-ul">
<li>空类型（Null payloads）——这种负载类型产生的Payload，其值是一个空字符串。在攻击时，需要同样的请求反复被执行，在没有任何修改原始请求的场景下此Payload是非常有用的。它可用于各种攻击，例如应用层Dos、或保持活会话令牌、资源竞争等。</li>
</ul>


<figure id="org9ba6040">
<img src="./images/Snipaste_2023-05-21_02-44-24.png" alt="Snipaste_2023-05-21_02-44-24.png" width="50%">

</figure>

<p>
在配置Payload生成方式时，它有两个选项，我们可以指定生成（Generate）多少Payload，也可以设置为一直持续攻击（Continue indefinitely)
</p>

<ul class="org-ul">
<li>字符扮演者（Character frobber）——这种类型的Payload的生成规律是：依次修改指定字符串在每个字符位置的值（不做特殊说明的情况下就是指十进制），每次都是在原字符上递增1个该字符的ASCII码。</li>
</ul>


<figure id="orgb8b93b6">
<img src="./images/Snipaste_2023-05-21_02-44-59.png" alt="Snipaste_2023-05-21_02-44-59.png" width="50%">

</figure>

<p>
执行后生成的Payload如下图所示：
</p>


<figure id="org41e5821">
<img src="./images/Snipaste_2023-05-21_02-45-19.png" alt="Snipaste_2023-05-21_02-45-19.png" width="50%">

</figure>

<ul class="org-ul">
<li><p>
用户名生成器（Username generator）这种类型的Payload主要用于用户名和email帐号的自动生成，其设置界面如下图：
</p>

<p>
如：原始值为jasper，后缀为@163.com。Playload Options：jasper; Payload Processing: Add Suffix: @163.com
</p>

<p>
其生成的Payload值如图所示
</p></li>
</ul>


<figure id="org7aeb6ca">
<img src="./images/img_20250526_065607.png" alt="img_20250526_065607.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:8b65887c-1dd3-4be7-87a2-478edfb61344" class="outline-4">
<h4 id="h:8b65887c-1dd3-4be7-87a2-478edfb61344"><code>Intruder--&gt;Positions</code> Payload位置和攻击类型</h4>
<div class="outline-text-4" id="text-h:8b65887c-1dd3-4be7-87a2-478edfb61344">
<p>
首先我们来看看Payload位置（Payload positions）选项卡的设置界面：
</p>


<figure id="orgd519e13">
<img src="./images/Snipaste_2023-05-21_02-47-17.png" alt="Snipaste_2023-05-21_02-47-17.png" width="50%">

</figure>

<p>
从上图中我们可以看出，Payload位置的设置是基于Http请求的原始消息作为母板，使用一对 § 字符来标记出Payload的位置，在这两个号直接包含了母板文本内容。 当我们已经把一个Payload在请求消息的特殊位置上时标明后，发起攻击时，Burp Intruder 就把一个Payload值放置到给出的特殊位置上，替换 § 符号标示的整个位置。如上图中的参数id后面的 § 符号之间的标明的是Payload位置1，name后面的 § 符号之间标明的是Payload位置2，这个值对应于Payload设置中的Payload set的值。 我们可以在消息编辑器中间对Payload位置进行编辑，它主要是由右侧的四个按钮来控制的。
</p>

<div class="org-src-container">
<pre class="src src-sh">- &#12304;Add &#167;&#12305;&#8212;&#8212;&#22312;&#24403;&#21069;&#20809;&#26631;&#30340;&#20301;&#32622;&#28155;&#21152;&#19968;&#20010;Payload&#20301;&#32622;&#26631;&#24535;
- &#12304;Clear &#167;&#12305;&#8212;&#8212;&#28165;&#38500;&#25152;&#26377;Payload&#20301;&#32622;&#26631;&#24535;&#25110;&#32773;&#28165;&#38500;&#36873;&#20013;&#30340;Payload&#20301;&#32622;&#26631;&#24535;
- &#12304;Auto &#167;&#12305;&#8212;&#8212;&#23545;&#28040;&#24687;&#20869;&#23481;&#20013;&#21487;&#33021;&#38656;&#35201;&#26631;&#24535;&#30340;&#21442;&#25968;&#20570;&#19968;&#20010;&#29468;&#27979;&#65292;&#26631;&#24535;&#20026;Payload&#20301;&#32622;&#65292;&#33258;&#21160;&#35774;&#32622;&#23436;
   &#20043;&#21518;&#20877;&#20570;&#20154;&#24037;&#30340;&#36873;&#25321;&#65292;&#30830;&#23450;&#21738;&#20123;&#20301;&#32622;&#26159;&#38656;&#35201;&#20256;&#20837;Payload&#30340;&#12290;&#30446;&#21069;Burp&#25903;&#25345;&#33258;&#21160;&#36873;&#25321;&#30340;&#21442;&#25968;&#31867;&#22411;&#26377;&#65306;
   1.URL&#35831;&#27714;&#21442;&#25968;
   2.Body&#21442;&#25968;
   3.cookie&#21442;&#25968;
   4.&#22797;&#21512;&#22411;&#21442;&#25968;&#23646;&#24615;&#65292;&#27604;&#22914;&#25991;&#20214;&#19978;&#20256;&#26102;&#20505;&#30340;&#25991;&#20214;&#21517;
   5.XML&#25968;&#25454;
   6.JSON&#25968;&#25454;
   &#34429;&#28982;Burp&#40664;&#35748;&#26159;&#25903;&#25345;&#33258;&#21160;&#26631;&#24535;&#36825;&#20123;&#31867;&#22411;&#30340;&#21442;&#25968;&#20316;&#20026;Payload&#20301;&#32622;&#65292;&#20294;&#22914;&#26524;&#26159;&#38024;&#23545;&#20110;&#20687;XML&#25110;JSON&#30340;&#33410;&#28857;&#23646;&#24615;&#20540;&#30340;&#65292;&#36824;&#26159;&#38656;&#35201;&#25163;&#24037;&#25351;&#23450;&#12290;
- &#12304;Refresh&#12305;&#8212;&#8212;&#21047;&#26032;&#28040;&#24687;&#20869;&#23481;&#20013;&#24102;&#26377;&#39068;&#33394;&#30340;&#37096;&#20998;
</pre>
</div>

<p>
在消息编辑器的上方，有一个下拉选择框：Attack Type（攻击类型）。Burp Intruder支持使用 Payload进行多种方式的模拟攻击，目前有以下四种：
</p>

<ul class="org-ul">
<li>狙击手模式（Sniper）——它使用一组Payload集合，依次替换Payload位置上（一次攻击只能使用一个Payload位置）被 § 标志的文本，没有被 § 标志的文本将不受影响，对服务器端进行请求，通常用于测试请求参数是否存在漏洞。</li>

<li>攻城锤模式（Battering ram）——它使用单一的Payload集合，依次替换Payload位置上所有被 §标志的文本，而没有被 § 标志的文本将不受影响，对服务器端进行请求。与狙击手模式的区别在于，如果有多个参数且都为Payload位置标志时，使用的Payload值是相同的，而狙击手模式只能使用一个Payload位置标志。</li>

<li>交叉模式（Pitchfork）——它可以使用多组Payload集合，在每一个不同的Payload标志位置上（最多20个），遍历所有的Payload。举例来说，如果有两个Payload标志位置，第一个Payload值为A和B，第二个Payload值为C和D，则发起攻击时，将共发起两次攻击，第一次使用的Payload分别为A和C，第二次使用的Payload分别为B和D。</li>

<li>集束炸弹模式（Cluster bomb） 它可以使用多组Payload集合，在每一个不同的Payload标志位</li>
</ul>
<p>
置上（最多20个），依次遍历所有的Payload。它与交叉模式的主要区别在于，执行的Payload数据是Payload组的乘积。举例来说，如果有两个Payload标志位置，第一个Payload值为A和B，第二个Payload值为C和D，则发起攻击时，将共发起四次攻击，第一次使用的Payload分别为A和C，第二次使用的Payload分别为A和D，第三次使用的Payload分别为B和C，第四次使用的Payload分别为B和D。
</p>
</div>
</div>
<div id="outline-container-h:658ba66e-c8f2-46d3-b79e-2d82b09e9346" class="outline-4">
<h4 id="h:658ba66e-c8f2-46d3-b79e-2d82b09e9346"><code>Intruder--&gt;Options</code> 可选项设置</h4>
<div class="outline-text-4" id="text-h:658ba66e-c8f2-46d3-b79e-2d82b09e9346">
<p>
可选项设置主要包括请求消息头设置、请求引擎设置、攻击结果设置、grep match、grep extract、grep payloads以及重定向设置。在使用中，可以在攻击前进行设置，也可以在攻击过程中做这些选项的调整。
</p>

<ul class="org-ul">
<li>请求消息头设置（Request Headers）——这个设置主要用来控制请求消息的头部信息，它由Update Content-Length header和Set Connection: close两个选项组成。默认勾选。其中Update Content-Length header如果被选中，Burp Intruder会在每个请求中添加或更新Content-Length头作为该次请求的HTTP体长度参数的正确值。这个功能通常是应用在向HTTP请求体中插入可变长度的Payload时，如果没有指定正确的值，则目标服务器可能会返回错误，比如可能会对一个不完整的请求做出响应，或者可能会无限期的等待请求继续接收数据。Set Connection: close如果被选中，表示Burp Intruder在每个请求消息中添加或更新值为“关闭”的连接头，这将更迅速的执行。在某些情况下（当服务器本身并不返回一个有效的Content-Length或Transfer-Encoding头），选中此选项可能允许攻击。</li>
</ul>


<figure id="org6993a30">
<img src="./images/Snipaste_2023-05-21_02-56-05.png" alt="Snipaste_2023-05-21_02-56-05.png" width="50%">

</figure>


<ul class="org-ul">
<li>请求引擎设置（Request Engine）——这个设置主要用来控制Burp Intruder攻击，合理地使用这些参数能更加有效地完成攻击过程。它有如下参数：
<ul class="org-ul">
<li>Number of threads并发线程数，</li>
<li>Number of retries on network failure 网络失败时候重试次数，</li>
<li>Pause before retry重试前的暂停时间间隔（毫秒），</li>
<li>Throttle between requests 请求延时（毫秒），</li>
<li>Start time开始时间，启动攻击之后多久才开始执行。</li>
</ul></li>
</ul>


<figure id="org944285b">
<img src="./images/Snipaste_2023-05-21_02-57-12.png" alt="Snipaste_2023-05-21_02-57-12.png" width="50%">

</figure>

<ul class="org-ul">
<li>攻击结果设置（Attack Results）——这个设置主要用来控制从攻击结果中抓取哪些信息。它的参数有：Store requests / responses 保存请求/应答消息，Make unmodified baseline request 记录请求母板的消息内容，Use denial-of-service mode使用Dos方式，Store full</li>
</ul>
<p>
payloads存储所有的Payload值。
</p>


<figure id="orgd1e97d7">
<img src="./images/Snipaste_2023-05-21_02-57-50.png" alt="Snipaste_2023-05-21_02-57-50.png" width="50%">

</figure>


<ul class="org-ul">
<li>Grep Match——这个设置主要用来从响应消息中提取结果项，如果匹配，则在攻击结果中添加的新列中标明，便于排序和数据提取。比如说，在密码猜测攻击，扫描诸如“密码不正确”或“登录成功”，可以找到成功的登录；在测试SQL注入漏洞，扫描包含“ODBC”，“错误”等消息可以识别脆弱的参数。</li>
</ul>


<figure id="org4c6d120">
<img src="./images/Snipaste_2023-05-21_02-58-49.png" alt="Snipaste_2023-05-21_02-58-49.png" width="50%">

</figure>

<p>
其选项有Match type表示匹配简单的字符串还是正则表达式，Case sensitive match是否大小写敏感，Exclude HTTP headers匹配的时候，是否包含http消息头。
</p>

<ul class="org-ul">
<li>重定向（Redirections）——这些设置主要是用来控制执行攻击时Burp如何处理重定向，在实际使用中往往是必须遵循重定向，才能实现你的攻击目的。例如，在密码猜测攻击，每次尝试的结果可能是密码错误会重定向响应到一个错误消息提示页面，如果密码正确会重定向到用户中心的首页。</li>
</ul>


<figure id="orga67b2b3">
<img src="./images/Snipaste_2023-05-21_03-00-47.png" alt="Snipaste_2023-05-21_03-00-47.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:73f61457-7afe-4c28-86f6-627a4bbd65b2" class="outline-4">
<h4 id="h:73f61457-7afe-4c28-86f6-627a4bbd65b2">Intruder 攻击和结果分析</h4>
<div class="outline-text-4" id="text-h:73f61457-7afe-4c28-86f6-627a4bbd65b2">
<p>
一次攻击的发起，通常有两种方式。一种是你在Burp Intruder里设置了Target，Positions，Payloadsand Options，然后点击【Start attack】启动攻击；另一种是你打开一个之前保存的预攻击文件，然后点击【Start attack】启动攻击。无论是哪种方式的攻击发起，Burp都将弹出攻击结果界面。在攻击的过程中，你也可以修改攻击配置，或者做其他的操作。攻击结果的界面如下图所示：
</p>


<figure id="org8bd3a07">
<img src="./images/Snipaste_2023-05-21_03-01-46.png" alt="Snipaste_2023-05-21_03-01-46.png" width="50%">

</figure>


<p>
从上图我们可以看出，其界面主要有菜单区、过滤器、Payload执行结果消息记录区、请求/响应消息区四大部分组成。
</p>

<ul class="org-ul">
<li>菜单区——包含Attack菜单、Save菜单、Columns菜单。

<ul class="org-ul">
<li>Attack菜单主要用来控制攻击行为的，你可以暂停攻击（pause）、恢复攻击（resume）、再次攻击（repeat）。</li>
<li>Save菜单主要用来保存攻击的各种数据，Attack 保存当前攻击的副本，下次可以从此文件进行再次攻击；Resultstable保存攻击的结果列表，相当于图中的Payload执行结果消息记录区数据，当然你可以选择行和列进行保存，只导出你需要的数据；Server responses 保存所有的服务器响应消息；Attackconfiguration保存当前的攻击配置信息。</li>
<li>Columns菜单主要用来控制消息记录区的显示列，如果某个列被选中，则在Payload执行结果消息记录区显示，反之则不显示。</li>
</ul></li>

<li>过滤器——可以通过查询条件、服务器响应的状态码、注释过Payload执行结果消息记录区的信息 进行过滤。</li>

<li>Payload执行结果消息记录区，又称结果列表（Results Table），记录Payload执行时请求和响应的所有信息，它包含的列有：
<ul class="org-ul">
<li>请求序列——显示请求的序列号，如果配置了记录未修改的请求消息母板，则会在第一个进行记录。</li>
<li>Payload位置——狙击手模式下会记录 Payload值——如果有多个Payload，则存在多个列</li>
<li>HTTP 状态码——服务器响应状态码</li>
<li>请求时间——执行攻击的时间</li>
<li>响应时间——开始接受到响应时间，单位为毫秒。</li>
<li>响应完成时间——响应完成的时间，单位为毫秒。</li>
<li>网络错误——Payload执行时是否发生网络问题</li>
<li>超时情况——等待应答响应过程中，是否发生网络超时</li>
<li>长度——响应消息的长度</li>
<li>Cookie——任何的Cookie信息</li>
<li>重定向——如果配置了重定向，则显示</li>
<li>注释——消息记录的注释信息</li>
<li>请求/响应消息区——参考Proxy章节的相关叙述。</li>
</ul></li>
</ul>

<p>
在对攻击结果的分析中，你可以通过单击任一列标题（升序排序，降序排序和未排序）重新排序表的内容。有效的应答通常可以通过以下存在差异的内容进行判断：
</p>

<p>
1、不同的HTTP状态代码
2、不同长度的应答
3、存在或不存在某些表达式
4、错误或超时的发生
5、用来接收或完成响应时间的差异
</p>

<p>
比如说，在URL路径扫描过程中，对不存在的资源的请求可能会返回“404未找到”的响应，或正确的URL会反馈的“200 OK”响应。或者在密码猜测攻击，失败的登录尝试可能会产生包含“登录失败”、“200 OK”等关键字的响应，而成功的登录可能会生成“302 XXX”的响应，或不同的“200 OK”响应页面。
</p>

<p>
每一个渗透测试人员，对Burp Intruder 攻击结果的分析方式可能会存在差异，这主要源于个人水平的不同和经验的不同。在实战中，只有慢慢尝试、积累（经验、口令字典），才能快速的对攻击结果进行分析从而获取自己关注的重要信息。
</p>
</div>
</div>
</div>
<div id="outline-container-h:28c98528-6773-4595-a23b-5128dce33de3" class="outline-3">
<h3 id="h:28c98528-6773-4595-a23b-5128dce33de3"><code>Repeater</code> 重放</h3>
<div class="outline-text-3" id="text-h:28c98528-6773-4595-a23b-5128dce33de3">
<p>
Burp Repeater作为Burp Suite中一款手工验证HTTP消息的测试工具， <b>通常用于多次重放请求获取响应和手动修改请求消息后对服务端返回的响应进行分析</b> 。本章我们主要学习的内容有：
</p>
<ul class="org-ul">
<li>Repeater的使用</li>
<li>可选项设置（Options）</li>
</ul>
</div>
<div id="outline-container-h:ae0437ee-b776-47e6-8253-eab11a9e2268" class="outline-4">
<h4 id="h:ae0437ee-b776-47e6-8253-eab11a9e2268">Repeater的使用</h4>
<div class="outline-text-4" id="text-h:ae0437ee-b776-47e6-8253-eab11a9e2268">
<p>
在渗透测试过程中，我们经常使用Repeater来进行请求与响应的消息验证分析，比如修改请求参数，验证输入的漏洞、验证逻辑越权；从拦截历史记录中，捕获特征性的请求消息进行请求重放。
</p>
<ul class="org-ul">
<li>右键Send to Repeater</li>
</ul>

<p>
BurpRepeater的操作界面如下图所示：
</p>


<figure id="orgddb89f0">
<img src="./images/img_20250526_074340.png" alt="img_20250526_074340.png" width="50%">

</figure>


<p>
请求消息区为客户端发送的请求消息的详细信息，Burp Repeater为每一个请求都做了请求编号，当我们在请求编码的数字上双击之后，可以修改请求的名字，这是为了方便多个请求消息时，做备注或区分用的。在编号的下方，有一个【Send】按钮，当我们对请求的消息编辑完之后，点击此按钮即发送请求给服务端。服务器的请求域可以在target处进行修改。
</p>

<p>
在应答消息区将对应的请求消息点击【Send】按钮后，获得服务端的应答消息。通过修改请求消息的参数来比对分析每次应答消息之间的差异，能更好的帮助我们分析系统可能存在的漏洞。
</p>

<p>
在我们使用Burp Repeater时，通常会结合Burp的其他工具一起使用，比如Proxy的历史记录，Scanner的扫描记录、Target的站点地图等，通过其他工具上的右击菜单，执行【Send to Repeater】，跳转到Repeater选项卡中，然后才是对请求消息的修改以及重放、数据分析与漏洞证。
</p>
</div>
</div>
<div id="outline-container-h:d14f8133-5e64-4bb9-8c40-937cc006d85f" class="outline-4">
<h4 id="h:d14f8133-5e64-4bb9-8c40-937cc006d85f">可选项设置（Options）</h4>
<div class="outline-text-4" id="text-h:d14f8133-5e64-4bb9-8c40-937cc006d85f">
<p>
与Burp其他工具的设置不同，Repeater的可选项设置菜单位于整个界面顶部的菜单栏中，如图所示：
</p>


<figure id="org21b938a">
<img src="./images/Snipaste_2023-05-21_03-11-02.png" alt="Snipaste_2023-05-21_03-11-02.png" width="50%">

</figure>

<p>
其设置主要包括以下内容：保持默认
</p>
<ul class="org-ul">
<li>Update Content-Length更新Content-Length：这个选项是用于控制Burp是否自动更新请求消息头中的Content-Length。</li>
<li>Unpack gzip/deflate解压和压缩: 这个选项主要用于控制Burp是否自动解压或压缩服务器端响应的内容。</li>
<li>Follow redirections跳转控制: 这个选项主要用于控制Burp是否自动跟随服务器端作请求跳转，比如服务端返回状态码为302，是否跟着应答跳转到302指向的url地址。 它有4个选项，分别是永不跳转（Never），站内跳转（On-site only ）、目标域内跳转（In-scope only）、始终跳转（Always），其中永不跳转、始终跳转比较好理解，站内跳转是指当前的同一站点内跳转；目标域跳转是指target scope中配置的域可以跳转。</li>
<li>Process cookies in redirections 跳转中处理Cookie: 这个选项如果选中，则在跳转过程中设置的Cookie信息，将会被带到跳转指向的URL页面，可以进行提交。</li>
<li>View视图控制: 这个选项是用来控制Repeater的视图布局。</li>
<li>Action其他操作: 通过子菜单方式，指向Burp的其他工具组件中。</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:5a5c6188-ae50-4826-9657-273435cf409f" class="outline-3">
<h3 id="h:5a5c6188-ae50-4826-9657-273435cf409f"><code>Decoder</code> 编解码</h3>
<div class="outline-text-3" id="text-h:5a5c6188-ae50-4826-9657-273435cf409f">
<p>
Burp Decoder的功能比较简单，作为Burp Suite中一款编码解码工具，它能对原始数据进行各种编码格式和散列的转换。其界面如下图，主要由输入域、输出域、编码解码选项三大部分组成。
</p>


<figure id="orgc348bd6">
<img src="./images/Snipaste_2023-05-21_03-13-12.png" alt="Snipaste_2023-05-21_03-13-12.png" width="50%">

</figure>

<p>
输入域即输入需要解码的原始数据，此处可以直接填写或粘贴，也可以通过其他Burp工具的上下文菜单中【Send to Decoder】；输出域即对输入域进行解码的结果显示出来，无论是输入域还是输出域都支持文本与Hex两种格式。其中编码解码选项中，由解码选项（Decode as)、编码选项（Encode as)、散列（Hash）三个构成。实际使用中，可以根据场景的需要进行设置。对于编码解码选项，目前支持URL、HTML、Base64、ASCII、16进制、8进制、2进制、GZIP共八种形式的格式转换，Hash散列支持SHA、SHA-224、SHA-256、SHA-384、SHA-512、MD2、MD5格式的转换，更重要的是，对于同一个数据，我们可以在Decoder的界面，进行多次编码解码的转换。如下图所示：
</p>


<figure id="org928c1ea">
<img src="./images/Snipaste_2023-05-21_03-13-53.png" alt="Snipaste_2023-05-21_03-13-53.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:a670d670-7485-4cb9-8119-e6cc10d82fd8" class="outline-3">
<h3 id="h:a670d670-7485-4cb9-8119-e6cc10d82fd8"><code>Comparer</code> 对比</h3>
<div class="outline-text-3" id="text-h:a670d670-7485-4cb9-8119-e6cc10d82fd8">
<p>
Burp Comparer在Burp Suite中主要提供一个可视化的差异比对功能，来对比分析两次数据之间的区别。使用中的场景可能是：
</p>

<p>
1、枚举用户名过程中，对比分析登陆成功和失败时，服务器端反馈结果的区别。
2、使用 Intruder 进行攻击时，对于不同的服务器端响应，可以很快的分析出两次响应的区别在哪里。
3、进行SQL注入的盲注测试时，比较两次响应消息的差异，判断响应结果与注入条件的关联关系。
</p>

<p>
其界面如下图：
</p>


<figure id="org386df63">
<img src="./images/Snipaste_2023-05-21_03-14-52.png" alt="Snipaste_2023-05-21_03-14-52.png" width="50%">

</figure>

<p>
对于Comparer的使用，主要有两个环节组成，先是数据加载，然后是差异分析。 Comparer数据加载的方式常用的有：从其他Burp工具通过上下文菜单转发过来、直接粘贴、从文件加载三种方式。当加载完毕后，如果你选择了两次不同的请求或应答消息，则下方的比较按钮将被激活，可以选择文本比较或者字节比较。如下图：
</p>


<figure id="orgdf147cb">
<img src="./images/Snipaste_2023-05-21_03-15-24.png" alt="Snipaste_2023-05-21_03-15-24.png" width="50%">

</figure>

<p>
如果点击了【words】或者【bytes】，则进入比对界面，页面自动通过背景颜色显示数据的差异。如下图：
</p>


<figure id="orgef948c4">
<img src="./images/Snipaste_2023-05-21_03-15-56.png" alt="Snipaste_2023-05-21_03-15-56.png" width="50%">

</figure>

<p>
其中，文本比较（words）是指通过文本的方式，比如说以HTML的方式，比较两次内容的差异；而字节比较（bytes）是指通过16进制的形式，比较两次内容的差异。如下图，注意不同内容的颜色标注。
</p>


<figure id="org2a89ddb">
<img src="./images/Snipaste_2023-05-21_03-16-32.png" alt="Snipaste_2023-05-21_03-16-32.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:58a9d397-f380-4e75-a9e1-3d58d14aa67f" class="outline-3">
<h3 id="h:58a9d397-f380-4e75-a9e1-3d58d14aa67f"><code>Extender</code> Burp Suite应用商店</h3>
<div class="outline-text-3" id="text-h:58a9d397-f380-4e75-a9e1-3d58d14aa67f">
<p>
Burp在软件中提供了支持第三方拓展插件的功能，方便使用者编写自定义插件或从插件商店中安装拓展插件。Burp扩展程序可以以多种方式支持自定义Burp的行为，例如：修改HTTP请求和响应，自定义UI，添加自定义扫描程序检查以及访问关键运行时信息，包括代理历史记录，目标站点地图和扫描程序问题等。本章讲述的主要内容有：
</p>

<ul class="org-ul">
<li>BApp Store: 应用商店插件的安装使用</li>
<li>Extension: 管理和加载Burp 插件</li>
<li>Options: 其他选项设置</li>
</ul>
</div>
<div id="outline-container-h:e9edc0c7-b95f-4e11-b2c9-d5f75e5cb49a" class="outline-4">
<h4 id="h:e9edc0c7-b95f-4e11-b2c9-d5f75e5cb49a"><code>Extender--&gt;BApp Store</code> 应用商店插件的安装使用</h4>
<div class="outline-text-4" id="text-h:e9edc0c7-b95f-4e11-b2c9-d5f75e5cb49a">
<p>
在Burp Extender 面板中，有一个BApp Store模块，这就是Burp的应用商店，内容是提供各种Burp的插件。 默认情况下，当你点击【BApp Store】模块时，界面列表会显示插件明细，若你的网络环境是通过代理访问外网的，则需要在【User options】-&gt;【Connections】-&gt;【Upstream Proxy Servers】进行设置，具体如下图所示：
</p>


<figure id="org468b14b">
<img src="./images/Snipaste_2023-05-21_03-17-41.png" alt="Snipaste_2023-05-21_03-17-41.png" width="50%">

</figure>

<p>
其中代理服务器的host和port为你本地的网络环境访问外网的代理主机和端口。如果你的网络设置没有问题，则应用商店的界面显示大体如下：
</p>


<figure id="orga935ef2">
<img src="./images/Snipaste_2023-05-21_03-18-00.png" alt="Snipaste_2023-05-21_03-18-00.png" width="50%">

</figure>

<p>
从图中我们可以看出，左边为各个插件的应用列表，当选中某个插件后，右侧显示的为该插件的描述信息和安装信息。如果我们需要使用某个插件，则点击右侧下方的【install】按钮，进行安装。
</p>

<p>
此时，安装按钮置为灰色，同时显示为【installing】，右下角也显示安装中，如上图。安装完成后，界面会显示重新安装【Reinstall】和插件评分按钮【Submit rating】，作为插件商店的用户推荐。
</p>

<p>
安装完毕后，在Burp Extender的Extension页面中，会自动显示已加载的插件列表。通过插件列表的管理，我们可以对插件进行后期的维护。
</p>


<figure id="orgb9ce85b">
<img src="./images/Snipaste_2023-05-21_03-19-42.png" alt="Snipaste_2023-05-21_03-19-42.png" width="50%">

</figure>

<p>
当然，除了从应用商店自动安装插件外，我们也可以下载插件，进行手工安装。如下图：
</p>
<ul class="org-ul">
<li>Extender&#x2013;&gt;BApp Store 点击【Manual install】手动安装按钮，则弹出插件安装文件存储的盘符，选择指定的插件文件，点击打开即可进行安装。</li>
</ul>


<figure id="org79e5652">
<img src="./images/Snipaste_2023-05-21_03-20-20.png" alt="Snipaste_2023-05-21_03-20-20.png" width="50%">

</figure>
</div>
</div>
<div id="outline-container-h:b73821f3-b2d3-4631-be0a-1d36695e1fd1" class="outline-4">
<h4 id="h:b73821f3-b2d3-4631-be0a-1d36695e1fd1"><code>Extender--&gt;Extensions</code> 管理和加载Burp 插件</h4>
<div class="outline-text-4" id="text-h:b73821f3-b2d3-4631-be0a-1d36695e1fd1">
<p>
从上一节我们已经了解到，安装完成的插件，都会显示在插件列表中。
</p>


<figure id="orgdbc90f9">
<img src="./images/Snipaste_2023-05-21_03-21-11.png" alt="Snipaste_2023-05-21_03-21-11.png" width="50%">

</figure>

<p>
如果我们想对某个插件的配置信息进行编辑，则如上图中所示，选中插件，其下方的【Details】标签页会显示插件的拓展信息，如：拓展的插件类型（java/Python/Ruby）、插件的文件名、存储的位置。
</p>

<p>
除了【Details】标签页外，【Output】和【Errors】两个页面分别可以设置此插件的标准输出和错误信息输出信息。
</p>


<figure id="orge41f2fc">
<img src="./images/Snipaste_2023-05-21_03-22-02.png" alt="Snipaste_2023-05-21_03-22-02.png" width="50%">

</figure>

<p>
从上图中我们可以看出，日志信息的输出有三种方式：
</p>
<ol class="org-ol">
<li>系统控制台输</li>
<li>存储到指定的文件中</li>
<li>Burp的界面输出</li>
</ol>

<p>
默认情况下，会选择Burp的界面输出。在实际应用中，我们可以根据自己的需要，对日志的存储方式进行调整。
</p>
</div>
</div>
</div>
</section>
<section id="outline-container-h:d59e4440-9a3d-4242-b80c-6aad4ed2bb48" class="outline-2">
<h2 id="h:d59e4440-9a3d-4242-b80c-6aad4ed2bb48">扫描工具</h2>
<div class="outline-text-2" id="text-h:d59e4440-9a3d-4242-b80c-6aad4ed2bb48">
<p>
主要内容：
</p>
<ul class="org-ul">
<li>长亭科技 Xray 正向及反向漏洞检测</li>
<li>漏洞扫描原理及 X-Scan 使用</li>
<li>Web漏洞扫描 AppScan 安装配置及扫描</li>
<li>Web漏洞扫描 AWVS 安装配置及扫描</li>
<li>系统漏洞扫描-Nessus使用，漏洞扫描器评估方案</li>
<li>完成一个企业漏洞扫描报告编写</li>
</ul>
</div>
<div id="outline-container-h:821e08b2-935f-4c9a-bd3e-55f8d97535a6" class="outline-3">
<h3 id="h:821e08b2-935f-4c9a-bd3e-55f8d97535a6">应用漏洞和主机漏洞</h3>
<div class="outline-text-3" id="text-h:821e08b2-935f-4c9a-bd3e-55f8d97535a6">
<ul class="org-ul">
<li><p>
应用漏洞：web漏洞。扫描目标是URL
</p>

<p>
应用漏洞是可以学完的。常用的漏洞也就几十种。
</p></li>

<li><p>
主机漏洞：操作系统、数据库、中间件、网络协议。扫描目标是IP
</p>

<p>
几十万种，学不完。
</p></li>
</ul>

<p>
扫描器对于初学都扫描器比较有用。等有经验了，不太依赖扫描器了，扫描器结果仅为一个参考，因为不准确的还要手动验证。
</p>
</div>
</div>
<div id="outline-container-h:78de4245-b78f-4ef0-bfba-189bd21ef45d" class="outline-3">
<h3 id="h:78de4245-b78f-4ef0-bfba-189bd21ef45d">X-Scan</h3>
<div class="outline-text-3" id="text-h:78de4245-b78f-4ef0-bfba-189bd21ef45d">
<p>
下载地址: <a href="https://www.onlinedown.net/soft/1498.htm">https://www.onlinedown.net/soft/1498.htm</a>
</p>

<p>
上面下载途径的软件尽量在虚拟机里安装。
</p>

<p>
X-Scan是国内最著名的综合扫描器之一，它完全免费，是不需要安装的绿色软件、界面支持中文和英文两种语言、包括图形界面和命令行方式。主要由国内著名的民间黑客组织“安全焦点”完成，从2000年的内部测试版X-Scan V0.2到目前的新版本X-Scan 3.3-cn都凝聚了国内众多黑客的心血。最值得一提的是，X-Scan把扫描报告和安全焦点网站相连接，对扫描到的每个漏洞进行“风险等级”评估，并提供漏洞描述、漏洞溢出程序，方便网管测试、修补漏洞。
</p>

<p>
X-Scan扫描器采用多线程方式对指定IP地址段（或单机）进行安全漏洞检测，xscan软件还支持插件功能，提供了图形界面和命令行两种操作方式，扫描内容包括：远程操作系统类型及版本，标准端口状态及端口BANNER信息，CGI漏洞，IIS漏洞，RPC漏洞，SQL-SERVER、FTP-SERVER、SMTP-SERVER、POP3-SERVER、NT-SERVER弱口令用户，NT服务器NETBIOS信息等。扫描结果保存在/log/目录中，index_*.htm为扫描结果索引文件。对于一些已知漏洞，我们给出了相应的漏洞描述、利用程序及解决方案，其它漏洞资料正在进一步整理完善中，您也可以通过作者网站的“安全文献”和“漏洞引擎”栏目查阅相关说明。
</p>

<p>
X-Scan扫描器安装说明：
</p>
<ul class="org-ul">
<li>华军软件园提供的X-Scan为3.3 简体中文版， <b>由于软件功能的特殊性可能存在报毒现象</b> ，请大家自行选择，解压后直接运行“xscan_gui.exe”即可启动。</li>
</ul>

<p>
Win7无法运行X-scan解决办法：
</p>
<ul class="org-ul">
<li>X-scan在XP运行是没任何问题的，如果在win7系统出现了npptools.dll丢失的情况，那么下载“npptools.dll”，然后将其放置到X-scan文件夹下即可，注意一定要你X-scan的文件夹，不是system32文件夹。</li>
</ul>

<p>
X-Scan扫描器使用教程
</p>
<ul class="org-ul">
<li>参考：<a href="https://www.onlinedown.net/soft/1498.htm">https://www.onlinedown.net/soft/1498.htm</a></li>
</ul>

<p>
对于老操作系统适用。早期产品，了解使用场景即可。
</p>
</div>
</div>
<div id="outline-container-h:61816e8f-ead9-4b77-8b63-3538fba6ebf8" class="outline-3">
<h3 id="h:61816e8f-ead9-4b77-8b63-3538fba6ebf8">AppScan</h3>
<div class="outline-text-3" id="text-h:61816e8f-ead9-4b77-8b63-3538fba6ebf8">
<p>
入门
</p>
<ul class="org-ul">
<li>安全是为了保护您的宝贵资产。您的组织拥有的一些最重要的资产是以信息的形式存在的，例如知识产权、战略计划和客户数据。保护这些信息对于您的组织继续运营、保持竞争力和满足监管要求至关重要。</li>
</ul>

<p>
<b>介绍</b>
</p>

<p>
AppScan on Cloud ( ASoC ) 是一种 SaaS 解决方案（Software-as-a-service：软件即服务），可满足所有应用程序安全测试需求。它将Security的所有测试功能整合到一个服务中，为所有技术提供统一的体验。ASoC可以使用动态和静态技术扫描Web、移动和桌面应用程序。
</p>

<ul class="org-ul">
<li><p>
动态 (DAST) 分析 黑盒扫描
</p>

<p>
ASoC为生产、登台和开发环境的 Web 应用程序执行安全扫描。不能看到代码。对于开发环境，它借助私有站点扫描技术来扫描开放 Internet 无法访问的应用程序。请参阅<a href="https://help.hcltechsw.com/appscan/ASoC/appseccloud_scanning_web.html#scanning_web">动态 (DAST) 扫描</a>
</p></li>

<li><p>
静态 (SAST) 分析 白盒扫描
</p>

<p>
ASoC对 Web 和桌面应用程序执行安全扫描。能看到源码。其静态分析包括智能发现分析 (IFA) 和智能代码分析(ICA)。IFA 可以显着减少对安全发现进行分类的手动工作，使其仅关注积极的、高价值的问题。ICA 有助于减少或完全避免其他技术所需的复杂配置，自动提高扫描精度。请参见<a href="https://help.hcltechsw.com/appscan/ASoC/src_scanning.html#src_scanning">静态 (SAST) 扫描</a>
</p></li>

<li><p>
交互式 (IAST) 分析
</p>

<p>
使用安装在应用程序上的代理，ASoC通过监控所有合法和恶意的交互，在运行期间识别应用程序中的安全漏洞。如java程序运行时额外加载一个jar包 <code>-javaagent:xxx.jar</code> 。该过程是“被动的”，即 IAST 不发送自己的测试，因此可以无限期运行。请参阅<a href="https://help.hcltechsw.com/appscan/ASoC/appseccloud_scanning_IAST_main.html">交互式 (IAST) 监控</a>
</p></li>

<li><p>
开源分析
</p>

<p>
ASoC识别应用程序中使用的开源软件包，报告具有已知漏洞的软件包，并提供补救建议。开源测试可以单独运行，也可以作为静态扫描的一部分运行。请参阅<a href="https://help.hcltechsw.com/appscan/ASoC/appseccloud_scanning_open_source.html">开源测试</a>
</p></li>
</ul>


<p>
ASoC具有启用其所有功能的 Web UI。但是，也可以使用 IDE 和自动化系统插件，因此如果不需要，则不需要与服务本身进行交互。例如，开发人员可以留在自己的集成开发环境 (IDE) 中，而无需在 IDE 和浏览器之间来回切换。IDE 插件还支持使用 Web UI 无法进行的代码交互。
</p>

<p>
为了补充其功能，ASoC还公开了一组全面的 REST API，用于驱动ASoC 中的操作。这使得ASoC非常适合集成到自动化环境中。客户可以使用 REST API 组成自己的工作流，而不是绑定到ASoC工作流。
</p>

<p>
ASoC有助于安全策略合规性。通过使用预定义的策略或定义自定义策略，可以轻松识别哪些应用程序不合规并需要注意。通过根据定义的策略进行过滤，可以确定问题修复的优先级。根据特定策略进行过滤有助于优先修复针对特定合规性的修复，而不是迷失在问题的海洋中。
</p>

<p>
ASoC还允许您运行个人扫描，它出现在应用程序的扫描列表中，但其扫描数据不会与应用程序的其余部分结果合并。这使开发人员能够运行扫描，而不会在整个应用程序数据中发现出现的问题。因此，在将代码推送到主代码流之前，可以检查个人扫描的结果是否存在关键问题。
</p>

<p>
ASoC有助于利用所有扫描功能来扫描多种类型的应用程序、管理整个组织的安全合规性以及自动化安全扫描操作。
</p>

<p>
注册及使用
</p>
<ul class="org-ul">
<li>试用</li>
<li>注册账户</li>
<li>电子邮箱验证申请免费试用</li>
<li>申请免费试用</li>
<li>点击 OK， 跳转到试用界面进入主页</li>
<li>创建扫描</li>
<li>DAST</li>
<li>扫描演示站点扫描结果</li>
<li>SAST</li>
<li>下载演示文件并上传扫描结果域验证</li>
</ul>

<p>
了解扫描思路即可。
</p>
</div>
</div>
<div id="outline-container-h:8c40dbca-d2f1-412d-bc35-a6054adb282c" class="outline-3">
<h3 id="h:8c40dbca-d2f1-412d-bc35-a6054adb282c">Xray 应用漏洞扫描器</h3>
<div class="outline-text-3" id="text-h:8c40dbca-d2f1-412d-bc35-a6054adb282c">
<p>
一款半开源的功能强大的安全评估工具，支持主动扫描和被动扫描。
</p>

<ul class="org-ul">
<li>使用文档: <a href="https://docs.xray.cool/">https://docs.xray.cool/</a></li>
<li>下载地址: <a href="https://github.com/chaitin/xray/releases">https://github.com/chaitin/xray/releases</a></li>
</ul>

<p>
注意：xray 不开源，直接下载构建的二进制文件即可，仓库内主要为社区贡献的 poc，每次 xray 发布将自动打包。
</p>

<p>
为了解决 xray 1.0在功能增加过程中变得复杂且臃肿的问题，推出了 xray 2.0
</p>
</div>
<div id="outline-container-org2740b2c" class="outline-4">
<h4 id="org2740b2c">Xray1.0</h4>
<div class="outline-text-4" id="text-org2740b2c">
<p>
下载：<a href="https://download.xray.cool/xray/1.9.6">https://download.xray.cool/xray/1.9.6</a>
</p>
</div>
<div id="outline-container-h:805cfae0-9f6a-46ea-ba15-e7c86ac2c6b3" class="outline-5">
<h5 id="h:805cfae0-9f6a-46ea-ba15-e7c86ac2c6b3">基础爬虫模式进行扫描（主动扫描）</h5>
<div class="outline-text-5" id="text-h:805cfae0-9f6a-46ea-ba15-e7c86ac2c6b3">
<p>
爬虫模式是模拟人工去点击网页的链接，然后去分析扫描，和代理模式不同的是，爬虫不需要人工的介入，访问速度要快很多，但是也有一些缺点需要注意
</p>
<ul class="org-ul">
<li>xray 的基础爬虫不能处理 js 渲染的页面，如果需要此功能，参考其它版本</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">&#26597;&#30475;&#29256;&#26412;</span>
xray_windows_amd64.exe version

<span style="color: #b22222;">#</span><span style="color: #b22222;">&#24320;&#21551;&#20027;&#21160;&#25195;&#25551;</span>
 <span style="color: #483d8b;">.</span>\xray_windows_amd64.exe webscan --basic-crawler http://testphp.vulnweb.com --html-output vuln.html
</pre>
</div>

<p>
打开 vuln.html 查看扫描报告。
</p>

<p>
第一次运行会生成一些配置文件，再次扫描就行。
</p>
</div>
</div>
<div id="outline-container-h:5ab52c01-4084-4b25-a7c1-ae2d01fa6863" class="outline-5">
<h5 id="h:5ab52c01-4084-4b25-a7c1-ae2d01fa6863">代理模式进行扫描（被动扫描）</h5>
<div class="outline-text-5" id="text-h:5ab52c01-4084-4b25-a7c1-ae2d01fa6863">
<p>
代理模式下的基本架构为，扫描器作为中间人，首先原样转发流量，并返回服务器响应给浏览器等客户端，通讯两端都认为自己直接与对方对话，同时记录该流量，然后修改参数并重新发送请求进行扫描。
</p>

<p>
不同系统安装证书: <a href="https://docs.xray.cool/#/tutorial/webscan_proxy">https://docs.xray.cool/#/tutorial/webscan_proxy</a>
</p>

<p>
1.使用命令生成证书
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">.</span>\xray_windows_amd64.exe genca
</pre>
</div>

<p>
2.需要在本机和浏览器中分别安装证书。
</p>
<ul class="org-ul">
<li>本机安装直接点击证书进行安装即可</li>
<li>浏览器选择右上角 - 设置选项。
<ul class="org-ul">
<li>选择 隐私与安全-查看证书-导入 对应的证书 ca.crt</li>
<li>重启浏览器</li>
</ul></li>
</ul>

<p>
3.设置代理 config.yaml 配置要监听的地址，默认监听所有地址
</p>
<ul class="org-ul">
<li>mitm 中 restriction 中 hostname_allowed 增加 xxx.com</li>
</ul>

<p>
4.浏览器设置代理
</p>
<ul class="org-ul">
<li>浏览器中选择扩展-&gt;寻找更多附加组件-&gt; 搜索 FoxyProxy</li>
<li>FoxyProxy Standard 插件 安装地址：<a href="https://addons.mozilla.org/zh-CN/firefox/addon/foxyproxy-standard/">https://addons.mozilla.org/zh-CN/firefox/addon/foxyproxy-standard/</a></li>
</ul>

<p>
FoxyProxy 配置
</p>
<div class="org-src-container">
<pre class="src src-sh">1.&#28857;&#20987;&#28155;&#21152;&#25353;&#38062;
2.&#35774;&#32622;&#36716;&#21457;&#22320;&#22336;&#20026; 127.0.0.1 &#65292; &#31471;&#21475;&#20026; 7777&#65292;&#31867;&#22411;http
3.&#24320;&#21551;&#20195;&#29702;
&#36873;&#25321;&#21018;&#25165;&#37197;&#32622;&#22909;&#30340; xray
</pre>
</div>


<p>
开启xray 被动扫描
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">.</span>\xray_windows_amd64.exe webscan --listen 127.0.0.1:7777 --html-output 123.html
</pre>
</div>

<p>
运行 DVWA
</p>
<div class="org-src-container">
<pre class="src src-sh">docker run -d --name dvwa -p 8080:80 -p 33060:3306 sagikazarmark/dvwa
</pre>
</div>

<p>
在DVWA中进行操作和访问，之后打开 dvwa-vul.html 查看漏洞
</p>
</div>
</div>
<div id="outline-container-h:a877eb96-7622-4680-973b-760a2821814a" class="outline-5">
<h5 id="h:a877eb96-7622-4680-973b-760a2821814a">流量走向</h5>
<div class="outline-text-5" id="text-h:a877eb96-7622-4680-973b-760a2821814a">
<p>
代理模式下的基本架构为，扫描器作为中间人，首先原样转发流量，并返回服务器响应给浏览器等客户端，通讯两端都认为自己直接与对方对话，同时记录该流量，然后修改参数并重新发送请求进行扫描。
</p>

<pre class="example" id="orgf779895">
         foxyproxy     [ 配置文件中的指定地址 ]
本地浏览器 ----&gt;    Xray ----&gt; 服务器
</pre>
</div>
</div>
<div id="outline-container-h:728ef7b9-2374-45db-a8f1-497b34d23865" class="outline-5">
<h5 id="h:728ef7b9-2374-45db-a8f1-497b34d23865">快速使用</h5>
<div class="outline-text-5" id="text-h:728ef7b9-2374-45db-a8f1-497b34d23865">
<p>
在使用之前，请务必阅读并同意 License 文件中的条款，否则请勿安装使用本工具。
</p>

<p>
License: <a href="https://github.com/chaitin/xray/blob/master/LICENSE.md">https://github.com/chaitin/xray/blob/master/LICENSE.md</a>
</p>

<p>
1.使用基础爬虫爬取并对爬虫爬取的链接进行漏洞扫描
</p>

<div class="org-src-container">
<pre class="src src-sh">xray webscan --basic-crawler http://example.com --html-output vuln.html
</pre>
</div>

<p>
2.使用 HTTP 代理进行被动扫描
</p>

<div class="org-src-container">
<pre class="src src-sh">xray webscan --listen 127.0.0.1:7777 --html-output proxy.html
</pre>
</div>

<p>
设置浏览器 http 代理为 <a href="http://127.0.0.1:7777">http://127.0.0.1:7777</a> ，就可以自动分析代理流量并扫描。
</p>


<p>
浏览器 -&gt; xray
</p>
<div class="org-src-container">
<pre class="src src-sh">1. Foxy proxy&#37197;&#32622;:
   1) &#20195;&#29702;IP&#22320;&#22336;&#65306;xray&#25152;&#22312;&#30340;IP&#65307;
   2) &#31471;&#21475;&#65306; xray&#30417;&#21548;&#31471;&#21475;
2. xray webscan -- listen 127.0.0.1:7777 --html-output proxy.html
3. &#27983;&#35272;&#22120;&#23548;&#20837; xray &#35777;&#20070;
4. &#37197;&#32622;&#35201;&#25195;&#25551;&#30340;&#22495;&#21517;&#25110;IP
</pre>
</div>

<p>
3.只扫描单个url，不使用爬虫
</p>

<div class="org-src-container">
<pre class="src src-sh">xray webscan --url http://example.com/?<span style="color: #a0522d;">a</span>=b --html-output single-url.html
</pre>
</div>

<p>
4.手动指定本次运行的插件
</p>

<p>
默认情况下，将会启用所有内置插件，可以使用下列命令指定本次扫描启用的插件。
</p>
<div class="org-src-container">
<pre class="src src-sh">xray webscan --plugins cmd-injection,sqldet --url http://example.com
xray webscan --plugins cmd-injection,sqldet --listen 127.0.0.1:7777
</pre>
</div>

<p>
5.指定输出文件的格式
</p>

<p>
可以指定将本次扫描的漏洞信息输出到某个文件中:
</p>
<div class="org-src-container">
<pre class="src src-sh">xray webscan --url http://example.com/?<span style="color: #a0522d;">a</span>=b <span style="color: #8b2252;">\</span>
--text-output result.txt --json-output result.json --html-output report.html
</pre>
</div>

<p>
报告样例：<a href="https://docs.xray.cool/assets/report_example.html">https://docs.xray.cool/assets/report_example.html</a>
</p>

<p>
其他用法请阅读文档： <a href="https://docs.xray.cool">https://docs.xray.cool</a>
</p>
</div>
</div>
<div id="outline-container-h:94a801bc-d079-4538-935a-bbc888703aef" class="outline-5">
<h5 id="h:94a801bc-d079-4538-935a-bbc888703aef">与 Burp 联动</h5>
<div class="outline-text-5" id="text-h:94a801bc-d079-4538-935a-bbc888703aef">
<p>
官方文档：<a href="https://docs.xray.cool/#/scenario/burp">https://docs.xray.cool/#/scenario/burp</a>
</p>

<p>
在实际测试过程中，除了被动扫描，也时常需要手工测试。这里使用 Burp 的原生功能与 xray 建立起一个多层代理，让流量从 Burp 转发到 xray 中。
</p>

<p>
1.首先 xray 建立起 webscan 的监听
</p>
<div class="org-src-container">
<pre class="src src-sh">xray webscan -- listen 127.0.0.1:7777 --html-output proxy.html
</pre>
</div>

<p>
2.burp配置
</p>

<div class="org-src-container">
<pre class="src src-sh">&#23458;&#25143;&#31471;--&gt;burpsuit(127.0.0.1:8080)--&gt;Xray(127.0.0.1:7777)--&gt;&#26381;&#21153;&#31471;
</pre>
</div>

<p>
仅http
</p>
<ul class="org-ul">
<li>Proxy &#x2013;&gt;Options 中找到Proxy Listeners，【Add】增加新的代理。
<ul class="org-ul">
<li>Binding中，port 8080,  loopback only绑定当地127.0.0.1地址</li>
<li>Request handing 中配置代理转发，host 为 xray 地址，port 为 xray 端口，OK 完成</li>
</ul></li>
</ul>

<p>
http/https
</p>
<ul class="org-ul">
<li>打开 User options 标签页，然后找到 Upstream Proxy Servers 设置。</li>
<li>点击 Add 添加上游代理以及作用域，Destination host可使用通配符*，如*baidu.com*，proxy host port 填写 xray 地址端口</li>
<li>重新打开xray，xray webscan &#x2013; listen 127.0.0.1:7777 &#x2013;html-output proxy-https.html</li>
</ul>

<p>
3.浏览器开启burp代理，访问网站测试。
</p>

<p>
burp 和 xray 为什么要联动?
</p>
<ul class="org-ul">
<li>可以绕过 waf，brup 可以修改请求，增加大量无数数据。Xary负责在合适位置插入POC。在读到漏洞 poc 之前，通过大量无用数据消耗waf检测时间，waf为保证业务稳定会放行，这样poc会顺利地到达后端。</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-h:fa914bdf-c28f-4c76-af53-c70649d3b43d" class="outline-3">
<h3 id="h:fa914bdf-c28f-4c76-af53-c70649d3b43d">AWVS-应用漏洞扫描器</h3>
<div class="outline-text-3" id="text-h:fa914bdf-c28f-4c76-af53-c70649d3b43d">
</div>
<div id="outline-container-h:30e6d375-37bf-49ee-8bd6-aedd8cb11514" class="outline-4">
<h4 id="h:30e6d375-37bf-49ee-8bd6-aedd8cb11514">使用docker安装</h4>
<div class="outline-text-4" id="text-h:30e6d375-37bf-49ee-8bd6-aedd8cb11514">
<p>
启动镜像
</p>
<div class="org-src-container">
<pre class="src src-sh">docker pull xiaomimi8/awvs14-log4j-2022

docker run -it -d -p 13443:3443 xiaomimi8/awvs14-log4j-2022
</pre>
</div>

<p>
访问地址：<a href="https://your_ip:13443/">https://your_ip:13443/</a>
</p>

<p>
登录用户名密码
</p>
<ul class="org-ul">
<li>用户名：admin@admin.com</li>
<li>密码：Admin123</li>
<li>AWVS版本：211215172</li>
</ul>
</div>
</div>
<div id="outline-container-h:6ffb4f40-6033-44a9-b8fc-afba72d29f31" class="outline-4">
<h4 id="h:6ffb4f40-6033-44a9-b8fc-afba72d29f31">发起扫描</h4>
<div class="outline-text-4" id="text-h:6ffb4f40-6033-44a9-b8fc-afba72d29f31">
<ul class="org-ul">
<li>点击 Taget目标，Add Target添要扫描的新网站。如dvwa站点 <a href="http://124.222.171.19:8081/">http://124.222.171.19:8081/</a> ， 保存</li>
<li>在Business Criticality 选择优先级最高的 critical；</li>
<li>点击"Scan扫描"，Scan type 默认为Full Scan全量扫描。点击Create Scan创建扫描</li>
<li>扫描完成后，生成报告</li>
</ul>


<p>
选项的说明：
</p>
<ul class="org-ul">
<li>Business Criticality：严重最优先扫描</li>
<li>Scan Speed： 并发量高低</li>
<li>Site Login：一般不用，可用会插入脏数据</li>
<li>Scan Type：扫描类型，默认Full Scan 全量扫描。</li>
<li>Schedule: Future Scan（定时扫描），Instant（一直扫描）</li>
</ul>
</div>
</div>
<div id="outline-container-h:1fb818b6-dba6-4f69-bda3-a8d188971f7d" class="outline-4">
<h4 id="h:1fb818b6-dba6-4f69-bda3-a8d188971f7d">添加自定义模板</h4>
<div class="outline-text-4" id="text-h:1fb818b6-dba6-4f69-bda3-a8d188971f7d">
<p>
找到"扫描配置文件"，选择"添加新配置文件"，起个名字。下次在扫描时就可以选择自定义的配置文件了。
</p>
</div>
</div>
</div>
<div id="outline-container-h:f917e63b-b23b-4f62-b921-1b98df021b09" class="outline-3">
<h3 id="h:f917e63b-b23b-4f62-b921-1b98df021b09">Nessus-主机漏洞扫描工具</h3>
<div class="outline-text-3" id="text-h:f917e63b-b23b-4f62-b921-1b98df021b09">
<p>
Nessus是一款C/S架构的漏洞扫描器，主要用来进行主机层面的漏洞扫描，不仅功能全面，而且还可以实时更新漏洞库。
</p>

<p>
优缺点
</p>
<ul class="org-ul">
<li>优点：世界流行、有完整的漏扫服务、可随时更新漏洞库</li>
<li>缺点：需要付费</li>
</ul>

<p>
Nessus 扫描原理
</p>
<ul class="org-ul">
<li>探测主机：确认扫描目标是否在线</li>
<li>扫描端口：获取目标的信息，如开放端口号、对外提供的服务名称、使用版本、操作系统类型等</li>
<li>漏洞攻击：根据扫描端口获取的信息，使用漏洞模块，针对性的进行攻击，从而判断是否存在漏洞</li>
</ul>
</div>
<div id="outline-container-h:067d778e-cead-4e77-b356-f36baedd66b1" class="outline-4">
<h4 id="h:067d778e-cead-4e77-b356-f36baedd66b1">Nessus 安装及使用</h4>
<div class="outline-text-4" id="text-h:067d778e-cead-4e77-b356-f36baedd66b1">
<p>
市面上最好用的免费扫描器，免费最多支持16个ip，用尽后重新安装。
</p>


<ul class="org-ul">
<li><p>
首先需要在官网获取激活码
</p>

<p>
Nessus获取激活码：<a href="https://zh-cn.tenable.com/products/nessus/activation-code?tns_redirect=true">https://zh-cn.tenable.com/products/nessus/activation-code?tns_redirect=true</a>
</p></li>

<li><p>
之后进入下载页面选择对应的系统版本进行下载
</p>

<p>
Nessus下载链接：<a href="https://www.tenable.com/downloads/nessus?loginAttempted=true">https://www.tenable.com/downloads/nessus?loginAttempted=true</a>
</p></li>
</ul>

<p>
安装过程
</p>
<ul class="org-ul">
<li>以Windows为例，下载以后是一个exe文件，双击即可安装。</li>
</ul>

<p>
激活过程
</p>
<ul class="org-ul">
<li>选择 Connect via SSL</li>
<li>选择 Continue，注意不勾 Register Offline</li>
<li>选择 Register for Nessus Essentials 输入之前申请的激活码</li>
<li>设置用户名密码</li>
<li>等待下载插件（墙&amp;插件大），时间比较长，有些需要翻墙</li>
<li>有个圆圈在转在做自我检查，不用管，已经可以扫描了</li>
<li>登录</li>
<li>添加扫描目标</li>
</ul>
</div>
<div id="outline-container-h:01f41a97-1a42-4670-a867-0807bef165b4" class="outline-5">
<h5 id="h:01f41a97-1a42-4670-a867-0807bef165b4">启动服务</h5>
<div class="outline-text-5" id="text-h:01f41a97-1a42-4670-a867-0807bef165b4">
<p>
访问地址： <a href="https://localhost:8834">https://localhost:8834</a>
</p>

<p>
Mac OS X
</p>
<ol class="org-ol">
<li>导航到 系统偏好设置 。</li>
<li>点击 按钮。</li>
<li>点击 按钮。</li>
<li>输入您的用户名和密码。</li>
<li>要停止 Nessus 服务，请单击 停止 Nessus 按钮。-或者- 要启动 Nessus 服务，请单击 启动 Nessus 按钮。</li>
</ol>

<p>
Mac OS X Command Line Operation
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">Start</span>
launchctl load -w /Library/LaunchDaemons/com.tenablesecurity.nessusd.plist
<span style="color: #b22222;"># </span><span style="color: #b22222;">Stop</span>
launchctl unload -w /Library/LaunchDaemons/com.tenablesecurity.nessusd.plist
</pre>
</div>

<p>
Windows
</p>
<ul class="org-ul">
<li>双击桌面上的Nessus图标即可</li>
</ul>


<ul class="org-ul">
<li>导航到 服务 。在 名称 列中，单击 Tenable Nessus 。</li>
<li>要停止 Nessus 服务，请右键单击 Tenable Nessus ，然后单击 停止 。</li>
<li>要重新启动 Nessus 服务，请右键单击 Tenable Nessus ，然后单击 启动 。</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">Start or Stop Windows Command Line Operation</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">Start</span>
C:\Windows\system32&gt;net start <span style="color: #8b2252;">"Tenable Nessus"</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">Stop</span>
C:\Windows\system32&gt;net stop <span style="color: #8b2252;">"Tenable Nessus"</span>
</pre>
</div>

<p>
Linux 使用以下命令：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">Start or Stop Linux Command Line Operation</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">RedHat, CentOS, and Oracle Linux</span>

Start <span style="color: #b22222;"># </span><span style="color: #b22222;">/sbin/service nessusd start</span>
Stop <span style="color: #b22222;"># </span><span style="color: #b22222;">/sbin/service nessusd stop</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">SUSE</span>
Start <span style="color: #b22222;"># </span><span style="color: #b22222;">/etc/rc.d/nessusd start</span>
Stop <span style="color: #b22222;"># </span><span style="color: #b22222;">/etc/rc.d/nessusd stop</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">FreeBSD</span>
Start <span style="color: #b22222;"># </span><span style="color: #b22222;">service nessusd start</span>
Stop <span style="color: #b22222;"># </span><span style="color: #b22222;">service nessusd stop</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">Debian, Kali, and Ubuntu</span>
Start <span style="color: #b22222;"># </span><span style="color: #b22222;">/etc/init.d/nessusd start</span>
Stop <span style="color: #b22222;"># </span><span style="color: #b22222;">/etc/init.d/nessusd stop</span>
</pre>
</div>

<p>
官方文档:
</p>
<ul class="org-ul">
<li><a href="https://docs.tenable.com/Nessus.htm">https://docs.tenable.com/Nessus.htm</a></li>
<li><a href="https://docs.tenable.com/nessus/10_8/Content/Scans.htm">https://docs.tenable.com/nessus/10_8/Content/Scans.htm</a></li>
</ul>
</div>
</div>
<div id="outline-container-h:55376958-b5a6-4d1c-bd9f-fb46cc3690f4" class="outline-5">
<h5 id="h:55376958-b5a6-4d1c-bd9f-fb46cc3690f4">开始扫描</h5>
<div class="outline-text-5" id="text-h:55376958-b5a6-4d1c-bd9f-fb46cc3690f4">
<ul class="org-ul">
<li>找到 My Scan 点击 New Scan</li>
<li>选择 Advanced Scan , Setting 中 选择
<ul class="org-ul">
<li>BASIC
<ul class="org-ul">
<li>general扫描，Targets 写扫描地址，如 124.222.171.19</li>
</ul></li>
<li>Schedule: 可设置定时扫描。默认没开启。</li>
<li>DISCOVERY
<ul class="org-ul">
<li>host Discovery: 取消 ping 扫描，因为有的主机是禁 ping 的。</li>
<li>port scanning:  range为全端口扫描 1-65535，默认 default 常用端口</li>
</ul></li>
</ul></li>
<li>Save 后 Launch 开始扫描</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:5846a4dc-5b94-45cd-a4d4-cf5ec46c2819" class="outline-4">
<h4 id="h:5846a4dc-5b94-45cd-a4d4-cf5ec46c2819">漏洞扫描器使用</h4>
<div class="outline-text-4" id="text-h:5846a4dc-5b94-45cd-a4d4-cf5ec46c2819">
</div>
<div id="outline-container-h:a2eebb06-5bfd-4e16-9608-cd8bd34a100c" class="outline-5">
<h5 id="h:a2eebb06-5bfd-4e16-9608-cd8bd34a100c">主机漏洞扫描器的扫描原理：</h5>
<div class="outline-text-5" id="text-h:a2eebb06-5bfd-4e16-9608-cd8bd34a100c">
<ul class="org-ul">
<li>原理扫描：准确率高，但是可能会影响系统</li>
<li>版本扫描：准确率低，但是不会影响系统</li>
</ul>
</div>
</div>
<div id="outline-container-h:20268cd7-ffba-4344-bc90-658ee2bc87a7" class="outline-5">
<h5 id="h:20268cd7-ffba-4344-bc90-658ee2bc87a7">扫描前的准备工作</h5>
<div class="outline-text-5" id="text-h:20268cd7-ffba-4344-bc90-658ee2bc87a7">
<p>
基本信息
</p>
<ul class="org-ul">
<li>确认扫描时间</li>
<li>确定扫描方式（探测版本、发送POC）</li>
<li>确定任务类型（特定漏洞扫描、网段扫描、端口服务扫描)</li>
</ul>

<p>
物理条件
</p>
<ul class="org-ul">
<li>网络环境</li>
<li>接入点</li>
<li>配合人员（系统管理员、机房管理员等)</li>
</ul>

<p>
风险提示与告知
</p>
<ul class="org-ul">
<li>占用部分带宽</li>
<li>触发安全防护产品的告警</li>
<li>可能会影响业务稳定性，甚至造成宕机</li>
<li>网段扫描可能涉及未知资产，存在一定业务风险</li>
</ul>
</div>
</div>
<div id="outline-container-h:7c82c11d-5205-4e16-9567-e1655dc5db65" class="outline-5">
<h5 id="h:7c82c11d-5205-4e16-9567-e1655dc5db65">扫描实施</h5>
<div class="outline-text-5" id="text-h:7c82c11d-5205-4e16-9567-e1655dc5db65">
<p>
检查工作
</p>
<ul class="org-ul">
<li>严格按照指定的扫描地址进行配置，避免发生IP地址冲突问题</li>
<li>地址配置完成后，先进行网络可达性的测试（如windows系统使用ping命令），确保网络可达</li>
</ul>

<p>
开始扫描
</p>
<ul class="org-ul">
<li>如果扫描资产数量庞大，可以分批建立和下发任务，避免出现扫描工具卡顿等意外情况</li>
<li>根据前期收集到的信息，排除先前扫描出现异常的资产</li>
<li>可以先扫描1-2个地址，进行网络承载、路由路通的测试</li>
<li>扫描过程中提醒配合人员（如系统管理员）全程关注系统运行情况，一旦出现异常则立即停止扫描，配合进行处置和恢复</li>
</ul>
</div>
</div>
<div id="outline-container-h:a2c4edce-890c-4b8c-a8a9-50c5232a81bc" class="outline-5">
<h5 id="h:a2c4edce-890c-4b8c-a8a9-50c5232a81bc">扫描收尾工作</h5>
<div class="outline-text-5" id="text-h:a2c4edce-890c-4b8c-a8a9-50c5232a81bc">
<ul class="org-ul">
<li>扫描任务结束后，可能会出现一些异常现象，具体情况及排查思路如下：</li>
<li>扫描结果无明显漏洞：检查是否存在低危漏洞，若存在，则扫描结果应该准确；若不存在，则可能是被中间的防护设备所拦截</li>
<li>扫描资产减少：网络不稳定、资产未存活、网络不可达都可能导致，可以使用ping命令单独测试网络可达性</li>
<li>扫描任务失败：可能是中间存在防护设备，也有可能是工具故障</li>
<li>扫描进度卡死：可能是中间存在防护设备，也有可能是工具故障</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:724cc6d5-1e4c-4fdd-8735-e76743001bf7" class="outline-4">
<h4 id="h:724cc6d5-1e4c-4fdd-8735-e76743001bf7">扫描业务场景与漏洞闭环</h4>
<div class="outline-text-4" id="text-h:724cc6d5-1e4c-4fdd-8735-e76743001bf7">
<p>
思考一下
</p>
<ul class="org-ul">
<li>撰写一份企业级扫描报告的难点是什么？</li>
<li>是不知道报告怎么写吗？</li>
<li>还是无法输出一份有效的扫描报告来推动漏洞加固闭环？</li>
</ul>

<p>
扫描器导出的扫描报告都比较好了，难点在于划分漏洞的责任归属完成漏洞修复闭环
</p>
</div>
<div id="outline-container-h:22b5f239-f224-4968-aaa2-c90ca6f5aac2" class="outline-5">
<h5 id="h:22b5f239-f224-4968-aaa2-c90ca6f5aac2">扫描业务场景</h5>
<div class="outline-text-5" id="text-h:22b5f239-f224-4968-aaa2-c90ca6f5aac2">
<p>
场景：A公司花钱请B公司开发一套业务系统，开发流程如下：A公司提供服务器，
按照开发要求，A公司运维人员在服务器上提前安装了基础纯净的操作系统；B公
司开发人员按照需求开发业务系统，开发过程中用到了各类中间件、数据库等内
容，开发测试工作完成后，部署在A公司预先准备好的服务器上。业务系统正式
上线前，A公司又花钱请了C公司进行安全测试，发现系统存在漏洞。漏洞确认后，
A公司提出，既然漏洞是安全人员发现的，就继续交由安全人员来进行修复。请
问：A公司提出的请求是否合理？
</p>

<p>
人员：A公司-运维人员；B公司-开发人员；C公司-安全人员
</p>

<p>
前端漏洞：
</p>
<ul class="org-ul">
<li>源代码属于商业机密，不应该暴露给安全人员</li>
<li>系统非安全人员开发</li>
</ul>

<p>
后端漏洞：
</p>
<ul class="org-ul">
<li>版本信息、配置信息的漏洞，账号密码是敏感信息，不能给安全人员操作权限</li>
</ul>

<p>
风险点：
</p>
<ul class="org-ul">
<li>打补丁、改配置可能给业务带来影响，不应该给安全人员操作</li>
</ul>
</div>
</div>
<div id="outline-container-h:7aae887b-a86d-454d-b905-2fc5995f1d56" class="outline-5">
<h5 id="h:7aae887b-a86d-454d-b905-2fc5995f1d56">撰写企业级扫描报告</h5>
<div class="outline-text-5" id="text-h:7aae887b-a86d-454d-b905-2fc5995f1d56">
<p>
扫描器导出的扫描报告都比较好了，难点在于划分漏洞的责任归属完成漏洞修复闭环
</p>
<ul class="org-ul">
<li>按主机划分</li>
</ul>

<p>
比如：增加负责人、是否能够修复、修复时间、备注
</p>
</div>
</div>
<div id="outline-container-h:d2d412e0-f8f8-4e7c-9d31-572543ccef60" class="outline-5">
<h5 id="h:d2d412e0-f8f8-4e7c-9d31-572543ccef60">指导进行漏洞加固</h5>
<div class="outline-text-5" id="text-h:d2d412e0-f8f8-4e7c-9d31-572543ccef60">
<p>
从漏洞本身出发
</p>
<ul class="org-ul">
<li>升级、打补丁</li>
<li>卸载相关中间件或软件</li>
<li>其他临时加固措施</li>
</ul>

<p>
从已有安全措施出发
</p>
<ul class="org-ul">
<li>在主机侧给需要的业务开放白名单</li>
<li>在主机侧设置黑名单</li>
<li>通过防火墙设置策略，可设置至端口级</li>
</ul>

<p>
其他主机扫描软件
</p>
<ul class="org-ul">
<li>qualys 收费</li>
</ul>
</div>
</div>
</div>
</div>
</section>
</div>
<div id="postamble" class="status">
    <div class=bar data-astro-cid-p3givckg>
        <div class=list data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:gnuemacs height=1em viewBox="0 0 24 24" width=1em>
                    <title>emacs</title>
                    <symbol id=ai:simple-icons:gnuemacs>
                        <path d="M12 24C5.448 24 .118 18.617.118 12S5.448 0 12 0s11.882 5.383 11.882 12S18.552 24 12 24zM12 .661C5.813.661.779 5.748.779 12S5.813 23.339 12 23.339S23.221 18.253 23.221 12S18.187.661 12 .661zM8.03 20.197s.978.069 2.236-.042c.51-.045 2.444-.235 3.891-.552c0 0 1.764-.377 2.707-.725c.987-.364 1.524-.673 1.766-1.11c-.011-.09.074-.408-.381-.599c-1.164-.488-2.514-.4-5.185-.457c-2.962-.102-3.948-.598-4.472-.997c-.503-.405-.25-1.526 1.907-2.513c1.086-.526 5.345-1.496 5.345-1.496c-1.434-.709-4.109-1.955-4.659-2.224c-.482-.236-1.254-.591-1.421-1.021c-.19-.413.448-.768.804-.87c1.147-.331 2.766-.536 4.24-.56c.741-.012.861-.059.861-.059c1.022-.17 1.695-.869 1.414-1.976c-.252-1.13-1.579-1.795-2.84-1.565c-1.188.217-4.05 1.048-4.05 1.048c3.539-.031 4.131.028 4.395.398c.156.218-.071.518-1.015.672c-1.027.168-3.163.37-3.163.37c-2.049.122-3.492.13-3.925 1.046c-.283.599.302 1.129.558 1.46c1.082 1.204 2.646 1.853 3.652 2.331c.379.18 1.49.52 1.49.52c-3.265-.18-5.619.823-7.001 1.977c-1.562 1.445-.871 3.168 2.33 4.228c1.891.626 2.828.921 5.648.667c1.661-.09 1.923-.036 1.939.1c.023.192-1.845.669-2.355.816c-1.298.374-4.699 1.129-4.716 1.133z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:gnuemacs></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Emacs</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:org height=1em viewBox="0 0 24 24" width=1em>
                    <title>org-mode</title>
                    <symbol id=ai:simple-icons:org>
                        <path d="M17.169 0c-.566.004-2.16 3.312-3.376 5.94a2.19 2.19 0 0 1-.408-1.267c-.03-.582-1.089.237-.936 1.275c-.068-.035-1.26.227-1.26.23c-.23-.93-.802-1.618-1.15-.563c-.701 1.663-.88 2.984.115 4.585c-.908 4.058-6.948 6.053-6.32 9.33c.175.004 1.634 3.48 6.337 2.057c5.557-1.577 8.624 2.116 8.978 2.375c.52.526-1.348-4.573-5.302-6.865c-2.339-1.276-.87-3.474-.703-4.25c0 0 1.874 1.312 3.232-.692c1.227.316 2.05-.224 3.105.158c.64.28 3.336.11 2.334-1.396c-.148.129.07.27-.075.46c-.043.056-.128.232-.408.315c-.314.149-.83.27-1.43-.37c-.434-.32-.748-.04-.992-.063c.152-.098.577-.315 1.264-.315c.388 0 .594.336.854.338c.174 0 .685-.262.787-.365c.63-.41.697-.278 1.012-.905c.17-.759-.215-.92-.332-1.129c-.032-.483-.436-.67-.919-.326c-1.106-.198-2.192-.105-2.728-.15c-1.175-.164-2.153-.786-2.153-.786c.143-.19.075-.6-.842-.628c-.315-.104-.45-.2-.745-.307c.61-1.37.674-2.007 1.418-4.004c.261-1.053 1.039-2.685.643-2.682zm-4.297 8.093c.03-.086.443.138.952.176c.395.03.805.048 1.296-.025c.03-.005.172.095-.15.194c-.02.01-.062-.01-.065.196c0 .022-.01.04-.02.046c-.15.152-.708.223-1.065.1c-.436-.17-.482-.316-.517-.443c-.305-.147-.47-.123-.43-.244zM9.685 10.2C8.86 9 8.929 8.36 8.96 7.256C7.961 8.288 6.855 8.3 5.18 8.58c-1.299.234-3.657 2.447-4.025 4.742c-.043.608-.08 2.183.424 3.498c.492 1.13.828 1.727 1.844 2.335c-.882-3.169 5.296-5.33 6.263-8.955z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:org></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Orgmode</p>
                </div>
            </span>
            <a href=/donations.html class=entry data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:astro height=1em viewBox="0 0 24 24" width=1em>
                    <title>Donations</title>
                    <symbol id=ai:simple-icons:astro>
                        <path d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.158 3.158 0 0 1-1.407-1.188a3.31 3.31 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165h.002zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614c.302 0 .57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727l-5.516 14.99z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:astro></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>打赏</p>
                </div>
            </span>
            </a>
            <span class=entry data-astro-cid-p3givckg>
                <svg xmlns="http://www.w3.org/2000/svg" class=heading data-astro-cid-p3givckg data-icon=simple-icons:copyright width="1em" height="1em" viewBox="0 0 24 24">
                    <title>Copyright</title>
                    <path fill="currentColor" d="M19 2a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm-5 5h-4a1 1 0 0 0-1 1l.007.117A1 1 0 0 0 10 9h3v5a1 1 0 0 1-1.993.117L11 14a1 1 0 0 0-2 0a3 3 0 0 0 6 0V8a1 1 0 0 0-1-1" />
                    <use xlink:href=#ai:simple-icons:copyright></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>© 2025 Jasper Hsu</p>
                </div>
            </span>
        </div>
        <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="list license" data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Creative Commons</title>
                    <symbol id=ai:fa6-brands:creative-commons>
                        <path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Creative Commons</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-by height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Attribute</title>
                    <symbol id=ai:fa6-brands:creative-commons-by>
                        <path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3c3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7c3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-by></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Attribute</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-nc height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Noncommercial</title>
                    <symbol id=ai:fa6-brands:creative-commons-nc>
                        <path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256C0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9c0 110.9 92.1 202.4 203.7 202.4c122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2c0-6.2-2.2-11.2-6.6-15.1c-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1c53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1c0-57-19.8-105-59.3-143.9c-39.3-39.9-87.2-59.8-143.6-59.8z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-nc></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Noncommercial</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-sa height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Share Alike</title>
                    <symbol id=ai:fa6-brands:creative-commons-sa>
                        <path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7c99.8 0 127.5 82.5 127.5 134.2c0 63.6-41 132.9-128.9 132.9c-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2c23.3 0 58-18.2 58-82.8c0-82.5-49.1-80.6-56.7-80.6c-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2l-49-49.2h19.4z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-sa></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Share Alike</p>
                </div>
            </span>
        </a>
    </div>
<!--
<script type="text/javascript" src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.min.js"></script>
<div id="back-to-top" class=""><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></div>
-->
</div>
</body>
</html>
