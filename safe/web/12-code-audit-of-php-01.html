<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Safe: PHP 代码审计-PHP语言</title>
<meta name="description" content="kubernetes, linux" />
<meta name="keywords" content="kubernetes, linux" />
<meta name="generator" content="Org Mode" />
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@jasperhsu">
<meta name="google-adsense-account" content="ca-pub-1741779893655624">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1741779893655624" crossorigin="anonymous"></script>
<!-- from -->
<!--
<style>#back-to-top{background:#000;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;bottom:20px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);color:#fff;cursor:pointer;display:block;height:56px;opacity:1;outline:0;position:fixed;right:20px;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-transition:bottom .2s,opacity .2s;-o-transition:bottom .2s,opacity .2s;-moz-transition:bottom .2s,opacity .2s;transition:bottom .2s,opacity .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:56px;z-index:1}#back-to-top svg{display:block;fill:currentColor;height:24px;margin:16px auto 0;width:24px}#back-to-top.hidden{bottom:-56px;opacity:0}</style>
-->
<link rel="stylesheet" href="/static/distro-htmlize.css">
<link rel="stylesheet" href="/static/aandds.com/css/main.css">
<link rel="stylesheet" href="/static/aandds.com/css/drollery.min.css">
<script type="text/javascript" src="/static/aandds.com/js/main.js"></script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Safe: PHP 代码审计-PHP语言</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:79b9bf19-a0b4-4c38-9370-62f0def7c0f4">1. PHP 简介</a>
<ul>
<li><a href="#h:f38ef1fd-99e8-48cd-b9b1-7591e7b95367">1.1. XAMPP如何下载及安装</a></li>
<li><a href="#h:dc8d0138-884e-45fe-bf87-e38149120916">1.2. 添加系统变量</a>
<ul>
<li><a href="#h:03e15e50-b667-4c8e-9327-4abf19fd651a">1.2.1. VS Code 的安装</a>
<ul>
<li><a href="#h:8666ee0d-c29b-4e72-b3b1-48b21b02180a">1.2.1.1. 私人订制：VS Code 的常见配置</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:6d4487d7-2874-48bc-bec2-b68607a2280a">1.3. PHP 是什么？</a></li>
<li><a href="#h:466ca8b1-61ab-4258-926a-0b14a34349aa">1.4. PHP 能做什么？</a></li>
<li><a href="#h:a2735f41-9a09-44ef-bb65-82f6ef0b5ee3">1.5. 第一个 PHP 页面</a></li>
<li><a href="#h:2c885c51-b702-40a6-be92-ac7d97cdaf35">1.6. 实用的脚本</a></li>
<li><a href="#h:8dfeeb6a-1c4a-4996-9bce-1246ab07668d">1.7. 处理表单</a>
<ul>
<li><a href="#h:c1422ede-72e0-4b0e-93f7-667a9390d29b">1.7.1. 安全分享</a>
<ul>
<li><a href="#h:51e36950-62cf-4a01-afcb-a6b56c56e651">1.7.1.1. xss防御</a></li>
<li><a href="#h:9c79dfd1-2d57-4268-a82d-cf1c863260c9">1.7.1.2. cookie</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:4b8c837f-9249-426f-b033-9db3cfe5a368">2. PHP基本语法</a>
<ul>
<li><a href="#h:bdc65256-5a5b-49cb-8c33-b4efa0ea8467">2.1. PHP 标记</a></li>
<li><a href="#h:3b9500f3-944b-4429-8695-b31471ba0637">2.2. 从 HTML 中分离</a></li>
<li><a href="#h:e0af276e-9246-4fe1-865e-9ca31bd7e831">2.3. 指令分隔符</a></li>
<li><a href="#h:f4f97922-16d2-4c3b-a7f5-dc1f214448ec">2.4. 注释</a></li>
</ul>
</li>
<li><a href="#h:5c7a4631-cf11-4928-bec0-7f97db5cd3ca">3. PHP类型</a>
<ul>
<li><a href="#h:4ebf554d-0738-49cb-b910-89adeb77538e">3.1. Boolean 布尔类型</a>
<ul>
<li><a href="#h:97f8ee87-84e5-471b-b8d3-831f87d9da7f">3.1.1. 语法</a></li>
<li><a href="#h:7cdfb7a7-2300-4796-82e5-5844cb5f9835">3.1.2. 转换为布尔值</a></li>
</ul>
</li>
<li><a href="#h:7d373ecc-2884-4754-b075-ea6bb41c79f5">3.2. Integer 整型</a>
<ul>
<li><a href="#h:b4238fd1-1800-40c3-976f-5cf675178ab3">3.2.1. 语法</a></li>
<li><a href="#h:68b30ee4-c2ab-46bb-a6b3-1fcabbd79661">3.2.2. 整数溢出</a></li>
<li><a href="#h:ce151558-7573-42c4-9d1f-2e7f5c242c77">3.2.3. 整数除法</a></li>
<li><a href="#h:3bb0bb31-02cd-4773-b939-884198946308">3.2.4. 转换为整型</a></li>
<li><a href="#h:69479c9d-2d00-4a42-a5e5-1dce4f5ca5d8">3.2.5. 安全分享-整数溢出</a>
<ul>
<li><a href="#h:42897642-8ee8-4209-a35d-e0f6c382fb00">3.2.5.1. 为什么学PHP?</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h:1101ce27-aa55-4aa1-bed7-9f34c4b399a2">3.3. Float 浮点型</a></li>
<li><a href="#h:ed023975-3069-4909-bf38-2bb4e3fe7915">3.4. 转换为浮点数</a>
<ul>
<li><a href="#h:05e45497-17a1-4598-a0c8-2374bde97a5c">3.4.1. 比较浮点数</a></li>
<li><a href="#h:9721a942-193b-4a9b-8129-c0cf70ffdf56">3.4.2. NaN</a></li>
</ul>
</li>
<li><a href="#h:d5de92f0-2c15-4f84-a28f-5aef6523ad06">3.5. String 字符串</a>
<ul>
<li><a href="#h:0f2a7aa2-d940-452e-8f62-e9ca7596e07c">3.5.1. 语法</a>
<ul>
<li><a href="#h:7142b745-7056-4600-bb3b-9687b35eb564">3.5.1.1. 单引号</a></li>
<li><a href="#h:d7767fe7-080c-4090-bacc-e2e12779ddda">3.5.1.2. 双引号</a></li>
<li><a href="#h:c3de3c30-c3fd-4d26-b785-1500d307bd0b">3.5.1.3. Heredoc 结构</a></li>
<li><a href="#h:9d7a93a8-c529-4c19-a18b-02922e1d9351">3.5.1.4. Nowdoc 结构</a></li>
<li><a href="#h:e8a5b61c-148d-40ea-a6a3-70d03641e77a">3.5.1.5. 字符串插值</a></li>
<li><a href="#h:1d922899-0a47-41dd-a367-473136d84392">3.5.1.6. 高级（大括号）语法</a></li>
<li><a href="#h:5efe322b-27f4-49e0-b60f-eb4636cd515b">3.5.1.7. 存取和修改字符串中的字符</a></li>
</ul>
</li>
<li><a href="#h:05a3deb6-a2e6-4e83-91b2-59fe95aa2610">3.5.2. 有用的函数和运算符</a></li>
<li><a href="#h:ab2edc0c-3b24-4b3b-b04d-c02573d9e50a">3.5.3. 转换成字符串</a></li>
<li><a href="#h:91c277e7-6ee4-40d4-8ccd-f35d6a1ba720">3.5.4. 字符串类型详解</a></li>
<li><a href="#h:71eaa467-e8ed-48dc-bfc9-772df328bbd0">3.5.5. 安全分享</a></li>
</ul>
</li>
<li><a href="#h:e7e48dac-c1f0-4b90-9abb-d9af2b5ae349">3.6. Array 数组</a>
<ul>
<li><a href="#h:03ed7a6d-9b1d-4446-8d87-ef747c058ea1">3.6.1. 语法</a>
<ul>
<li><a href="#h:3e32c40a-1388-4125-a0bd-10f5ef863a4a">3.6.1.1. 定义数组 array()</a></li>
<li><a href="#h:c8991044-67d3-4867-b19d-04255e6f522c">3.6.1.2. 用方括号语法访问数组单元</a></li>
<li><a href="#h:cf54ee28-eda4-457f-a9cc-f0c114c3bad5">3.6.1.3. 用方括号的语法新建／修改</a></li>
<li><a href="#h:24b2fb03-a640-434e-9d2f-3d3360faa3ab">3.6.1.4. 数组解包</a></li>
</ul>
</li>
<li><a href="#h:28d69982-3cf4-4faf-b8f3-9829c2ef1714">3.6.2. 实用函数</a></li>
<li><a href="#h:33a937a3-c8f0-478e-8c36-d36f30b78fc7">3.6.3. 数组做什么和不做什么</a>
<ul>
<li><a href="#h:0518820d-83d5-4989-ace7-4fd04af73e29">3.6.3.1. 为什么 <code>$foo[bar]</code> 错了？</a></li>
</ul>
</li>
<li><a href="#h:79cefe2d-d1a8-4906-9ab5-e636a2b52492">3.6.4. 转换为数组</a></li>
<li><a href="#h:6495e5c2-2c3c-4d3a-a54c-7e4adf64d392">3.6.5. 比较</a></li>
<li><a href="#h:77044e78-6d4e-43b4-8244-87617159b11e">3.6.6. 数组解包</a></li>
<li><a href="#h:e28167fd-820c-4a58-aacb-701872d76ee5">3.6.7. 示例</a></li>
<li><a href="#h:f5b7b9fa-ca8e-4c2b-920e-743cfebe5236">3.6.8. 安全分享-变量覆盖</a></li>
</ul>
</li>
<li><a href="#h:51f42820-9a2e-4bf7-92d5-87a8bce0d362">3.7. Iterable 可迭代对象</a></li>
<li><a href="#h:4b7efe72-ab57-4705-9df9-4461070193ea">3.8. Object 对象</a>
<ul>
<li><a href="#h:01f56bee-479f-4f76-b1b3-97a7820f58a6">3.8.1. 对象初始化</a></li>
<li><a href="#h:a89ffca4-aea8-4168-aeeb-d147a2bf8df6">3.8.2. 转换为对象</a></li>
</ul>
</li>
<li><a href="#h:4578ef62-2fab-4390-bd7b-2c4e8ef9d75b">3.9. Resource 资源类型</a>
<ul>
<li><a href="#h:8ccb5bc7-8a24-4eb4-8663-bce335033236">3.9.1. 转换为资源</a></li>
<li><a href="#h:4ad92b71-361f-4a14-888d-974803628495">3.9.2. 释放资源</a></li>
</ul>
</li>
<li><a href="#h:b9debca4-ef45-4fe6-88cc-96241ecae965">3.10. NULL</a>
<ul>
<li><a href="#h:7dd24230-02a1-411c-858c-186ea632a3ca">3.10.1. 语法</a></li>
<li><a href="#h:e05c54ac-176f-4571-93d3-eaed3d5f9307">3.10.2. 转换到 null</a></li>
</ul>
</li>
<li><a href="#h:9bdca0d3-9cdf-4647-bdc3-0422fd5e019f">3.11. 类型声明</a></li>
</ul>
</li>
<li><a href="#h:21a84ea2-6810-4fe7-a8f4-7746532cfa31">4. PHP流程控制</a>
<ul>
<li><a href="#h:c5156176-9f9b-4b41-8de9-b0874baeb072">4.1. if</a></li>
<li><a href="#h:3bbd4781-9de9-48c8-8c63-d3e863a4166c">4.2. else</a></li>
<li><a href="#h:9500fb58-e5ca-4a11-915d-ecabb14be512">4.3. elseif/else if</a></li>
<li><a href="#h:5ccbfd00-7a56-484c-986d-1d478adf169b">4.4. 流程控制的替代语法</a></li>
<li><a href="#h:01f66d68-4484-4c29-8eef-e387fc720e6a">4.5. while</a></li>
<li><a href="#h:14b46548-7c4e-4349-86b2-5ad97f9048f5">4.6. do-while</a></li>
<li><a href="#h:3fdd45f5-29b8-4507-b21c-391124e7202a">4.7. for</a></li>
<li><a href="#h:8b91f18a-23bc-43f6-89f6-c08b353d7e84">4.8. foreach</a></li>
<li><a href="#h:27ba99e3-faa3-43b8-a6d8-b037a759d92b">4.9. break</a></li>
<li><a href="#h:9e986cbb-bf5d-4702-b40a-a521e5cbc4e8">4.10. continue</a></li>
<li><a href="#h:2ad069c7-3c29-4f05-abf6-9465a8a71827">4.11. switch</a></li>
<li><a href="#h:67c912d9-4e47-482d-aa29-31088b5c1777">4.12. return</a></li>
<li><a href="#h:e4d53afd-8816-45e1-9078-c14907a6293a">4.13. require</a></li>
<li><a href="#h:0855e8aa-c862-42b7-95cb-69c1e62b1005">4.14. include</a>
<ul>
<li><a href="#h:d4bcb3eb-bbd5-4526-9700-ab15aad3e568">4.14.1. 安全分享</a></li>
</ul>
</li>
<li><a href="#h:702fb1a5-bbf5-47ae-91fd-eb910c6b1eb5">4.15. require_once</a></li>
<li><a href="#h:485cb5ca-df03-4f20-80b8-b48f70df6ca7">4.16. include_once</a></li>
</ul>
</li>
<li><a href="#h:303ddda7-3c64-4f04-9ff4-694980814c10">5. 函数</a>
<ul>
<li><a href="#h:06dfd110-ee72-4a0a-95e8-21566c654fa0">5.1. 用户自定义函数</a></li>
<li><a href="#h:ff817a5d-d1b7-40bb-af5c-8bea8f5cbbe9">5.2. 函数的参数</a></li>
<li><a href="#h:a1034a45-1adb-4f47-877b-4f80c735cff9">5.3. 返回值</a></li>
<li><a href="#h:8328abbb-dbaa-488c-9ff6-721823d4eef1">5.4. 可变函数</a></li>
<li><a href="#h:e8f5c892-9f9e-410a-b2ef-780c00023d6a">5.5. 内部（内置）函数</a></li>
<li><a href="#h:dd4501a6-b362-4e48-8715-8012f051ea43">5.6. 匿名函数</a></li>
<li><a href="#h:f9e9b86f-e960-4657-8432-9ee957015108">5.7. 箭头函数</a></li>
</ul>
</li>
<li><a href="#h:1141575e-e8d1-4d32-8ac8-f05a8edb43c2">6. 文件系统安全</a></li>
<li><a href="#h:b9f37ec0-213f-4206-97c5-6a0b3d8f910a">7. 文件上传处理</a>
<ul>
<li><a href="#h:5733e11a-9a5a-4a3e-b241-05f1cb8eaf86">7.1. POST 方法上传</a>
<ul>
<li><a href="#h:d9dcd2bf-0ec0-4316-ae7f-4560cbe7f686">7.1.1. 安全分享</a></li>
</ul>
</li>
<li><a href="#h:34f6d5a4-bc13-4919-9e71-137278745675">7.2. 错误信息说明</a></li>
<li><a href="#h:a81f6a65-5d24-401e-b54a-bf74aee9365c">7.3. 常见缺陷</a></li>
<li><a href="#h:b9eb4c9a-339e-464d-8601-091ada3c1fb4">7.4. 上传多个文件</a></li>
<li><a href="#h:4aca4396-be7b-4c30-8fb2-ef3d8efe31ad">7.5. 对 PUT 方法的支持</a></li>
</ul>
</li>
<li><a href="#h:1ef6b95f-80da-4cfc-9321-d6d9cd20ef52">8. mysql数据库安全</a>
<ul>
<li><a href="#h:345044ec-06df-4b82-a6c8-04a604924e68">8.1. 设计数据库</a></li>
<li><a href="#h:708a9a92-d0d5-4406-a810-9b237be3944e">8.2. PHP连接MySQL</a></li>
<li><a href="#h:e4db2516-cda6-43ec-9088-a089ecd05c83">8.3. PHP使用预编译的方式执行SQL语句</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li>TAGS: <a href="./../index.html">Safe</a></li>
</ul>


<p>
主要内容：
</p>
<ul class="org-ul">
<li>PHP 环境搭建、编写代码工具选择</li>
<li>PHP 基本语法</li>
<li>PHP 流程控制</li>
<li>PHP 函数、数组与数据结构</li>
<li>PHP 正则表达式、PHP 文件系统</li>
<li>PHP 文件上传、PHP 错误处理</li>
<li>PHP 操作 mysql 数据库</li>
<li>套、switch 语句、while 循环、for 循环</li>
<li>PHP 会话管理和控制</li>
</ul>
<section id="outline-container-h:79b9bf19-a0b4-4c38-9370-62f0def7c0f4" class="outline-2">
<h2 id="h:79b9bf19-a0b4-4c38-9370-62f0def7c0f4"><span class="section-number-2">1.</span> <a href="#h:79b9bf19-a0b4-4c38-9370-62f0def7c0f4">PHP 简介</a></h2>
<div class="outline-text-2" id="text-h:79b9bf19-a0b4-4c38-9370-62f0def7c0f4">
</div>
<div id="outline-container-h:f38ef1fd-99e8-48cd-b9b1-7591e7b95367" class="outline-3">
<h3 id="h:f38ef1fd-99e8-48cd-b9b1-7591e7b95367"><span class="section-number-3">1.1.</span> <a href="#h:f38ef1fd-99e8-48cd-b9b1-7591e7b95367">XAMPP如何下载及安装</a></h3>
<div class="outline-text-3" id="text-h:f38ef1fd-99e8-48cd-b9b1-7591e7b95367">
<p>
XAMPP的介绍：
</p>

<p>
XAMPP是一个集（Apache+MySQL+PHP+PERL）为一体的功能强大的建站集成软件包。它可以在Windows、Linux、Solaris、Mac OS X 等多种操作系统下安装使用。支持多种语言：简体中文、繁体中文、英文、韩文、俄文等等。
</p>

<p>
这个功能强大的软件包原来的名字是 LAMPP，但是为了避免误解，最新的几个版本就改名为 XAMPP 了。它的使用简便快捷，在性能上易于操作和浏览。正因为它的简单而吸引了大量的人用其建网站，博客。
</p>

<p>
XAMPP的下载
</p>

<p>
下载地址：<a href="https://www.apachefriends.org/zh_cn/download.html">https://www.apachefriends.org/zh_cn/download.html</a>
</p>

<p>
在这个页面上我们可以选择适合自己操作系统的安装包进行下载（Windows系统、Linux系统、Mac OS X 系统等），在本篇文章将以Windows系统为例
</p>

<p>
XAMPP可通过官网进行下载，下载好后解压最好选在D盘目录下安装，安装好打开xampp-control运行程序
</p>
</div>
</div>
<div id="outline-container-h:dc8d0138-884e-45fe-bf87-e38149120916" class="outline-3">
<h3 id="h:dc8d0138-884e-45fe-bf87-e38149120916"><span class="section-number-3">1.2.</span> <a href="#h:dc8d0138-884e-45fe-bf87-e38149120916">添加系统变量</a></h3>
<div class="outline-text-3" id="text-h:dc8d0138-884e-45fe-bf87-e38149120916">
<p>
php 不同操作系统安装文档：  <a href="https://www.php.net/manual/zh/install.php">https://www.php.net/manual/zh/install.php</a>
</p>

<p>
<b>windows</b>
</p>

<p>
如果没有安装XAMPP，使用官方zip包也可以。
下好zip包，我这里下的是64位非线程安全的。下载好的zip包直接解压就可以使用。
</p>

<p>
把PHP.exe所在文件夹路径（“C:\XAMPP\php”）添加进环境变量-系统变量-Path中（直接搜索框搜索系统变量便可找到）。
</p>

<p>
在cmd中输入php -v，检查是否配置成功
</p>

<p>
或者下载PHP <a href="https://www.php.net/distributions/php-7.3.24.tar.gz">https://www.php.net/distributions/php-7.3.24.tar.gz</a>
</p>

<div class="org-src-container">
<pre class="src src-sh">brew install openssl
brew install gettext
brew install zlib

tar -zvxf php-7.3.24.tar.gz
<span class="org-builtin">cd</span> php-7.3.24
./configure --prefix=/usr/local/php/ <span class="org-sh-escaped-newline">\</span>
--with-config-file-path=/usr/local/php/etc <span class="org-sh-escaped-newline">\</span>
--with-config-file-scan-dir=/usr/local/php/etc/conf.d <span class="org-sh-escaped-newline">\</span>
--enable-fpm <span class="org-sh-escaped-newline">\</span>
--with-fpm-user=www <span class="org-sh-escaped-newline">\</span>
--with-fpm-group=www <span class="org-sh-escaped-newline">\</span>
--with-mysqli <span class="org-sh-escaped-newline">\</span>
--with-pdo-mysql <span class="org-sh-escaped-newline">\</span>
--with-iconv-dir <span class="org-sh-escaped-newline">\</span>
--with-freetype-dir <span class="org-sh-escaped-newline">\</span>
--with-zlib=/opt/homebrew/Cellar/zlib/1.2.11 <span class="org-sh-escaped-newline">\</span>
--with-jpeg-dir=/opt/homebrew/Cellar/jpeg/9d/ <span class="org-sh-escaped-newline">\</span>
--with-png-dir=/opt/homebrew/Cellar/libpng/1.6.37/ <span class="org-sh-escaped-newline">\</span>
--with-libxml-dir=/usr/bin/xml2-config <span class="org-sh-escaped-newline">\</span>
--enable-xml <span class="org-sh-escaped-newline">\</span>
--disable-rpath <span class="org-sh-escaped-newline">\</span>
--enable-bcmath <span class="org-sh-escaped-newline">\</span>
--enable-shmop <span class="org-sh-escaped-newline">\</span>
--enable-sysvsem <span class="org-sh-escaped-newline">\</span>
--enable-inline-optimization <span class="org-sh-escaped-newline">\</span>
--with-curl=/opt/homebrew/Cellar/curl/7.80.0/ <span class="org-sh-escaped-newline">\</span>
--enable-mbregex <span class="org-sh-escaped-newline">\</span>
--enable-mbstring <span class="org-sh-escaped-newline">\</span>
--with-mcrypt <span class="org-sh-escaped-newline">\</span>
--enable-ftp <span class="org-sh-escaped-newline">\</span>
--with-gd <span class="org-sh-escaped-newline">\</span>
--enable-gd-native-ttf <span class="org-sh-escaped-newline">\</span>
--with-openssl=/opt/homebrew/Cellar/openssl@1.1/1.1.1k <span class="org-sh-escaped-newline">\</span>
--with-mhash <span class="org-sh-escaped-newline">\</span>
--enable-pcntl <span class="org-sh-escaped-newline">\</span>
--enable-sockets <span class="org-sh-escaped-newline">\</span>
--with-xmlrpc <span class="org-sh-escaped-newline">\</span>
--enable-zip <span class="org-sh-escaped-newline">\</span>
--enable-soap <span class="org-sh-escaped-newline">\</span>
--without-pear <span class="org-sh-escaped-newline">\</span>
--with-gettext <span class="org-sh-escaped-newline">\</span>
--disable-fileinfo <span class="org-sh-escaped-newline">\</span>
--enable-maintainer-zts <span class="org-sh-escaped-newline">\</span>
--enable-mysqlnd
make &amp;&amp; sudo make install
</pre>
</div>

<p>
<b>MAC安装PHP</b>
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">zsh &#26367;&#25442; brew bintray &#38236;&#20687;
</span><span class="org-builtin">echo</span> <span class="org-string">'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles'</span> &gt;&gt;~/.zshrc
<span class="org-builtin">source</span> ~/.zshrc

<span class="org-comment-delimiter"># </span><span class="org-comment">bash &#26367;&#25442; brew bintray &#38236;&#20687;
</span><span class="org-builtin">echo</span> <span class="org-string">'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles'</span> &gt;&gt;~/.bash_profile
<span class="org-builtin">source</span> ~/.bash_profile

<span class="org-comment-delimiter"># </span><span class="org-comment">&#21047;&#26032;&#28304;
</span>brew update

<span class="org-comment-delimiter"># </span><span class="org-comment">&#25628;&#32034;PHP
</span>&gt; brew search php
brew install php@8.1
</pre>
</div>

<p>
安装位置
</p>
<div class="org-src-container">
<pre class="src src-sh">/usr/bin/php
<span class="org-comment-delimiter"># </span><span class="org-comment">&#26368;&#26032;&#29256;Mac&#31995;&#32479;
</span>/opt/homebrew/opt/php@8.1/bin/
<span class="org-comment-delimiter"># </span><span class="org-comment">&#37197;&#32622;&#25991;&#20214;&#20301;&#32622;
</span>/opt/homebrew/etc/php/8.1/php.ini
</pre>
</div>

<p>
配置文件位置
vim /opt/homebrew/etc/php/8.1/php.ini
</p>
</div>
<div id="outline-container-h:03e15e50-b667-4c8e-9327-4abf19fd651a" class="outline-4">
<h4 id="h:03e15e50-b667-4c8e-9327-4abf19fd651a"><span class="section-number-4">1.2.1.</span> <a href="#h:03e15e50-b667-4c8e-9327-4abf19fd651a">VS Code 的安装</a></h4>
<div class="outline-text-4" id="text-h:03e15e50-b667-4c8e-9327-4abf19fd651a">
<p>
VS Code 官网：<a href="https://code.visualstudio.com">https://code.visualstudio.com</a>
</p>

<p>
VS Code 的安装很简单，直接去官网下载安装包，然后双击安装即可。
</p>
</div>
<div id="outline-container-h:8666ee0d-c29b-4e72-b3b1-48b21b02180a" class="outline-5">
<h5 id="h:8666ee0d-c29b-4e72-b3b1-48b21b02180a"><span class="section-number-5">1.2.1.1.</span> <a href="#h:8666ee0d-c29b-4e72-b3b1-48b21b02180a">私人订制：VS Code 的常见配置</a></h5>
<div class="outline-text-5" id="text-h:8666ee0d-c29b-4e72-b3b1-48b21b02180a">
<p>
1、下载插件：PHP Server
</p>

<p>
指定php的路径：首选项-&gt;设置-&gt; "PHP › Validate: Executable Path"
</p>
<div class="org-src-container">
<pre class="src src-sh">{
  <span class="org-string">"php.validate.executablePath"</span>: <span class="org-string">"/usr/bin/php"</span>,
  <span class="org-string">"phpserver.phpConfigPath"</span>: <span class="org-string">"/etc/php.ini"</span>,
}

<span class="org-comment-delimiter">#</span><span class="org-comment">windows
</span>{
  <span class="org-string">"php.validate.executablePath"</span>: <span class="org-string">"D:/xampp/php/php.exe"</span>,
  <span class="org-string">"phpserver.phpConfigPath"</span>: <span class="org-string">"D:/xampp/php/php.ini"</span>
  <span class="org-string">"phpserver.phpPath"</span>: <span class="org-string">"D:/xampp/php/php.exe"</span>
}

<span class="org-comment-delimiter">#</span><span class="org-comment">mac
</span>{
  <span class="org-string">"phpserver.phpConfigPath"</span>: <span class="org-string">"/opt/homebrew/etc/php/8.1/php.ini"</span>,
  <span class="org-string">"php.validate.executablePath"</span>: <span class="org-string">"/opt/homebrew/Cellar/php@8.1/8.1.22/bin/php"</span>
}
</pre>
</div>

<p>
安装 PHP Server后 , php文件中可以选择右键 PHP Server：Serve project，直接跳转到浏览器
</p>

<p>
2、下载插件：open in browser
</p>

<p>
安装 open in browser 插件后，在 HTML 文件中「右键选择 &#x2013;&gt; Open in Default Browser」，即可在浏览器中预览网页。
</p>

<p>
3、Code Runner 插件
</p>

<p>
可直接运行php代码。
</p>


<p>
以下为官方文档参考： <a href="https://www.php.net/manual/zh/">https://www.php.net/manual/zh/</a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-h:6d4487d7-2874-48bc-bec2-b68607a2280a" class="outline-3">
<h3 id="h:6d4487d7-2874-48bc-bec2-b68607a2280a"><span class="section-number-3">1.3.</span> <a href="#h:6d4487d7-2874-48bc-bec2-b68607a2280a">PHP 是什么？</a></h3>
<div class="outline-text-3" id="text-h:6d4487d7-2874-48bc-bec2-b68607a2280a">
<p>
PHP（“PHP: Hypertext Preprocessor”，超文本预处理器的字母缩写）是一种被广泛应用的开放源代码的多用途脚本语言，它可嵌入到 HTML中，尤其适合 web 开发。
</p>

<p>
以上是一个简单的回答，不过这是什么意思呢？请看如下例子：
</p>

<p>
示例 #1 一个介绍性的范例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Example&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;?php
        echo "Hi, I'm a PHP script!";
        ?&gt;

    &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>

<p>
PHP 页面并不包含大量输出 HTML 的命令（如 C 或 Perl 中所示），而是包含嵌入代码的 HTML，这些代码可执行某些操作（在本例中为输出 Hi, I'm a PHP script!）。PHP 代码包含在特殊的<a href="https://www.php.net/manual/zh/language.basic-syntax.phpmode.php">开始和结束处理指令 &lt;?php 和 ?&gt;</a> 中，允许跳入和退出 PHP 模式。
</p>

<p>
和客户端的 JavaScript 不同的是，PHP 代码是运行在服务端的。如果在服务器上建立了如上例类似的代码，则在运行该脚本后，客户端就能接收到其结果，但无法得知底层代码是什么。甚至可以将 web 服务器设置成让 PHP 来处理所有的 HTML 文件，这么一来，用户就无法知道正在使用 PHP。
</p>

<p>
使用 PHP 的最大的好处是它对于初学者来说极其简单，同时也给专业的程序员提供了各种高级的特性。当看到 PHP 长长的特性列表时，请不要害怕。使用 PHP，几乎任何人都可以快速上手并编写简单的脚本。
</p>

<p>
尽管 PHP 的开发主要侧重于服务器端脚本，但它可以做很多事情。
</p>
</div>
</div>
<div id="outline-container-h:466ca8b1-61ab-4258-926a-0b14a34349aa" class="outline-3">
<h3 id="h:466ca8b1-61ab-4258-926a-0b14a34349aa"><span class="section-number-3">1.4.</span> <a href="#h:466ca8b1-61ab-4258-926a-0b14a34349aa">PHP 能做什么？</a></h3>
<div class="outline-text-3" id="text-h:466ca8b1-61ab-4258-926a-0b14a34349aa">
<p>
<a href="https://www.php.net/manual/zh/introduction.php">https://www.php.net/manual/zh/introduction.php</a>
</p>

<p>
PHP 能做任何事。PHP 主要是用于服务端的脚本程序，因此可以用 PHP 来完成任何其它的 CGI 程序能够完成的工作，例如收集表单数据，生成动态网页，或者发送/接收 Cookies。但 PHP 的功能远不局限于此。
</p>

<p>
PHP 脚本主要用于以下两个领域：
</p>

<ul class="org-ul">
<li>服务器端脚本。这是 PHP 使用最广泛、最主要的目标领域。开展这项工作需要具备以下三点：PHP 解析器（CGI 或服务器模块）、Web 服务器和 Web 浏览器。所有这些都可以在本地机器上运行，以便尝试 PHP 编程。有关更多信息，请参阅<a href="https://www.php.net/manual/zh/install.php">安装说明</a>部分。</li>
<li>命令行脚本。PHP 脚本无需任何服务器或浏览器即可运行，只需 PHP 解析器即可使用。这种方式非常适合使用 cron（在 Unix 或 macOS 上）或任务计划程序（在 Windows 上）定期执行的脚本。这些脚本还可用于简单的文本处理任务。有关更多信息，请参阅有关 <a href="https://www.php.net/manual/zh/features.commandline.php">PHP 的命令行用法</a>的部分。</li>
</ul>

<p>
PHP 可用于所有主流操作系统，包括 Linux、许多 Unix 变体（包括 HP-UX、Solaris 和 OpenBSD）、Microsoft Windows、macOS、RISC OS 以及其他操作系统。PHP 还支持当今大多数 Web 服务器。这包括 Apache、IIS 和许多其他服务器。这包括任何可以使用 FastCGI PHP 二进制文件的 Web 服务器，如 lighttpd 和 nginx。PHP 既可以作为模块工作，也可以作为 CGI 处理器工作。
</p>

<p>
因此，使用 PHP，开发者可以自由地选择操作系统和 web 服务器。同时，还可以在开发时选择使用面向过程或者面对对象（OOP），或者两者的混和。
</p>

<p>
PHP 不仅限于输出 HTML。PHP 的功能包括输出丰富的文件类型，例如图像或 PDF 文件、加密数据和发送电子邮件。还可以轻松输出任何文本，例如 JSON 或 XML。PHP 可以自动生成这些文件，并将它们保存在文件系统中，而不是将其打印出来，从而形成动态内容的服务器端缓存。
</p>

<p>
PHP 最强大最显著的特性之一，是它支持<a href="https://www.php.net/manual/zh/refs.database.php">很大范围的数据库</a>。使用任何针对某数据库的扩展（例如 <a href="https://www.php.net/manual/zh/book.mysqli.php">mysql</a>）编写数据库支持的网页非常简单，或者使用抽象层如 <a href="https://www.php.net/manual/zh/book.pdo.php">PDO</a>，或者通过 <a href="https://www.php.net/manual/zh/book.uodbc.php">ODBC</a> 扩展连接到任何支持 ODBC 标准的数据库。其它一些数据库也可能会用 <a href="https://www.php.net/manual/zh/book.curl.php">cURL</a> 或者 <a href="https://www.php.net/manual/zh/book.sockets.php">sockets</a>，例如 CouchDB。
</p>

<p>
PHP 还支持使用 LDAP、IMAP、SNMP、NNTP、POP3、HTTP、COM（Windows 环境）等协议与其他服务通信，以及其他无数协议。还可以打开原始网络套接字并使用任何其他协议进行交互。PHP 支持几乎所有 web 开发语言之间的 WDDX 复杂数据交换。关于相互连接，PHP 已经支持了对 Java 对象的实例化，并且可以无缝的将其用作 PHP 对象。
</p>

<p>
PHP 具有极其有效的<a href="https://www.php.net/manual/zh/refs.basic.text.php">文本处理</a>特性，包括 Perl 兼容正则表达式（<a href="https://www.php.net/manual/zh/book.pcre.php">PCRE</a>）以及许多扩展和工具可用于<a href="https://www.php.net/manual/zh/refs.xml.php">解析和访问 XML 文档</a>。PHP 将所有的 XML 功能标准化于坚实的 <a href="https://www.php.net/manual/zh/book.libxml.php">libxml2</a> 扩展，并且还增加了 <a href="https://www.php.net/manual/zh/book.simplexml.php">SimpleXML</a>，<a href="https://www.php.net/manual/zh/book.xmlreader.php">XMLReader</a> 以及 <a href="https://www.php.net/manual/zh/book.xmlwriter.php">XMLWriter</a> 支持以扩充其功能。
</p>

<p>
另外，还有很多其它有趣的扩展库，在此根据<a href="https://www.php.net/manual/zh/extensions.php">字母</a>和<a href="https://www.php.net/manual/zh/funcref.php">分类</a>归类列出。还有一些附加的 <a href="https://www.php.net/manual/zh/install.pecl.intro.php">PECL 扩展</a> 可能有也可能没有在 PHP 手册中列出，例如 » <a href="https://xdebug.org/">XDebug</a>。
</p>
</div>
</div>
<div id="outline-container-h:a2735f41-9a09-44ef-bb65-82f6ef0b5ee3" class="outline-3">
<h3 id="h:a2735f41-9a09-44ef-bb65-82f6ef0b5ee3"><span class="section-number-3">1.5.</span> <a href="#h:a2735f41-9a09-44ef-bb65-82f6ef0b5ee3">第一个 PHP 页面</a></h3>
<div class="outline-text-3" id="text-h:a2735f41-9a09-44ef-bb65-82f6ef0b5ee3">
<p>
<a href="https://www.php.net/manual/zh/tutorial.firstpage.php">https://www.php.net/manual/zh/tutorial.firstpage.php</a>
</p>

<p>
在 web 服务器根目录（DOCUMENT_ROOT）下建立一个文件名为 hello.php，然后完成如下内容：
</p>

<p>
示例 #1 第一个 PHP 脚本：hello.php
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php

echo "Hello World!";

?&gt;
</pre>
</div>

<p>
在浏览器的地址栏里输入 web 服务器的 URL 访问这个文件，在结尾加上“/hello.php”。如果本地开发，那么 URL 一般是 <a href="http://localhost/hello.php">http://localhost/hello.php</a> 或者 <a href="http://127.0.0.1/hello.php">http://127.0.0.1/hello.php</a> ，当然这取决于 web 服务器的设置。如果所有的设置都正确，那么这个文件将被 PHP 解析，浏览器会显示输出的“Hello World”。
</p>

<p>
PHP 可以嵌入到普通 HTML 网页中。这意味着可以在 HTML 文档中编写 PHP 语句，如下例所示：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;PHP Test&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php echo '&lt;p&gt;Hello World&lt;/p&gt;'; ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>
这会产生以下输出：
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-keyword">!DOCTYPE</span> html&gt;
&lt;<span class="org-function-name">html</span>&gt;
    &lt;<span class="org-function-name">head</span>&gt;
        &lt;<span class="org-function-name">title</span>&gt;<span class="org-underline"><span class="org-bold">PHP Test</span></span>&lt;/<span class="org-function-name">title</span>&gt;
    &lt;/<span class="org-function-name">head</span>&gt;
    &lt;<span class="org-function-name">body</span>&gt;
        &lt;<span class="org-function-name">p</span>&gt;Hello World&lt;/<span class="org-function-name">p</span>&gt;
    &lt;/<span class="org-function-name">body</span>&gt;
&lt;/<span class="org-function-name">html</span>&gt;
</pre>
</div>

<p>
该程序非常的简单，它仅仅只是利用了 PHP 的 <a href="https://www.php.net/manual/zh/function.echo.php">echo</a> 语句显示了 Hello World。用户一定不会满足与此。请注意该文件无需被执行或以任何方式指定。服务器会找到该文件并提供给 PHP 进行解释，因为使用了“.php”的扩展名，服务器已被配置成自动传递有着“.php”扩展名的文件给 PHP。一个普通的 HTML 文件，加上了几个特别的标签，就可以做很多非常有趣的事情！
</p>

<p>
如果试过了这个例子，但是没有得到任何输出，或者浏览器弹出了下载框，或者浏览器以文本方式显示了源文件，可能的原因是服务器还没有支持 PHP，或者没有正确配置。
</p>

<p>
还要确认通过浏览器访问的 URL 确实指向了服务器上的这个文件。如果只是从本地文件系统调用这个文件，它不会被 PHP 解析。
</p>

<p>
以上例子的目的是为了显示 PHP 特殊标识符的格式。在这个例子中，用 &lt;?php 来表示 PHP 标识符的起始，然后放入 PHP 语句并通过加上一个终止标识符 ?&gt; 来退出 PHP 模式。可以根据自己的需要在 HTML 文件中像这样开启或关闭 PHP 模式。
</p>

<blockquote>
<p>
注意: 关于换行
</p>

<p>
尽管换行在 HTML 中的实际意义不是很大，但适当地使用换行可以使 HTML 代码易读且美观。PHP 会在输出时自动删除其结束符 ?&gt; 后的一个换行。该功能主要是针对在一个页面中嵌入多段 PHP 代码或者包含了无实质性输出的 PHP 文件而设计，与此同时也造成了一些疑惑。如果需要在 PHP 结束符 ?&gt; 之后输出换行的话，可以在其后加一个空格，或者在最后的一个 echo/print 语句中加入一个换行。
</p>
</blockquote>

<p>
现在已经成功建立了一个简单的 PHP 脚本，那么再来建立一个最著名的PHP 脚本！调用函数 <a href="https://www.php.net/manual/zh/function.phpinfo.php">phpinfo()</a>，将会看到很多有关自己系统的有用信息，例如<a href="https://www.php.net/manual/zh/language.variables.predefined.php">预定义变量</a>、已经加载的PHP 模块和<a href="https://www.php.net/manual/zh/configuration.php">配置</a>信息。请花一些时间来查看这些重要的信息。
</p>

<p>
示例 #2 从 PHP 获取系统信息
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php phpinfo(); ?&gt;
</pre>
</div>

<p>
PS: 在vscode中右键，PHP Server: Serve project 运行代码。
</p>
</div>
</div>
<div id="outline-container-h:2c885c51-b702-40a6-be92-ac7d97cdaf35" class="outline-3">
<h3 id="h:2c885c51-b702-40a6-be92-ac7d97cdaf35"><span class="section-number-3">1.6.</span> <a href="#h:2c885c51-b702-40a6-be92-ac7d97cdaf35">实用的脚本</a></h3>
<div class="outline-text-3" id="text-h:2c885c51-b702-40a6-be92-ac7d97cdaf35">
<p>
<a href="https://www.php.net/manual/zh/tutorial.useful.php">https://www.php.net/manual/zh/tutorial.useful.php</a>
</p>


<p>
现在来编写一些更实用的脚本，比如检查浏览页面的访问者在用什么浏览器。要达到这个目的，需要检查用户的agent 字符串，它是浏览器发送的 HTTP 请求的一部分。该信息被存储在一个<a href="https://www.php.net/manual/zh/language.variables.php">变量</a>中。在 PHP中，变量总是以一个美元符开头。我们现在感兴趣的变量是  <a href="https://www.php.net/manual/zh/reserved.variables.server.php">$_SERVER['HTTP_USER_AGENT'</a>]。
</p>

<blockquote>
<p>
注意:
</p>

<p>
<a href="https://www.php.net/manual/zh/reserved.variables.server.php">$_SERVER</a>是一个特殊的 PHP 保留变量，它包含了 web服务器提供的所有信息，被称为超全局变量。请查阅本手册“<a href="https://www.php.net/manual/zh/language.variables.superglobals.php">超全局变量</a>”中的有关内容以获取更多信息。
</p>
</blockquote>


<p>
示例 #1 打印一个变量（数组元素）
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo $_SERVER['HTTP_USER_AGENT'];
?&gt;
</pre>
</div>


<p>
该脚本的输出可能是：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">Mozilla/5.0</span> (Linux) Firefox/112.0
</pre>
</div>


<p>
PHP 有多种不同<a href="https://www.php.net/manual/zh/language.types.php">类型</a>的变量。以上例子是从 <a href="https://www.php.net/manual/zh/language.types.array.php">Array</a> 变量中打印了一个元素。数组非常有用。
</p>

<p>
<a href="https://www.php.net/manual/zh/reserved.variables.server.php">$_SERVER</a> 只是 PHP 自动全局化的变量之一。可以查阅“<a href="https://www.php.net/manual/zh/reserved.variables.php">预定义变量</a>”一节来查看这些变量的列表，或者也可以通过上节例子中 <a href="https://www.php.net/manual/zh/function.phpinfo.php">phpinfo()</a> 函数的输出来查看。
</p>

<p>
可以在一个 PHP 标识中加入多个 PHP 语句，也可以建立一个代码块来做比简单的 echo 更多的事情。例如，如果需要检测 Firefox，可以进行如下操作：
</p>

<p>
示例 #2 <a href="https://www.php.net/manual/zh/language.control-structures.php">流程控制</a>与<a href="https://www.php.net/manual/zh/language.functions.php">函数</a>的使用
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
if (str_contains($_SERVER['HTTP_USER_AGENT'], 'Firefox')) {
    echo 'You are using Firefox.';
}
?&gt;
</pre>
</div>

<p>
该脚本的输出可能是：
</p>
<div class="org-src-container">
<pre class="src src-sh">You are using Firefox.
</pre>
</div>

<p>
这里要介绍一些新的原理。上面用了一个 <a href="https://www.php.net/manual/zh/control-structures.if.php">if</a> 语句。如果用户对C 语言的基本语法比较熟悉，则应该对此很熟悉，否则，可能需要拿起任何一本PHP 介绍性的书籍并阅读前面的两三个章节，或者也可以阅读本手册的“<a href="https://www.php.net/manual/zh/langref.php">语言参考</a>”一章。
</p>

<p>
需要介绍的第二个原理，是对 <a href="https://www.php.net/manual/zh/function.str-contains.php">str_contains()</a>函数的调用。<a href="https://www.php.net/manual/zh/function.str-contains.php">str_contains()</a> 是 PHP的一个内置函数，其功能是确定指定字符串是否包含其它字符串。例如我们现在需要在 <a href="https://www.php.net/manual/zh/reserved.variables.server.php">$_SERVER['HTTP_USER_AGENT']​</a>（即所谓的 haystack）变量中寻找'Firefox'。如果在这个 haystack中该字符串（即所谓的 needle）被找到（“草里寻针”），则函数返回 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a>；如果没有，则返回 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a>。如果返回 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a>，则 <a href="https://www.php.net/manual/zh/control-structures.if.php">if</a> 会将条件判断为<a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a> 并运行其花括号 {} 内的代码；否则，则不运行这些代码。
</p>

<p>
可以自己尝试利用<a href="https://www.php.net/manual/zh/control-structures.if.php">if</a>，<a href="https://www.php.net/manual/zh/control-structures.else.php">else</a> 以及其它的函数如<a href="https://www.php.net/manual/zh/function.strtoupper.php">strtoupper()</a> 和 <a href="https://www.php.net/manual/zh/function.strlen.php">strlen()</a>来建立类似的脚本。在本手册中相关的页面也包含有范例。如果对如何使用函数不是很确定，可以阅读手册中有关“<a href="https://www.php.net/manual/zh/about.prototypes.php">如何阅读函数的定义</a>”和“<a href="https://www.php.net/manual/zh/language.functions.php">函数</a>”的有关章节。
</p>

<p>
以下我们进一步显示如何进出 PHP 模式，甚至是在一个 PHP 代码块的中间：
</p>

<p>
示例 #3 混和 HTML 和 PHP 模式
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
if (str_contains($_SERVER['HTTP_USER_AGENT'], 'Firefox')) {
?&gt;
&lt;h3&gt;str_contains() returned true&lt;/h3&gt;
&lt;p&gt;You are using Firefox&lt;/p&gt;
&lt;?php
} else {
?&gt;
&lt;h3&gt;str_contains() returned false&lt;/h3&gt;
&lt;p&gt;You are not using Firefox&lt;/p&gt;
&lt;?php
}
?&gt;
</pre>
</div>

<p>
该脚本的输出可能是：
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">h3</span>&gt;<span class="org-underline"><span class="org-italic">str_contains() returned true</span></span>&lt;/<span class="org-function-name">h3</span>&gt;
&lt;<span class="org-function-name">p</span>&gt;You are using Firefox&lt;/<span class="org-function-name">p</span>&gt;
</pre>
</div>

<p>
和使用 PHP echo 语句输出不同的是，以上示例跳出了 PHP 模式直接发送 HTML。这里需要特别注意的一点是脚本的逻辑流保持不变。根据 <a href="https://www.php.net/manual/zh/function.str-contains.php">str_contains()</a> 的结果，只会有一个 HTML 块将发送给浏览者。换句话说，取决于是否找到字符串 Firefox。
</p>
</div>
</div>
<div id="outline-container-h:8dfeeb6a-1c4a-4996-9bce-1246ab07668d" class="outline-3">
<h3 id="h:8dfeeb6a-1c4a-4996-9bce-1246ab07668d"><span class="section-number-3">1.7.</span> <a href="#h:8dfeeb6a-1c4a-4996-9bce-1246ab07668d">处理表单</a></h3>
<div class="outline-text-3" id="text-h:8dfeeb6a-1c4a-4996-9bce-1246ab07668d">
<p>
<a href="https://www.php.net/manual/zh/tutorial.forms.php">https://www.php.net/manual/zh/tutorial.forms.php</a>
</p>

<p>
PHP 一个很有用的特点体现在它处理 PHP 表单的方式。需要理解的非常重要的原理，是表单的任何元素都在 PHP 脚本中自动生效。请参阅本手册中“<a href="https://www.php.net/manual/zh/tutorial.forms.php">PHP 的外部变量</a>”以获取关于在 PHP 中使用表单的详细信息及范例。以下是 HTML 表单的范例：
</p>

<p>
示例 #1 一个简单的 HTML 表单
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">form</span> <span class="org-variable-name">action</span>=<span class="org-string">"action.php"</span> <span class="org-variable-name">method</span>=<span class="org-string">"post"</span>&gt;
    &lt;<span class="org-function-name">label</span> <span class="org-variable-name">for</span>=<span class="org-string">"name"</span>&gt;Your name:&lt;/<span class="org-function-name">label</span>&gt;
    &lt;<span class="org-function-name">input</span> <span class="org-variable-name">name</span>=<span class="org-string">"name"</span> <span class="org-variable-name">id</span>=<span class="org-string">"name"</span> <span class="org-variable-name">type</span>=<span class="org-string">"text"</span>&gt;

    &lt;<span class="org-function-name">label</span> <span class="org-variable-name">for</span>=<span class="org-string">"age"</span>&gt;Your age:&lt;/<span class="org-function-name">label</span>&gt;
    &lt;<span class="org-function-name">input</span> <span class="org-variable-name">name</span>=<span class="org-string">"age"</span> <span class="org-variable-name">id</span>=<span class="org-string">"age"</span> <span class="org-variable-name">type</span>=<span class="org-string">"number"</span>&gt;

    &lt;<span class="org-function-name">button</span> <span class="org-variable-name">type</span>=<span class="org-string">"submit"</span>&gt;Submit&lt;/<span class="org-function-name">button</span>&gt;
&lt;/<span class="org-function-name">form</span>&gt;
</pre>
</div>

<p>
该表单中并没有什么特殊的地方，其中没有使用任何特殊的标识符。当用户填写了该表单并点击了提交按钮，页面 action.php 将被调用。在该文件中，可以加入如下内容：
</p>

<p>
示例 #2 打印来自表单的数据
</p>
<div class="org-src-container">
<pre class="src src-php">Hi &lt;?php echo htmlspecialchars($_POST['name']); ?&gt;.
You are &lt;?php echo (int) $_POST['age']; ?&gt; years old.
</pre>
</div>

<p>
该脚本的输出可能是：
</p>

<div class="org-src-container">
<pre class="src src-sh">Hi Joe. You are 22 years old.
</pre>
</div>


<p>
除了<a href="https://www.php.net/manual/zh/function.htmlspecialchars.php">htmlspecialchars()</a> 和 (int)部分，这段程序做什么用显而易见。<a href="https://www.php.net/manual/zh/function.htmlspecialchars.php">htmlspecialchars()</a> 使得 HTML 之中的特殊字符被正确的编码，从而不会被使用者在页面注入 HTML 标签或者Javascript 代码。例如 age 字段，我们明确知道他是一个数值，因此我们将它<a href="https://www.php.net/manual/zh/language.types.type-juggling.php#language.types.typecasting">转换</a>为一个<a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>来自动的消除任何不必要的字符。也可以使用 PHP 的 <a href="https://www.php.net/manual/zh/ref.filter.php">filter</a> 扩展来自动完成该工作。
</p>


<p>
PHP 将自动设置 <a href="https://www.php.net/manual/zh/reserved.variables.post.php">$_POST['name'</a>] 和 <a href="https://www.php.net/manual/zh/reserved.variables.post.php">$_POST['age'</a>] 变量。
</p>

<p>
在这之前我们使用了超全局变量 <a href="https://www.php.net/manual/zh/reserved.variables.server.php">$_SERVER</a>，现在我们引入了超全局变量 <a href="https://www.php.net/manual/zh/reserved.variables.post.php">$_POST</a>，它包含了所有的 POST 数据。请注意我们的表单提交数据的方法（method）。如果使用了 GET 方法，那么表单中的信息将被储存到超全局变量 <a href="https://www.php.net/manual/zh/reserved.variables.get.php">$_GET</a>中。
</p>

<p>
如果并不关心请求数据的来源，也可以用超全局变量 <a href="https://www.php.net/manual/zh/reserved.variables.request.php">$_REQUEST</a>，它包含了所有 GET、POST、COOKIE 和 FILE 的数据。
</p>

<p>
示例2
</p>
<ul class="org-ul">
<li>age 处有 <code>(int)</code> 转换不存在xss漏洞。</li>
<li>name 处存在xss漏洞</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">&lt;script&gt;alert(1)&lt;/script&gt;
</pre>
</div>
</div>
<div id="outline-container-h:c1422ede-72e0-4b0e-93f7-667a9390d29b" class="outline-4">
<h4 id="h:c1422ede-72e0-4b0e-93f7-667a9390d29b"><span class="section-number-4">1.7.1.</span> <a href="#h:c1422ede-72e0-4b0e-93f7-667a9390d29b">安全分享</a></h4>
<div class="outline-text-4" id="text-h:c1422ede-72e0-4b0e-93f7-667a9390d29b">
</div>
<div id="outline-container-h:51e36950-62cf-4a01-afcb-a6b56c56e651" class="outline-5">
<h5 id="h:51e36950-62cf-4a01-afcb-a6b56c56e651"><span class="section-number-5">1.7.1.1.</span> <a href="#h:51e36950-62cf-4a01-afcb-a6b56c56e651">xss防御</a></h5>
<div class="outline-text-5" id="text-h:51e36950-62cf-4a01-afcb-a6b56c56e651">
<ul class="org-ul">
<li>输入过滤
<ul class="org-ul">
<li>后端做特殊字符过滤</li>
</ul></li>
<li>输出编码
<ul class="org-ul">
<li>转译特殊字符为html实体编码
<ul class="org-ul">
<li>在PHP中，有htmlentities()和htmlspecialchars()两个函数可以满足安全要求。</li>
</ul></li>
</ul></li>
</ul>

<p>
action.php可以这样写
</p>
<div class="org-src-container">
<pre class="src src-sh">&#20320;&#22909;&#65292;&lt;?php echo htmlspecialchars($<span class="org-variable-name">_POST</span>[<span class="org-string">'name'</span>]); ?&gt;&#12290;
&#20320; &lt;?php echo (int)$<span class="org-variable-name">_POST</span>[<span class="org-string">'age'</span>]; ?&gt; &#23681;&#20102;&#12290;
</pre>
</div>

<p>
哪种防御手段更好，输出编码更好。
</p>
<ul class="org-ul">
<li>如果做输入过滤，很可能存在被绕过的情况。因为js比较灵活，版本也在更新，过滤的可能不全。</li>
<li>业务本身就要这些特殊符号，不能过滤。而输出编码做了html实体编码，只是输出在浏览器展示的时候，而且操作很简单只需要加个编码函数就行了，不存在任何绕过情况。</li>
</ul>
</div>
</div>
<div id="outline-container-h:9c79dfd1-2d57-4268-a82d-cf1c863260c9" class="outline-5">
<h5 id="h:9c79dfd1-2d57-4268-a82d-cf1c863260c9"><span class="section-number-5">1.7.1.2.</span> <a href="#h:9c79dfd1-2d57-4268-a82d-cf1c863260c9">cookie</a></h5>
<div class="outline-text-5" id="text-h:9c79dfd1-2d57-4268-a82d-cf1c863260c9">
<p>
官方文档提到了COOKIE，那么cookie从哪得到了的？这分几种情况：
</p>
<ul class="org-ul">
<li>第一次访问网站，给的cookie</li>
<li>登录之后给一个cookie
<ul class="org-ul">
<li>登录时拿第一次给的cookie登录，这里就存在风险了。因为这个cookie可以是别人发给你的链接，比如拿了黑客给的cookie登录，这种就叫会话固定攻击。</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; <span class="org-variable-name">SameSite</span>=Strict
<span class="org-comment-delimiter"># </span><span class="org-comment">&#21487;&#20197;&#21516;&#26102;&#26377;&#22810;&#20010;&#23646;&#24615;&#65292;&#20363;&#22914;&#65306;
</span>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; <span class="org-variable-name">Domain</span>=&lt;domain-value&gt;; Secure; HttpOnly
</pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="outline-container-h:4b8c837f-9249-426f-b033-9db3cfe5a368" class="outline-2">
<h2 id="h:4b8c837f-9249-426f-b033-9db3cfe5a368"><span class="section-number-2">2.</span> <a href="#h:4b8c837f-9249-426f-b033-9db3cfe5a368">PHP基本语法</a></h2>
<div class="outline-text-2" id="text-h:4b8c837f-9249-426f-b033-9db3cfe5a368">
</div>
<div id="outline-container-h:bdc65256-5a5b-49cb-8c33-b4efa0ea8467" class="outline-3">
<h3 id="h:bdc65256-5a5b-49cb-8c33-b4efa0ea8467"><span class="section-number-3">2.1.</span> <a href="#h:bdc65256-5a5b-49cb-8c33-b4efa0ea8467">PHP 标记</a></h3>
<div class="outline-text-3" id="text-h:bdc65256-5a5b-49cb-8c33-b4efa0ea8467">
<p>
<a href="https://www.php.net/manual/zh/language.basic-syntax.phptags.php">https://www.php.net/manual/zh/language.basic-syntax.phptags.php</a>
</p>

<p>
当解析一个文件时，PHP 会寻找起始和结束标记，也就是 <code>&lt;?php</code> 和 <code>?&gt;</code> ，这告诉 PHP 开始和停止解析二者之间的代码。此种解析方式使得 PHP 可以被嵌入到各种不同的文档中去，而任何起始和结束标记之外的部分都会被 PHP 解析器忽略。
</p>

<p>
PHP 有一个 echo 标记简写 &lt;?=， 它是更完整的 &lt;?php echo 的简写形式。
</p>

<p>
示例 #1 PHP 开始和结束标记
</p>

<div class="org-src-container">
<pre class="src src-sh">1.  &lt;?php echo <span class="org-string">'if you want to serve PHP code in XHTML or XML documents,
                use these tags'</span>; ?&gt;

2.  You can use the short echo tag to &lt;?= <span class="org-string">'print this string'</span> ?&gt;.
    It<span class="org-string">'s equivalent to &lt;?php echo '</span>print this string<span class="org-string">' ?&gt;.

3.  &lt;? echo '</span>this code is within short tags, but will only work <span class="org-string">'.
            '</span>if short_open_tag is enabled<span class="org-string">'; ?&gt;</span>
</pre>
</div>


<p>
短标记 (第三个例子) 是被默认开启的，但是也可以通过 <a href="https://www.php.net/manual/zh/ini.core.php#ini.short-open-tag">short_open_tag</a> php.ini 来直接禁用。如果 PHP 在被安装时使用了 <code>--disable-short-tags</code>  的配置，该功能则是被默认禁用的。
</p>

<blockquote>
<p>
注意:
</p>

<p>
因为短标记可以被禁用，所以建议使用普通标记 (&lt;?php ?&gt; 和 &lt;?= ?&gt;) 来最大化兼容性。
</p>
</blockquote>

<p>
如果文件内容仅仅包含 PHP 代码，最好在文件末尾删除 PHP 结束标记。这可以避免在 PHP 结束标记之后万一意外加入了空格或者换行符，会导致 PHP 开始输出这些空白，而脚本中此时并无输出的意图。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo "Hello world";

// ... 更多代码

echo "Last statement";

// 脚本在此处结束，没有 PHP 结束标记
</pre>
</div>
</div>
</div>
<div id="outline-container-h:3b9500f3-944b-4429-8695-b31471ba0637" class="outline-3">
<h3 id="h:3b9500f3-944b-4429-8695-b31471ba0637"><span class="section-number-3">2.2.</span> <a href="#h:3b9500f3-944b-4429-8695-b31471ba0637">从 HTML 中分离</a></h3>
<div class="outline-text-3" id="text-h:3b9500f3-944b-4429-8695-b31471ba0637">
<p>
<a href="https://www.php.net/manual/zh/language.basic-syntax.phpmode.php">https://www.php.net/manual/zh/language.basic-syntax.phpmode.php</a>
</p>

<p>
凡是在一对开始和结束标记之外的内容都会被 PHP 解析器忽略，这使得 PHP 文件可以具备混合内容。 可以使 PHP 嵌入到 HTML 文档中去，如下例所示。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;p&gt;This is going to be ignored by PHP and displayed by the browser.&lt;/p&gt;
&lt;?php echo 'While this is going to be parsed.'; ?&gt;
&lt;p&gt;This will also be ignored by PHP and displayed by the browser.&lt;/p&gt;
</pre>
</div>

<p>
这将如预期中的运行，因为当 PHP 解释器碰到 ?&gt; 结束标记时就简单地将其后内容原样输出（除非马上紧接换行 - 见 <a href="https://www.php.net/manual/zh/language.basic-syntax.instruction-separation.php">指令分隔符</a>）直到碰到下一个开始标记；例外是处于条件语句中间时，此时 PHP 解释器会根据条件判断来决定哪些输出，哪些跳过。见下例。
</p>

<p>
使用条件结构：
</p>

<p>
示例 #1 使用条件的高级分离术
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php if ($expression == true): ?&gt;
  This will show if the expression is true.
&lt;?php else: ?&gt;
  Otherwise this will show.
&lt;?php endif; ?&gt;
</pre>
</div>

<p>
上例中 PHP 将跳过条件语句未达成的段落，即使该段落位于 PHP 开始和结束标记之外。由于PHP 解释器会在条件未达成时直接跳过该段条件语句块，因此 PHP 会根据条件来忽略之。
</p>

<p>
要输出大段文本时，跳出 PHP 解析模式通常比将文本通过 <a href="https://www.php.net/manual/zh/function.echo.php">echo</a> 或 <a href="https://www.php.net/manual/zh/function.print.php">print</a> 输出更有效率。
</p>
</div>
</div>
<div id="outline-container-h:e0af276e-9246-4fe1-865e-9ca31bd7e831" class="outline-3">
<h3 id="h:e0af276e-9246-4fe1-865e-9ca31bd7e831"><span class="section-number-3">2.3.</span> <a href="#h:e0af276e-9246-4fe1-865e-9ca31bd7e831">指令分隔符</a></h3>
<div class="outline-text-3" id="text-h:e0af276e-9246-4fe1-865e-9ca31bd7e831">
<p>
<a href="https://www.php.net/manual/zh/language.basic-syntax.instruction-separation.php">https://www.php.net/manual/zh/language.basic-syntax.instruction-separation.php</a>
</p>

<p>
同 C 或 Perl 一样，PHP 需要在每个语句后用分号结束指令。一段 PHP 代码中的结束标记隐含表示了一个分号；在一个 PHP 代码段中的最后一行可以不用分号结束。如果后面还有新行，则代码段的结束标记包含了行结束。
</p>

<p>
示例 #1 包含末尾换行符的结束标记的例子
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php echo "Some text"; ?&gt;
No newline
&lt;?= "But newline now" ?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh">Some textNo newline
But newline now
</pre>
</div>

<p>
进入和退出 PHP 解析的例子：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
    echo 'This is a test';
?&gt;

&lt;?php echo 'This is a test' ?&gt;

&lt;?php echo 'We omitted the last closing tag';
</pre>
</div>
</div>
</div>
<div id="outline-container-h:f4f97922-16d2-4c3b-a7f5-dc1f214448ec" class="outline-3">
<h3 id="h:f4f97922-16d2-4c3b-a7f5-dc1f214448ec"><span class="section-number-3">2.4.</span> <a href="#h:f4f97922-16d2-4c3b-a7f5-dc1f214448ec">注释</a></h3>
<div class="outline-text-3" id="text-h:f4f97922-16d2-4c3b-a7f5-dc1f214448ec">
<p>
<a href="https://www.php.net/manual/zh/language.basic-syntax.comments.php">https://www.php.net/manual/zh/language.basic-syntax.comments.php</a>
</p>

<p>
PHP 支持 C，C++ 和 Unix Shell 风格（Perl 风格）的注释。例如:
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
    echo 'This is a test'; // 这是单行 c++ 样式注释
    /* 这是一条多行注释
       另一行也是注释 */
    echo 'This is yet another test';
    echo 'One Final Test'; # 这是单行 shell 风格的注释
?&gt;
</pre>
</div>

<p>
单行注释仅仅注释到行末或者当前的 PHP 代码块，视乎哪个首先出现。这意味着在 <i>/ &#x2026; ?&gt; 或者 # &#x2026; ?&gt; 之后的 HTML 代码将被显示出来：?&gt; 跳出了 PHP 模式并返回了 HTML 模式，/</i> 或 # 并不能影响到这一点。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;h1&gt;This is an &lt;?php # echo 'simple';?&gt; example&lt;/h1&gt;
&lt;p&gt;The header above will say 'This is an  example'.&lt;/p&gt;
</pre>
</div>

<p>
C 风格的注释在碰到第一个 */ 时结束。要确保不要嵌套 C 风格的注释。试图注释掉一大块代码时很容易出现该错误。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
 /*
    echo 'This is a test'; /* 这个注释会引发问题 */
 */
?&gt;
</pre>
</div>
</div>
</div>
</section>
<section id="outline-container-h:5c7a4631-cf11-4928-bec0-7f97db5cd3ca" class="outline-2">
<h2 id="h:5c7a4631-cf11-4928-bec0-7f97db5cd3ca"><span class="section-number-2">3.</span> <a href="#h:5c7a4631-cf11-4928-bec0-7f97db5cd3ca">PHP类型</a></h2>
<div class="outline-text-2" id="text-h:5c7a4631-cf11-4928-bec0-7f97db5cd3ca">
<p>
简介
</p>

<p>
PHP 支持 10 种原始数据类型。
</p>

<p>
四种标量类型：
</p>
<ul class="org-ul">
<li>bool（布尔型）</li>
<li>int（整型）</li>
<li>float（浮点型，也称作 double)</li>
<li>string（字符串）</li>
</ul>

<p>
四种复合类型：
</p>
<ul class="org-ul">
<li>array（数组）</li>
<li>object（对象）</li>
<li><a href="https://www.php.net/manual/zh/language.types.callable.php">callable</a>（可调用）</li>
<li><a href="https://www.php.net/manual/zh/language.types.iterable.php">iterable</a>（可迭代）</li>
</ul>

<p>
最后是两种特殊类型：
</p>
<ul class="org-ul">
<li>resource（资源）</li>
<li>NULL（无类型）</li>
</ul>

<p>
可能还会读到一些关于“双精度（double）”类型的参考。实际上 double 和 float 是相同的，由于一些历史的原因，这两个名称同时存在。
</p>

<p>
变量的类型通常不是由程序员设定的，确切地说，是由 PHP 根据该变量使用的上下文在运行时决定的。
</p>

<p>
注意: 使用<a href="https://www.php.net/manual/zh/language.types.type-juggling.php#language.types.typecasting">类型转换</a>，强制将表达式的值转换为某种类型。还可以使用 <a href="https://www.php.net/manual/zh/function.settype.php">settype()</a> 函数就地对变量进行类型转换
</p>

<p>
使用 <a href="https://www.php.net/manual/zh/function.var-dump.php">var_dump()</a> 函数检查<a href="https://www.php.net/manual/zh/language.expressions.php">表达式</a>的值和类型。使用 <a href="https://www.php.net/manual/zh/function.get-debug-type.php">get_debug_type()</a> 检索<a href="https://www.php.net/manual/zh/language.expressions.php">表达式</a>的值和类型。使用 is_type 检查表达式是否属于某种类型。
</p>


<p>
示例 #1 不同类型
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a_bool = true;   // a bool
$a_str  = "foo";  // a string
$a_str2 = 'foo';  // a string
$an_int = 12;     // an int
echo get_debug_type($a_bool), "\n"; // 输出: boolean
echo get_debug_type($a_str), "\n";  // 输出: string

// 如果是整型，就加上 4
if (is_int($an_int)) {
    $an_int += 4;
}
var_dump($an_int); // 输出: int(16)

// 如果 $a_bool 是字符串，就打印出来
if (is_string($a_bool)) {
    echo "String: $a_bool";
}
?&gt;
</pre>
</div>

<p>
以上示例在 PHP 8 中的输出：
</p>
<div class="org-src-container">
<pre class="src src-php">bool
string
int(16)
</pre>
</div>
</div>
<div id="outline-container-h:4ebf554d-0738-49cb-b910-89adeb77538e" class="outline-3">
<h3 id="h:4ebf554d-0738-49cb-b910-89adeb77538e"><span class="section-number-3">3.1.</span> <a href="#h:4ebf554d-0738-49cb-b910-89adeb77538e">Boolean 布尔类型</a></h3>
<div class="outline-text-3" id="text-h:4ebf554d-0738-49cb-b910-89adeb77538e">
<p>
<a href="https://www.php.net/manual/zh/language.types.boolean.php">https://www.php.net/manual/zh/language.types.boolean.php</a>
</p>


<p>
<a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a> 仅有两个值，用于表达真（truth）值，不是 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a> 就是 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a>。
</p>
</div>
<div id="outline-container-h:97f8ee87-84e5-471b-b8d3-831f87d9da7f" class="outline-4">
<h4 id="h:97f8ee87-84e5-471b-b8d3-831f87d9da7f"><span class="section-number-4">3.1.1.</span> <a href="#h:97f8ee87-84e5-471b-b8d3-831f87d9da7f">语法</a></h4>
<div class="outline-text-4" id="text-h:97f8ee87-84e5-471b-b8d3-831f87d9da7f">
<p>
要指定一个 <a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a>，使用常量 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a> 或 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a>。两个都不区分大小写。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$foo = True; // 设置 $foo 为 TRUE
?&gt;
</pre>
</div>

<p>
通常<a href="https://www.php.net/manual/zh/language.operators.php">运算符</a>所返回的 <a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a> 值结果会被传递给<a href="https://www.php.net/manual/zh/language.control-structures.php">控制流程</a>。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// == 是一个操作符，它检测两个变量是否相等，并返回一个布尔值
if ($action == "show_version") {
    echo "The version is 1.23";
}

// 这样做是不必要的...
if ($show_separators == TRUE) {
    echo "&lt;hr&gt;\n";
}

// ...因为可以使用下面这种简单的方式：
if ($show_separators) {
    echo "&lt;hr&gt;\n";
}
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:7cdfb7a7-2300-4796-82e5-5844cb5f9835" class="outline-4">
<h4 id="h:7cdfb7a7-2300-4796-82e5-5844cb5f9835"><span class="section-number-4">3.1.2.</span> <a href="#h:7cdfb7a7-2300-4796-82e5-5844cb5f9835">转换为布尔值</a></h4>
<div class="outline-text-4" id="text-h:7cdfb7a7-2300-4796-82e5-5844cb5f9835">
<p>
要明确地将值转换成 <a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a>，可以用 (bool)强制转换。通常这不是必需的，因为值在逻辑上下文中使用将会自动解释为 <a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a> 类型的值。更多信息请阅读<a href="https://www.php.net/manual/zh/language.types.type-juggling.php">类型转换</a>页面。
</p>

<p>
参见<a href="https://www.php.net/manual/zh/language.types.type-juggling.php">类型转换的判别</a>。
</p>

<p>
当转换为 <a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a> 时，以下值被认为是 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a>：
</p>

<ul class="org-ul">
<li><a href="https://www.php.net/manual/zh/language.types.boolean.php">布尔</a>值 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a> 本身</li>
<li><a href="https://www.php.net/manual/zh/language.types.integer.php">整型</a>值 0（零）</li>
<li><a href="https://www.php.net/manual/zh/language.types.float.php">浮点型</a>值 0.0（零）-0.0（零）</li>
<li>空<a href="https://www.php.net/manual/zh/language.types.string.php">字符串</a> ""，以及<a href="https://www.php.net/manual/zh/language.types.string.php">字符串</a> "0"</li>
<li>不包括任何元素的<a href="https://www.php.net/manual/zh/language.types.array.php">数组</a></li>
<li>原子类型 <a href="https://www.php.net/manual/zh/language.types.null.php">NULL</a>（包括尚未赋值的变量）</li>
<li>内部对象的强制转换行为重载为 bool。例如：由不带属性的空元素创建的 <a href="https://www.php.net/manual/zh/ref.simplexml.php">SimpleXML</a> 对象。</li>
</ul>

<p>
所有其它值都被认为是 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a>（包括 <a href="https://www.php.net/manual/zh/language.types.resource.php">资源</a> 和 <a href="https://www.php.net/manual/zh/math.constants.php#constant.nan">NAN</a>）。
</p>

<blockquote>
<p>
警告 -1 和其它非零值（不论正负）一样，被认为是 true！
</p>
</blockquote>

<p>
示例 #1 转换为布尔型
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
var_dump((bool) "");        // bool(false)
var_dump((bool) "0");       // bool(false)
var_dump((bool) 1);         // bool(true)
var_dump((bool) -2);        // bool(true)
var_dump((bool) "foo");     // bool(true)
var_dump((bool) 2.3e5);     // bool(true)
var_dump((bool) array(12)); // bool(true)
var_dump((bool) array());   // bool(false)
var_dump((bool) "false");   // bool(true)
?&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:7d373ecc-2884-4754-b075-ea6bb41c79f5" class="outline-3">
<h3 id="h:7d373ecc-2884-4754-b075-ea6bb41c79f5"><span class="section-number-3">3.2.</span> <a href="#h:7d373ecc-2884-4754-b075-ea6bb41c79f5">Integer 整型</a></h3>
<div class="outline-text-3" id="text-h:7d373ecc-2884-4754-b075-ea6bb41c79f5">
<p>
<a href="https://www.php.net/manual/zh/language.types.integer.php">https://www.php.net/manual/zh/language.types.integer.php</a>
</p>


<p>
<a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 是集合 ℤ = {&#x2026;, -2, -1, 0, 1, 2, &#x2026;} 中的某个数。
</p>

<p>
参见
</p>
<ul class="org-ul">
<li><a href="https://www.php.net/manual/zh/language.types.float.php">浮点数</a></li>
<li><a href="https://www.php.net/manual/zh/book.bc.php">任意精度/BCMath</a></li>
<li><a href="https://www.php.net/manual/zh/book.gmp.php">任意长度整数/GMP</a></li>
</ul>
</div>
<div id="outline-container-h:b4238fd1-1800-40c3-976f-5cf675178ab3" class="outline-4">
<h4 id="h:b4238fd1-1800-40c3-976f-5cf675178ab3"><span class="section-number-4">3.2.1.</span> <a href="#h:b4238fd1-1800-40c3-976f-5cf675178ab3">语法</a></h4>
<div class="outline-text-4" id="text-h:b4238fd1-1800-40c3-976f-5cf675178ab3">
<p>
<a href="https://www.php.net/manual/zh/language.types.integer.php">Int</a> 可以使用十进制，十六进制，八进制或二进制表示，前面可以加上可选的符号（- 或者 +）。可以用<a href="https://www.php.net/manual/zh/language.operators.arithmetic.php">负运算符</a>来表示一个负的 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>。
</p>

<p>
要使用八进制表达，数字前必须加上 0（零）。 PHP 8.1.0 起，八进制表达也可以在前面加上 0o 或者 0O 。 要使用十六进制表达，数字前必须加上 0x。要使用二进制表达，数字前必须加上 0b。
</p>

<p>
从 PHP 7.4.0 开始，整型数值可能会包含下划线 (_)，为了更好的阅读体验，这些下划线在展示的时候，会被 PHP 过滤掉。
</p>

<p>
示例 #1 整数文字表达
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = 1234; // 十进制数
$a = 0123; // 八进制数 (等于十进制 83)
$a = 0o123; // 八进制数 (PHP 8.1.0 起)
$a = 0x1A; // 十六进制数 (等于十进制 26)
$a = 0b11111111; // 二进制数字 (等于十进制 255)
$a = 1_234_567; // 整型数值 (PHP 7.4.0 以后)
?&gt;
</pre>
</div>

<p>
int literal 的结构形式从 PHP 8.1.0 开始是（之前不允许使用 0o 或 0O 八进制前缀，并且 PHP 7.4.0 之前不允许使用下划线）：
</p>

<div class="org-src-container">
<pre class="src src-sh">decimal     : [1-9][0-9]*(_[0-9]+)*
            | 0

hexadecimal : 0[xX][0-9a-fA-F]+(_[0-9a-fA-F]+)*

octal       : 0[oO]?[0-7]+(_[0-7]+)*

binary      : 0[bB][01]+(_[01]+)*

<span class="org-builtin">integer</span>     : decimal
            | hexadecimal
            | octal
            | binary
</pre>
</div>


<p>
整型数 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 的字长和平台有关，尽管通常最大值是大约二十亿（32 位有符号）。64位平台下的最大值通常是大约 9E18。PHP 不支持无符号的 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>。<a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 值的字长可以用常量 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.php-int-size">PHP_INT_SIZE</a>来表示，最大值可以用常量 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.php-int-max">PHP_INT_MAX</a> 来表示，最小值可以用常量 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.php-int-min">PHP_INT_MIN</a> 表示。
</p>
</div>
</div>
<div id="outline-container-h:68b30ee4-c2ab-46bb-a6b3-1fcabbd79661" class="outline-4">
<h4 id="h:68b30ee4-c2ab-46bb-a6b3-1fcabbd79661"><span class="section-number-4">3.2.2.</span> <a href="#h:68b30ee4-c2ab-46bb-a6b3-1fcabbd79661">整数溢出</a></h4>
<div class="outline-text-4" id="text-h:68b30ee4-c2ab-46bb-a6b3-1fcabbd79661">
<p>
如果给定的一个数超出了 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 的范围，将会被解释为 <a href="https://www.php.net/manual/zh/language.types.float.php">float</a>。同样如果执行的运算结果超出了 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 范围，也会返回 <a href="https://www.php.net/manual/zh/language.types.float.php">float</a>。
</p>

<p>
示例 #2 整数溢出
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$large_number = 50000000000000000000;
var_dump($large_number);         // float(5.0E+19)
var_dump(PHP_INT_MAX + 1);       // 32-bit system: float(2147483648)
                                 // 64-bit system: float(9.2233720368548E+18)
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:ce151558-7573-42c4-9d1f-2e7f5c242c77" class="outline-4">
<h4 id="h:ce151558-7573-42c4-9d1f-2e7f5c242c77"><span class="section-number-4">3.2.3.</span> <a href="#h:ce151558-7573-42c4-9d1f-2e7f5c242c77">整数除法</a></h4>
<div class="outline-text-4" id="text-h:ce151558-7573-42c4-9d1f-2e7f5c242c77">
<p>
PHP 没有 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 除法取整运算符，要使用 <a href="https://www.php.net/manual/zh/function.intdiv.php">intdiv()</a> 实现。1/2 产生出 <a href="https://www.php.net/manual/zh/language.types.float.php">float</a> 0.5。值可以舍弃小数部分，强制转换为 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>，或者使用 <a href="https://www.php.net/manual/zh/function.round.php">round()</a> 函数可以更好地进行四舍五入。
</p>

<p>
示例 #3 Divisions
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
var_dump(25/7);         // float(3.5714285714286) 
var_dump((int) (25/7)); // int(3)
var_dump(round(25/7));  // float(4) 
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:3bb0bb31-02cd-4773-b939-884198946308" class="outline-4">
<h4 id="h:3bb0bb31-02cd-4773-b939-884198946308"><span class="section-number-4">3.2.4.</span> <a href="#h:3bb0bb31-02cd-4773-b939-884198946308">转换为整型</a></h4>
<div class="outline-text-4" id="text-h:3bb0bb31-02cd-4773-b939-884198946308">
<p>
要明确地将一个值转换为 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>，用 (int) 或(integer) 强制转换。不过大多数情况下都不需要强制转换，因为当运算符，函数或流程控制需要一个 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 参数时，值会自动转换。还可以通过函数 <a href="https://www.php.net/manual/zh/function.intval.php">intval()</a> 来将一个值转换成 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 整型。
</p>

<p>
将 <a href="https://www.php.net/manual/zh/language.types.resource.php">resource</a> 转换成 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 时，结果会是 PHP 运行时为 <a href="https://www.php.net/manual/zh/language.types.resource.php">resource</a> 分配的唯一资源号。
</p>


<ul class="org-ul">
<li><p>
从布尔值转换
</p>

<p>
false 将产生出 0（零），true 将产生出 1（壹）。
</p></li>

<li><p>
从浮点型转换
</p>

<p>
当从浮点数 float 转换成整数 int时，将向零取整。自 PHP 8.1.0 起，当将非整数类型的 float 转换为失去精度的 int 时，会发出弃用通知。
</p></li>
</ul>

<p>
示例 #4 从浮点数转换
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php

function foo($value): int {
  return $value; 
}

var_dump(foo(8.1)); // 自 PHP 8.1.0 起：“Deprecated: Implicit conversion from float 8.1 to int loses precision”
var_dump(foo(8.1)); // PHP 8.1.0 之前为 8
var_dump(foo(8.0)); // 8 in both cases

var_dump((int) 8.1); // 8 in both cases
var_dump(intval(8.1)); // 8 in both cases
?&gt;
</pre>
</div>

<p>
执行结果
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>Deprecated: Implicit conversion from float 8.1 to int loses precision<span class="org-keyword"> in</span> script on line 4
<span class="org-function-name">int</span>(8)
Deprecated: Implicit conversion from float 8.1 to int loses precision<span class="org-keyword"> in</span> script on line 4
<span class="org-function-name">int</span>(8)
<span class="org-function-name">int</span>(8)
<span class="org-function-name">int</span>(8)
<span class="org-function-name">int</span>(8)
</pre>
</div>

<p>
如果浮点数超出了 int 范围（32 位平台下通常为 +/- 2.15e+9 = 2^31，64 位平台下，通常为 +/- 9.22e+18 = 2^63），则结果为未定义， 因为没有足够的精度给出一个确切的 int 结果。 在此情况下没有警告，甚至没有任何通知！
</p>

<blockquote>
<p>
注意:
NaN、Inf 和 -Inf 在转换成 int 时是零。
</p>
</blockquote>

<blockquote>
<p>
警告
绝不要将未知的分数强制转换为 int，这样有时会导致不可预料的结果。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo (int) ( (0.1+0.7) * 10 ); // 显示 7!
?&gt;
</pre>
</div>

<p>
参见<a href="https://www.php.net/manual/zh/language.types.float.php#warn.float-precision">关于浮点数精度的警告</a>。
</p>
</blockquote>

<ul class="org-ul">
<li><p>
从 NULL 转换
</p>

<p>
null 会转换为零（0）。
</p></li>
</ul>
</div>
</div>
<div id="outline-container-h:69479c9d-2d00-4a42-a5e5-1dce4f5ca5d8" class="outline-4">
<h4 id="h:69479c9d-2d00-4a42-a5e5-1dce4f5ca5d8"><span class="section-number-4">3.2.5.</span> <a href="#h:69479c9d-2d00-4a42-a5e5-1dce4f5ca5d8">安全分享-整数溢出</a></h4>
<div class="outline-text-4" id="text-h:69479c9d-2d00-4a42-a5e5-1dce4f5ca5d8">
<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo PHP_INT_MAX;
print("\n");
echo PHP_INT_MAX+1;

$large_number = 9223372036854775807;
var_dump($large_number); //int(9223372036854775807

$large_number = 9223372036854775808;
var_dump($large_number); //float(9.223372036854776E+18)
echo (int)$large_number; //-9223372036854775808 整数溢出
</pre>
</div>

<p>
电商网站，抓包做整数溢出
</p>
<ul class="org-ul">
<li>修改商品价格，但平台一般有价格检验，修改商品价格肯定是修改不成功的。</li>
<li>修改订单价格，但订单价格也有逻辑，订单价格=产品价格+不同产品</li>
<li>最终订单价格中肯定有数量，我们可以挑一个最贵的新产品把数量改多，可以通过这种价格乘以数量的方式让整数超过最大值。</li>
</ul>

<p>
这种修改商品数量，一般很难找到问题，因为消费逻辑和功能逻辑都没问题。
</p>

<p>
防止整数溢出：
</p>
<ul class="org-ul">
<li>限制数量，限制价格，但在有大活动时又不希望限制</li>
<li>在整个电商系统中，对支付的数字使用专用的类型decimal，这是专门做支付精确价格的类型</li>
</ul>

<p>
我们在审计整数溢出漏洞时，关注以下几点：
</p>
<ul class="org-ul">
<li>功能：如果是支付功能，有整数溢出就很严重了</li>
<li>是否可以绕过限制逻辑。</li>
</ul>

<p>
利用针对代码的白盒扫描器发现，聚合整个代码里的业务逻辑特征结合这个变量的类型来判断。
</p>
</div>
<div id="outline-container-h:42897642-8ee8-4209-a35d-e0f6c382fb00" class="outline-5">
<h5 id="h:42897642-8ee8-4209-a35d-e0f6c382fb00"><span class="section-number-5">3.2.5.1.</span> <a href="#h:42897642-8ee8-4209-a35d-e0f6c382fb00">为什么学PHP?</a></h5>
<div class="outline-text-5" id="text-h:42897642-8ee8-4209-a35d-e0f6c382fb00">
<p>
php是弱类型语言，非常不利于开发。
</p>

<ul class="org-ul">
<li>有很多的漏洞类型只有php有，而其它语言没有？
<ul class="org-ul">
<li>php include函数会有文件包含漏洞。</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-h:1101ce27-aa55-4aa1-bed7-9f34c4b399a2" class="outline-3">
<h3 id="h:1101ce27-aa55-4aa1-bed7-9f34c4b399a2"><span class="section-number-3">3.3.</span> <a href="#h:1101ce27-aa55-4aa1-bed7-9f34c4b399a2">Float 浮点型</a></h3>
<div class="outline-text-3" id="text-h:1101ce27-aa55-4aa1-bed7-9f34c4b399a2">
<p>
<a href="https://www.php.net/manual/zh/language.types.float.php">https://www.php.net/manual/zh/language.types.float.php</a>
</p>

<p>
浮点型（也叫浮点数 float，双精度数 double 或实数 real）可以用以下任一语法定义：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = 1.234; 
$b = 1.2e3; 
$c = 7E-10;
$d = 1_234.567; // 从 PHP 7.4.0 开始支持
?&gt;
</pre>
</div>

<p>
浮点数的形式表示（PHP 7.4.0 之前不支持下划线）：
</p>
<div class="org-src-container">
<pre class="src src-sh">LNUM          [0-9]+(_[0-9]+)*
<span class="org-function-name">DNUM</span> ({LNUM}?<span class="org-string">"."</span>{LNUM}) | ({LNUM}<span class="org-string">"."</span>{LNUM}?)
<span class="org-function-name">EXPONENT_DNUM</span> (({LNUM} | {DNUM}) [eE][+-]? {LNUM})
</pre>
</div>

<p>
浮点数的字长和平台相关，尽管通常最大值是 1.8e308 并具有 14 位十进制数字的精度（64 位 IEEE 格式）。
</p>

<blockquote>
<p>
警告
</p>

<p>
<b>浮点数的精度</b>
</p>

<p>
浮点数的精度有限。尽管取决于系统，PHP 通常使用 IEEE 754 双精度格式，则由于取整而导致的最大相对误差为 1.11e-16。非基本数学运算可能会给出更大误差，并且要考虑到进行复合运算时的误差传递。
</p>

<p>
此外，以十进制能够精确表示的有理数如 0.1 或 0.7，无论有多少尾数都不能被内部所使用的二进制精确表示，因此不能在不丢失一点点精度的情况下转换为二进制的格式。这就会造成混乱的结果：例如，floor((0.1+0.7)*10) 通常会返回 7 而不是预期中的 8，因为该结果内部的表示其实是类似 7.9999999999999991118&#x2026;。
</p>

<p>
所以永远不要相信浮点数结果精确到了最后一位，也永远不要比较两个浮点数是否相等。如果确实需要更高的精度，应该使用<a href="https://www.php.net/manual/zh/ref.bc.php">任意精度数学函数</a>或者 <a href="https://www.php.net/manual/zh/ref.gmp.php">gmp 函数</a>。
</p>

<p>
参见» <a href="https://floating-point-gui.de/">浮点数指南</a>网页的简单解释。
</p>
</blockquote>
</div>
</div>
<div id="outline-container-h:ed023975-3069-4909-bf38-2bb4e3fe7915" class="outline-3">
<h3 id="h:ed023975-3069-4909-bf38-2bb4e3fe7915"><span class="section-number-3">3.4.</span> <a href="#h:ed023975-3069-4909-bf38-2bb4e3fe7915">转换为浮点数</a></h3>
<div class="outline-text-3" id="text-h:ed023975-3069-4909-bf38-2bb4e3fe7915">
<ul class="org-ul">
<li><p>
从 string 转换
</p>

<p>
如果 string 是 numeric 或者前导数字， 则将它解析为相应的 float 值，否则将转换为零（0）。
</p></li>

<li><p>
从其他类型转换
</p>

<p>
对于其它类型的值，其情况类似于先将值转换成 int，然后再转换成 float。 请参阅“转换为整型”一节以获取更多信息。
</p>

<p>
注意: 某些类型在转换成 int 时有未定义行为，转换为 float 时也会如此。
</p></li>
</ul>
</div>
<div id="outline-container-h:05e45497-17a1-4598-a0c8-2374bde97a5c" class="outline-4">
<h4 id="h:05e45497-17a1-4598-a0c8-2374bde97a5c"><span class="section-number-4">3.4.1.</span> <a href="#h:05e45497-17a1-4598-a0c8-2374bde97a5c">比较浮点数</a></h4>
<div class="outline-text-4" id="text-h:05e45497-17a1-4598-a0c8-2374bde97a5c">
<p>
如上述警告信息所言，由于内部表达方式的原因，比较两个浮点数是否相等是有问题的。不过还是有迂回的方法来比较浮点数值的。
</p>

<p>
要测试浮点数是否相等，要使用一个仅比该数值大一丁点的最小误差值。该值也被称为机器极小值（epsilon）或最小单元取整数，是计算中所能接受的最小的差别值。
</p>

<p>
$a 和 $b 在小数点后五位精度内都是相等的。
</p>

<p>
示例 #1 浮点比较
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = 1.23456789;
$b = 1.23456780;
$epsilon = 0.00001;

if (abs($a - $b) &lt; $epsilon) {
    echo "true";
}

// 执行结果 true
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:9721a942-193b-4a9b-8129-c0cf70ffdf56" class="outline-4">
<h4 id="h:9721a942-193b-4a9b-8129-c0cf70ffdf56"><span class="section-number-4">3.4.2.</span> <a href="#h:9721a942-193b-4a9b-8129-c0cf70ffdf56">NaN</a></h4>
<div class="outline-text-4" id="text-h:9721a942-193b-4a9b-8129-c0cf70ffdf56">
<p>
某些数学运算会产生一个由常量 <a href="https://www.php.net/manual/zh/math.constants.php#constant.nan">NAN</a> 所代表的结果。此结果代表着一个在浮点数运算中未定义或不可表述的值。任何拿此值与其它任何值（除了  <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a>）进行的松散或严格比较的结果都是 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a>。
</p>

<p>
由于 <a href="https://www.php.net/manual/zh/math.constants.php#constant.nan">NAN</a> 代表着任何不同值，不应拿 <a href="https://www.php.net/manual/zh/math.constants.php#constant.nan">NAN</a> 去和其它值进行比较，包括其自身，应该用 <a href="https://www.php.net/manual/zh/function.is-nan.php">is_nan()</a> 来检查。
</p>
</div>
</div>
</div>
<div id="outline-container-h:d5de92f0-2c15-4f84-a28f-5aef6523ad06" class="outline-3">
<h3 id="h:d5de92f0-2c15-4f84-a28f-5aef6523ad06"><span class="section-number-3">3.5.</span> <a href="#h:d5de92f0-2c15-4f84-a28f-5aef6523ad06">String 字符串</a></h3>
<div class="outline-text-3" id="text-h:d5de92f0-2c15-4f84-a28f-5aef6523ad06">
<p>
<a href="https://www.php.net/manual/zh/language.types.string.php">https://www.php.net/manual/zh/language.types.string.php</a>
</p>

<p>
一个字符串 string 就是由一系列的字符组成，其中每个字符等同于一个字节。这意味着 PHP 只能支持 256 的字符集，因此不支持 Unicode 。详见字符串类型详解。
</p>

<p>
注意: 在 32 位版本中，string 最大可以达到 2GB（最多 2147483647 字节）。
</p>
</div>
<div id="outline-container-h:0f2a7aa2-d940-452e-8f62-e9ca7596e07c" class="outline-4">
<h4 id="h:0f2a7aa2-d940-452e-8f62-e9ca7596e07c"><span class="section-number-4">3.5.1.</span> <a href="#h:0f2a7aa2-d940-452e-8f62-e9ca7596e07c">语法</a></h4>
<div class="outline-text-4" id="text-h:0f2a7aa2-d940-452e-8f62-e9ca7596e07c">
<p>
一个字符串可以用 4 种方式表达：
</p>
<ul class="org-ul">
<li><a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.syntax.single">单引号</a></li>
<li><a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.syntax.double">双引号</a></li>
<li><a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.syntax.heredoc">heredoc 语法结构</a></li>
<li><a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.syntax.nowdoc">nowdoc 语法结构</a></li>
</ul>
</div>
<div id="outline-container-h:7142b745-7056-4600-bb3b-9687b35eb564" class="outline-5">
<h5 id="h:7142b745-7056-4600-bb3b-9687b35eb564"><span class="section-number-5">3.5.1.1.</span> <a href="#h:7142b745-7056-4600-bb3b-9687b35eb564">单引号</a></h5>
<div class="outline-text-5" id="text-h:7142b745-7056-4600-bb3b-9687b35eb564">
<p>
定义一个字符串的最简单的方法是用单引号把它包围起来（字符 '）。
</p>

<p>
要表达一个单引号自身，需在它的前面加个反斜线（\）来转义。要表达一个反斜线自身，则用两个反斜线（\\）。其它任何方式的反斜线都会被当成反斜线本身：也就是说如果想使用其它转义序列例如 \r 或者 \n，并不代表任何特殊含义，就单纯是这两个字符本身
</p>

<p>
注意:  不像<a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.syntax.double">双引号</a>和 <a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.syntax.heredoc">heredoc</a> 语法结构，在单引号字符串中的<a href="https://www.php.net/manual/zh/language.variables.php">变量</a>和特殊字符的转义序列将不会被替换。
</p>

<p>
示例 #1 Syntax Variants
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo 'this is a simple string', PHP_EOL;

// 可以录入多行
echo 'You can also have embedded newlines in
strings this way as it is
okay to do', PHP_EOL;

// 输出： Arnold once said: "I'll be back"
echo 'Arnold once said: "I\'ll be back"', PHP_EOL;

// 输出： You deleted C:\*.*?
echo 'You deleted C:\\*.*?', PHP_EOL;

// 输出： You deleted C:\*.*?
echo 'You deleted C:\*.*?', PHP_EOL;

// 输出： This will not expand: \n a newline
echo 'This will not expand: \n a newline', PHP_EOL;

// 输出： Variables do not $expand $either
echo 'Variables do not $expand $either', PHP_EOL;
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:d7767fe7-080c-4090-bacc-e2e12779ddda" class="outline-5">
<h5 id="h:d7767fe7-080c-4090-bacc-e2e12779ddda"><span class="section-number-5">3.5.1.2.</span> <a href="#h:d7767fe7-080c-4090-bacc-e2e12779ddda">双引号</a></h5>
<div class="outline-text-5" id="text-h:d7767fe7-080c-4090-bacc-e2e12779ddda">
<p>
如果字符串是包围在双引号（")）中， PHP 将对以下特殊的字符进行解析：
</p>

<table>
<caption class="t-above"><span class="table-number">Table 1:</span> 转义字符</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">序列</th>
<th scope="col" class="org-left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\n</td>
<td class="org-left">换行（ASCII 字符集中的 LF 或 0x0A (10)）</td>
</tr>

<tr>
<td class="org-left">\r</td>
<td class="org-left">回车（ASCII 字符集中的 CR 或 0x0D (13)）</td>
</tr>

<tr>
<td class="org-left">\t</td>
<td class="org-left">水平制表符（ASCII 字符集中的 HT 或 0x09 (9)）</td>
</tr>

<tr>
<td class="org-left">\v</td>
<td class="org-left">垂直制表符（ASCII 字符集中的 VT 或 0x0B (11)）</td>
</tr>

<tr>
<td class="org-left">\e</td>
<td class="org-left">Escape（ASCII 字符集中的 ESC 或 0x1B (27)）</td>
</tr>

<tr>
<td class="org-left">\f</td>
<td class="org-left">换页（ASCII 字符集中的 FF 或 0x0C (12)）</td>
</tr>

<tr>
<td class="org-left">\\</td>
<td class="org-left">反斜线</td>
</tr>

<tr>
<td class="org-left">\$</td>
<td class="org-left">美元标记</td>
</tr>

<tr>
<td class="org-left">\"</td>
<td class="org-left">双引号</td>
</tr>

<tr>
<td class="org-left">\[0-7]{1,3} ｝</td>
<td class="org-left">八进制：匹配正则表达式序列 [0-7]{1,3} 的是八进制表示法的字符序列（比如 "\101" &#x2014; "A"），会静默溢出以适应一个字节（例如 "\400" &#x2014; "\000"）</td>
</tr>

<tr>
<td class="org-left">\x[0-9A-Fa-f]{1,2}</td>
<td class="org-left">十六进制：匹配正则表达式序列 [0-9A-Fa-f]{1,2} 的是十六进制表示法的一个字符（比如 "\x41" &#x2014; "A"）</td>
</tr>

<tr>
<td class="org-left">\u{[0-9A-Fa-f]+}</td>
<td class="org-left">Unicode：匹配正则表达式 [0-9A-Fa-f]+ 的字符序列是 unicode 码位，该码位能作为 UTF-8 的表达方式输出字符串。序列中必须包含大括号。例如 "\u{41}" &#x2014; "A"</td>
</tr>
</tbody>
</table>

<p>
和单引号字符串一样，转义任何其它字符都会导致反斜线被显示出来。
</p>

<p>
用双引号定义的字符串最重要的特征是变量会被解析，详见<a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.parsing">变量插值</a>。
</p>
</div>
</div>
<div id="outline-container-h:c3de3c30-c3fd-4d26-b785-1500d307bd0b" class="outline-5">
<h5 id="h:c3de3c30-c3fd-4d26-b785-1500d307bd0b"><span class="section-number-5">3.5.1.3.</span> <a href="#h:c3de3c30-c3fd-4d26-b785-1500d307bd0b">Heredoc 结构</a></h5>
<div class="outline-text-5" id="text-h:c3de3c30-c3fd-4d26-b785-1500d307bd0b">
<p>
第三种表达字符串的方法是用 heredoc 句法结构：&lt;&lt;&lt;。在该运算符之后要提供一个标识符，然后换行。接下来是字符串 string 本身，最后要用前面定义的标识符作为结束标志。
</p>

<p>
结束标识符可以使用空格或制表符（tab）缩进，此时文档字符串会删除所有缩进。 在 PHP 7.3.0 之前的版本中，结束时所引用的标识符必须在该行的第一列。
</p>

<p>
而且，标识符的命名也要像其它标签一样遵守 PHP 的规则：只能包含字母、数字和下划线，并且必须以字母和下划线作为开头。
</p>

<p>
示例 #2 PHP 7.3.0 之后的基础 Heredoc 示例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 无缩进
echo &lt;&lt;&lt;END
      a
     b
    c
\n
END;
// 4 空格缩进
echo &lt;&lt;&lt;END
      a
     b
    c
    END;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>      a
     b
    c
  a
 b
c
</pre>
</div>

<p>
如果结束标识符的缩进超过内容的任何一行的缩进，则将抛出 ParseError 异常：
</p>

<p>
示例 #3 结束标识符的缩进不能超过正文的任何一行
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo &lt;&lt;&lt;END
  a
 b
c
   END;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>Parse error: Invalid body indentation level (expecting an indentation level of at least 3) <span class="org-keyword">in</span> script on line 3
</pre>
</div>

<p>
制表符也可以缩进结束标识符，但是，关于缩进结束标识符和内容， 制表符和空格不能混合使用。在以上任何情况下， 将会抛出 <a href="https://www.php.net/manual/zh/class.parseerror.php">ParseError</a> 异常。 之所以包含这些空白限制，是因为混合制表符和空格来缩进不利于易读性。
</p>

<p>
示例 #4 内容（空白）和结束标识符的不同缩进
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 以下所有代码都不起作用。
// 正文（空格）和结束标记（制表符），不同的缩进
{
    echo &lt;&lt;&lt;END
     a
        END;
}
// 在正文中混合空格和制表符
{
    echo &lt;&lt;&lt;END
        a
     END;
}
// 在结束标记中混合空格和制表符
{
    echo &lt;&lt;&lt;END
          a
         END;
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">&#20197;&#19978;&#31034;&#20363;&#22312; PHP 7.3 &#20013;&#30340;&#36755;&#20986;&#65306;
</span>Parse error: Invalid indentation - tabs and spaces cannot be mixed<span class="org-keyword"> in</span> example.php line 8
</pre>
</div>

<p>
内容字符串的结束标识符后面不需要跟分号或者换行符。 例如，从 PHP 7.3.0 开始允许以下代码：
</p>

<p>
示例 #5 在结束标识符后继续表达式
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$values = [&lt;&lt;&lt;END
a
  b
    c
END, 'd e f'];
var_dump($values);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">&#20197;&#19978;&#31034;&#20363;&#22312; PHP 7.3 &#20013;&#30340;&#36755;&#20986;&#65306;
</span><span class="org-function-name">array</span>(2) {
  [0] =&gt;
  string(11) <span class="org-string">"a
  b
    c"</span>
  [1] =&gt;
  string(5) <span class="org-string">"d e f"</span>
}
</pre>
</div>

<p>
Heredoc 结构就象是没有双引号的 string，这就是说在 heredoc 结构中单引号不用被转义，但是上文中列出的转义序列还可以使用。变量将被替换，但在 heredoc 结构中含有复杂的变量时要像 string 一样格外小心。
</p>

<p>
示例 #9 Heredoc 结构的字符串示例
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$str = &lt;&lt;&lt;EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD;

/* 含有变量的更复杂示例 */
class foo
{
    var $foo;
    var $bar;

    function __construct()
    {
        $this-&gt;foo = 'Foo';
        $this-&gt;bar = array('Bar1', 'Bar2', 'Bar3');
    }
}

$foo = new foo();
$name = 'MyName';

echo &lt;&lt;&lt;EOT
My name is "$name". I am printing some $foo-&gt;foo.
Now, I am printing some {$foo-&gt;bar[1]}.
This should print a capital 'A': \x41
EOT;
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh">My name is <span class="org-string">"MyName"</span>. I am printing some Foo.
Now, I am printing some Bar2.
This should print a capital <span class="org-string">'A'</span>: A
</pre>
</div>

<p>
也可以把 Heredoc 结构用在函数参数中来传递数据：
</p>

<p>
示例 #10 Heredoc 结构在参数中的示例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
var_dump(array(&lt;&lt;&lt;EOD
foobar!
EOD
));
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span><span class="org-function-name">array</span>(1) {
  [0]=&gt;
  string(7) <span class="org-string">"foobar!"</span>
}
</pre>
</div>

<p>
可以用 Heredoc 结构来初始化静态变量和类的属性和常量：
</p>

<p>
示例 #11 使用 Heredoc 结构来初始化静态值
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 静态变量
function foo()
{
    static $bar = &lt;&lt;&lt;LABEL
Nothing in here...
LABEL;
}

// 类的常量、属性
class foo
{
    const BAR = &lt;&lt;&lt;FOOBAR
Constant example
FOOBAR;

    public $baz = &lt;&lt;&lt;FOOBAR
Property example
FOOBAR;
}
?&gt;
</pre>
</div>

<p>
还可以在 Heredoc 结构中用双引号来声明标识符：
</p>

<p>
示例 #12 在 heredoc 结构中使用双引号
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo &lt;&lt;&lt;"FOOBAR"
Hello World!
FOOBAR;
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>Hello World!
</pre>
</div>
</div>
</div>
<div id="outline-container-h:9d7a93a8-c529-4c19-a18b-02922e1d9351" class="outline-5">
<h5 id="h:9d7a93a8-c529-4c19-a18b-02922e1d9351"><span class="section-number-5">3.5.1.4.</span> <a href="#h:9d7a93a8-c529-4c19-a18b-02922e1d9351">Nowdoc 结构</a></h5>
<div class="outline-text-5" id="text-h:9d7a93a8-c529-4c19-a18b-02922e1d9351">
<p>
就象 heredoc 结构类似于双引号字符串，Nowdoc 结构是类似于单引号字符串的。Nowdoc 结构很象 heredoc 结构，但是 nowdoc 中不进行字符串插值。这种结构很适合用于嵌入 PHP 代码或其它大段文本而无需对其中的特殊字符进行转义。与 SGML 的 <code>&lt;![CDATA[ ]]&gt;</code> 结构是用来声明大段的不用解析的文本类似，nowdoc 结构也有相同的特征。
</p>

<p>
一个 nowdoc 结构也用和 heredocs 结构一样的标记 &lt;&lt;&lt;， 但是跟在后面的标识符要用单引号括起来，即 &lt;&lt;&lt;'EOT'。Heredoc 结构的所有规则也同样适用于 nowdoc 结构，尤其是结束标识符的规则。
</p>

<p>
示例 #13 Nowdoc 结构字符串示例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo &lt;&lt;&lt;'EOD'
Example of string spanning multiple lines
using nowdoc syntax. Backslashes are always treated literally,
e.g. \\ and \'.
EOD;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh">Example of string spanning multiple lines
using nowdoc syntax. Backslashes are always treated literally,
e.g. <span class="org-string">\\</span> and <span class="org-string">\'</span>.
</pre>
</div>

<p>
示例 #14 含变量引用的 Nowdoc 字符串示例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php

/* 含有变量的更复杂的示例 */
class foo
{
    public $foo;
    public $bar;

    function __construct()
    {
        $this-&gt;foo = 'Foo';
        $this-&gt;bar = array('Bar1', 'Bar2', 'Bar3');
    }
}

$foo = new foo();
$name = 'MyName';

echo &lt;&lt;&lt;'EOT'
My name is "$name". I am printing some $foo-&gt;foo.
Now, I am printing some {$foo-&gt;bar[1]}.
This should not print a capital 'A': \x41
EOT;
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh">My name is <span class="org-string">"$name"</span>. I am printing some $<span class="org-variable-name">foo</span>-&gt;foo.
Now, I am printing some {$<span class="org-variable-name">foo</span>-&gt;bar[1]}.
This should not print a capital <span class="org-string">'A'</span>: \x41
</pre>
</div>

<p>
示例 #15 静态数据的示例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
class foo {
    public $bar = &lt;&lt;&lt;'EOT'
bar
EOT;
}
?&gt;
</pre>
</div>

<p>
注意:Nowdoc 结构是在 PHP 5.3.0 中加入的
</p>
</div>
</div>
<div id="outline-container-h:e8a5b61c-148d-40ea-a6a3-70d03641e77a" class="outline-5">
<h5 id="h:e8a5b61c-148d-40ea-a6a3-70d03641e77a"><span class="section-number-5">3.5.1.5.</span> <a href="#h:e8a5b61c-148d-40ea-a6a3-70d03641e77a">字符串插值</a></h5>
<div class="outline-text-5" id="text-h:e8a5b61c-148d-40ea-a6a3-70d03641e77a">
<p>
当字符串用双引号或 heredoc 结构定义时，其中的<a href="https://www.php.net/manual/zh/language.variables.php">变量</a>可以进行替换。
</p>

<p>
这里共有两种语法规则：一种<a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.parsing.basic">基本</a>规则，一种<a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.parsing.advanced">高级</a>规则。基本的语法规则是最常用和最方便的，它可以用最少的代码在一个 <a href="https://www.php.net/manual/zh/language.types.string.php">string</a> 中嵌入一个变量，一个 <a href="https://www.php.net/manual/zh/language.types.array.php">array</a> 的值，或一个 <a href="https://www.php.net/manual/zh/language.types.object.php">object</a> 的属性。
</p>

<p>
基本语法
</p>

<p>
如果遇到一个美元符号（$），后面的字符会被解释为变量名，然后替换为变量的值。
</p>

<p>
示例 #16 String Interpolation
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$juice = "apple";

echo "He drank some $juice juice." . PHP_EOL;

?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">He drank some apple juice.
</pre>
</div>

<p>
从形式上讲，基本变量替换语法的结构如下：
</p>

<div class="org-src-container">
<pre class="src src-sh">string-variable::
     variable-name   (offset-or-property)?
   | ${   expression   }

offset-or-property::
     offset-in-string
   | property-in-string

offset-in-string::
     [   name   ]
   | [   variable-name   ]
   | [   integer-literal   ]

property-in-string::
     -&gt;  name

variable-name::
     $   name

name::
     [a-zA-Z_\x80-\xff][a-zA-Z0-9_\x80-\xff]*
</pre>
</div>

<p>
示例 #17 插值数组或属性的第一个维度值
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$juices = array("apple", "orange", "string_key" =&gt; "purple");

echo "He drank some $juices[0] juice.";
echo PHP_EOL;
echo "He drank some $juices[1] juice.";
echo PHP_EOL;
echo "He drank some $juices[string_key] juice.";
echo PHP_EOL;

class A {
    public $s = "string";
}

$o = new A();

echo "Object value: $o-&gt;s.";
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh">He drank some apple juice.
He drank some orange juice.
He drank some purple juice.
Object value: string.
</pre>
</div>

<p>
注意: 数组键必须是无引号的，因此不能用基本语法将常量作为键来引用。使用 高级 语法代替。
</p>

<p>
从 PHP 7.1.0 起，还支持负数字索引。
</p>

<p>
示例 #18 负数索引
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$string = 'string';
echo "The character at index -2 is $string[-2].", PHP_EOL;
$string[-3] = 'o';
echo "Changing the character at index -3 to o gives $string.", PHP_EOL;
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh">The character at index -2 is n.
Changing the character at index -3 to o gives strong.
</pre>
</div>

<p>
对于更复杂的情况，可以使用 <a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.parsing.advanced">高级</a> 语法。
</p>
</div>
</div>
<div id="outline-container-h:1d922899-0a47-41dd-a367-473136d84392" class="outline-5">
<h5 id="h:1d922899-0a47-41dd-a367-473136d84392"><span class="section-number-5">3.5.1.6.</span> <a href="#h:1d922899-0a47-41dd-a367-473136d84392">高级（大括号）语法</a></h5>
<div class="outline-text-5" id="text-h:1d922899-0a47-41dd-a367-473136d84392">
<p>
高级语法允许使用任意访问器对变量进行插值。
</p>

<p>
任何标量变量、数组元素或对象属性（static 或非 static）都可以通过这种语法进行插值。表达式的写法和 在string之外的写法一样，然后用大括号{和 }包围。由于{不能被转义，所以这种语法只有在 紧跟在{后面的\(才会被识别。要得到一个字面的 {\)，需要用{\$。以下是一些例子：
</p>

<p>
示例 #19 Curly Syntax
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
const DATA_KEY = 'const-key';
$great = 'fantastic';
$arr = [
    '1',
    '2',
    '3',
    [41, 42, 43],
    'key' =&gt; 'Indexed value',
    'const-key' =&gt; 'Key with minus sign',
    'foo' =&gt; ['foo1', 'foo2', 'foo3']
];

// 无效，输出 This is { fantastic}
echo "This is { $great}";

// 有效，输出 This is fantastic
echo "This is {$great}";

class Square {
    public $width;

    public function __construct(int $width) { $this-&gt;width = $width; }
}

$square = new Square(5);

// 有效
echo "This square is {$square-&gt;width}00 centimeters wide.";


// 有效，引用 key 仅使用花括号语法时有效
echo "This works: {$arr['key']}";


// 有效
echo "This works: {$arr[3][2]}";

echo "This works: {$arr[DATA_KEY]}";

// 使用多维数组时，在字符串内部时，始终使用括号括住数组
echo "This works: {$arr['foo'][2]}";

echo "This works: {$obj-&gt;values[3]-&gt;name}";

echo "This works: {$obj-&gt;$staticProp}";

// 无效，输出 C:\directory\{fantastic}.txt
echo "C:\directory\{$great}.txt";

// 有效，输出 C:\directory\fantastic.txt
echo "C:\\directory\\{$great}.txt";
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>This is { fantastic}This is fantasticThis square is 500 centimeters wide.This works: Indexed valueThis works: 43This works: Key with minus signThis works: foo3
Warning: Undefined variable $<span class="org-variable-name">obj</span><span class="org-keyword"> in</span> script on line 44
Warning: Attempt to read property <span class="org-string">"values"</span> on null<span class="org-keyword"> in</span> script on line 44
Warning: Trying to access array offset on null<span class="org-keyword"> in</span> script on line 44
Warning: Attempt to read property <span class="org-string">"name"</span> on null<span class="org-keyword"> in</span> script on line 44
This works: 
Warning: Undefined variable $<span class="org-variable-name">obj</span><span class="org-keyword"> in</span> script on line 46
Warning: Undefined variable $<span class="org-variable-name">staticProp</span><span class="org-keyword"> in</span> script on line 46
Warning: Attempt to read property <span class="org-string">""</span> on null<span class="org-keyword"> in</span> script on line 46
This works: C:\directory<span class="org-string">\{</span>fantastic}.txtC:\directory\fantastic.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-h:5efe322b-27f4-49e0-b60f-eb4636cd515b" class="outline-5">
<h5 id="h:5efe322b-27f4-49e0-b60f-eb4636cd515b"><span class="section-number-5">3.5.1.7.</span> <a href="#h:5efe322b-27f4-49e0-b60f-eb4636cd515b">存取和修改字符串中的字符</a></h5>
<div class="outline-text-5" id="text-h:5efe322b-27f4-49e0-b60f-eb4636cd515b">
<p>
<a href="https://www.php.net/manual/zh/language.types.string.php">string</a> 中的字符可以通过一个从 0 开始的下标，用类似 <a href="https://www.php.net/manual/zh/language.types.array.php">array</a> 结构中的方括号包含对应的数字来访问和修改，比如 $str[42]。可以把 <a href="https://www.php.net/manual/zh/language.types.string.php">string</a> 当成字符组成的 <a href="https://www.php.net/manual/zh/language.types.array.php">array</a>。函数 <a href="https://www.php.net/manual/zh/function.substr.php">substr()</a> 和 <a href="https://www.php.net/manual/zh/function.substr-replace.php">substr_replace()</a> 可用于操作多于一个字符的情况。
</p>


<p>
注意:  从 PHP 7.1.0 开始，还支持 string 负偏移量。从 string 尾部到指定位置的偏移量。以前，负偏移量读取时（返回空 string）会发出 <a href="https://www.php.net/manual/zh/errorfunc.constants.php#constant.e-notice">E_NOTICE</a>， 写入时（string 保持不变）会发出 <a href="https://www.php.net/manual/zh/errorfunc.constants.php#constant.e-warning">E_WARNING</a>。
</p>

<p>
注意: PHP 8.0.0 之前, 出于同样的目的，可以使用大括号访问 string，例如 $str{42}。 从 PHP 7.4.0 起，此大括号语法被弃用，自 PHP 8.0.0 开始不再受支持。
</p>

<p>
警告
用超出字符串长度的下标写入将会拉长该字符串并以空格填充。非整数类型下标会被转换成整数。非法下标类型会产生一个 E_WARNING 级别错误。 写入时只用到了赋值字符串的第一个字符。 PHP 7.1.0 开始，用空字符串赋值会导致 fatal 错误；在之前赋给的值是 NULL 字符。
</p>

<p>
警告
PHP 的字符串在内部是字节组成的数组。因此用花括号访问或修改字符串对多字节字符集很不安全。仅应对单字节编码例如 ISO-8859-1 的字符串进行此类操作。
</p>

<p>
注意: 从 PHP 7.1.0 开始，对空字符串应用空索引运算符会引发致命错误。 以前是空字符串会被静默转为数组。
</p>

<p>
示例 #20 一些字符串示例
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 取得字符串的第一个字符
$str = 'This is a test.';
$first = $str[0];
var_dump($first);

// 取得字符串的第三个字符
$third = $str[2];
var_dump($third);

// 取得字符串的最后一个字符
$str = 'This is still a test.';
$last = $str[strlen($str)-1];
var_dump($last);

// 修改字符串的最后一个字符
$str = 'Look at the sea';
$str[strlen($str)-1] = 'e';
var_dump($str);
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span><span class="org-function-name">string</span>(1) <span class="org-string">"T"</span>
<span class="org-function-name">string</span>(1) <span class="org-string">"i"</span>
<span class="org-function-name">string</span>(1) <span class="org-string">"."</span>
<span class="org-function-name">string</span>(15) <span class="org-string">"Look at the see"</span>
</pre>
</div>

<p>
字符串下标必须为整数或可转换为整数的字符串，否则会发出警告。之前类似 "foo" 的下标会无声地转换成 0。
</p>

<p>
示例 #21 字符串无效下标的例子
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$str = 'abc';

$keys = [ '1', '1.0', 'x', '1x' ];

foreach ($keys as $keyToTry) {
    var_dump(isset($str[$keyToTry]));

    try {
        var_dump($str[$keyToTry]);
    } catch (TypeError $e) {
        echo $e-&gt;getMessage(), PHP_EOL;
    }

    echo PHP_EOL;
}
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">bool</span>(<span class="org-builtin">true</span>)
<span class="org-function-name">string</span>(1) <span class="org-string">"b"</span>

<span class="org-function-name">bool</span>(<span class="org-builtin">false</span>)
Cannot access offset of type string on string

<span class="org-function-name">bool</span>(<span class="org-builtin">false</span>)
Cannot access offset of type string on string

<span class="org-function-name">bool</span>(<span class="org-builtin">false</span>)

Warning: Illegal string offset <span class="org-string">"1x"</span><span class="org-keyword"> in</span> Standard input code on line 10
<span class="org-function-name">string</span>(1) <span class="org-string">"b"</span>
</pre>
</div>

<p>
注意: 用 [] 或 {} 访问任何其它类型（不包括数组或具有相应接口的对象实现）的变量只会无声地返回 null。
</p>

<p>
注意:可以直接在字符串原型中用 [] 或 {} 访问字符。
</p>

<p>
注意:PHP 7.4 中弃用在字符串字面量中使用 {} 来访问字符。 PHP 8.0 已移除。
</p>
</div>
</div>
</div>
<div id="outline-container-h:05a3deb6-a2e6-4e83-91b2-59fe95aa2610" class="outline-4">
<h4 id="h:05a3deb6-a2e6-4e83-91b2-59fe95aa2610"><span class="section-number-4">3.5.2.</span> <a href="#h:05a3deb6-a2e6-4e83-91b2-59fe95aa2610">有用的函数和运算符</a></h4>
<div class="outline-text-4" id="text-h:05a3deb6-a2e6-4e83-91b2-59fe95aa2610">
<p>
字符串可以用 '.'（点）运算符连接起来，注意 '+'（加号）运算符没有这个功能。更多信息参考<a href="https://www.php.net/manual/zh/language.operators.string.php">字符串运算符</a>。
</p>

<p>
对于 <a href="https://www.php.net/manual/zh/language.types.string.php">string</a> 的操作有很多有用的函数。
</p>

<p>
可以参考<a href="https://www.php.net/manual/zh/ref.strings.php">字符串函数</a>了解大部分函数，高级的查找与替换功能可以参考 <a href="https://www.php.net/manual/zh/ref.pcre.php">Perl 兼容正则表达式函数</a>。
</p>

<p>
另外还有 <a href="https://www.php.net/manual/zh/ref.url.php">URL   字符串函数</a>，也有加密／解密字符串的函数（<a href="https://www.php.net/manual/zh/ref.sodium.php">Sodium</a> 和 <a href="https://www.php.net/manual/zh/ref.hash.php">Hash</a>）。
</p>

<p>
最后，可以参考<a href="https://www.php.net/manual/zh/ref.ctype.php">字符类型函数</a>。
</p>
</div>
</div>
<div id="outline-container-h:ab2edc0c-3b24-4b3b-b04d-c02573d9e50a" class="outline-4">
<h4 id="h:ab2edc0c-3b24-4b3b-b04d-c02573d9e50a"><span class="section-number-4">3.5.3.</span> <a href="#h:ab2edc0c-3b24-4b3b-b04d-c02573d9e50a">转换成字符串</a></h4>
<div class="outline-text-4" id="text-h:ab2edc0c-3b24-4b3b-b04d-c02573d9e50a">
<p>
一个值可以通过在其前面加上 (string) 或用 strval() 函数来转变成字符串。在一个需要字符串的表达式中，会自动转换为 string。这发生在当使用 echo 或 print 函数，或当变量与 string 进行比较的时候。类型和类型转换可以更好的解释下面的事情，也可参考函数 settype()。
</p>

<p>
一个布尔值 bool 的 true 被转换成 string 的 "1"。bool 的 false 被转换成 ""（空字符串）。这种转换可以在 bool 和 string 之间相互进行。
</p>

<p>
一个整数 int 或浮点数 float 被转换为数字的字面样式的 string（包括 float 中的指数部分）。使用指数计数法的浮点数（4.1E+6）也可转换。
</p>

<p>
注意:PHP 8.0.0 起，十进制小数点字符都是一个句号（.）。 而在此之前的版本，在脚本的区域（category LC_NUMERIC） 中定义了十进制小数点字符。参见 setlocale()。
</p>

<p>
数组 array 总是转换成字符串 "Array"，因此，echo 和 print 无法显示出该数组的内容。要显示某个单元，可以用 echo $arr['foo'] 这种结构。要显示整个数组内容见下文。
</p>

<p>
必须使用魔术方法 __toString 才能将 object 转换为 string。
</p>

<p>
资源 Resource 总会被转变成 "Resource id #1" 这种结构的字符串，其中的 1 是 PHP 在运行时分配给该 resource 的资源数字。 While the exact structure of this string should not be relied on and is subject to change, it will always be unique for a given resource within the lifetime of a script being executed (ie a Web request or CLI process) and won't be reused. 要得到一个 resource 的类型，可以用函数 get_resource_type()。
</p>

<p>
null 总是被转变成空字符串。
</p>

<p>
如上面所说的，直接把 array，object 或 resource 转换成 string 不会得到除了其类型之外的任何有用信息。可以使用函数 print_r() 和 var_dump() 列出这些类型的内容。
</p>

<p>
大部分的 PHP 值可以转变成 string 来永久保存，这被称作串行化，可以用函数 serialize() 来实现。
</p>
</div>
</div>
<div id="outline-container-h:91c277e7-6ee4-40d4-8ccd-f35d6a1ba720" class="outline-4">
<h4 id="h:91c277e7-6ee4-40d4-8ccd-f35d6a1ba720"><span class="section-number-4">3.5.4.</span> <a href="#h:91c277e7-6ee4-40d4-8ccd-f35d6a1ba720">字符串类型详解</a></h4>
<div class="outline-text-4" id="text-h:91c277e7-6ee4-40d4-8ccd-f35d6a1ba720">
<p>
PHP 中的 string 的实现方式是一个由字节组成的数组再加上一个整数指明缓冲区长度。并无如何将字节转换成字符的信息，由程序员来决定。字符串由什么值来组成并无限制；特别的，其值为 0（“NUL bytes”）的字节可以处于字符串任何位置（不过有几个函数，在本手册中被称为非“二进制安全”的，也许会把 NUL 字节之后的数据全都忽略）。
</p>

<p>
字符串类型的此特性解释了为什么 PHP 中没有单独的“byte”类型 - 已经用字符串来代替了。返回非文本值的函数 - 例如从网络套接字读取的任意数据 - 仍会返回字符串。
</p>

<p>
由于 PHP 并不特别指明字符串的编码，那字符串到底是怎样编码的呢？例如字符串 "á" 到底是等于 "\xE1"（ISO-8859-1），"\xC3\xA1"（UTF-8，C form），"\x61\xCC\x81"（UTF-8，D form）还是任何其它可能的表达呢？答案是字符串会被按照该脚本文件相同的编码方式来编码。因此如果一个脚本的编码是 ISO-8859-1，则其中的字符串也会被编码为 ISO-8859-1，以此类推。不过这并不适用于激活了 Zend Multibyte 时；此时脚本可以是以任何方式编码的（明确指定或被自动检测）然后被转换为某种内部编码，然后字符串将被用此方式编码。注意脚本的编码有一些约束（如果激活了 Zend Multibyte 则是其内部编码）- 这意味着此编码应该是 ASCII 的兼容超集，例如 UTF-8 或 ISO-8859-1。不过要注意，依赖状态的编码其中相同的字节值可以用于首字母和非首字母而转换状态，这可能会造成问题。
</p>

<p>
当然了，要做到有用，操作文本的函数必须假定字符串是如何编码的。不幸的是，PHP 关于此的函数有很多变种：
</p>

<ul class="org-ul">
<li>某些函数假定字符串是以单字节编码的，但并不需要将字节解释为特定的字符。例如 substr()，strpos()，strlen() 和 strcmp()。理解这些函数的另一种方法是它们作用于内存缓冲区，即按照字节和字节下标操作。</li>
<li>某些函数被传递入了字符串的编码方式，也可能会假定默认无此信息。例如 htmlentities() 和 mbstring 扩展中的大部分函数。</li>
<li>其它函数使用了当前区域（见 setlocale()），但是逐字节操作。</li>
<li>最后一些函数会假定字符串是使用某特定编码的，通常是 UTF-8。intl 扩展和 PCRE（上例中仅在使用了 u 修饰符时）扩展中的大部分函数都是这样。</li>
</ul>

<p>
最后，要书写能够正确使用 Unicode 的程序依赖于很小心地避免那些可能会损坏数据的函数。要使用来自于 intl 和 mbstring 扩展的函数。不过使用能处理 Unicode 编码的函数只是个开始。不管用何种语言提供的函数，最基本的还是了解 Unicode 规格。例如一个程序如果假定只有大写和小写，那可是大错特错。
</p>
</div>
</div>
<div id="outline-container-h:71eaa467-e8ed-48dc-bfc9-772df328bbd0" class="outline-4">
<h4 id="h:71eaa467-e8ed-48dc-bfc9-772df328bbd0"><span class="section-number-4">3.5.5.</span> <a href="#h:71eaa467-e8ed-48dc-bfc9-772df328bbd0">安全分享</a></h4>
<div class="outline-text-4" id="text-h:71eaa467-e8ed-48dc-bfc9-772df328bbd0">
<div class="org-src-container">
<pre class="src src-sh">$<span class="org-variable-name">a</span> = 1;
<span class="org-builtin">echo</span> <span class="org-string">'This will not expand: \n a newline $a'</span> . <span class="org-string">"\n"</span>;  // php &#20013; . &#28857;&#29992;&#20110;&#23383;&#31526;&#20018;&#25340;&#25509;
<span class="org-builtin">echo</span> <span class="org-string">"This will not expand: \n a newline $a"</span>;   // <span class="org-string">""</span> &#20869;&#21464;&#37327;&#20063;&#26159;&#19968;&#31181;&#25340;&#25509;
</pre>
</div>

<p>
字符串拼接容易出现sql注入。
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-keyword">select</span> username from users where <span class="org-variable-name">id</span> = 1 and <span class="org-variable-name">age</span> = 12 order by name limit 1
</pre>
</div>

<p>
如果sql注入拼接了，什么情况下不能用预编译：
</p>
<ul class="org-ul">
<li>sql语句中变量不能加单引号的地方不能用预编译，预编译会加引号的。</li>
</ul>

<p>
预编译：
</p>
<ul class="org-ul">
<li>本身包含的引号做转义</li>
<li>两侧加单引号</li>
</ul>

<p>
sql注入在不同位置的修复方式：
</p>
<div class="org-src-container">
<pre class="src src-sh">order by &#21644; limit &#21518;&#26159;&#19981;&#33021;&#21152;&#24341;&#21495;&#30340;&#12290;

<span class="org-comment-delimiter">#</span><span class="org-comment">like&#21518;&#29992;concat&#26469;&#27880;&#20837;
</span>like concat(<span class="org-string">'%'</span>,?<span class="org-string">'%'</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">limit &#26377;&#27880;&#20837;&#24590;&#20040;&#21150;&#65311; &#24378;&#21046;&#25972;&#25968;&#36716;&#25442;
</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">order by &#26377;&#27880;&#20837;&#24590;&#20040;&#21150;&#65311; &#21518;&#31471;&#20570;&#26144;&#23556;&#65292;&#22914;name &#23545;&#24212; 1&#65292;age&#23545;&#24212;2&#31561;&#65307;&#25110;&#32773;&#20570;&#21015;&#21517;&#30333;&#21517;&#21333;
</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">&#21160;&#24577;&#34920;&#21517;&#33021;&#39044;&#32534;&#35793;&#21527;&#65311; &#19981;&#33021;&#65292;&#22240;&#20026;&#20182;&#19981;&#29992;&#21333;&#24341;&#21495;&#12290; &#20294;&#25903;&#25345;&#21453;&#24341;&#21495; select * from `?`&#12290;&#38450;&#27880;&#20837;&#65306;1.&#34920;&#21517;&#21152;&#21453;&#24341;&#21495;&#65292;2.&#36807;&#28388;&#21453;&#24341;&#21495;
</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">&#22914;&#26524;&#20570;&#20102;&#39044;&#32534;&#35793;&#65292;&#20294;&#39044;&#32534;&#35793;&#21069;&#38754;&#20570;&#20102;&#25340;&#25509;&#36824;&#26159;&#20250;&#26377;&#27880;&#20837;&#12290;&#22914;&#19979;&#20266;&#20195;&#30721;
</span>$<span class="org-variable-name">a</span> = <span class="org-string">'id'</span>;
$<span class="org-variable-name">id</span> = 1;
$<span class="org-variable-name">sql</span> = <span class="org-string">"select * from users where "</span> . <span class="org-string">"$a = $id"</span>;
<span class="org-keyword">if</span> ($<span class="org-variable-name">input</span>.concans(<span class="org-string">'id'</span>)){ // &#36755;&#20837;&#37324;&#21253;&#21547;id&#23601;&#20570;sql&#25340;&#25509;
  $<span class="org-variable-name">sql</span> = $<span class="org-variable-name">sql</span> . <span class="org-string">"id = $id"</span>
}
$<span class="org-variable-name">sql</span> = prepare(<span class="org-string">"select * from users where id = ? and age = x"</span>);
$<span class="org-variable-name">sql</span>.set($<span class="org-variable-name">id</span>)

$<span class="org-variable-name">sql</span> = $<span class="org-variable-name">sql</span> . <span class="org-string">"name = ?"</span>;

<span class="org-function-name">query</span>($<span class="org-variable-name">sql</span>);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:e7e48dac-c1f0-4b90-9abb-d9af2b5ae349" class="outline-3">
<h3 id="h:e7e48dac-c1f0-4b90-9abb-d9af2b5ae349"><span class="section-number-3">3.6.</span> <a href="#h:e7e48dac-c1f0-4b90-9abb-d9af2b5ae349">Array 数组</a></h3>
<div class="outline-text-3" id="text-h:e7e48dac-c1f0-4b90-9abb-d9af2b5ae349">
<p>
<a href="https://www.php.net/manual/zh/language.types.array.php">https://www.php.net/manual/zh/language.types.array.php</a>
</p>

<p>
PHP 中的 array 实际上是一个有序映射。映射是一种把 values 关联到 keys 的类型。此类型针对多种不同用途进行了优化； 它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。 由于 array 的值可以是其它 array 所以树形结构和多维 array 也是允许的。
</p>

<p>
解释这些数据结构超出了本手册的范围，但对每种结构至少会提供一个例子。 要得到这些数据结构的更多信息，建议参考有关此广阔主题的其它文献。
</p>
</div>
<div id="outline-container-h:03ed7a6d-9b1d-4446-8d87-ef747c058ea1" class="outline-4">
<h4 id="h:03ed7a6d-9b1d-4446-8d87-ef747c058ea1"><span class="section-number-4">3.6.1.</span> <a href="#h:03ed7a6d-9b1d-4446-8d87-ef747c058ea1">语法</a></h4>
<div class="outline-text-4" id="text-h:03ed7a6d-9b1d-4446-8d87-ef747c058ea1">
</div>
<div id="outline-container-h:3e32c40a-1388-4125-a0bd-10f5ef863a4a" class="outline-5">
<h5 id="h:3e32c40a-1388-4125-a0bd-10f5ef863a4a"><span class="section-number-5">3.6.1.1.</span> <a href="#h:3e32c40a-1388-4125-a0bd-10f5ef863a4a">定义数组 array()</a></h5>
<div class="outline-text-5" id="text-h:3e32c40a-1388-4125-a0bd-10f5ef863a4a">
<p>
可以用 array() 语言结构来新建一个 array。它接受任意数量用逗号分隔的 键（key） =&gt; 值（value） 对。
</p>

<div class="org-src-container">
<pre class="src src-php">array(
    key  =&gt; value,
    key2 =&gt; value2,
    key3 =&gt; value3,
    ...
)
</pre>
</div>

<p>
最后一个数组单元之后的逗号可以省略。通常用于单行数组定义中，例如常用 array(1, 2) 而不是 array(1, 2, )。对多行数组定义通常保留最后一个逗号，这样要添加一个新单元时更方便。
</p>

<div class="org-src-container">
<pre class="src src-sh">&#27880;&#24847;: &#21487;&#20197;&#29992;&#30701;&#25968;&#32452;&#35821;&#27861; [] &#26367;&#20195; array() &#12290;
</pre>
</div>

<p>
示例 #1 一个简单数组
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array1 = array(
    "foo" =&gt; "bar",
    "bar" =&gt; "foo",
);

// 使用短数组语法
$array2 = [
    "foo" =&gt; "bar",
    "bar" =&gt; "foo",
];

var_dump($array1, $array2);
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span><span class="org-function-name">array</span>(2) {
  [<span class="org-string">"foo"</span>]=&gt;
  string(3) <span class="org-string">"bar"</span>
  [<span class="org-string">"bar"</span>]=&gt;
  string(3) <span class="org-string">"foo"</span>
}
<span class="org-function-name">array</span>(2) {
  [<span class="org-string">"foo"</span>]=&gt;
  string(3) <span class="org-string">"bar"</span>
  [<span class="org-string">"bar"</span>]=&gt;
  string(3) <span class="org-string">"foo"</span>
}
</pre>
</div>

<p>
key 可以是 <a href="https://www.php.net/manual/zh/language.types.integer.php">integer</a> 或者 <a href="https://www.php.net/manual/zh/language.types.string.php">string</a>。value 可以是任意类型。
</p>

<p>
此外 key 会有如下的强制转换：
</p>
<ul class="org-ul">
<li><a href="https://www.php.net/manual/zh/language.types.string.php">String</a> 中包含有效的十进制 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>，除非数字前面有一个 + 号，否则将被转换为 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 类型。例如键名 "8" 实际会被储存为8。另外， "08"不会被强制转换，因为它不是一个有效的十进制整数。</li>

<li><a href="https://www.php.net/manual/zh/language.types.float.php">Float</a> 也会被转换为 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a> ，意味着其小数部分会被舍去。例如键名8.7 实际会被储存为 8。</li>

<li><a href="https://www.php.net/manual/zh/language.types.boolean.php">Bool</a> 也会被转换成 <a href="https://www.php.net/manual/zh/language.types.integer.php">int</a>。即键名 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.true">true</a> 实际会被储存为 1而键名 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.false">false</a> 会被储存为 0。</li>

<li><a href="https://www.php.net/manual/zh/language.types.null.php">Null</a> 会被转换为空字符串，即键名 null 实际会被储存为 ""。</li>
<li><a href="https://www.php.net/manual/zh/language.types.array.php">Array</a> 和 <a href="https://www.php.net/manual/zh/language.types.object.php">object</a> 不能被用为键名。坚持这么做会导致警告：Illegal offset type。</li>
</ul>

<p>
如果在数组定义时多个元素都使用相同键名，那么只有最后一个会被使用，其它的元素都会被覆盖。
</p>

<p>
示例 #2 类型转换与覆盖的示例
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = array(
    1    =&gt; "a",
    "1"  =&gt; "b",
    1.5  =&gt; "c",
    true =&gt; "d",
);
var_dump($array);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(1) {
  [1]=&gt;
  string(1) <span class="org-string">"d"</span>
}
</pre>
</div>

<p>
上例中所有的键名都被强制转换为 1，则每一个新单元都会覆盖前一个的值，最后剩下的只有一个 "d"。
</p>

<p>
PHP 数组可以同时含有 int 和 string 类型的键名，因为 PHP 实际并不区分索引数组和关联数组。
</p>

<p>
示例 #3 混合 int 和 string 键名
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = array(
    "foo" =&gt; "bar",
    "bar" =&gt; "foo",
    100   =&gt; -100,
    -100  =&gt; 100,
);
var_dump($array);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(4) {
  [<span class="org-string">"foo"</span>]=&gt;
  string(3) <span class="org-string">"bar"</span>
  [<span class="org-string">"bar"</span>]=&gt;
  string(3) <span class="org-string">"foo"</span>
  [100]=&gt;
  int(-100)
  [-100]=&gt;
  int(100)
}
</pre>
</div>
<p>
key 为可选项。如果未指定，PHP 将自动使用之前用过的最大 int 键名加上 1 作为新的键名。
</p>

<p>
示例 #4 没有键名的索引数组
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = array("foo", "bar", "hello", "world");
var_dump($array);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(4) {
  [0]=&gt;
  string(3) <span class="org-string">"foo"</span>
  [1]=&gt;
  string(3) <span class="org-string">"bar"</span>
  [2]=&gt;
  string(5) <span class="org-string">"hello"</span>
  [3]=&gt;
  string(5) <span class="org-string">"world"</span>
}
</pre>
</div>

<p>
还可以只对某些单元指定键名而对其它的空置：
</p>

<p>
示例 #5 仅对部分单元指定键名
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = array(
         "a",
         "b",
    6 =&gt; "c",
         "d",
);
var_dump($array);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(4) {
  [0]=&gt;
  string(1) <span class="org-string">"a"</span>
  [1]=&gt;
  string(1) <span class="org-string">"b"</span>
  [6]=&gt;
  string(1) <span class="org-string">"c"</span>
  [7]=&gt;
  string(1) <span class="org-string">"d"</span>
}
</pre>
</div>
<p>
可以看到最后一个值 "d" 被自动赋予了键名 7。这是由于之前最大的整数键名是 6。
</p>

<p>
示例 #6 复杂类型转换和覆盖的例子
</p>

<p>
这个例子包括键名类型转换和元素覆盖的所有变化。
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = array(
    1    =&gt; 'a',
    '1'  =&gt; 'b', // 值 "a" 会被 "b" 覆盖
    1.5  =&gt; 'c', // 值 "b" 会被 "c" 覆盖
    -1 =&gt; 'd',
    '01'  =&gt; 'e', // 由于这不是整数字符串，因此不会覆盖键名 1
    '1.5' =&gt; 'f', // 由于这不是整数字符串，因此不会覆盖键名 1
    true =&gt; 'g', // 值 "c" 会被 "g" 覆盖
    false =&gt; 'h',
    '' =&gt; 'i',
    null =&gt; 'j', // 值 "i" 会被 "j" 覆盖
    'k', // 值 “k” 的键名被分配为 2。这是因为之前最大的整数键是 1
    2 =&gt; 'l', // 值 "k" 会被 "l" 覆盖
);

var_dump($array);
?&gt;
</pre>
</div>
<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(7) {
  [1]=&gt;
  string(1) <span class="org-string">"g"</span>
  [-1]=&gt;
  string(1) <span class="org-string">"d"</span>
  [<span class="org-string">"01"</span>]=&gt;
  string(1) <span class="org-string">"e"</span>
  [<span class="org-string">"1.5"</span>]=&gt;
  string(1) <span class="org-string">"f"</span>
  [0]=&gt;
  string(1) <span class="org-string">"h"</span>
  [<span class="org-string">""</span>]=&gt;
  string(1) <span class="org-string">"j"</span>
  [2]=&gt;
  string(1) <span class="org-string">"l"</span>
}
</pre>
</div>
<p>
示例 #7 负数索引示例
</p>

<p>
当分配负整数 key n 时，PHP 会将下一个 key 分配给 n+1。
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = [];

$array[-5] = 1;
$array[] = 2;

var_dump($array);
?&gt;
</pre>
</div>
<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(2) {
  [-5]=&gt;
  int(1)
  [-4]=&gt;
  int(2)
}
</pre>
</div>

<blockquote>
<p>
警告PHP 8.3.0 之前，分配负整数 key n 会将下一个 key 分配给 0，因此前面的示例将输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span>(2) {
  [-5]=&gt;
  int(1)
  [0]=&gt;
  int(2)
}
</pre>
</div>
</blockquote>
</div>
</div>
<div id="outline-container-h:c8991044-67d3-4867-b19d-04255e6f522c" class="outline-5">
<h5 id="h:c8991044-67d3-4867-b19d-04255e6f522c"><span class="section-number-5">3.6.1.2.</span> <a href="#h:c8991044-67d3-4867-b19d-04255e6f522c">用方括号语法访问数组单元</a></h5>
<div class="outline-text-5" id="text-h:c8991044-67d3-4867-b19d-04255e6f522c">
<p>
数组单元可以通过 <code>array[key]</code> 语法来访问。
</p>

<p>
示例 #8 访问数组单元
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$array = array(
    "foo" =&gt; "bar",
    42    =&gt; 24,
    "multi" =&gt; array(
         "dimensional" =&gt; array(
             "array" =&gt; "foo"
         )
    )
);

var_dump($array["foo"]);
var_dump($array[42]);
var_dump($array["multi"]["dimensional"]["array"]);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">string</span>(3) <span class="org-string">"bar"</span>
<span class="org-function-name">int</span>(24)
<span class="org-function-name">string</span>(3) <span class="org-string">"foo"</span>
</pre>
</div>

<p>
注意: 在 PHP 8.0.0 之前，方括号和花括号可以互换使用来访问数组单元（例如 $array[42] 和 $array{42} 在上例中效果相同）。 花括号语法在 PHP 7.4.0 中已弃用，在 PHP 8.0.0 中不再支持。
</p>

<p>
示例 #9 数组解引用
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
function getArray() {
    return array(1, 2, 3);
}

$secondElement = getArray()[1];

var_dump($secondElement);
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span><span class="org-function-name">int</span>(2)
</pre>
</div>

<p>
补充：
示例 #8 数组解引用
</p>
<div class="org-src-container">
<pre class="src src-sh">// &#25110;
&lt;?php

<span class="org-keyword">function</span> <span class="org-function-name">getArray</span>() {
    <span class="org-keyword">return</span> array(1,2,3);
}

//$<span class="org-variable-name">sendElement</span> = getArray()[1];

<span class="org-function-name">list</span>(, $<span class="org-variable-name">sendElement</span>) = getArray();
<span class="org-builtin">echo</span> $<span class="org-variable-name">sendElement</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:cf54ee28-eda4-457f-a9cc-f0c114c3bad5" class="outline-5">
<h5 id="h:cf54ee28-eda4-457f-a9cc-f0c114c3bad5"><span class="section-number-5">3.6.1.3.</span> <a href="#h:cf54ee28-eda4-457f-a9cc-f0c114c3bad5">用方括号的语法新建／修改</a></h5>
<div class="outline-text-5" id="text-h:cf54ee28-eda4-457f-a9cc-f0c114c3bad5">
<p>
可以通过明示地设定其中的值来修改现有的 array 。
</p>

<p>
这是通过在方括号内指定键名来给 array 赋值实现的。也可以省略键名，在这种情况下给变量名加上一对空的方括号（[]）。
</p>

<div class="org-src-container">
<pre class="src src-php">$arr[key] = value;
$arr[] = value;
// key 可以是 int 或 string
// value 可以是任意类型的值
</pre>
</div>

<p>
如果 $arr 不存在或者设置为 null 或者 false，将会新建它，这也是另一种创建 array 的方法。不过并不鼓励这样做，因为如果 $arr 已经包含有值（例如来自请求变量的 string）则此值会保留而 [] 实际上代表着字符串访问运算符。初始化变量的最好方式是直接给其赋值。
</p>

<p>
注意: 从 PHP 7.1.0 起，对字符串应用空索引操作符会抛出致命错误。以前，字符串被静默地转换为数组。
</p>

<p>
注意: 从 PHP 8.1.0 起，弃用从 false 值中创建一个新数组。 但仍然允许从 null 或者未定义的变量中创建新数组。
</p>

<p>
要修改某个值，通过其键名给该单元赋一个新值。要删除某键值对，对其调用 unset() 函数。
</p>

<p>
示例 #10 Using Square Brackets with Arrays
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$arr = array(5 =&gt; 1, 12 =&gt; 2);

$arr[] = 56;    // 这与 $arr[13] = 56 相同;
                // 在脚本的这一点上

$arr["x"] = 42; // 添加一个新元素
                // 键名使用 "x"

unset($arr[5]); // 从数组中删除元素

unset($arr);    // 删除整个数组
?&gt;
</pre>
</div>

<p>
注意: 如上所述，如果给出方括号但没有指定键名，则取当前最大 int 索引值，新的键名将是该值加上 1（但是最小为 0）。如果当前还没有 int 索引，则键名将为 0 。
</p>

<p>
注意这里所使用的最大整数键名目前不需要存在于 array 中。 它只要在上次 array 重新生成索引后曾经存在于 array 就行了。以下面的例子来说明：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 创建一个简单的数组
$array = array(1, 2, 3, 4, 5);
print_r($array);

// 现在删除其中的所有元素，但保持数组本身不变:
foreach ($array as $i =&gt; $value) {
    unset($array[$i]);
}
print_r($array);

// 添加一个单元（注意新的键名是 5，而不是你可能以为的 0）
$array[] = 6;
print_r($array);

// 重新索引：
$array = array_values($array);
$array[] = 7;
print_r($array);
?&gt;
</pre>
</div>
<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh">Array
(
    [0] =&gt; 1
    [1] =&gt; 2
    [2] =&gt; 3
    [3] =&gt; 4
    [4] =&gt; 5
)
Array
(
)
Array
(
    [5] =&gt; 6
)
Array
(
    [0] =&gt; 6
    [1] =&gt; 7
)
</pre>
</div>
</div>
</div>
<div id="outline-container-h:24b2fb03-a640-434e-9d2f-3d3360faa3ab" class="outline-5">
<h5 id="h:24b2fb03-a640-434e-9d2f-3d3360faa3ab"><span class="section-number-5">3.6.1.4.</span> <a href="#h:24b2fb03-a640-434e-9d2f-3d3360faa3ab">数组解包</a></h5>
<div class="outline-text-5" id="text-h:24b2fb03-a640-434e-9d2f-3d3360faa3ab">
<p>
可以使用 <code>[]</code> （自 PHP 7.1.0 起）或者 list() 语言结构解包数组。这些结构可用于将数组解包为不同的变量。
</p>

<p>
示例 #11 Array Destructuring
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$source_array = ['foo', 'bar', 'baz'];

[$foo, $bar, $baz] = $source_array;

echo $foo, PHP_EOL;    // 打印 "foo"
echo $bar, PHP_EOL;    // 打印 "bar"
echo $baz, PHP_EOL;    // 打印 "baz"
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>foo
bar
baz
</pre>
</div>
<p>
数组解包可用于 foreach 在迭代多维数组时对其进行解包。
</p>

<p>
示例 #12 Array Destructuring in Foreach
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$source_array = [
    [1, 'John'],
    [2, 'Jane'],
];

foreach ($source_array as [$id, $name]) {
    echo "{$id}: '{$name}'\n";
}
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>1: <span class="org-string">'John'</span>
2: <span class="org-string">'Jane'</span>
</pre>
</div>
<p>
如果变量未提供，数组元素将会被忽略。数组解包始终从索引 0 开始。
</p>

<p>
示例 #13 Ignoring Elements
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$source_array = ['foo', 'bar', 'baz'];

// 将索引 2 的元素分配给变量 $baz
[, , $baz] = $source_array;

echo $baz;    // 打印 "baz"
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>baz
</pre>
</div>
<p>
自 PHP 7.1.0 起，也可以解包关联数组。这在数字索引数组中更容易选择正确的元素，因为可以显式指定索引。
</p>

<p>
示例 #14 Destructuring Associative Arrays
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$source_array = ['foo' =&gt; 1, 'bar' =&gt; 2, 'baz' =&gt; 3];

// 将索引 'baz' 处的元素分配给变量 $three
['baz' =&gt; $three] = $source_array;

echo $three, PHP_EOL;    // 打印 3

$source_array = ['foo', 'bar', 'baz'];

// 将索引 2 处的元素分配给变量 $baz
[2 =&gt; $baz] = $source_array;

echo $baz, PHP_EOL;    // 打印 "baz"
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>3
baz
</pre>
</div>

<p>
数组解包可以方便的用于两个变量交换。
</p>

<p>
示例 #15 Swapping Two Variable
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = 1;
$b = 2;

[$b, $a] = [$a, $b];

echo $a, PHP_EOL;    // 打印 2
echo $b, PHP_EOL;    // 打印 1
?&gt;
</pre>
</div>

<p>
注意: 分配时不支持展开运算符（&#x2026;）。
</p>

<p>
注意: 尝试访问未定义的数组键与访问任何未定义的变量相同：都将发出 E_WARNING 级别的错误消息（PHP 8.0.0 之前是 E_NOTICE 级别），结果将是 null。
</p>
</div>
</div>
</div>
<div id="outline-container-h:28d69982-3cf4-4faf-b8f3-9829c2ef1714" class="outline-4">
<h4 id="h:28d69982-3cf4-4faf-b8f3-9829c2ef1714"><span class="section-number-4">3.6.2.</span> <a href="#h:28d69982-3cf4-4faf-b8f3-9829c2ef1714">实用函数</a></h4>
<div class="outline-text-4" id="text-h:28d69982-3cf4-4faf-b8f3-9829c2ef1714">
<p>
有很多操作数组的函数，参见 数组函数 一节。
</p>

<p>
注意: unset() 函数允许删除 array 中的某个键。但要注意数组将不会重建索引。如果需要删除后重建索引，可以用 array_values() 函数重建 array 索引。
</p>

<p>
示例 #16 Unsetting Intermediate Elements
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$a = array(1 =&gt; 'one', 2 =&gt; 'two', 3 =&gt; 'three');

/* 该数组将被定义为
   $a = array(1 =&gt; 'one', 3 =&gt; 'three');
   而不是
   $a = array(1 =&gt; 'one', 2 =&gt;'three');
*/
unset($a[2]);
var_dump($a);

$b = array_values($a);
// Now $b is array(0 =&gt; 'one', 1 =&gt;'three')
var_dump($b);
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">Output of the above example<span class="org-keyword"> in</span> PHP 8.4.4:

<span class="org-function-name">array</span>(2) {
  [1]=&gt;
  string(3) <span class="org-string">"one"</span>
  [3]=&gt;
  string(5) <span class="org-string">"three"</span>
}
<span class="org-function-name">array</span>(2) {
  [0]=&gt;
  string(3) <span class="org-string">"one"</span>
  [1]=&gt;
  string(5) <span class="org-string">"three"</span>
}
</pre>
</div>

<p>
<a href="https://www.php.net/manual/zh/control-structures.foreach.php">foreach</a> 控制结构是专门用于 array 的。它提供了一个简单的方法来遍历 array。
</p>
</div>
</div>
<div id="outline-container-h:33a937a3-c8f0-478e-8c36-d36f30b78fc7" class="outline-4">
<h4 id="h:33a937a3-c8f0-478e-8c36-d36f30b78fc7"><span class="section-number-4">3.6.3.</span> <a href="#h:33a937a3-c8f0-478e-8c36-d36f30b78fc7">数组做什么和不做什么</a></h4>
<div class="outline-text-4" id="text-h:33a937a3-c8f0-478e-8c36-d36f30b78fc7">
</div>
<div id="outline-container-h:0518820d-83d5-4989-ace7-4fd04af73e29" class="outline-5">
<h5 id="h:0518820d-83d5-4989-ace7-4fd04af73e29"><span class="section-number-5">3.6.3.1.</span> <a href="#h:0518820d-83d5-4989-ace7-4fd04af73e29">为什么 <code>$foo[bar]</code> 错了？</a></h5>
<div class="outline-text-5" id="text-h:0518820d-83d5-4989-ace7-4fd04af73e29">
<p>
应该始终在用字符串表示的数组索引上加上引号。例如用 $foo['bar'] 而不是 $foo[bar]。但是为什么呢？可能在老的脚本中见过如下语法：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$foo[bar] = 'enemy';
echo $foo[bar];
// 及其它
?&gt;
</pre>
</div>

<p>
这样是错的，但可以正常运行。那么为什么错了呢？原因是此代码中有一个未定义的常量（ bar ）而不是 string（'bar'－注意引号）。而 PHP 可能会在以后定义此常量，不幸的是你的代码中有同样的名字。它能运行，是因为 PHP 自动将裸字符串（没有引号的 string 且不对应于任何已知符号）转换成一个其值为该裸 string 的 string。例如，如果没有常量定义为 bar，那么PHP 将在 string 中替代为 'bar' 并使用之。
</p>

<p>
警告: 将未定义的常量当作裸字符串的回退会触发 <a href="https://www.php.net/manual/zh/errorfunc.constants.php#constant.e-notice">E_NOTICE</a> 级别错误。 从 PHP 7.2.0 起已废弃，并触发 <a href="https://www.php.net/manual/zh/errorfunc.constants.php#constant.e-warning">E_WARNING</a> 级别错误。 从 PHP 8.0.0 起被移除，并触发 <a href="https://www.php.net/manual/zh/class.error.php">Error</a> 异常。
</p>

<p>
这并不意味着总是给键名加上引号。用不着给键名为 <a href="https://www.php.net/manual/zh/language.constants.php">常量</a> 或 <a href="https://www.php.net/manual/zh/language.variables.php">变量</a> 的加上引号，否则会使 PHP 不能解析它们。
</p>

<p>
示例 #17 Key Quoting
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
error_reporting(E_ALL);
ini_set('display_errors', true);
ini_set('html_errors', false);

// 简单数组:
$array = array(1, 2);
$count = count($array);

for ($i = 0; $i &lt; $count; $i++) {
    echo "\n检查 $i: \n";
    echo "坏的: " . $array['$i'] . "\n";
    echo "好的: " . $array[$i] . "\n";
    echo "坏的: {$array['$i']}\n";
    echo "好的: {$array[$i]}\n";
}
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh">&#26816;&#26597; 0:
Notice: Undefined index:  $<span class="org-variable-name">i</span><span class="org-keyword"> in</span> /path/to/script.html on line 9
&#22351;&#30340;:
&#22909;&#30340;: 1
Notice: Undefined index:  $<span class="org-variable-name">i</span><span class="org-keyword"> in</span> /path/to/script.html on line 11
&#22351;&#30340;:
&#22909;&#30340;: 1

&#26816;&#26597; 1:
Notice: Undefined index:  $<span class="org-variable-name">i</span><span class="org-keyword"> in</span> /path/to/script.html on line 9
&#22351;&#30340;:
&#22909;&#30340;: 2
Notice: Undefined index:  $<span class="org-variable-name">i</span><span class="org-keyword"> in</span> /path/to/script.html on line 11
&#22351;&#30340;:
&#22909;&#30340;: 2
</pre>
</div>
<p>
演示此行为的更多例子：
</p>

<p>
示例 #18 More Examples
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 显示所有错误
error_reporting(E_ALL);

$arr = array('fruit' =&gt; 'apple', 'veggie' =&gt; 'carrot');

// Correct
echo $arr['fruit'], PHP_EOL;  // apple
echo $arr['veggie'], PHP_EOL; // carrot

// Incorrect. This works but also throws a PHP Error because
// of an undefined constant named fruit
//
// Error: Undefined constant "fruit"
try {
    echo $arr[fruit];    // apple
} catch (Error $e) {
    echo get_class($e), ': ', $e-&gt;getMessage(), PHP_EOL;
}

// This defines a constant to demonstrate what's going on.  The value 'veggie'
// is assigned to a constant named fruit.
define('fruit', 'veggie');

// Notice the difference now
echo $arr['fruit'], PHP_EOL;  // apple
echo $arr[fruit], PHP_EOL;    // carrot

// The following is okay, as it's inside a string. Constants are not looked for
// within strings, so no E_NOTICE occurs here
echo "Hello $arr[fruit]", PHP_EOL;      // Hello apple

// With one exception: braces surrounding arrays within strings allows constants
// to be interpreted
echo "Hello {$arr[fruit]}", PHP_EOL;    // Hello carrot
echo "Hello {$arr['fruit']}", PHP_EOL;  // Hello apple

// Concatenation is another option
echo "Hello " . $arr['fruit'], PHP_EOL; // Hello apple
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>apple
carrot
Error: Undefined constant <span class="org-string">"fruit"</span>
apple
carrot
Hello apple
Hello carrot
Hello apple
Hello apple
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php">// 这将不起作用，并会导致解析错误，例如：
// Parse error: parse error, expecting T_STRING' or T_VARIABLE' or T_NUM_STRING'
// 这当然也适用于在字符串中使用超全局变量
print "Hello $arr['fruit']";
print "Hello $_GET['foo']";
?&gt;
</pre>
</div>
<p>
当打开 <a href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.error-reporting">error_reporting</a> 来显示 <a href="https://www.php.net/manual/zh/errorfunc.constants.php#constant.e-notice">E_NOTICE</a> 级别的错误（将其设为 <a href="https://www.php.net/manual/zh/errorfunc.constants.php#constant.e-all">E_ALL</a>）时将看到这些错误。默认情况下 error_reporting 被关闭不显示这些。
</p>

<p>
和在 语法 一节中规定的一样，在方括号（[” 和 “]”）之间必须有一个表达式。这意味着可以这样写：
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
echo $arr[somefunc($bar)];
?&gt;
</pre>
</div>

<p>
这是一个用函数返回值作为数组索引的例子。PHP 也可以用已知常量，可能之前已经见过：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$error_descriptions[E_ERROR]   = "A fatal error has occurred";
$error_descriptions[E_WARNING] = "PHP issued a warning";
$error_descriptions[E_NOTICE]  = "This is just an informal notice";
?&gt;
</pre>
</div>

<p>
注意 E_ERROR 也是个合法的标识符，就和第一个例子中的 bar 一样。但是上一个例子实际上和如下写法是一样的：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$error_descriptions[1] = "A fatal error has occurred";
$error_descriptions[2] = "PHP issued a warning";
$error_descriptions[8] = "This is just an informal notice";
?&gt;
</pre>
</div>
<p>
因为 E_ERROR 等于 1，等等。
</p>

<p>
<b>那么为什么这样做不好？</b>
</p>

<p>
也许有一天，PHP 开发小组可能会想新增一个常量或者关键字，或者用户可能希望以后在自己的程序中引入新的常量，那就有麻烦了。例如已经不能这样用 empty 和 default 这两个词了，因为他们是 <a href="https://www.php.net/manual/zh/reserved.php">保留关键字</a>。
</p>

<p>
注意: 重申一次，在双引号字符串中，不给索引加上引号是合法的因此 "$foo[bar]" 是合法的（“合法”的原文为 valid。在实际测试中，这么做确实可以访问数组的该元素，但是会报一个常量未定义的 notice。无论如何，强烈建议不要使用 $foo[bar]这样的写法，而要使用 $foo['bar'] 来访问数组中元素。&#x2013;haohappy 注）。至于为什么参见以上的例子和 字符串中的变量解析 中的解释。
</p>
</div>
</div>
</div>
<div id="outline-container-h:79cefe2d-d1a8-4906-9ab5-e636a2b52492" class="outline-4">
<h4 id="h:79cefe2d-d1a8-4906-9ab5-e636a2b52492"><span class="section-number-4">3.6.4.</span> <a href="#h:79cefe2d-d1a8-4906-9ab5-e636a2b52492">转换为数组</a></h4>
<div class="outline-text-4" id="text-h:79cefe2d-d1a8-4906-9ab5-e636a2b52492">
<p>
对于任意 int，float， string，bool 和 resource 类型，如果将一个值转换为 array，将得到一个仅有一个元素的数组，其下标为 0，该元素即为此标量的值。换句话说，(array) $scalarValue 与 array($scalarValue) 完全一样。
</p>

<p>
如果将 object 类型转换为 array，则结果为一个数组，其单元为该对象的属性。键名将为成员变量名，不过有几点例外：整数属性不可访问； 私有变量前会加上类名作前缀；保护变量前会加上一个 '*' 做前缀。这些前缀的前后都各有一个 NUL 字节。 未初始化的类型属性将会被丢弃。
</p>

<p>
示例 #19 Converting to an Array
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php

class A {
    private $B;
    protected $C;
    public $D;
    function __construct()
    {
        $this-&gt;{1} = null;
    }
}

var_export((array) new A());
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">array</span> (
  <span class="org-string">''</span> . <span class="org-string">"\0"</span> . <span class="org-string">'A'</span> . <span class="org-string">"\0"</span> . <span class="org-string">'B'</span> =&gt; NULL,
  <span class="org-string">''</span> . <span class="org-string">"\0"</span> . <span class="org-string">'*'</span> . <span class="org-string">"\0"</span> . <span class="org-string">'C'</span> =&gt; NULL,
  <span class="org-string">'D'</span> =&gt; NULL,
  <span class="org-variable-name">1</span> =&gt; NULL,
)
</pre>
</div>
<p>
这些 NUL 会导致一些意想不到的行为：
</p>

<p>
示例 #20 Casting an Object to an Array
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php

class A {
    private $A; // 将变为 '\0A\0A'
}

class B extends A {
    private $A; // 将变为 '\0B\0A'
    public $AA; // 将变为 'AA'
}

var_dump((array) new B());
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<p>
array(3) {
  ["BA"]=&gt;
  NULL
  ["AA"]=&gt;
  NULL
  ["AA"]=&gt;
  NULL
}
上例会有两个键名为 'AA'，不过其中一个实际上是 '\0A\0A'。
</p>

<p>
将 null 转换为 array 会得到一个空的数组。
</p>
</div>
</div>
<div id="outline-container-h:6495e5c2-2c3c-4d3a-a54c-7e4adf64d392" class="outline-4">
<h4 id="h:6495e5c2-2c3c-4d3a-a54c-7e4adf64d392"><span class="section-number-4">3.6.5.</span> <a href="#h:6495e5c2-2c3c-4d3a-a54c-7e4adf64d392">比较</a></h4>
<div class="outline-text-4" id="text-h:6495e5c2-2c3c-4d3a-a54c-7e4adf64d392">
<p>
可以用 <a href="https://www.php.net/manual/zh/function.array-diff.php">array_diff()</a> 函数和 <a href="https://www.php.net/manual/zh/language.operators.array.php">数组运算符</a> 来比较数组。
</p>
</div>
</div>
<div id="outline-container-h:77044e78-6d4e-43b4-8244-87617159b11e" class="outline-4">
<h4 id="h:77044e78-6d4e-43b4-8244-87617159b11e"><span class="section-number-4">3.6.6.</span> <a href="#h:77044e78-6d4e-43b4-8244-87617159b11e">数组解包</a></h4>
<div class="outline-text-4" id="text-h:77044e78-6d4e-43b4-8244-87617159b11e">
<p>
在 array 定义时，用 &#x2026; 前缀的一个 array 可以被展开到当前位置。 只有实现了 <a href="https://www.php.net/manual/zh/class.traversable.php">Traversable</a> 的数组和对象才能被展开。 PHP 7.4.0 开始可以使用 &#x2026; 解包 array。
</p>

<p>
它可以多次使用，在 &#x2026; 操作符前后都可以添加常规元素：
</p>

<p>
示例 #21 简单的数组解包
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 使用简短的数组语法。
// 亦可用于 array() 语法
$arr1 = [1, 2, 3];
$arr2 = [...$arr1]; // [1, 2, 3]
$arr3 = [0, ...$arr1]; // [0, 1, 2, 3]
$arr4 = [...$arr1, ...$arr2, 111]; // [1, 2, 3, 1, 2, 3, 111]
$arr5 = [...$arr1, ...$arr1]; // [1, 2, 3, 1, 2, 3]

function getArr() {
  return ['a', 'b'];
}
$arr6 = [...getArr(), 'c' =&gt; 'd']; // ['a', 'b', 'c' =&gt; 'd']

var_dump($arr1, $arr2, $arr3, $arr4, $arr5, $arr6);
?&gt;
</pre>
</div>

<p>
&#x2026; 操作符解包 array 时也遵守函数 array_merge() 的语义。 也就是说，key 为字符时，后面的字符键会覆盖之前的字符键；key 为 integer 时则会重新编号：
</p>

<p>
示例 #22 重复 key 的数组解包
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// string key
$arr1 = ["a" =&gt; 1];
$arr2 = ["a" =&gt; 2];
$arr3 = ["a" =&gt; 0, ...$arr1, ...$arr2];
var_dump($arr3); // ["a" =&gt; 2]

// integer key
$arr4 = [1, 2, 3];
$arr5 = [4, 5, 6];
$arr6 = [...$arr4, ...$arr5];
var_dump($arr6); // [1, 2, 3, 4, 5, 6]
// 即 [0 =&gt; 1, 1 =&gt; 2, 2 =&gt; 3, 3 =&gt; 4, 4 =&gt; 5, 5 =&gt; 6]
// 也就是原始的 integer key 不再保留
?&gt;
</pre>
</div>

<p>
注意: 既不是 integer 也不是 string 的 key 会抛出 TypeError。 这类 key 只能通过 Traversable 对象生成。
</p>

<p>
注意: 在 PHP 8.1 之前，带有 string 键的 array 无法解包：
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php

$arr1 = [1, 2, 3];
$arr2 = ['a' =&gt; 4];
$arr3 = [...$arr1, ...$arr2];
// Fatal error: Uncaught Error: Cannot unpack array with string keys in example.php:5

$arr4 = [1, 2, 3];
$arr5 = [4, 5];
$arr6 = [...$arr4, ...$arr5]; // works. [1, 2, 3, 4, 5]
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:e28167fd-820c-4a58-aacb-701872d76ee5" class="outline-4">
<h4 id="h:e28167fd-820c-4a58-aacb-701872d76ee5"><span class="section-number-4">3.6.7.</span> <a href="#h:e28167fd-820c-4a58-aacb-701872d76ee5">示例</a></h4>
<div class="outline-text-4" id="text-h:e28167fd-820c-4a58-aacb-701872d76ee5">
<p>
PHP 中的数组类型有非常多的用途。以下是一些示例：
</p>

<p>
示例 #23 Array Versatility
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// This:
$a = array( 'color' =&gt; 'red',
            'taste' =&gt; 'sweet',
            'shape' =&gt; 'round',
            'name'  =&gt; 'apple',
            4        // 键名为 0
          );

$b = array('a', 'b', 'c');

var_dump($a, $b);

// . . .完全等同于:
$a = array();
$a['color'] = 'red';
$a['taste'] = 'sweet';
$a['shape'] = 'round';
$a['name']  = 'apple';
$a[]        = 4;        // 键名为 0

$b = array();
$b[] = 'a';
$b[] = 'b';
$b[] = 'c';

// 执行上述代码后，数组 $a 将是
// array('color' =&gt; 'red', 'taste' =&gt; 'sweet', 'shape' =&gt; 'round',
// 'name' =&gt; 'apple', 0 =&gt; 4)， 数组 $b 将是
// array(0 =&gt; 'a', 1 =&gt; 'b', 2 =&gt; 'c'), 或简单的 array('a', 'b', 'c').
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span><span class="org-function-name">array</span>(5) {
  [<span class="org-string">"color"</span>]=&gt;
  string(3) <span class="org-string">"red"</span>
  [<span class="org-string">"taste"</span>]=&gt;
  string(5) <span class="org-string">"sweet"</span>
  [<span class="org-string">"shape"</span>]=&gt;
  string(5) <span class="org-string">"round"</span>
  [<span class="org-string">"name"</span>]=&gt;
  string(5) <span class="org-string">"apple"</span>
  [0]=&gt;
  int(4)
}
<span class="org-function-name">array</span>(3) {
  [0]=&gt;
  string(1) <span class="org-string">"a"</span>
  [1]=&gt;
  string(1) <span class="org-string">"b"</span>
  [2]=&gt;
  string(1) <span class="org-string">"c"</span>
}
</pre>
</div>

<p>
示例 #24 使用 array()
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// Array as (property-)map
$map = array( 'version'    =&gt; 4,
              'OS'         =&gt; 'Linux',
              'lang'       =&gt; 'english',
              'short_tags' =&gt; true
            );
var_dump($map);

// strictly numerical keys
// this is the same as array(0 =&gt; 7, 1 =&gt; 8, ...)
$array = array( 7,
                8,
                0,
                156,
                -10
              );
var_dump($array);

$switching = array(         10, // key = 0
                    5    =&gt;  6,
                    3    =&gt;  7,
                    'a'  =&gt;  4,
                            11, // key = 6 (整数索引的最大值为 5)
                    '8'  =&gt;  2, // key = 8 (整数！)
                    '02' =&gt; 77, // key = '02'
                    0    =&gt; 12  // 值 10 被 12 覆盖
                  );
var_dump($switching);

// 空数组
$empty = array();
var_dump($empty);
?&gt;
</pre>
</div>

<p>
示例 #25 集合
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$colors = array('red', 'blue', 'green', 'yellow');

foreach ($colors as $color) {
    echo "Do you like $color?\n";
}

?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh">Do you like red?
Do you like blue?
Do you like green?
Do you like yellow?
</pre>
</div>
<p>
可以通过引用传递 array 的值来直接更改数组的值。
</p>

<p>
示例 #26 在循环中改变单元
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$colors = array('red', 'blue', 'green', 'yellow');

foreach ($colors as &amp;$color) {
    $color = mb_strtoupper($color);
}
unset($color); /* 确保后面对
$color 的写入不会修改最后一个数组元素 */

print_r($colors);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh">Array
(
    [0] =&gt; RED
    [1] =&gt; BLUE
    [2] =&gt; GREEN
    [3] =&gt; YELLOW
)
</pre>
</div>
<p>
本例生成一个下标从 1 开始的数组。
</p>

<p>
示例 #27 下标从 1 开始的数组
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$firstquarter = array(1 =&gt; 'January', 'February', 'March');
print_r($firstquarter);
?&gt;
</pre>
</div>

<p>
以上示例会输出：
</p>

<div class="org-src-container">
<pre class="src src-sh">Array
(
    [1] =&gt; January
    [2] =&gt; February
    [3] =&gt; March
)
</pre>
</div>
<p>
示例 #28 填充数组
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 把指定目录中的所有项填充到数组
$handle = opendir('.');
while (false !== ($file = readdir($handle))) {
    $files[] = $file;
}
closedir($handle);

var_dump($files);
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span><span class="org-function-name">array</span>(7) {
  [0]=&gt;
  string(1) <span class="org-string">"."</span>
  [1]=&gt;
  string(2) <span class="org-string">".."</span>
  [2]=&gt;
  string(3) <span class="org-string">"tmp"</span>
  [3]=&gt;
  string(4) <span class="org-string">"home"</span>
  [4]=&gt;
  string(3) <span class="org-string">"dev"</span>
  [5]=&gt;
  string(4) <span class="org-string">"proc"</span>
  [6]=&gt;
  string(8) <span class="org-string">"examples"</span>
}
</pre>
</div>

<p>
Array 是有序的。也可以使用不同的排序函数来改变顺序。更多信息参见 数组函数。可以用 count() 函数来统计出 array 中元素的个数。
</p>

<p>
示例 #29 数组排序
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
sort($files);
print_r($files);
?&gt;
</pre>
</div>
<p>
因为 array 中的值可以为任意值，也可是另一个 array。这样可以产生递归或多维 array。
</p>

<p>
示例 #30 递归和多维数组
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$fruits = array ( "fruits"  =&gt; array ( "a" =&gt; "orange",
                                       "b" =&gt; "banana",
                                       "c" =&gt; "apple"
                                     ),
                  "numbers" =&gt; array ( 1,
                                       2,
                                       3,
                                       4,
                                       5,
                                       6
                                     ),
                  "holes"   =&gt; array (      "first",
                                       5 =&gt; "second",
                                            "third"
                                     )
                );
var_dump($fruits);

// 处理上面数组中的值的一些例子
echo $fruits["holes"][5];    // 打印 "second"
echo $fruits["fruits"]["a"]; // 打印 "orange"
unset($fruits["holes"][0]);  // 删除 "first"

// 创建一个新的多维数组
$juices["apple"]["green"] = "good";
var_dump($juices);
?&gt;
</pre>
</div>
<p>
Array 的赋值总是会涉及到值的拷贝。使用 引用运算符 通过引用来拷贝 array。
</p>

<p>
示例 #31 Array Copying
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$arr1 = array(2, 3);
$arr2 = $arr1;
$arr2[] = 4; // $arr2 已更改，
             // $arr1 仍然是 array(2, 3)

$arr3 = &amp;$arr1;
$arr3[] = 4; // 现在 $arr1 和 $arr3 是一样的

var_dump($arr1, $arr2, $arr3);
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:f5b7b9fa-ca8e-4c2b-920e-743cfebe5236" class="outline-4">
<h4 id="h:f5b7b9fa-ca8e-4c2b-920e-743cfebe5236"><span class="section-number-4">3.6.8.</span> <a href="#h:f5b7b9fa-ca8e-4c2b-920e-743cfebe5236">安全分享-变量覆盖</a></h4>
<div class="outline-text-4" id="text-h:f5b7b9fa-ca8e-4c2b-920e-743cfebe5236">
<p>
存在数组覆盖问题。比如用户输入把已有的覆盖:
伪代码
</p>
<div class="org-src-container">
<pre class="src src-sh">$<span class="org-variable-name">array</span> = [
    <span class="org-variable-name">1</span> =&gt; $<span class="org-variable-name">SESSION</span>[<span class="org-string">'id'</span>],
];

$<span class="org-variable-name">input</span> = $<span class="org-variable-name">_GET</span>[<span class="org-string">'name'</span>];
$<span class="org-variable-name">array</span> = $<span class="org-variable-name">array</span> . $<span class="org-variable-name">input</span>;
<span class="org-keyword">if</span> ($<span class="org-variable-name">array</span>[1] == 1) {
    <span class="org-builtin">echo</span> <span class="org-string">'admin'</span>;
};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:51f42820-9a2e-4bf7-92d5-87a8bce0d362" class="outline-3">
<h3 id="h:51f42820-9a2e-4bf7-92d5-87a8bce0d362"><span class="section-number-3">3.7.</span> <a href="#h:51f42820-9a2e-4bf7-92d5-87a8bce0d362">Iterable 可迭代对象</a></h3>
<div class="outline-text-3" id="text-h:51f42820-9a2e-4bf7-92d5-87a8bce0d362">
<p>
<a href="https://www.php.net/manual/zh/language.types.iterable.php">https://www.php.net/manual/zh/language.types.iterable.php</a>
</p>

<p>
Iterable 是内置编译时 array|Traversable 的类型别名。从 PHP 7.1.0 到 PHP 8.2.0 之间的描述来看，iterable 是内置伪类型，充当上述类型别名，也可以用于类型声明。iterable 类型可用于 <a href="https://www.php.net/manual/zh/control-structures.foreach.php">foreach</a> 或在<a href="https://www.php.net/manual/zh/language.generators.php">生成器</a>中使用 yield from。
</p>

<p>
注意:
</p>

<p>
将可迭代对象声明为返回类型的函数也可能是 生成器。
</p>

<p>
示例 #1 可迭代生成器返回类型的示例
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php

function gen(): iterable {
    yield 1;
    yield 2;
    yield 3;
}

foreach(gen() as $value) {
    echo $value, "\n";
}
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>1
2
3
</pre>
</div>


<p>
补充：
</p>

<p>
使用可迭代对象
</p>

<p>
可迭代对象可以用作参数类型，表示函数需要一组值， 但是不会关心值集的形式，因为它将与 <a href="https://www.php.net/manual/zh/control-structures.foreach.php">foreach</a> 一起使用。如果一个值不是数组或 Traversable 的实例，则会抛出一个 <a href="https://www.php.net/manual/zh/class.typeerror.php">TypeError</a>。
</p>

<p>
示例 #1 Iterable 可迭代参数类型示例
</p>
<div class="org-src-container">
<pre class="src src-sh">&lt;?php
<span class="org-keyword">function</span> <span class="org-function-name">foo</span>(iterable $<span class="org-variable-name">iterable</span>) {
    <span class="org-keyword">foreach</span> ($<span class="org-variable-name">iterable</span> as $<span class="org-variable-name">value</span>) {
        // ...
    }
}

$<span class="org-variable-name">xx_students</span> = array(<span class="org-string">"1"</span>, <span class="org-string">"2"</span>, <span class="org-string">"3"</span>);
<span class="org-keyword">foreach</span> ($<span class="org-variable-name">xx_students</span> as $<span class="org-variable-name">student</span>) {
    <span class="org-builtin">echo</span> $<span class="org-variable-name">student</span> . PHP_EOL; }
?&gt;
</pre>
</div>

<p>
声明为可迭代的参数可能会使用 null 或者一个数组作为默认值。
</p>

<p>
示例 #2 可迭代参数默认值示例
</p>
<div class="org-src-container">
<pre class="src src-sh">&lt;?php
<span class="org-keyword">function</span> <span class="org-function-name">foo</span>(iterable $<span class="org-variable-name">iterable</span> = []) {
    // ...
}
?&gt;
</pre>
</div>

<p>
可迭代对象还可以用作返回类型，表示函数将返回一个可迭代的值。 如果返回值不是数组或 Traversable 的实例，则会抛出一个 TypeError。
</p>

<p>
示例 #3 可迭代返回类型示例
</p>
<div class="org-src-container">
<pre class="src src-sh">&lt;?php
<span class="org-keyword">function</span> <span class="org-function-name">bar</span>(): iterable {
    <span class="org-keyword">return</span> [1, 2, 3];
}

$<span class="org-variable-name">a</span> = bar();
<span class="org-function-name">print_r</span>($<span class="org-variable-name">a</span>);
?&gt;
</pre>
</div>

<p>
这样做为了代码规范，更易读。
</p>
</div>
</div>
<div id="outline-container-h:4b7efe72-ab57-4705-9df9-4461070193ea" class="outline-3">
<h3 id="h:4b7efe72-ab57-4705-9df9-4461070193ea"><span class="section-number-3">3.8.</span> <a href="#h:4b7efe72-ab57-4705-9df9-4461070193ea">Object 对象</a></h3>
<div class="outline-text-3" id="text-h:4b7efe72-ab57-4705-9df9-4461070193ea">
<p>
<a href="https://www.php.net/manual/zh/language.types.object.php">https://www.php.net/manual/zh/language.types.object.php</a>
</p>
</div>
<div id="outline-container-h:01f56bee-479f-4f76-b1b3-97a7820f58a6" class="outline-4">
<h4 id="h:01f56bee-479f-4f76-b1b3-97a7820f58a6"><span class="section-number-4">3.8.1.</span> <a href="#h:01f56bee-479f-4f76-b1b3-97a7820f58a6">对象初始化</a></h4>
<div class="outline-text-4" id="text-h:01f56bee-479f-4f76-b1b3-97a7820f58a6">
<p>
要创建一个新的对象 object，使用 new 语句实例化一个类：
</p>

<p>
示例 #1 Object Construction
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
class foo
{
    function do_foo()
    {
        echo "Doing foo.";
    }
}

$bar = new foo;
$bar-&gt;do_foo();
?&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">Output of the above example in PHP 8.4.4:
</span>Doing foo.
</pre>
</div>

<p>
详细讨论参见手册中<a href="https://www.php.net/manual/zh/language.oop5.php">类与对象</a>章节。
</p>
</div>
</div>
<div id="outline-container-h:a89ffca4-aea8-4168-aeeb-d147a2bf8df6" class="outline-4">
<h4 id="h:a89ffca4-aea8-4168-aeeb-d147a2bf8df6"><span class="section-number-4">3.8.2.</span> <a href="#h:a89ffca4-aea8-4168-aeeb-d147a2bf8df6">转换为对象</a></h4>
<div class="outline-text-4" id="text-h:a89ffca4-aea8-4168-aeeb-d147a2bf8df6">
<p>
如果将一个对象转换成对象，它将不会有任何变化。如果其它任何类型的值被转换成对象，将会创建一个内置类 <a href="https://www.php.net/manual/zh/class.stdclass.php">stdClass</a> 的实例。如果该值为 <a href="https://www.php.net/manual/zh/reserved.constants.php#constant.null">null</a>，则新的实例为空。 <a href="https://www.php.net/manual/zh/language.types.array.php">array</a> 转换成 <a href="https://www.php.net/manual/zh/language.types.object.php">object</a> 将使键名成为属性名并具有相对应的值。注意：在这个例子里， 使用 PHP 7.2.0 之前的版本，数字键只能通过迭代访问。
</p>

<p>
示例 #2 Casting to an Object
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$obj = (object) array('1' =&gt; 'foo');
var_dump(isset($obj-&gt;{'1'})); // outputs 'bool(true)'

// Deprecated as of PHP 8.1
var_dump(key($obj)); // outputs 'string(1) "1"' 
?&gt;
</pre>
</div>

<p>
对于其他值，会包含进成员变量名 scalar。
</p>

<p>
示例 #3 (object) cast
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$obj = (object) 'ciao';
echo $obj-&gt;scalar;  // 输出 'ciao'
?&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:4578ef62-2fab-4390-bd7b-2c4e8ef9d75b" class="outline-3">
<h3 id="h:4578ef62-2fab-4390-bd7b-2c4e8ef9d75b"><span class="section-number-3">3.9.</span> <a href="#h:4578ef62-2fab-4390-bd7b-2c4e8ef9d75b">Resource 资源类型</a></h3>
<div class="outline-text-3" id="text-h:4578ef62-2fab-4390-bd7b-2c4e8ef9d75b">
<p>
<a href="https://www.php.net/manual/zh/language.types.resource.php">https://www.php.net/manual/zh/language.types.resource.php</a>
</p>

<p>
资源 <a href="https://www.php.net/manual/zh/language.types.resource.php">resource</a> 是一种特殊变量，保存了到外部资源的一个引用。资源是通过专门的函数来建立和使用的。所有这些函数及其相应资源类型见<a href="https://www.php.net/manual/zh/resource.php">附录</a>。
</p>

<p>
参见 <a href="https://www.php.net/manual/zh/function.get-resource-type.php">get_resource_type()</a>。
</p>
</div>
<div id="outline-container-h:8ccb5bc7-8a24-4eb4-8663-bce335033236" class="outline-4">
<h4 id="h:8ccb5bc7-8a24-4eb4-8663-bce335033236"><span class="section-number-4">3.9.1.</span> <a href="#h:8ccb5bc7-8a24-4eb4-8663-bce335033236">转换为资源</a></h4>
<div class="outline-text-4" id="text-h:8ccb5bc7-8a24-4eb4-8663-bce335033236">
<p>
由于资源类型变量保存有为打开文件、数据库连接、图形画布区域等的特殊句柄，因此将其它类型的值转换为资源没有意义。
</p>
</div>
</div>
<div id="outline-container-h:4ad92b71-361f-4a14-888d-974803628495" class="outline-4">
<h4 id="h:4ad92b71-361f-4a14-888d-974803628495"><span class="section-number-4">3.9.2.</span> <a href="#h:4ad92b71-361f-4a14-888d-974803628495">释放资源</a></h4>
<div class="outline-text-4" id="text-h:4ad92b71-361f-4a14-888d-974803628495">
<p>
引用计数系统是 Zend 引擎的一部分，可以自动检测到一个资源不再被引用了（和 Java 一样）。这种情况下此资源使用的所有外部资源都会被垃圾回收系统释放。因此，很少需要手工释放内存。
</p>

<p>
注意: 持久数据库连接比较特殊，它们不会被垃圾回收系统销毁。参见<a href="https://www.php.net/manual/zh/features.persistent-connections.php">数据库永久连接</a>一章。
</p>
</div>
</div>
</div>
<div id="outline-container-h:b9debca4-ef45-4fe6-88cc-96241ecae965" class="outline-3">
<h3 id="h:b9debca4-ef45-4fe6-88cc-96241ecae965"><span class="section-number-3">3.10.</span> <a href="#h:b9debca4-ef45-4fe6-88cc-96241ecae965">NULL</a></h3>
<div class="outline-text-3" id="text-h:b9debca4-ef45-4fe6-88cc-96241ecae965">
<p>
<a href="https://www.php.net/manual/zh/language.types.null.php">https://www.php.net/manual/zh/language.types.null.php</a>
</p>

<p>
null 类型是 PHP 的原子类型（unit type），也就是说，它仅有一个值 null。
</p>

<p>
未定义和 unset() 的变量都将解析为值 null。
</p>
</div>
<div id="outline-container-h:7dd24230-02a1-411c-858c-186ea632a3ca" class="outline-4">
<h4 id="h:7dd24230-02a1-411c-858c-186ea632a3ca"><span class="section-number-4">3.10.1.</span> <a href="#h:7dd24230-02a1-411c-858c-186ea632a3ca">语法</a></h4>
<div class="outline-text-4" id="text-h:7dd24230-02a1-411c-858c-186ea632a3ca">
<p>
null 类型只有一个值，就是不区分大小写的常量 null。
</p>

<div class="org-src-container">
<pre class="src src-php">&lt;?php
$var = NULL;       
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-h:e05c54ac-176f-4571-93d3-eaed3d5f9307" class="outline-4">
<h4 id="h:e05c54ac-176f-4571-93d3-eaed3d5f9307"><span class="section-number-4">3.10.2.</span> <a href="#h:e05c54ac-176f-4571-93d3-eaed3d5f9307">转换到 null</a></h4>
<div class="outline-text-4" id="text-h:e05c54ac-176f-4571-93d3-eaed3d5f9307">
<p>
警告: 本特性自 PHP 7.2.0 起废弃，并且自 PHP 8.0.0 起被移除。 强烈建议不要使用本特性。
</p>

<p>
使用 (unset) $var 将一个变量转换为 null 将不会删除该变量或 unset 其值。仅是返回 null 值而已。
</p>

<p>
参见
</p>
<ul class="org-ul">
<li><a href="https://www.php.net/manual/zh/function.is-null.php">is_null()</a></li>
<li><a href="https://www.php.net/manual/zh/function.unset.php">unset()</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:9bdca0d3-9cdf-4647-bdc3-0422fd5e019f" class="outline-3">
<h3 id="h:9bdca0d3-9cdf-4647-bdc3-0422fd5e019f"><span class="section-number-3">3.11.</span> <a href="#h:9bdca0d3-9cdf-4647-bdc3-0422fd5e019f">类型声明</a></h3>
<div class="outline-text-3" id="text-h:9bdca0d3-9cdf-4647-bdc3-0422fd5e019f">
<p>
<a href="https://www.php.net/manual/zh/language.types.declarations.php">https://www.php.net/manual/zh/language.types.declarations.php</a>
</p>
</div>
</div>
</section>
<section id="outline-container-h:21a84ea2-6810-4fe7-a8f4-7746532cfa31" class="outline-2">
<h2 id="h:21a84ea2-6810-4fe7-a8f4-7746532cfa31"><span class="section-number-2">4.</span> <a href="#h:21a84ea2-6810-4fe7-a8f4-7746532cfa31">PHP流程控制</a></h2>
<div class="outline-text-2" id="text-h:21a84ea2-6810-4fe7-a8f4-7746532cfa31">
<p>
<a href="https://www.php.net/manual/zh/language.control-structures.php">https://www.php.net/manual/zh/language.control-structures.php</a>
</p>
</div>
<div id="outline-container-h:c5156176-9f9b-4b41-8de9-b0874baeb072" class="outline-3">
<h3 id="h:c5156176-9f9b-4b41-8de9-b0874baeb072"><span class="section-number-3">4.1.</span> <a href="#h:c5156176-9f9b-4b41-8de9-b0874baeb072">if</a></h3>
<div class="outline-text-3" id="text-h:c5156176-9f9b-4b41-8de9-b0874baeb072">
</div>
</div>
<div id="outline-container-h:3bbd4781-9de9-48c8-8c63-d3e863a4166c" class="outline-3">
<h3 id="h:3bbd4781-9de9-48c8-8c63-d3e863a4166c"><span class="section-number-3">4.2.</span> <a href="#h:3bbd4781-9de9-48c8-8c63-d3e863a4166c">else</a></h3>
<div class="outline-text-3" id="text-h:3bbd4781-9de9-48c8-8c63-d3e863a4166c">
</div>
</div>
<div id="outline-container-h:9500fb58-e5ca-4a11-915d-ecabb14be512" class="outline-3">
<h3 id="h:9500fb58-e5ca-4a11-915d-ecabb14be512"><span class="section-number-3">4.3.</span> <a href="#h:9500fb58-e5ca-4a11-915d-ecabb14be512">elseif/else if</a></h3>
<div class="outline-text-3" id="text-h:9500fb58-e5ca-4a11-915d-ecabb14be512">
</div>
</div>
<div id="outline-container-h:5ccbfd00-7a56-484c-986d-1d478adf169b" class="outline-3">
<h3 id="h:5ccbfd00-7a56-484c-986d-1d478adf169b"><span class="section-number-3">4.4.</span> <a href="#h:5ccbfd00-7a56-484c-986d-1d478adf169b">流程控制的替代语法</a></h3>
<div class="outline-text-3" id="text-h:5ccbfd00-7a56-484c-986d-1d478adf169b">
</div>
</div>
<div id="outline-container-h:01f66d68-4484-4c29-8eef-e387fc720e6a" class="outline-3">
<h3 id="h:01f66d68-4484-4c29-8eef-e387fc720e6a"><span class="section-number-3">4.5.</span> <a href="#h:01f66d68-4484-4c29-8eef-e387fc720e6a">while</a></h3>
<div class="outline-text-3" id="text-h:01f66d68-4484-4c29-8eef-e387fc720e6a">
</div>
</div>
<div id="outline-container-h:14b46548-7c4e-4349-86b2-5ad97f9048f5" class="outline-3">
<h3 id="h:14b46548-7c4e-4349-86b2-5ad97f9048f5"><span class="section-number-3">4.6.</span> <a href="#h:14b46548-7c4e-4349-86b2-5ad97f9048f5">do-while</a></h3>
<div class="outline-text-3" id="text-h:14b46548-7c4e-4349-86b2-5ad97f9048f5">
</div>
</div>
<div id="outline-container-h:3fdd45f5-29b8-4507-b21c-391124e7202a" class="outline-3">
<h3 id="h:3fdd45f5-29b8-4507-b21c-391124e7202a"><span class="section-number-3">4.7.</span> <a href="#h:3fdd45f5-29b8-4507-b21c-391124e7202a">for</a></h3>
<div class="outline-text-3" id="text-h:3fdd45f5-29b8-4507-b21c-391124e7202a">
</div>
</div>
<div id="outline-container-h:8b91f18a-23bc-43f6-89f6-c08b353d7e84" class="outline-3">
<h3 id="h:8b91f18a-23bc-43f6-89f6-c08b353d7e84"><span class="section-number-3">4.8.</span> <a href="#h:8b91f18a-23bc-43f6-89f6-c08b353d7e84">foreach</a></h3>
<div class="outline-text-3" id="text-h:8b91f18a-23bc-43f6-89f6-c08b353d7e84">
</div>
</div>
<div id="outline-container-h:27ba99e3-faa3-43b8-a6d8-b037a759d92b" class="outline-3">
<h3 id="h:27ba99e3-faa3-43b8-a6d8-b037a759d92b"><span class="section-number-3">4.9.</span> <a href="#h:27ba99e3-faa3-43b8-a6d8-b037a759d92b">break</a></h3>
<div class="outline-text-3" id="text-h:27ba99e3-faa3-43b8-a6d8-b037a759d92b">
</div>
</div>
<div id="outline-container-h:9e986cbb-bf5d-4702-b40a-a521e5cbc4e8" class="outline-3">
<h3 id="h:9e986cbb-bf5d-4702-b40a-a521e5cbc4e8"><span class="section-number-3">4.10.</span> <a href="#h:9e986cbb-bf5d-4702-b40a-a521e5cbc4e8">continue</a></h3>
<div class="outline-text-3" id="text-h:9e986cbb-bf5d-4702-b40a-a521e5cbc4e8">
</div>
</div>
<div id="outline-container-h:2ad069c7-3c29-4f05-abf6-9465a8a71827" class="outline-3">
<h3 id="h:2ad069c7-3c29-4f05-abf6-9465a8a71827"><span class="section-number-3">4.11.</span> <a href="#h:2ad069c7-3c29-4f05-abf6-9465a8a71827">switch</a></h3>
<div class="outline-text-3" id="text-h:2ad069c7-3c29-4f05-abf6-9465a8a71827">
</div>
</div>
<div id="outline-container-h:67c912d9-4e47-482d-aa29-31088b5c1777" class="outline-3">
<h3 id="h:67c912d9-4e47-482d-aa29-31088b5c1777"><span class="section-number-3">4.12.</span> <a href="#h:67c912d9-4e47-482d-aa29-31088b5c1777">return</a></h3>
<div class="outline-text-3" id="text-h:67c912d9-4e47-482d-aa29-31088b5c1777">
</div>
</div>
<div id="outline-container-h:e4d53afd-8816-45e1-9078-c14907a6293a" class="outline-3">
<h3 id="h:e4d53afd-8816-45e1-9078-c14907a6293a"><span class="section-number-3">4.13.</span> <a href="#h:e4d53afd-8816-45e1-9078-c14907a6293a">require</a></h3>
<div class="outline-text-3" id="text-h:e4d53afd-8816-45e1-9078-c14907a6293a">
</div>
</div>
<div id="outline-container-h:0855e8aa-c862-42b7-95cb-69c1e62b1005" class="outline-3">
<h3 id="h:0855e8aa-c862-42b7-95cb-69c1e62b1005"><span class="section-number-3">4.14.</span> <a href="#h:0855e8aa-c862-42b7-95cb-69c1e62b1005">include</a></h3>
<div class="outline-text-3" id="text-h:0855e8aa-c862-42b7-95cb-69c1e62b1005">
</div>
<div id="outline-container-h:d4bcb3eb-bbd5-4526-9700-ab15aad3e568" class="outline-4">
<h4 id="h:d4bcb3eb-bbd5-4526-9700-ab15aad3e568"><span class="section-number-4">4.14.1.</span> <a href="#h:d4bcb3eb-bbd5-4526-9700-ab15aad3e568">安全分享</a></h4>
<div class="outline-text-4" id="text-h:d4bcb3eb-bbd5-4526-9700-ab15aad3e568">
<p>
什么情况下会有文件包含漏洞？
include的参数不是写死的。如
</p>
<div class="org-src-container">
<pre class="src src-sh">include $<span class="org-variable-name">_POST</span>[<span class="org-string">'filename'</span>]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-h:702fb1a5-bbf5-47ae-91fd-eb910c6b1eb5" class="outline-3">
<h3 id="h:702fb1a5-bbf5-47ae-91fd-eb910c6b1eb5"><span class="section-number-3">4.15.</span> <a href="#h:702fb1a5-bbf5-47ae-91fd-eb910c6b1eb5">require_once</a></h3>
<div class="outline-text-3" id="text-h:702fb1a5-bbf5-47ae-91fd-eb910c6b1eb5">
</div>
</div>
<div id="outline-container-h:485cb5ca-df03-4f20-80b8-b48f70df6ca7" class="outline-3">
<h3 id="h:485cb5ca-df03-4f20-80b8-b48f70df6ca7"><span class="section-number-3">4.16.</span> <a href="#h:485cb5ca-df03-4f20-80b8-b48f70df6ca7">include_once</a></h3>
<div class="outline-text-3" id="text-h:485cb5ca-df03-4f20-80b8-b48f70df6ca7">
</div>
</div>
</section>
<section id="outline-container-h:303ddda7-3c64-4f04-9ff4-694980814c10" class="outline-2">
<h2 id="h:303ddda7-3c64-4f04-9ff4-694980814c10"><span class="section-number-2">5.</span> <a href="#h:303ddda7-3c64-4f04-9ff4-694980814c10">函数</a></h2>
<div class="outline-text-2" id="text-h:303ddda7-3c64-4f04-9ff4-694980814c10">
<p>
<a href="https://www.php.net/manual/zh/language.functions.php">https://www.php.net/manual/zh/language.functions.php</a>
</p>
</div>
<div id="outline-container-h:06dfd110-ee72-4a0a-95e8-21566c654fa0" class="outline-3">
<h3 id="h:06dfd110-ee72-4a0a-95e8-21566c654fa0"><span class="section-number-3">5.1.</span> <a href="#h:06dfd110-ee72-4a0a-95e8-21566c654fa0">用户自定义函数</a></h3>
<div class="outline-text-3" id="text-h:06dfd110-ee72-4a0a-95e8-21566c654fa0">
</div>
</div>
<div id="outline-container-h:ff817a5d-d1b7-40bb-af5c-8bea8f5cbbe9" class="outline-3">
<h3 id="h:ff817a5d-d1b7-40bb-af5c-8bea8f5cbbe9"><span class="section-number-3">5.2.</span> <a href="#h:ff817a5d-d1b7-40bb-af5c-8bea8f5cbbe9">函数的参数</a></h3>
<div class="outline-text-3" id="text-h:ff817a5d-d1b7-40bb-af5c-8bea8f5cbbe9">
</div>
</div>
<div id="outline-container-h:a1034a45-1adb-4f47-877b-4f80c735cff9" class="outline-3">
<h3 id="h:a1034a45-1adb-4f47-877b-4f80c735cff9"><span class="section-number-3">5.3.</span> <a href="#h:a1034a45-1adb-4f47-877b-4f80c735cff9">返回值</a></h3>
<div class="outline-text-3" id="text-h:a1034a45-1adb-4f47-877b-4f80c735cff9">
</div>
</div>
<div id="outline-container-h:8328abbb-dbaa-488c-9ff6-721823d4eef1" class="outline-3">
<h3 id="h:8328abbb-dbaa-488c-9ff6-721823d4eef1"><span class="section-number-3">5.4.</span> <a href="#h:8328abbb-dbaa-488c-9ff6-721823d4eef1">可变函数</a></h3>
<div class="outline-text-3" id="text-h:8328abbb-dbaa-488c-9ff6-721823d4eef1">
</div>
</div>
<div id="outline-container-h:e8f5c892-9f9e-410a-b2ef-780c00023d6a" class="outline-3">
<h3 id="h:e8f5c892-9f9e-410a-b2ef-780c00023d6a"><span class="section-number-3">5.5.</span> <a href="#h:e8f5c892-9f9e-410a-b2ef-780c00023d6a">内部（内置）函数</a></h3>
<div class="outline-text-3" id="text-h:e8f5c892-9f9e-410a-b2ef-780c00023d6a">
</div>
</div>
<div id="outline-container-h:dd4501a6-b362-4e48-8715-8012f051ea43" class="outline-3">
<h3 id="h:dd4501a6-b362-4e48-8715-8012f051ea43"><span class="section-number-3">5.6.</span> <a href="#h:dd4501a6-b362-4e48-8715-8012f051ea43">匿名函数</a></h3>
<div class="outline-text-3" id="text-h:dd4501a6-b362-4e48-8715-8012f051ea43">
</div>
</div>
<div id="outline-container-h:f9e9b86f-e960-4657-8432-9ee957015108" class="outline-3">
<h3 id="h:f9e9b86f-e960-4657-8432-9ee957015108"><span class="section-number-3">5.7.</span> <a href="#h:f9e9b86f-e960-4657-8432-9ee957015108">箭头函数</a></h3>
<div class="outline-text-3" id="text-h:f9e9b86f-e960-4657-8432-9ee957015108">
</div>
</div>
</section>
<section id="outline-container-h:1141575e-e8d1-4d32-8ac8-f05a8edb43c2" class="outline-2">
<h2 id="h:1141575e-e8d1-4d32-8ac8-f05a8edb43c2"><span class="section-number-2">6.</span> <a href="#h:1141575e-e8d1-4d32-8ac8-f05a8edb43c2">文件系统安全</a></h2>
<div class="outline-text-2" id="text-h:1141575e-e8d1-4d32-8ac8-f05a8edb43c2">
<p>
<a href="https://www.php.net/manual/zh/security.filesystem.php">https://www.php.net/manual/zh/security.filesystem.php</a>
</p>

<p>
补充：
示例 #1 不对变量检查会导致    
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
// 从用户主目录移除一个文件
$username = $_POST['user_submitted_name'];
$userfile = $_POST['user_submitted_filename'];
$homedir  = "/home/$username";

unlink("$homedir/$userfile");

echo "The file has been deleted!";
?&gt;
</pre>
</div>

<ol class="org-ol">
<li>可以传其它用户名，比如root</li>
<li>不能直接使用用户输入来删除文件。比如输入 ../../../../../../etc/passwd</li>
</ol>

<p>
如何做好权限控制：
</p>
<ol class="org-ol">
<li>系统权限划分-服务本身的权限控制
<ul class="org-ul">
<li>上例中 unlink 用的是启动web程序用户的权限。需要创建一个普通用户来启动服务。</li>
</ul></li>
<li>服务端代码逻辑控制-用户权限控制：
<ul class="org-ul">
<li>敏感文件只有管理员有权限</li>
<li>用户只能操作自身的文件</li>
</ul></li>
</ol>

<p>
代码审计查看接口的逻辑。
</p>
<ul class="org-ul">
<li>查看是否有危险函数。如unlink</li>
<li>参数是否是用户输入的</li>
<li>判断代码逻辑中是否存在过滤或者安全防护代码</li>
</ul>

<p>
提供安全修复建议：
</p>
<ul class="org-ul">
<li>过滤 ../
<ul class="org-ul">
<li>发现有../，把/斜杠替换为空</li>
</ul></li>
</ul>
</div>
</section>
<section id="outline-container-h:b9f37ec0-213f-4206-97c5-6a0b3d8f910a" class="outline-2">
<h2 id="h:b9f37ec0-213f-4206-97c5-6a0b3d8f910a"><span class="section-number-2">7.</span> <a href="#h:b9f37ec0-213f-4206-97c5-6a0b3d8f910a">文件上传处理</a></h2>
<div class="outline-text-2" id="text-h:b9f37ec0-213f-4206-97c5-6a0b3d8f910a">
<p>
<a href="https://www.php.net/manual/zh/features.file-upload.php">https://www.php.net/manual/zh/features.file-upload.php</a>
</p>
</div>
<div id="outline-container-h:5733e11a-9a5a-4a3e-b241-05f1cb8eaf86" class="outline-3">
<h3 id="h:5733e11a-9a5a-4a3e-b241-05f1cb8eaf86"><span class="section-number-3">7.1.</span> <a href="#h:5733e11a-9a5a-4a3e-b241-05f1cb8eaf86">POST 方法上传</a></h3>
<div class="outline-text-3" id="text-h:5733e11a-9a5a-4a3e-b241-05f1cb8eaf86">
<p>
注意: 要确保文件上传表单的属性是 enctype="multipart/form-data"，否则文件上传不了。
</p>

<p>
全局变量 $_FILES 包含有所有上传的文件信息。 数组的内容来自以下范例表单。我们假设文件上传字段的名称如下例所示，为 userfile。名称可随意命名。
</p>

<ul class="org-ul">
<li>$_FILES['userfile']['name']</li>
</ul>
<p>
客户端机器文件的原名称。
</p>

<ul class="org-ul">
<li>$_FILES['userfile']['type']</li>
</ul>
<p>
文件的 MIME 类型，如果浏览器提供此信息的话。一个例子是“image/gif”。不过此 MIME 类型在 PHP 端并不检查，因此不要想当然认为有这个值。
</p>

<ul class="org-ul">
<li>$_FILES['userfile']['size']</li>
</ul>
<p>
已上传文件的大小，单位为字节。
</p>

<ul class="org-ul">
<li>$_FILES['userfile']['tmp_name']</li>
</ul>
<p>
文件被上传后在服务端储存的临时文件名。
</p>

<ul class="org-ul">
<li>$_FILES['userfile']['error']</li>
</ul>
<p>
和该文件上传相关的错误代码。
</p>

<ul class="org-ul">
<li>$_FILES['userfile']['full_path']</li>
</ul>
<p>
浏览器提交的完整路径。该值并不总是包含真实的目录结构，因此不能被信任。从 PHP 8.1.0 起可用。
</p>

<p>
upload.html
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">form</span> <span class="org-variable-name">enctype</span>=<span class="org-string">"multipart/form-data"</span> <span class="org-variable-name">action</span>=<span class="org-string">"upload.php"</span> <span class="org-variable-name">method</span>=<span class="org-string">"POST"</span>&gt;
    &lt;<span class="org-function-name">input</span> <span class="org-variable-name">type</span>=<span class="org-string">"hidden"</span> <span class="org-variable-name">name</span>=<span class="org-string">"MAX_FILE_SIZE"</span> <span class="org-variable-name">value</span>=<span class="org-string">"30000"</span> /&gt;
    Send this file: &lt;<span class="org-function-name">input</span> <span class="org-variable-name">name</span>=<span class="org-string">"userfile"</span> <span class="org-variable-name">type</span>=<span class="org-string">"file"</span> /&gt;
    &lt;<span class="org-function-name">input</span> <span class="org-variable-name">type</span>=<span class="org-string">"submit"</span> <span class="org-variable-name">value</span>=<span class="org-string">"Send File"</span> /&gt;
&lt;/<span class="org-function-name">form</span>&gt;
</pre>
</div>

<p>
upload.php
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$uploaddir = './';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

echo "basename: " . basename($_FILES['userfile']['name']);
echo "\n";

echo '&lt;pre&gt;';
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "File is valid, and was successfully uploaded.\n";
} else {
    echo "Possible file upload attack!\n";
}
echo "Here is some more debugging info:";
print_r($_FILES);
echo '&lt;/pre&gt;';
</pre>
</div>
</div>
<div id="outline-container-h:d9dcd2bf-0ec0-4316-ae7f-4560cbe7f686" class="outline-4">
<h4 id="h:d9dcd2bf-0ec0-4316-ae7f-4560cbe7f686"><span class="section-number-4">7.1.1.</span> <a href="#h:d9dcd2bf-0ec0-4316-ae7f-4560cbe7f686">安全分享</a></h4>
<div class="outline-text-4" id="text-h:d9dcd2bf-0ec0-4316-ae7f-4560cbe7f686">
<p>
文件上传的危害：
</p>
<ul class="org-ul">
<li>可以getshell</li>
<li>上传大文件，写满磁盘 - dos攻击</li>
<li>上传html文件
<ul class="org-ul">
<li>URL跳转（可钓鱼）</li>
<li>网信办责令关闭：赌博页面-在线发牌、黄色页面、涉恐涉政页面</li>
</ul></li>
</ul>

<p>
能getshell的条件，及防御：
</p>
<ul class="org-ul">
<li>上传可执行代码文件，php文件
<ul class="org-ul">
<li>判断文件类型，推荐白名单限制（jpg,png,gif），黑名单容易被绕过</li>
</ul></li>
<li>能够执行这个文件
<ul class="org-ul">
<li>文件上传的目录去掉可执行权限。-x</li>
</ul></li>
<li>知道文件位置
<ul class="org-ul">
<li>不返回文件路径。</li>
<li>修改上传文件的文件名，如随机文件名</li>
</ul></li>
</ul>

<p>
上传html文件位置：
</p>
<ul class="org-ul">
<li>服务器上存储，过滤html</li>
<li>对象存储，有图片、html
<ul class="org-ul">
<li>对象存储是否和web服务同域名，如果同域名一旦文件有安全问题，可能域名面临关闭</li>
<li>管理员才能上传，并做好日志记录</li>
<li>不传html，文件名有没有后缀，对象存储会自动指定以html解析。关闭该功能，规范文件</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-h:34f6d5a4-bc13-4919-9e71-137278745675" class="outline-3">
<h3 id="h:34f6d5a4-bc13-4919-9e71-137278745675"><span class="section-number-3">7.2.</span> <a href="#h:34f6d5a4-bc13-4919-9e71-137278745675">错误信息说明</a></h3>
<div class="outline-text-3" id="text-h:34f6d5a4-bc13-4919-9e71-137278745675">
</div>
</div>
<div id="outline-container-h:a81f6a65-5d24-401e-b54a-bf74aee9365c" class="outline-3">
<h3 id="h:a81f6a65-5d24-401e-b54a-bf74aee9365c"><span class="section-number-3">7.3.</span> <a href="#h:a81f6a65-5d24-401e-b54a-bf74aee9365c">常见缺陷</a></h3>
<div class="outline-text-3" id="text-h:a81f6a65-5d24-401e-b54a-bf74aee9365c">
</div>
</div>
<div id="outline-container-h:b9eb4c9a-339e-464d-8601-091ada3c1fb4" class="outline-3">
<h3 id="h:b9eb4c9a-339e-464d-8601-091ada3c1fb4"><span class="section-number-3">7.4.</span> <a href="#h:b9eb4c9a-339e-464d-8601-091ada3c1fb4">上传多个文件</a></h3>
<div class="outline-text-3" id="text-h:b9eb4c9a-339e-464d-8601-091ada3c1fb4">
</div>
</div>
<div id="outline-container-h:4aca4396-be7b-4c30-8fb2-ef3d8efe31ad" class="outline-3">
<h3 id="h:4aca4396-be7b-4c30-8fb2-ef3d8efe31ad"><span class="section-number-3">7.5.</span> <a href="#h:4aca4396-be7b-4c30-8fb2-ef3d8efe31ad">对 PUT 方法的支持</a></h3>
<div class="outline-text-3" id="text-h:4aca4396-be7b-4c30-8fb2-ef3d8efe31ad">
<p>
如果开发使用PUT方法上传，要求改为POST方式。
</p>
</div>
</div>
</section>
<section id="outline-container-h:1ef6b95f-80da-4cfc-9321-d6d9cd20ef52" class="outline-2">
<h2 id="h:1ef6b95f-80da-4cfc-9321-d6d9cd20ef52"><span class="section-number-2">8.</span> <a href="#h:1ef6b95f-80da-4cfc-9321-d6d9cd20ef52">mysql数据库安全</a></h2>
<div class="outline-text-2" id="text-h:1ef6b95f-80da-4cfc-9321-d6d9cd20ef52">
<p>
<a href="https://www.php.net/manual/zh/security.database.php">https://www.php.net/manual/zh/security.database.php</a>
</p>
</div>
<div id="outline-container-h:345044ec-06df-4b82-a6c8-04a604924e68" class="outline-3">
<h3 id="h:345044ec-06df-4b82-a6c8-04a604924e68"><span class="section-number-3">8.1.</span> <a href="#h:345044ec-06df-4b82-a6c8-04a604924e68">设计数据库</a></h3>
<div class="outline-text-3" id="text-h:345044ec-06df-4b82-a6c8-04a604924e68">
<p>
第一步一般都是创建数据库，除非是使用第三方的数据库服务。
</p>

<p>
当创建一个数据库的时候，会指定一个所有者来执行和新建语句。通常，只有所有者（或超级用户）才有权对数据库中的对象进行任意操作。如果想让其他用户使用，就必须赋予他们权限。
</p>

<p>
应用程序永远不要使用数据库所有者或超级用户帐号来连接数据库，因为这些帐号可以执行任意的操作，比如说修改数据库结构（例如删除一个表）或者清空整个数据库的内容。
</p>

<p>
应该为程序的每个方面创建不同的数据库帐号，并赋予对数据库对象的极有限的权限。
</p>

<p>
仅分配给能完成其功能所需的权限，避免同一个用户可以完成另一个用户的事情。这样即使攻击者利用程序漏洞取得了数据库的访问权限，也最多只能做到和该程序一样的影响范围。
</p>
</div>
</div>
<div id="outline-container-h:708a9a92-d0d5-4406-a810-9b237be3944e" class="outline-3">
<h3 id="h:708a9a92-d0d5-4406-a810-9b237be3944e"><span class="section-number-3">8.2.</span> <a href="#h:708a9a92-d0d5-4406-a810-9b237be3944e">PHP连接MySQL</a></h3>
<div class="outline-text-3" id="text-h:708a9a92-d0d5-4406-a810-9b237be3944e">
<ul class="org-ul">
<li><a href="https://www.php.net/manual/zh/book.pdo.php">PDO</a> — PHP 数据对象</li>
</ul>

<p>
(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8, PECL pdo &gt;= 0.2.0)
</p>

<p>
PDO::query — 执行 SQL 语句，以 PDOStatement 对象形式返回结果集
</p>

<div class="org-src-container">
<pre class="src src-sh">&lt;?php
$<span class="org-variable-name">servername</span> = <span class="org-string">"127.0.0.1:33060"</span>; //mysql&#30340;&#22320;&#22336;
$<span class="org-variable-name">username</span> = <span class="org-string">"root"</span>;
$<span class="org-variable-name">password</span> = <span class="org-string">""</span>;
$<span class="org-variable-name">dbname</span> = <span class="org-string">"dvwa"</span>;

try {
    $<span class="org-variable-name">conn</span> = new PDO(<span class="org-string">"mysql:host=$servername;dbname=$dbname"</span>, $<span class="org-variable-name">username</span>, $<span class="org-variable-name">password</span>);
    <span class="org-builtin">echo</span> <span class="org-string">"&#36830;&#25509;&#25104;&#21151;\r"</span>;
} catch (PDOException $<span class="org-variable-name">e</span>) {
    <span class="org-builtin">echo</span> $<span class="org-variable-name">e</span>-&gt;getMessage();
}
</pre>
</div>

<p>
允许MySQL远程登录
</p>
<div class="org-src-container">
<pre class="src src-sh">GRANT ALL PRIVILEGES ON . TO <span class="org-string">'root'</span>@<span class="org-string">'%'</span> IDENTIFIED BY <span class="org-string">''</span> WITH GRANT OPTION;
FLUSH PRIVILEGES;
</pre>
</div>

<p>
PHP执行SQL语句
</p>
<div class="org-src-container">
<pre class="src src-sh">$<span class="org-variable-name">sql</span> = <span class="org-string">"select * from xxx_students"</span>;
<span class="org-keyword">foreach</span> ($<span class="org-variable-name">conn</span>-&gt;query($<span class="org-variable-name">sql</span>) as $<span class="org-variable-name">row</span>) {
<span class="org-builtin">print</span> $<span class="org-variable-name">row</span>[<span class="org-string">'name'</span>] . <span class="org-string">"\t"</span>;
<span class="org-builtin">print</span> $<span class="org-variable-name">row</span>[<span class="org-string">'age'</span>] . <span class="org-string">"\t"</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-h:e4db2516-cda6-43ec-9088-a089ecd05c83" class="outline-3">
<h3 id="h:e4db2516-cda6-43ec-9088-a089ecd05c83"><span class="section-number-3">8.3.</span> <a href="#h:e4db2516-cda6-43ec-9088-a089ecd05c83">PHP使用预编译的方式执行SQL语句</a></h3>
<div class="outline-text-3" id="text-h:e4db2516-cda6-43ec-9088-a089ecd05c83">
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">1.&#39044;&#32534;&#35793;
</span>$<span class="org-variable-name">sql2</span> = $<span class="org-variable-name">conn</span>-&gt;prepare(<span class="org-string">"select * from xxx_students where age=?"</span>);
$<span class="org-variable-name">age</span> = 27;
<span class="org-comment-delimiter">#</span><span class="org-comment">2.&#32465;&#23450;&#21442;&#25968;
</span>$<span class="org-variable-name">sql2</span>-&gt;bindParam(1, $<span class="org-variable-name">age</span>);
<span class="org-comment-delimiter">#</span><span class="org-comment">3.&#25191;&#34892;
</span>$<span class="org-variable-name">sql2</span>-&gt;execute();
<span class="org-comment-delimiter">#</span><span class="org-comment">4.&#33719;&#21462;&#32467;&#26524;
</span>$<span class="org-variable-name">res</span> = $<span class="org-variable-name">sql2</span>-&gt;fetchAll();
<span class="org-function-name">print_r</span>($<span class="org-variable-name">res</span>);
</pre>
</div>

<p>
范例：
</p>
<div class="org-src-container">
<pre class="src src-php">&lt;?php
$server_name = '10.1.1.19:33060';
$username = 'root';
$password = 'root';
$dbname = 'dvwa';

try {
    $conn = new PDO(
        "mysql:host=$server_name;dbname=$dbname", $username, $password
    );
    echo "connect successfuly \n";
    $input_user = 'admin';
    $sql2 = $conn-&gt;prepare("select * from users where user = ?");

    $sql2-&gt;bindParam(1, $input_user);
    $sql2-&gt;execute();
    $res = $sql2-&gt;fetchAll();
    print_r($res);
} catch (PDOException $e) {
    echo $e-&gt;getMessage();
}
</pre>
</div>

<p>
<a href="https://www.php.net/manual/zh/pdo.prepare.php">PDO::prepare方法</a>
</p>

<p>
预编译防止SQL注入的原理是提前编译SQL语句，将所有的用户输入都当做数据，而非语法。
</p>

<p>
mysql提供预编译
</p>

<p>
预编译原理：提前进行sql语句的编译，在sql语句执行之前就确定sql的语义，保证用户输入的内容只当作变量执行
</p>
</div>
</div>
</section>
</div>
<div id="postamble" class="status">
    <div class=bar data-astro-cid-p3givckg>
        <div class=list data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:gnuemacs height=1em viewBox="0 0 24 24" width=1em>
                    <title>emacs</title>
                    <symbol id=ai:simple-icons:gnuemacs>
                        <path d="M12 24C5.448 24 .118 18.617.118 12S5.448 0 12 0s11.882 5.383 11.882 12S18.552 24 12 24zM12 .661C5.813.661.779 5.748.779 12S5.813 23.339 12 23.339S23.221 18.253 23.221 12S18.187.661 12 .661zM8.03 20.197s.978.069 2.236-.042c.51-.045 2.444-.235 3.891-.552c0 0 1.764-.377 2.707-.725c.987-.364 1.524-.673 1.766-1.11c-.011-.09.074-.408-.381-.599c-1.164-.488-2.514-.4-5.185-.457c-2.962-.102-3.948-.598-4.472-.997c-.503-.405-.25-1.526 1.907-2.513c1.086-.526 5.345-1.496 5.345-1.496c-1.434-.709-4.109-1.955-4.659-2.224c-.482-.236-1.254-.591-1.421-1.021c-.19-.413.448-.768.804-.87c1.147-.331 2.766-.536 4.24-.56c.741-.012.861-.059.861-.059c1.022-.17 1.695-.869 1.414-1.976c-.252-1.13-1.579-1.795-2.84-1.565c-1.188.217-4.05 1.048-4.05 1.048c3.539-.031 4.131.028 4.395.398c.156.218-.071.518-1.015.672c-1.027.168-3.163.37-3.163.37c-2.049.122-3.492.13-3.925 1.046c-.283.599.302 1.129.558 1.46c1.082 1.204 2.646 1.853 3.652 2.331c.379.18 1.49.52 1.49.52c-3.265-.18-5.619.823-7.001 1.977c-1.562 1.445-.871 3.168 2.33 4.228c1.891.626 2.828.921 5.648.667c1.661-.09 1.923-.036 1.939.1c.023.192-1.845.669-2.355.816c-1.298.374-4.699 1.129-4.716 1.133z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:gnuemacs></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Emacs</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:org height=1em viewBox="0 0 24 24" width=1em>
                    <title>org-mode</title>
                    <symbol id=ai:simple-icons:org>
                        <path d="M17.169 0c-.566.004-2.16 3.312-3.376 5.94a2.19 2.19 0 0 1-.408-1.267c-.03-.582-1.089.237-.936 1.275c-.068-.035-1.26.227-1.26.23c-.23-.93-.802-1.618-1.15-.563c-.701 1.663-.88 2.984.115 4.585c-.908 4.058-6.948 6.053-6.32 9.33c.175.004 1.634 3.48 6.337 2.057c5.557-1.577 8.624 2.116 8.978 2.375c.52.526-1.348-4.573-5.302-6.865c-2.339-1.276-.87-3.474-.703-4.25c0 0 1.874 1.312 3.232-.692c1.227.316 2.05-.224 3.105.158c.64.28 3.336.11 2.334-1.396c-.148.129.07.27-.075.46c-.043.056-.128.232-.408.315c-.314.149-.83.27-1.43-.37c-.434-.32-.748-.04-.992-.063c.152-.098.577-.315 1.264-.315c.388 0 .594.336.854.338c.174 0 .685-.262.787-.365c.63-.41.697-.278 1.012-.905c.17-.759-.215-.92-.332-1.129c-.032-.483-.436-.67-.919-.326c-1.106-.198-2.192-.105-2.728-.15c-1.175-.164-2.153-.786-2.153-.786c.143-.19.075-.6-.842-.628c-.315-.104-.45-.2-.745-.307c.61-1.37.674-2.007 1.418-4.004c.261-1.053 1.039-2.685.643-2.682zm-4.297 8.093c.03-.086.443.138.952.176c.395.03.805.048 1.296-.025c.03-.005.172.095-.15.194c-.02.01-.062-.01-.065.196c0 .022-.01.04-.02.046c-.15.152-.708.223-1.065.1c-.436-.17-.482-.316-.517-.443c-.305-.147-.47-.123-.43-.244zM9.685 10.2C8.86 9 8.929 8.36 8.96 7.256C7.961 8.288 6.855 8.3 5.18 8.58c-1.299.234-3.657 2.447-4.025 4.742c-.043.608-.08 2.183.424 3.498c.492 1.13.828 1.727 1.844 2.335c-.882-3.169 5.296-5.33 6.263-8.955z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:org></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Orgmode</p>
                </div>
            </span>
            <a href=/donations.html class=entry data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=simple-icons:astro height=1em viewBox="0 0 24 24" width=1em>
                    <title>Donations</title>
                    <symbol id=ai:simple-icons:astro>
                        <path d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.158 3.158 0 0 1-1.407-1.188a3.31 3.31 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165h.002zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614c.302 0 .57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727l-5.516 14.99z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:simple-icons:astro></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>打赏</p>
                </div>
            </span>
            </a>
            <span class=entry data-astro-cid-p3givckg>
                <svg xmlns="http://www.w3.org/2000/svg" class=heading data-astro-cid-p3givckg data-icon=simple-icons:copyright width="1em" height="1em" viewBox="0 0 24 24">
                    <title>Copyright</title>
                    <path fill="currentColor" d="M19 2a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm-5 5h-4a1 1 0 0 0-1 1l.007.117A1 1 0 0 0 10 9h3v5a1 1 0 0 1-1.993.117L11 14a1 1 0 0 0-2 0a3 3 0 0 0 6 0V8a1 1 0 0 0-1-1" />
                    <use xlink:href=#ai:simple-icons:copyright></use>
                </svg>
                <div class="content left" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>© 2025 Jasper Hsu</p>
                </div>
            </span>
        </div>
        <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ class="list license" data-astro-cid-p3givckg>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Creative Commons</title>
                    <symbol id=ai:fa6-brands:creative-commons>
                        <path d="m245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93c-22.13 0-33.22 14.61-33.22 43.84c0 23.57 9.21 43.84 33.22 43.84c14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98c-22.6 0-73.96-10.32-73.96-77.05c0-58.69 43-77.06 72.63-77.06c30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93c-22.14 0-33.22 14.61-33.22 43.84c0 23.55 9.23 43.84 33.22 43.84c14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98c-22.69 0-73.96-9.87-73.96-77.05c0-58.67 42.97-77.06 72.63-77.06c30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248c129.93 0 248.44-100.87 248.44-248c0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81c0-105.42 85.43-203.27 203.72-203.27c112.53 0 202.82 89.46 202.82 203.26c-.01 121.69-99.68 202.82-202.84 202.82z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Creative Commons</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-by height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Attribute</title>
                    <symbol id=ai:fa6-brands:creative-commons-by>
                        <path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3c3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7c3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-by></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Attribute</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-nc height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Noncommercial</title>
                    <symbol id=ai:fa6-brands:creative-commons-nc>
                        <path d="M247.6 8C387.4 8 496 115.9 496 256c0 147.2-118.5 248-248.4 248C113.1 504 0 393.2 0 256C0 123.1 104.7 8 247.6 8zM55.8 189.1c-7.4 20.4-11.1 42.7-11.1 66.9c0 110.9 92.1 202.4 203.7 202.4c122.4 0 177.2-101.8 178.5-104.1l-93.4-41.6c-7.7 37.1-41.2 53-68.2 55.4v38.1h-28.8V368c-27.5-.3-52.6-10.2-75.3-29.7l34.1-34.5c31.7 29.4 86.4 31.8 86.4-2.2c0-6.2-2.2-11.2-6.6-15.1c-14.2-6-1.8-.1-219.3-97.4zM248.4 52.3c-38.4 0-112.4 8.7-170.5 93l94.8 42.5c10-31.3 40.4-42.9 63.8-44.3v-38.1h28.8v38.1c22.7 1.2 43.4 8.9 62 23L295 199.7c-42.7-29.9-83.5-8-70 11.1c53.4 24.1 43.8 19.8 93 41.6l127.1 56.7c4.1-17.4 6.2-35.1 6.2-53.1c0-57-19.8-105-59.3-143.9c-39.3-39.9-87.2-59.8-143.6-59.8z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-nc></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Noncommercial</p>
                </div>
            </span>
            <span class=entry data-astro-cid-p3givckg>
                <svg class=heading data-astro-cid-p3givckg data-icon=fa6-brands:creative-commons-sa height=1em viewBox="0 0 496 512" width=0.97em>
                    <title>Share Alike</title>
                    <symbol id=ai:fa6-brands:creative-commons-sa>
                        <path d="M247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256C0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8c103.2 0 202.8-81.1 202.8-202.8c.1-113.8-90.2-203.3-202.8-203.3zM137.7 221c13-83.9 80.5-95.7 108.9-95.7c99.8 0 127.5 82.5 127.5 134.2c0 63.6-41 132.9-128.9 132.9c-38.9 0-99.1-20-109.4-97h62.5c1.5 30.1 19.6 45.2 54.5 45.2c23.3 0 58-18.2 58-82.8c0-82.5-49.1-80.6-56.7-80.6c-33.1 0-51.7 14.6-55.8 43.8h18.2l-49.2 49.2l-49-49.2h19.4z" fill=currentColor/>
                    </symbol>
                    <use xlink:href=#ai:fa6-brands:creative-commons-sa></use>
                </svg>
                <div class="content right" data-astro-cid-p3givckg>
                    <p data-astro-cid-p3givckg>Share Alike</p>
                </div>
            </span>
        </a>
    </div>
<!--
<script type="text/javascript" src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.min.js"></script>
<div id="back-to-top" class=""><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></div>
-->
</div>
</body>
</html>
